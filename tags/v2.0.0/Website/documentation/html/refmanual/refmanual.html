<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Orc Reference Manual v2.0.0</title><meta content="DocBook XSL-NS Stylesheets V1.76.1" name="generator"><link xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" type="text/css" rel="stylesheet" href="/orchard/orc.css"><link href="style.css" type="text/css" rel="stylesheet"><script type="text/javascript">
// Expandable content script from flooble.com.
// For more information please visit:
// http://www.flooble.com/scripts/expand.php
// Copyright 2002 Animus Pactum Consulting Inc.
//----------------------------------------------
function toggle(link, divId) {
	var lText = link.innerHTML;
	var d = document.getElementById(divId);
	if (lText == '+') {
		link.innerHTML = '&#8722;';
		d.style.display = 'block';
	} else {
		link.innerHTML = '+';
		d.style.display = 'none';
	}
}
</script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="book" title="Orc Reference Manual v2.0.0"><div><div><div><h1 class="title"><a name="refmanual"></a>
	Orc Reference Manual v2.0.0

</h1></div><div><div class="author"><h3 class="author"><span class="orgname">The University of Texas at Austin</span><div class="address"><p></p></div><code class="uri">http://orc.csres.utexas.edu/</code></h3></div></div><div><p class="pubdate">2011-04-21</p></div><div><p class="copyright">Copyright &copy; 2011 The University of Texas at Austin</p></div><div><div class="legalnotice" title="License and Grant Information"><a name="legalnotice"></a><p class="legalnotice-title"><b>License and Grant Information</b></p><p>
			Use and redistribution of this file is governed by the license terms in
			the LICENSE file found in the project's top-level directory and also
			found at
			URL: http://orc.csres.utexas.edu/license.shtml .
		</p><p>
			This material is based upon work supported by the National Science
			Foundation under Grant No. CCF-0811536.
			Any opinions, findings, and conclusions or
			recommendations expressed in this document are those of the authors
			and do not necessarily reflect the views of the National Science
			Foundation.
		</p></div></div></div><hr></div><div class="toc"><dl><dt><span class="chapter"><a href="#ref.data">1. Data Values</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.boolean">1.1. Booleans</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.boolean.syntax">1.1.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.data.boolean.operations">1.1.2. Operations</a></span></dt><dt><span class="section"><a href="#ref.data.boolean.type">1.1.3. Type</a></span></dt><dt><span class="section"><a href="#ref.data.boolean.javacalls">1.1.4. Java calls</a></span></dt><dt><span class="section"><a href="#ref.data.boolean.examples">1.1.5. Examples</a></span></dt><dt><span class="section"><a href="#ref.data.boolean.links">1.1.6. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.data.numeric">1.2. Numerics</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.numeric.literals">1.2.1. Literals</a></span></dt><dt><span class="section"><a href="#ref.data.numeric.operations">1.2.2. Operations</a></span></dt><dt><span class="section"><a href="#ref.data.numeric.javacalls">1.2.3. Java calls</a></span></dt><dt><span class="section"><a href="#ref.data.numeric.type">1.2.4. Type</a></span></dt><dt><span class="section"><a href="#ref.data.numeric.examples">1.2.5. Examples</a></span></dt><dt><span class="section"><a href="#ref.data.numeric.links">1.2.6. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.data.string">1.3. Character Strings</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.string.literals">1.3.1. Literals</a></span></dt><dt><span class="section"><a href="#ref.data.string.operations">1.3.2. Operations</a></span></dt><dt><span class="section"><a href="#ref.data.string.type">1.3.3. Type</a></span></dt><dt><span class="section"><a href="#ref.data.string.javacalls">1.3.4. Java calls</a></span></dt><dt><span class="section"><a href="#ref.data.string.examples">1.3.5. Examples</a></span></dt><dt><span class="section"><a href="#ref.data.string.links">1.3.6. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.data.signal">1.4. <code class="code"><span class="hl-keyword">signal</span></code></a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.signal.syntax">1.4.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.data.signal.operations">1.4.2. Operations</a></span></dt><dt><span class="section"><a href="#ref.data.signal.type">1.4.3. Type</a></span></dt><dt><span class="section"><a href="#ref.data.signal.javacalls">1.4.4. Java calls</a></span></dt><dt><span class="section"><a href="#ref.data.signal.links">1.4.5. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.data.list">1.5. Lists</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.list.syntax">1.5.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.data.list.constructors">1.5.2. Constructors</a></span></dt><dt><span class="section"><a href="#ref.data.list.operations">1.5.3. Operations</a></span></dt><dt><span class="section"><a href="#ref.data.list.type">1.5.4. Type</a></span></dt><dt><span class="section"><a href="#ref.data.list.javacalls">1.5.5. Java calls</a></span></dt><dt><span class="section"><a href="#ref.data.list.examples">1.5.6. Examples</a></span></dt><dt><span class="section"><a href="#ref.data.list.links">1.5.7. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.data.tuple">1.6. Tuples</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.tuple.syntax">1.6.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.data.tuple.constructors">1.6.2. Constructors</a></span></dt><dt><span class="section"><a href="#ref.data.tuple.operations">1.6.3. Operations</a></span></dt><dt><span class="section"><a href="#ref.data.tuple.type">1.6.4. Type</a></span></dt><dt><span class="section"><a href="#ref.data.tuple.javacalls">1.6.5. Java calls</a></span></dt><dt><span class="section"><a href="#ref.data.tuple.examples">1.6.6. Examples</a></span></dt><dt><span class="section"><a href="#ref.data.tuple.links">1.6.7. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.data.record">1.7. Records</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.record.syntax">1.7.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.data.record.constructors">1.7.2. Constructors</a></span></dt><dt><span class="section"><a href="#ref.data.record.operations">1.7.3. Operations</a></span></dt><dt><span class="section"><a href="#ref.data.record.specialkeys">1.7.4. Special Keys</a></span></dt><dt><span class="section"><a href="#ref.data.record.type">1.7.5. Type</a></span></dt><dt><span class="section"><a href="#ref.data.record.javacalls">1.7.6. Java calls</a></span></dt><dt><span class="section"><a href="#ref.data.record.examples">1.7.7. Examples</a></span></dt><dt><span class="section"><a href="#ref.data.record.links">1.7.8. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.data.datatype">1.8. Algebraic Data Types</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.datatype.syntax">1.8.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.data.datatype.constructors">1.8.2. Constructors</a></span></dt><dt><span class="section"><a href="#ref.data.datatype.type">1.8.3. Type</a></span></dt><dt><span class="section"><a href="#ref.data.datatype.examples">1.8.4. Examples</a></span></dt><dt><span class="section"><a href="#ref.data.datatype.links">1.8.5. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.data.closure">1.9. Closures</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.closure.type">1.9.1. Type</a></span></dt><dt><span class="section"><a href="#ref.data.closure.examples">1.9.2. Examples</a></span></dt><dt><span class="section"><a href="#ref.data.closure.links">1.9.3. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.data.mutable">1.10. Mutable State</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.mutable.links">1.10.1. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.data.external">1.11. External Values</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.data.external.types">1.11.1. Type</a></span></dt><dt><span class="section"><a href="#ref.data.external.examples">1.11.2. Examples</a></span></dt><dt><span class="section"><a href="#ref.data.external.links">1.11.3. Related Links</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ref.expressions">2. Expressions</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.expressions.literal">2.1. Literal Value</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.expressions.literal.syntax">2.1.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.expressions.literal.type">2.1.2. Type</a></span></dt><dt><span class="section"><a href="#ref.expressions.literal.examples">2.1.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.expressions.literal.links">2.1.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.expressions.variable">2.2. Variable</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.expressions.variable.syntax">2.2.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.expressions.variable.type">2.2.2. Type</a></span></dt><dt><span class="section"><a href="#ref.expressions.variable.examples">2.2.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.expressions.variable.links">2.2.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.expressions.stop">2.3. <code class="code"><span class="hl-keyword">stop</span></code></a></span></dt><dd><dl><dt><span class="section"><a href="#ref.expressions.stop.syntax">2.3.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.expressions.stop.type">2.3.2. Type</a></span></dt><dt><span class="section"><a href="#ref.expressions.stop.examples">2.3.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.expressions.stop.links">2.3.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.expressions.call">2.4. Site and Function Calls</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.expressions.call.syntax">2.4.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.expressions.call.site">2.4.2. Site Calls</a></span></dt><dt><span class="section"><a href="#ref.expressions.call.function">2.4.3. Function Calls</a></span></dt><dt><span class="section"><a href="#ref.expressions.call.record">2.4.4. Record Application</a></span></dt><dt><span class="section"><a href="#ref.expressions.call.type">2.4.5. Type</a></span></dt><dt><span class="section"><a href="#ref.expressions.call.examples">2.4.6. Examples</a></span></dt><dt><span class="section"><a href="#ref.expressions.call.links">2.4.7. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.expressions.dot">2.5. Dot Access</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.expressions.dot.syntax">2.5.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.expressions.dot.type">2.5.2. Type</a></span></dt><dt><span class="section"><a href="#ref.expressions.dot.examples">2.5.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.expressions.dot.links">2.5.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.expressions.operators">2.6. Operators</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.expressions.operators.syntax">2.6.1. Syntax</a></span></dt><dt><span class="section"><a href="#N11165">2.6.2. Standard Orc Operators</a></span></dt><dt><span class="section"><a href="#ref.expressions.operators.redefining">2.6.3. Redefining Operators</a></span></dt><dt><span class="section"><a href="#N112AC">2.6.4. Type</a></span></dt><dt><span class="section"><a href="#ref.expressions.operators.examples">2.6.5. Examples</a></span></dt><dt><span class="section"><a href="#ref.expressions.operators.links">2.6.6. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.expressions.ifthenelse">2.7. <code class="code"><span class="hl-keyword">if</span> <span class="hl-keyword">then</span> <span class="hl-keyword">else</span></code></a></span></dt><dd><dl><dt><span class="section"><a href="#ref.expressions.ifthenelse.syntax">2.7.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.expressions.ifthenelse.type">2.7.2. Type</a></span></dt><dt><span class="section"><a href="#ref.expressions.ifthenelse.examples">2.7.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.expressions.ifthenelse.links">2.7.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.expressions.lambda">2.8. <code class="code"><span class="hl-keyword">lambda</span></code></a></span></dt><dd><dl><dt><span class="section"><a href="#ref.expressions.lambda.syntax">2.8.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.expressions.lambda.examples">2.8.2. Examples</a></span></dt><dt><span class="section"><a href="#ref.expressions.lambda.type">2.8.3. Type</a></span></dt><dt><span class="section"><a href="#ref.expressions.lambda.links">2.8.4. Related Links</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ref.combinators">3. Combinators</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.combinators.parallel">3.1. Parallel Combinator</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.combinators.parallel.syntax">3.1.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.combinators.parallel.identities">3.1.2. Notable Identities</a></span></dt><dt><span class="section"><a href="#ref.combinators.parallel.type">3.1.3. Type</a></span></dt><dt><span class="section"><a href="#ref.combinators.parallel.examples">3.1.4. Examples</a></span></dt><dt><span class="section"><a href="#ref.combinators.parallel.links">3.1.5. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.combinators.sequential">3.2. Sequential Combinator</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.combinators.sequential.syntax">3.2.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.combinators.sequential.identities">3.2.2. Notable Identities</a></span></dt><dt><span class="section"><a href="#ref.combinators.sequential.type">3.2.3. Type</a></span></dt><dt><span class="section"><a href="#ref.combinators.sequential.examples">3.2.4. Examples</a></span></dt><dt><span class="section"><a href="#ref.combinators.sequential.links">3.2.5. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.combinators.pruning">3.3. Pruning Combinator</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.combinators.pruning.syntax">3.3.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.combinators.pruning.identities">3.3.2. Notable Identities</a></span></dt><dt><span class="section"><a href="#ref.combinators.pruning.type">3.3.3. Type</a></span></dt><dt><span class="section"><a href="#ref.combinators.pruning.examples">3.3.4. Examples</a></span></dt><dt><span class="section"><a href="#ref.combinators.pruning.links">3.3.5. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.combinators.otherwise">3.4. Otherwise Combinator</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.combinators.otherwise.syntax">3.4.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.combinators.otherwise.identities">3.4.2. Notable Identities</a></span></dt><dt><span class="section"><a href="#ref.combinators.otherwise.type">3.4.3. Type</a></span></dt><dt><span class="section"><a href="#ref.combinators.otherwise.examples">3.4.4. Examples</a></span></dt><dt><span class="section"><a href="#ref.combinators.otherwise.links">3.4.5. Related Links</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ref.declarations">4. Declarations</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.declarations.val">4.1. <code class="code"><span class="hl-keyword">val</span></code>:  Bind Value</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.declarations.val.syntax">4.1.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.declarations.val.examples">4.1.2. Examples</a></span></dt><dt><span class="section"><a href="#ref.declarations.val.links">4.1.3. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.declarations.def">4.2. <code class="code"><span class="hl-keyword">def</span></code>:  Define Function</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.declarations.def.syntax">4.2.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.declarations.def.execution">4.2.2. Function Execution</a></span></dt><dt><span class="section"><a href="#ref.declarations.def.pattern">4.2.3. Patterns as Parameters</a></span></dt><dt><span class="section"><a href="#ref.declarations.def.recursion">4.2.4. Recursion</a></span></dt><dt><span class="section"><a href="#ref.declarations.def.guard">4.2.5. Guards</a></span></dt><dt><span class="section"><a href="#ref.declarations.def.clauses">4.2.6. Clausal Definition</a></span></dt><dt><span class="section"><a href="#ref.declarations.def.type">4.2.7. Type</a></span></dt><dt><span class="section"><a href="#ref.declarations.def.examples">4.2.8. Examples</a></span></dt><dt><span class="section"><a href="#ref.declarations.def.links">4.2.9. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.declarations.defclass">4.3. <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code>: Define Site in Orc</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.declarations.defclass.syntax">4.3.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.declarations.defclass.instances">4.3.2. Creating Instances</a></span></dt><dt><span class="section"><a href="#ref.declarations.defclass.methods">4.3.3. Calling Methods</a></span></dt><dt><span class="section"><a href="#ref.declarations.defclass.type">4.3.4. Type</a></span></dt><dt><span class="section"><a href="#ref.declarations.defclass.examples">4.3.5. Examples</a></span></dt><dt><span class="section"><a href="#ref.declarations.defclass.links">4.3.6. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.declarations.site">4.4. <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">site</span></code>: Import Site</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.declarations.site.syntax">4.4.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.declarations.site.resolve">4.4.2. Site Resolution</a></span></dt><dt><span class="section"><a href="#ref.declarations.site.type">4.4.3. Type</a></span></dt><dt><span class="section"><a href="#ref.declarations.site.examples">4.4.4. Examples</a></span></dt><dt><span class="section"><a href="#ref.declarations.site.links">4.4.5. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.declarations.class">4.5. <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code>:  Import Class from Java</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.declarations.class.syntax">4.5.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.declarations.class.type">4.5.2. Type</a></span></dt><dt><span class="section"><a href="#ref.declarations.class.examples">4.5.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.declarations.class.links">4.5.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.declarations.type">4.6. <code class="code"><span class="hl-keyword">type</span></code>:  Declare Type</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.declarations.type.syntax">4.6.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.declarations.type.alias">4.6.2. Type Alias</a></span></dt><dt><span class="section"><a href="#ref.declarations.type.import">4.6.3. Type Import</a></span></dt><dt><span class="section"><a href="#ref.declarations.type.datatype">4.6.4. Datatype</a></span></dt><dt><span class="section"><a href="#ref.declarations.type.examples">4.6.5. Examples</a></span></dt><dt><span class="section"><a href="#ref.declarations.type.links">4.6.6. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.declarations.include">4.7. <code class="code"><span class="hl-keyword">include</span></code>:  Include Orc File</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.declarations.include.syntax">4.7.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.declarations.include.examples">4.7.2. Examples</a></span></dt><dt><span class="section"><a href="#ref.declarations.include.links">4.7.3. Related Links</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ref.patterns">5. Patterns</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.patterns.literal">5.1. Literal Pattern</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.patterns.literal.syntax">5.1.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.patterns.literal.type">5.1.2. Type</a></span></dt><dt><span class="section"><a href="#ref.patterns.literal.examples">5.1.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.patterns.literal.links">5.1.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.patterns.variable">5.2. Variable Pattern</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.patterns.variable.syntax">5.2.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.patterns.variable.type">5.2.2. Type</a></span></dt><dt><span class="section"><a href="#ref.patterns.variable.examples">5.2.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.patterns.variable.links">5.2.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.patterns.tuple">5.3. Tuple Pattern</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.patterns.tuple.syntax">5.3.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.patterns.tuple.type">5.3.2. Type</a></span></dt><dt><span class="section"><a href="#ref.patterns.tuple.examples">5.3.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.patterns.tuple.links">5.3.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.patterns.list">5.4. List Pattern</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.patterns.list.syntax">5.4.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.patterns.list.type">5.4.2. Type</a></span></dt><dt><span class="section"><a href="#ref.patterns.list.examples">5.4.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.patterns.list.links">5.4.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.patterns.record">5.5. Record Pattern</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.patterns.record.syntax">5.5.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.patterns.record.type">5.5.2. Type</a></span></dt><dt><span class="section"><a href="#ref.patterns.record.examples">5.5.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.patterns.record.links">5.5.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.patterns.call">5.6. Call Pattern</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.patterns.call.syntax">5.6.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.patterns.call.type">5.6.2. Type</a></span></dt><dt><span class="section"><a href="#ref.patterns.call.examples">5.6.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.patterns.call.links">5.6.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.patterns.cons">5.7. Cons Pattern</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.patterns.cons.syntax">5.7.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.patterns.cons.type">5.7.2. Type</a></span></dt><dt><span class="section"><a href="#ref.patterns.cons.examples">5.7.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.patterns.cons.links">5.7.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.patterns.as">5.8. As Pattern</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.patterns.as.syntax">5.8.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.patterns.as.type">5.8.2. Type</a></span></dt><dt><span class="section"><a href="#ref.patterns.as.examples">5.8.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.patterns.as.links">5.8.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.patterns.wildcard">5.9. Wildcard Pattern</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.patterns.wildcard.syntax">5.9.1. Syntax</a></span></dt><dt><span class="section"><a href="#ref.patterns.wildcard.type">5.9.2. Type</a></span></dt><dt><span class="section"><a href="#ref.patterns.wildcard.examples">5.9.3. Examples</a></span></dt><dt><span class="section"><a href="#ref.patterns.wildcard.links">5.9.4. Related Links</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ref.sites">6. Sites and Services</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.sites.library">6.1. Library sites</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.sites.library.examples">6.1.1. Examples</a></span></dt><dt><span class="section"><a href="#ref.sites.library.links">6.1.2. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.sites.java">6.2. Java sites</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.sites.java.classes">6.2.1. Java classes</a></span></dt><dt><span class="section"><a href="#ref.sites.java.objects">6.2.2. Java objects</a></span></dt><dt><span class="section"><a href="#ref.sites.java.conversion">6.2.3. Java value conversions</a></span></dt><dt><span class="section"><a href="#ref.sites.java.overloading">6.2.4. Java method and constructor invocation</a></span></dt><dt><span class="section"><a href="#ref.sites.java.array">6.2.5. Java arrays</a></span></dt><dt><span class="section"><a href="#ref.sites.java.examples">6.2.6. Examples</a></span></dt><dt><span class="section"><a href="#ref.sites.java.links">6.2.7. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.sites.web">6.3. Web Services</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.sites.web.http">6.3.1. HTTP</a></span></dt><dt><span class="section"><a href="#ref.sites.web.data">6.3.2. Data Processing</a></span></dt><dt><span class="section"><a href="#ref.sites.web.soap">6.3.3. SOAP Web Services</a></span></dt><dt><span class="section"><a href="#ref.sites.web.examples">6.3.4. Examples</a></span></dt><dt><span class="section"><a href="#ref.sites.web.links">6.3.5. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.sites.custom">6.4. Custom sites</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.sites.custom.implement">6.4.1. Implementing new custom sites</a></span></dt><dt><span class="section"><a href="#ref.sites.custom.links">6.4.2. Related Links</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ref.time">7. Time</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.time.real">7.1. Real Time</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.time.real.rwait">7.1.1. Rwait</a></span></dt><dt><span class="section"><a href="#ref.time.real.rtime">7.1.2. Rtime</a></span></dt><dt><span class="section"><a href="#ref.time.real.rclock">7.1.3. Rclock</a></span></dt><dt><span class="section"><a href="#ref.time.real.examples">7.1.4. Examples</a></span></dt><dt><span class="section"><a href="#ref.time.real.links">7.1.5. Related Links</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ref.concepts">8. Concepts</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.concepts.publish">8.1. Publication</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.concepts.publish.examples">8.1.1. Examples</a></span></dt><dt><span class="section"><a href="#ref.concepts.publish.links">8.1.2. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.concepts.silent">8.2. Silence</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.concepts.silent.definition">8.2.1. Definition</a></span></dt><dt><span class="section"><a href="#ref.concepts.silent.examples">8.2.2. Examples</a></span></dt><dt><span class="section"><a href="#ref.concepts.silent.links">8.2.3. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.concepts.states">8.3. Expression States</a></span></dt><dd><dl><dt><span class="section"><a href="#N12CFD">8.3.1. Ready</a></span></dt><dt><span class="section"><a href="#ref.concepts.states.block">8.3.2. Blocked</a></span></dt><dt><span class="section"><a href="#ref.concepts.states.halt">8.3.3. Halted</a></span></dt><dt><span class="section"><a href="#ref.concepts.states.kill">8.3.4. Killed</a></span></dt><dt><span class="section"><a href="#ref.concepts.states.helpful">8.3.5. Helpful Sites</a></span></dt><dt><span class="section"><a href="#ref.concepts.states.examples">8.3.6. Examples</a></span></dt><dt><span class="section"><a href="#ref.concepts.states.links">8.3.7. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.concepts.deflate">8.4. Deflation</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.concepts.deflate.definition">8.4.1. Definition</a></span></dt><dt><span class="section"><a href="#ref.concepts.deflate.examples">8.4.2. Examples</a></span></dt><dt><span class="section"><a href="#ref.concepts.deflate.links">8.4.3. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.concepts.helpful">8.5. Helpful Sites</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.concepts.helpful.links">8.5.1. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.concepts.approximation">8.6. Approximation in Orc Implementation</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.concepts.approximation.links">8.6.1. Related Links</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ref.types">9. Type System</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.types.metatheory">9.1. Metatheory</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.types.metatheory.links">9.1.1. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.types.polymorphism">9.2. Parametric Polymorphism</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.types.polymorphism.types">9.2.1. Parametric types</a></span></dt><dt><span class="section"><a href="#ref.types.polymorphism.functions">9.2.2. Parametric functions</a></span></dt><dt><span class="section"><a href="#ref.types.polymorphism.calls">9.2.3. Polymorphic calls</a></span></dt><dt><span class="section"><a href="#ref.types.polymorphism.links">9.2.4. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.types.subtyping">9.3. Subtyping</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.types.subtyping.top">9.3.1. Top</a></span></dt><dt><span class="section"><a href="#ref.types.subtyping.Bot">9.3.2. Bot</a></span></dt><dt><span class="section"><a href="#ref.types.subtyping.join">9.3.3. Join</a></span></dt><dt><span class="section"><a href="#ref.types.subtyping.meet">9.3.4. Meet</a></span></dt><dt><span class="section"><a href="#ref.types.subtyping.variance">9.3.5. Variance</a></span></dt><dt><span class="section"><a href="#ref.types.subtyping.links">9.3.6. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.types.typeinfo">9.4. Adding Type Information</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.types.typeinfo.explicitargs">9.4.1. Explicit Type Arguments</a></span></dt><dt><span class="section"><a href="#ref.types.typeinfo.function">9.4.2. Function Type Information</a></span></dt><dt><span class="section"><a href="#ref.types.typeinfo.pattern">9.4.3. Pattern Type Information</a></span></dt><dt><span class="section"><a href="#ref.types.typeinfo.expression">9.4.4. Expression Type Information</a></span></dt><dt><span class="section"><a href="#ref.types.typeinfo.links">9.4.5. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.types.override">9.5. Type Override</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.types.override.links">9.5.1. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.types.context">9.6. Typing Contexts</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.types.context.links">9.6.1. Related Links</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ref.syntax">10. Syntax</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.syntax.EBNF">10.1. EBNF Grammar</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.syntax.EBNF.links">10.1.1. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.syntax.lexical">10.2. Lexical Specifications</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.syntax.lexical.inputstream">10.2.1. Input Byte Stream</a></span></dt><dt><span class="section"><a href="#ref.syntax.lexical.tokens">10.2.2. Lexical Tokens</a></span></dt><dt><span class="section"><a href="#ref.syntax.lexical.links">10.2.3. Related Links</a></span></dt></dl></dd><dt><span class="section"><a href="#ref.syntax.precedence">10.3. Precedence, Fixity, and Associativity</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.syntax.precedence.links">10.3.1. Related Links</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ref.stdlib">11. Standard Library</a></span></dt><dd><dl><dt><span class="section"><a href="#ref.stdlib.intro">11.1. Introduction</a></span></dt><dt><span class="section"><a href="#ref.stdlib.core">11.2. core: Fundamental sites and operators.</a></span></dt><dd><dl><dt><span class="section"><a href="#N140F5">11.2.1. <code class="code"><span class="hl-variable">Let</span></code></a></span></dt><dt><span class="section"><a href="#N14110">11.2.2. <code class="code"><span class="hl-variable">Let</span></code></a></span></dt><dt><span class="section"><a href="#N1411C">11.2.3. <code class="code"><span class="hl-variable">Let</span></code></a></span></dt><dt><span class="section"><a href="#N1412C">11.2.4. <code class="code"><span class="hl-variable">Ift</span></code></a></span></dt><dt><span class="section"><a href="#N14155">11.2.5. <code class="code"><span class="hl-variable">Iff</span></code></a></span></dt><dt><span class="section"><a href="#N1417E">11.2.6. <code class="code"><span class="hl-variable">Error</span></code></a></span></dt><dt><span class="section"><a href="#N141A3">11.2.7. <code class="code">(<span class="hl-operator">+</span>)</code></a></span></dt><dt><span class="section"><a href="#N141B8">11.2.8. <code class="code">(<span class="hl-operator">-</span>)</code></a></span></dt><dt><span class="section"><a href="#N141CD">11.2.9. <code class="code">(<span class="hl-literal">0</span><span class="hl-operator">-</span>)</code></a></span></dt><dt><span class="section"><a href="#N141DD">11.2.10. <code class="code">(<span class="hl-operator">*</span>)</code></a></span></dt><dt><span class="section"><a href="#N141F2">11.2.11. <code class="code">(<span class="hl-operator">**</span>)</code></a></span></dt><dt><span class="section"><a href="#N1420D">11.2.12. <code class="code">(<span class="hl-operator">/</span>)</code></a></span></dt><dt><span class="section"><a href="#N14235">11.2.13. <code class="code">(<span class="hl-operator">%</span>)</code></a></span></dt><dt><span class="section"><a href="#N14255">11.2.14. <code class="code">(<span class="hl-operator">&lt;:</span>)</code></a></span></dt><dt><span class="section"><a href="#N1426A">11.2.15. <code class="code">(<span class="hl-operator">&lt;=</span>)</code></a></span></dt><dt><span class="section"><a href="#N1427F">11.2.16. <code class="code">(<span class="hl-operator">:&gt;</span>)</code></a></span></dt><dt><span class="section"><a href="#N14294">11.2.17. <code class="code">(<span class="hl-operator">&gt;=</span>)</code></a></span></dt><dt><span class="section"><a href="#N142A9">11.2.18. <code class="code">(<span class="hl-operator">=</span>)</code></a></span></dt><dt><span class="section"><a href="#N142C8">11.2.19. <code class="code">(<span class="hl-operator">/</span><span class="hl-operator">=</span>)</code></a></span></dt><dt><span class="section"><a href="#N142DA">11.2.20. <code class="code">(<span class="hl-operator">~</span>)</code></a></span></dt><dt><span class="section"><a href="#N142E7">11.2.21. <code class="code">(<span class="hl-operator">&amp;&amp;</span>)</code></a></span></dt><dt><span class="section"><a href="#N142F4">11.2.22. <code class="code">(<span class="hl-operator">||</span>)</code></a></span></dt><dt><span class="section"><a href="#N14301">11.2.23. <code class="code">(<span class="hl-operator">:</span>)</code></a></span></dt><dt><span class="section"><a href="#N14321">11.2.24. <code class="code"><span class="hl-variable">abs</span></code></a></span></dt><dt><span class="section"><a href="#N14335">11.2.25. <code class="code"><span class="hl-variable">signum</span></code></a></span></dt><dt><span class="section"><a href="#N1435D">11.2.26. <code class="code"><span class="hl-variable">min</span></code></a></span></dt><dt><span class="section"><a href="#N14371">11.2.27. <code class="code"><span class="hl-variable">max</span></code></a></span></dt><dt><span class="section"><a href="#N14385">11.2.28. <code class="code"><span class="hl-variable">Floor</span></code></a></span></dt><dt><span class="section"><a href="#N14392">11.2.29. <code class="code"><span class="hl-variable">Ceil</span></code></a></span></dt><dt><span class="section"><a href="#N1439F">11.2.30. <code class="code"><span class="hl-variable">sqrt</span></code></a></span></dt></dl></dd><dt><span class="section"><a href="#ref.stdlib.idioms">11.3. idioms: Higher-order Orc programming idioms.</a></span></dt><dd><dl><dt><span class="section"><a href="#N143C5">11.3.1. <code class="code"><span class="hl-variable">curry</span></code></a></span></dt><dt><span class="section"><a href="#N143D9">11.3.2. <code class="code"><span class="hl-variable">curry3</span></code></a></span></dt><dt><span class="section"><a href="#N143ED">11.3.3. <code class="code"><span class="hl-variable">uncurry</span></code></a></span></dt><dt><span class="section"><a href="#N14401">11.3.4. <code class="code"><span class="hl-variable">uncurry3</span></code></a></span></dt><dt><span class="section"><a href="#N14415">11.3.5. <code class="code"><span class="hl-variable">flip</span></code></a></span></dt><dt><span class="section"><a href="#N14429">11.3.6. <code class="code"><span class="hl-variable">constant</span></code></a></span></dt><dt><span class="section"><a href="#N1443D">11.3.7. <code class="code"><span class="hl-variable">defer</span></code></a></span></dt><dt><span class="section"><a href="#N14451">11.3.8. <code class="code"><span class="hl-variable">defer2</span></code></a></span></dt><dt><span class="section"><a href="#N14465">11.3.9. <code class="code"><span class="hl-variable">ignore</span></code></a></span></dt><dt><span class="section"><a href="#N14479">11.3.10. <code class="code"><span class="hl-variable">ignore2</span></code></a></span></dt><dt><span class="section"><a href="#N1448D">11.3.11. <code class="code"><span class="hl-variable">compose</span></code></a></span></dt><dt><span class="section"><a href="#N144A1">11.3.12. <code class="code"><span class="hl-variable">while</span></code></a></span></dt><dt><span class="section"><a href="#N144BF">11.3.13. <code class="code"><span class="hl-variable">repeat</span></code></a></span></dt><dt><span class="section"><a href="#N144DD">11.3.14. <code class="code"><span class="hl-variable">fork</span></code></a></span></dt><dt><span class="section"><a href="#N144FD">11.3.15. <code class="code"><span class="hl-variable">forkMap</span></code></a></span></dt><dt><span class="section"><a href="#N1451D">11.3.16. <code class="code"><span class="hl-variable">seq</span></code></a></span></dt><dt><span class="section"><a href="#N14541">11.3.17. <code class="code"><span class="hl-variable">seqMap</span></code></a></span></dt><dt><span class="section"><a href="#N14569">11.3.18. <code class="code"><span class="hl-variable">join</span></code></a></span></dt><dt><span class="section"><a href="#N1458D">11.3.19. <code class="code"><span class="hl-variable">joinMap</span></code></a></span></dt><dt><span class="section"><a href="#N145B1">11.3.20. <code class="code"><span class="hl-variable">alt</span></code></a></span></dt><dt><span class="section"><a href="#N145D1">11.3.21. <code class="code"><span class="hl-variable">altMap</span></code></a></span></dt><dt><span class="section"><a href="#N145F1">11.3.22. <code class="code"><span class="hl-variable">por</span></code></a></span></dt><dt><span class="section"><a href="#N1460D">11.3.23. <code class="code"><span class="hl-variable">pand</span></code></a></span></dt><dt><span class="section"><a href="#N14629">11.3.24. <code class="code"><span class="hl-variable">collect</span></code></a></span></dt></dl></dd><dt><span class="section"><a href="#ref.stdlib.list">11.4. list: Operations on lists.</a></span></dt><dd><dl><dt><span class="section"><a href="#N1465B">11.4.1. <code class="code"><span class="hl-variable">each</span></code></a></span></dt><dt><span class="section"><a href="#N14676">11.4.2. <code class="code"><span class="hl-variable">map</span></code></a></span></dt><dt><span class="section"><a href="#N14692">11.4.3. <code class="code"><span class="hl-variable">reverse</span></code></a></span></dt><dt><span class="section"><a href="#N146AD">11.4.4. <code class="code"><span class="hl-variable">filter</span></code></a></span></dt><dt><span class="section"><a href="#N146C8">11.4.5. <code class="code"><span class="hl-variable">head</span></code></a></span></dt><dt><span class="section"><a href="#N146E3">11.4.6. <code class="code"><span class="hl-variable">tail</span></code></a></span></dt><dt><span class="section"><a href="#N146FE">11.4.7. <code class="code"><span class="hl-variable">init</span></code></a></span></dt><dt><span class="section"><a href="#N14719">11.4.8. <code class="code"><span class="hl-variable">last</span></code></a></span></dt><dt><span class="section"><a href="#N14734">11.4.9. <code class="code"><span class="hl-variable">empty</span></code></a></span></dt><dt><span class="section"><a href="#N1474C">11.4.10. <code class="code"><span class="hl-variable">index</span></code></a></span></dt><dt><span class="section"><a href="#N14767">11.4.11. <code class="code"><span class="hl-variable">append</span></code></a></span></dt><dt><span class="section"><a href="#N14782">11.4.12. <code class="code"><span class="hl-variable">foldl</span></code></a></span></dt><dt><span class="section"><a href="#N147AC">11.4.13. <code class="code"><span class="hl-variable">foldl1</span></code></a></span></dt><dt><span class="section"><a href="#N147CB">11.4.14. <code class="code"><span class="hl-variable">foldr</span></code></a></span></dt><dt><span class="section"><a href="#N147F2">11.4.15. <code class="code"><span class="hl-variable">foldr1</span></code></a></span></dt><dt><span class="section"><a href="#N14811">11.4.16. <code class="code"><span class="hl-variable">afold</span></code></a></span></dt><dt><span class="section"><a href="#N1482F">11.4.17. <code class="code"><span class="hl-variable">cfold</span></code></a></span></dt><dt><span class="section"><a href="#N14850">11.4.18. <code class="code"><span class="hl-variable">zip</span></code></a></span></dt><dt><span class="section"><a href="#N1486C">11.4.19. <code class="code"><span class="hl-variable">unzip</span></code></a></span></dt><dt><span class="section"><a href="#N14888">11.4.20. <code class="code"><span class="hl-variable">concat</span></code></a></span></dt><dt><span class="section"><a href="#N148A0">11.4.21. <code class="code"><span class="hl-variable">length</span></code></a></span></dt><dt><span class="section"><a href="#N148BB">11.4.22. <code class="code"><span class="hl-variable">take</span></code></a></span></dt><dt><span class="section"><a href="#N148F0">11.4.23. <code class="code"><span class="hl-variable">drop</span></code></a></span></dt><dt><span class="section"><a href="#N14925">11.4.24. <code class="code"><span class="hl-variable">member</span></code></a></span></dt><dt><span class="section"><a href="#N14940">11.4.25. <code class="code"><span class="hl-variable">merge</span></code></a></span></dt><dt><span class="section"><a href="#N1495E">11.4.26. <code class="code"><span class="hl-variable">mergeBy</span></code></a></span></dt><dt><span class="section"><a href="#N14976">11.4.27. <code class="code"><span class="hl-variable">sort</span></code></a></span></dt><dt><span class="section"><a href="#N14994">11.4.28. <code class="code"><span class="hl-variable">sortBy</span></code></a></span></dt><dt><span class="section"><a href="#N149AC">11.4.29. <code class="code"><span class="hl-variable">mergeUnique</span></code></a></span></dt><dt><span class="section"><a href="#N149CA">11.4.30. <code class="code"><span class="hl-variable">mergeUniqueBy</span></code></a></span></dt><dt><span class="section"><a href="#N149E2">11.4.31. <code class="code"><span class="hl-variable">sortUnique</span></code></a></span></dt><dt><span class="section"><a href="#N14A00">11.4.32. <code class="code"><span class="hl-variable">sortUniqueBy</span></code></a></span></dt><dt><span class="section"><a href="#N14A18">11.4.33. <code class="code"><span class="hl-variable">group</span></code></a></span></dt><dt><span class="section"><a href="#N14A3A">11.4.34. <code class="code"><span class="hl-variable">groupBy</span></code></a></span></dt><dt><span class="section"><a href="#N14A56">11.4.35. <code class="code"><span class="hl-variable">rangeBy</span></code></a></span></dt><dt><span class="section"><a href="#N14A7F">11.4.36. <code class="code"><span class="hl-variable">range</span></code></a></span></dt><dt><span class="section"><a href="#N14A97">11.4.37. <code class="code"><span class="hl-variable">any</span></code></a></span></dt><dt><span class="section"><a href="#N14AB6">11.4.38. <code class="code"><span class="hl-variable">all</span></code></a></span></dt><dt><span class="section"><a href="#N14AD5">11.4.39. <code class="code"><span class="hl-variable">sum</span></code></a></span></dt><dt><span class="section"><a href="#N14AF0">11.4.40. <code class="code"><span class="hl-variable">product</span></code></a></span></dt><dt><span class="section"><a href="#N14B0B">11.4.41. <code class="code"><span class="hl-variable">and</span></code></a></span></dt><dt><span class="section"><a href="#N14B29">11.4.42. <code class="code"><span class="hl-variable">or</span></code></a></span></dt><dt><span class="section"><a href="#N14B47">11.4.43. <code class="code"><span class="hl-variable">minimum</span></code></a></span></dt><dt><span class="section"><a href="#N14B62">11.4.44. <code class="code"><span class="hl-variable">maximum</span></code></a></span></dt></dl></dd><dt><span class="section"><a href="#ref.stdlib.reflect">11.5. reflect: Metalanguage operations.</a></span></dt><dd><dl><dt><span class="section"><a href="#N14B87">11.5.1. <code class="code"><span class="hl-variable">MakeSite</span></code></a></span></dt></dl></dd><dt><span class="section"><a href="#ref.stdlib.state">11.6. state: General-purpose supplemental data structures.</a></span></dt><dd><dl><dt><span class="section"><a href="#N14BD4">11.6.1. <code class="code"><span class="hl-variable">Some</span></code></a></span></dt><dt><span class="section"><a href="#N14BEB">11.6.2. <code class="code"><span class="hl-variable">None</span></code></a></span></dt><dt><span class="section"><a href="#N14BFC">11.6.3. <code class="code"><span class="hl-variable">Cell</span></code></a></span></dt><dt><span class="section"><a href="#N14C51">11.6.4. <code class="code"><span class="hl-variable">Ref</span></code></a></span></dt><dt><span class="section"><a href="#N14C64">11.6.5. <code class="code"><span class="hl-variable">Ref</span></code></a></span></dt><dt><span class="section"><a href="#N14C91">11.6.6. <code class="code">(<span class="hl-operator">?</span>)</code></a></span></dt><dt><span class="section"><a href="#N14CAA">11.6.7. <code class="code">(<span class="hl-operator">:=</span>)</code></a></span></dt><dt><span class="section"><a href="#N14CC3">11.6.8. <code class="code"><span class="hl-variable">swap</span></code></a></span></dt><dt><span class="section"><a href="#N14CDB">11.6.9. <code class="code"><span class="hl-variable">Semaphore</span></code></a></span></dt><dt><span class="section"><a href="#N14D7E">11.6.10. <code class="code"><span class="hl-variable">Channel</span></code></a></span></dt><dt><span class="section"><a href="#N14E8E">11.6.11. <code class="code"><span class="hl-variable">BoundedChannel</span></code></a></span></dt><dt><span class="section"><a href="#N14FEC">11.6.12. <code class="code"><span class="hl-variable">Array</span></code></a></span></dt><dt><span class="section"><a href="#N15034">11.6.13. <code class="code"><span class="hl-variable">arrayToList</span></code></a></span></dt><dt><span class="section"><a href="#N1504C">11.6.14. <code class="code"><span class="hl-variable">Table</span></code></a></span></dt><dt><span class="section"><a href="#N1509D">11.6.15. <code class="code"><span class="hl-variable">Counter</span></code></a></span></dt><dt><span class="section"><a href="#N150AA">11.6.16. <code class="code"><span class="hl-variable">Counter</span></code></a></span></dt><dt><span class="section"><a href="#N15101">11.6.17. <code class="code"><span class="hl-variable">Dictionary</span></code></a></span></dt><dt><span class="section"><a href="#N1513D">11.6.18. <code class="code"><span class="hl-variable">fst</span></code></a></span></dt><dt><span class="section"><a href="#N15155">11.6.19. <code class="code"><span class="hl-variable">snd</span></code></a></span></dt><dt><span class="section"><a href="#N1516D">11.6.20. <code class="code"><span class="hl-variable">Interval</span></code></a></span></dt><dt><span class="section"><a href="#N151A5">11.6.21. <code class="code"><span class="hl-variable">Intervals</span></code></a></span></dt></dl></dd><dt><span class="section"><a href="#ref.stdlib.text">11.7. text: Operations on strings.</a></span></dt><dd><dl><dt><span class="section"><a href="#N151D1">11.7.1. <code class="code"><span class="hl-variable">String</span></code></a></span></dt><dt><span class="section"><a href="#N15208">11.7.2. <code class="code"><span class="hl-variable">Print</span></code></a></span></dt><dt><span class="section"><a href="#N1521F">11.7.3. <code class="code"><span class="hl-variable">Println</span></code></a></span></dt><dt><span class="section"><a href="#N15236">11.7.4. <code class="code"><span class="hl-variable">Read</span></code></a></span></dt><dt><span class="section"><a href="#N15257">11.7.5. <code class="code"><span class="hl-variable">Write</span></code></a></span></dt><dt><span class="section"><a href="#N15274">11.7.6. <code class="code"><span class="hl-variable">lines</span></code></a></span></dt><dt><span class="section"><a href="#N15288">11.7.7. <code class="code"><span class="hl-variable">unlines</span></code></a></span></dt><dt><span class="section"><a href="#N1529C">11.7.8. <code class="code"><span class="hl-variable">words</span></code></a></span></dt><dt><span class="section"><a href="#N152B0">11.7.9. <code class="code"><span class="hl-variable">unwords</span></code></a></span></dt><dt><span class="section"><a href="#N152C4">11.7.10. <code class="code"><span class="hl-variable">characters</span></code></a></span></dt></dl></dd><dt><span class="section"><a href="#ref.stdlib.time">11.8. time: Real time.</a></span></dt><dd><dl><dt><span class="section"><a href="#N152E4">11.8.1. <code class="code"><span class="hl-variable">Rclock</span></code></a></span></dt><dt><span class="section"><a href="#N15304">11.8.2. <code class="code"><span class="hl-variable">Rwait</span></code></a></span></dt><dt><span class="section"><a href="#N15315">11.8.3. <code class="code"><span class="hl-variable">Rtime</span></code></a></span></dt><dt><span class="section"><a href="#N15326">11.8.4. <code class="code"><span class="hl-variable">metronome</span></code></a></span></dt></dl></dd><dt><span class="section"><a href="#ref.stdlib.util">11.9. util: Miscellaneous utility functions.</a></span></dt><dd><dl><dt><span class="section"><a href="#N15341">11.9.1. <code class="code"><span class="hl-variable">Random</span></code></a></span></dt><dt><span class="section"><a href="#N15352">11.9.2. <code class="code"><span class="hl-variable">Random</span></code></a></span></dt><dt><span class="section"><a href="#N1536A">11.9.3. <code class="code"><span class="hl-variable">URandom</span></code></a></span></dt><dt><span class="section"><a href="#N1537B">11.9.4. <code class="code"><span class="hl-variable">UUID</span></code></a></span></dt><dt><span class="section"><a href="#N1538C">11.9.5. <code class="code"><span class="hl-variable">Prompt</span></code></a></span></dt><dt><span class="section"><a href="#N153B6">11.9.6. <code class="code"><span class="hl-variable">signals</span></code></a></span></dt><dt><span class="section"><a href="#N153D7">11.9.7. <code class="code"><span class="hl-variable">for</span></code></a></span></dt><dt><span class="section"><a href="#N153F4">11.9.8. <code class="code"><span class="hl-variable">upto</span></code></a></span></dt><dt><span class="section"><a href="#N15417">11.9.9. <code class="code"><span class="hl-variable">IterableToStream</span></code></a></span></dt><dt><span class="section"><a href="#N15428">11.9.10. <code class="code"><span class="hl-variable">iterableToList</span></code></a></span></dt><dt><span class="section"><a href="#N15440">11.9.11. <code class="code"><span class="hl-variable">fillArray</span></code></a></span></dt><dt><span class="section"><a href="#N1545E">11.9.12. <code class="code"><span class="hl-variable">sliceArray</span></code></a></span></dt><dt><span class="section"><a href="#N15472">11.9.13. <code class="code"><span class="hl-variable">takePubs</span></code></a></span></dt><dt><span class="section"><a href="#N15499">11.9.14. <code class="code"><span class="hl-variable">withLock</span></code></a></span></dt><dt><span class="section"><a href="#N154B1">11.9.15. <code class="code"><span class="hl-variable">synchronized</span></code></a></span></dt></dl></dd><dt><span class="section"><a href="#ref.stdlib.web">11.10. web: Web browsing, HTTP, and JSON capabilities.</a></span></dt><dd><dl><dt><span class="section"><a href="#N154CF">11.10.1. <code class="code"><span class="hl-variable">Browse</span></code></a></span></dt><dt><span class="section"><a href="#N154EC">11.10.2. <code class="code"><span class="hl-variable">HTTP</span></code></a></span></dt><dt><span class="section"><a href="#N1550D">11.10.3. <code class="code"><span class="hl-variable">HTTP</span></code></a></span></dt><dt><span class="section"><a href="#N15519">11.10.4. <code class="code"><span class="hl-variable">HTTP</span></code></a></span></dt><dt><span class="section"><a href="#N15529">11.10.5. <code class="code"><span class="hl-variable">ReadJSON</span></code></a></span></dt><dt><span class="section"><a href="#N1554F">11.10.6. <code class="code"><span class="hl-variable">WriteJSON</span></code></a></span></dt></dl></dd><dt><span class="section"><a href="#ref.stdlib.xml">11.11. xml: XML manipulation.</a></span></dt><dd><dl><dt><span class="section"><a href="#N1557F">11.11.1. <code class="code"><span class="hl-variable">ReadXML</span></code></a></span></dt><dt><span class="section"><a href="#N15590">11.11.2. <code class="code"><span class="hl-variable">WriteXML</span></code></a></span></dt><dt><span class="section"><a href="#N155A1">11.11.3. <code class="code"><span class="hl-variable">XMLElement</span></code></a></span></dt><dt><span class="section"><a href="#N155B2">11.11.4. <code class="code"><span class="hl-variable">XMLText</span></code></a></span></dt><dt><span class="section"><a href="#N155C3">11.11.5. <code class="code"><span class="hl-variable">XMLCData</span></code></a></span></dt><dt><span class="section"><a href="#N155D4">11.11.6. <code class="code"><span class="hl-variable">IsXML</span></code></a></span></dt><dt><span class="section"><a href="#N155E9">11.11.7. <code class="code"><span class="hl-variable">xml</span></code></a></span></dt><dt><span class="section"><a href="#N15605">11.11.8. <code class="code"><span class="hl-variable">xattr</span></code></a></span></dt></dl></dd></dl></dd><dt><span class="index"><a href="#ref.index">Index of Key Terms</a></span></dt></dl></div><div lang="" class="chapter" title="Chapter&nbsp;1.&nbsp;Data Values"><div class="titlepage"><div><div><h2 class="title"><a name="ref.data"></a>Chapter&nbsp;1.&nbsp;Data Values</h2></div></div></div><p>
The primitive data types in Orc are Booleans, numbers, strings, 
and a unit value <code class="code"><span class="hl-keyword">signal</span></code>.
Orc also has structured <a name="N10038" class="indexterm"></a>values: lists, tuples, records, and algebraic datatypes. 
Functions are values, called closures. 
Additionally, sites are themselves values, and may be passed to sites or returned by sites.
</p><p>
All of the preceding values are immutable. Orc also has access to mutable state through sites.
The <a class="link" href="#ref.stdlib" title="Chapter&nbsp;11.&nbsp;Standard Library">Standard Library</a> includes many such sites, e.g. <code class="code"><span class="hl-variable">Ref</span></code> and <code class="code"><span class="hl-variable">Channel</span></code>.
</p><p>
Orc sites may create and manipulate many more kinds of values, such as Java objects, XML documents,
video files, relational databases, etc. In fact, all of the built-in datatypes could be implemented 
by external sites.   
</p><div class="section" title="1.1.&nbsp;Booleans"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.data.boolean"></a>1.1.&nbsp;Booleans</h2></div></div></div><p>Orc supports <a name="N10054" class="indexterm"></a><em class="firstterm">Boolean</em> values, <code class="code"><span class="hl-literal">true</span></code> and <code class="code"><span class="hl-literal">false</span></code>.</p><div class="section" title="1.1.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.boolean.syntax"></a>1.1.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[53]</td><td width="10%" valign="top" align="right"><a href="#ebnf.literal.boolean"><a class="link" href="#ref.data.boolean" title="1.1.&nbsp;Booleans">BooleanLiteral</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<code class="code"><span class="hl-literal">true</span></code> &#10073; <code class="code"><span class="hl-literal">false</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="1.1.2.&nbsp;Operations"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.boolean.operations"></a>1.1.2.&nbsp;Operations</h3></div></div></div><p>Notable Boolean operations include:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Logical negation (not): <code class="code"><span class="hl-operator">~</span></code></p></li><li class="listitem"><p>Logical and: <code class="code"><span class="hl-operator">&amp;&amp;</span></code></p></li><li class="listitem"><p>Logical or: <code class="code"><span class="hl-operator">||</span></code></p></li></ul></div><p>
as well as the comparison operators, which yield Boolean results:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Less than: <code class="code"><span class="hl-operator">&lt;:</span></code></p></li><li class="listitem"><p>Greater than: <code class="code"><span class="hl-operator">:&gt;</span></code></p></li><li class="listitem"><p>Less than or equal to: <code class="code"><span class="hl-operator">&lt;=</span></code></p></li><li class="listitem"><p>Greater than or equal to: <code class="code"><span class="hl-operator">&gt;=</span></code></p></li><li class="listitem"><p>Equal to: <code class="code"><span class="hl-operator">=</span></code></p></li><li class="listitem"><p>Not equal to: <code class="code"><span class="hl-operator">/</span><span class="hl-operator">=</span></code></p></li></ul></div><p>
</p><p>
	Note:  Unlike the typical symbols <code class="code">&lt;</code> and <code class="code">&gt;</code>
	for arithmetic relations, Orc uses <code class="code"><span class="hl-operator">&lt;:</span></code> and <code class="code"><span class="hl-operator">:&gt;</span></code>
	respectively.  This usage avoids ambiguity with the 
	<a class="link" href="#ref.combinators.sequential" title="3.2.&nbsp;Sequential Combinator">sequential combinator</a>
	and the <a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator">pruning combinator</a>.
</p></div><div class="section" title="1.1.3.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.boolean.type"></a>1.1.3.&nbsp;Type</h3></div></div></div><p>
		A Boolean value has type <code class="code"><span class="hl-variable">Boolean</span></code>.
	</p></div><div class="section" title="1.1.4.&nbsp;Java calls"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.boolean.javacalls"></a>1.1.4.&nbsp;Java calls</h3></div></div></div><p>Orc Boolean values are passed in calls to and returns
from Java code as <code class="code">java.lang.Boolean</code>, which is boxed and
unboxed per <em class="citetitle"><a class="citetitle" href="http://java.sun.com/docs/books/jls/third_edition/html/conversions.html#5.1.7" target="_top">The Java Language Specification</a></em> as <code class="code"><span class="hl-keyword">boolean</span></code>.</p></div><div class="section" title="1.1.5.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.boolean.examples"></a>1.1.5.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.boolean.examples.xor_link" onclick="toggle(this, 'ref.data.boolean.examples.xor_content')">
					&minus;
				</a><span class="exampleCaption">Boolean XOR</span></div><div class="exampleBody" id="ref.data.boolean.examples.xor_content"><pre class="orc">
<span class="hl-comment">{- Define exclusive or -}</span>

<span class="hl-keyword">def</span> <span class="hl-site">xor</span>(<span class="hl-variable">a</span>,<span class="hl-variable">b</span>) <span class="hl-operator">=</span> (<span class="hl-variable">a</span> <span class="hl-operator">||</span> <span class="hl-variable">b</span>) <span class="hl-operator">&amp;&amp;</span> <span class="hl-operator">~</span>(<span class="hl-variable">a</span> <span class="hl-operator">&amp;&amp;</span> <span class="hl-variable">b</span>)

<span class="hl-site">xor</span>(<span class="hl-literal">true</span>, <span class="hl-literal">true</span>) <span class="hl-combinator">|</span> <span class="hl-site">xor</span>(<span class="hl-literal">false</span>, <span class="hl-literal">false</span>)

<span class="hl-comment">{-
OUTPUT:
false
false
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.boolean.examples.xor_link'), 'ref.data.boolean.examples.xor_content'); }, 125);
</script></div><div class="section" title="1.1.6.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.boolean.links"></a>1.1.6.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.expressions.ifthenelse" title="2.7.&nbsp;if then else"><code class="code"><span class="hl-keyword">if</span> <span class="hl-keyword">then</span> <span class="hl-keyword">else</span></code></a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Ift"><code class="code"><span class="hl-variable">Ift</span></code></a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Iff"><code class="code"><span class="hl-variable">Iff</span></code></a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.values" class="olink">Literal Values</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.conditionals" class="olink">Conditionals</a></p></li></ul></div></div></div><div class="section" title="1.2.&nbsp;Numerics"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.data.numeric"></a>1.2.&nbsp;Numerics</h2></div></div></div><p>Orc includes two numeric types, <a name="N10113" class="indexterm"></a><em class="firstterm">integers</em> and <a name="N10119" class="indexterm"></a><em class="firstterm">numbers</em>.
Orc's integers are arbitrary-precision two's complement integers. 
Orc's numbers are <a name="N1011F" class="indexterm"></a>floating point numbers, with an arbitrary-precision two's complement significand and a 32-bit two's complement exponent (base 10).
These numbers behaves in accordance with the ANSI INCITS 274-1996 subset of ANSI/IEEE Std 754-2008.
Namely, "infinite, NaN, or subnormal results are always treated as errors, and &ndash;0 results are hidden".
</p><p>
Note that the <a name="N10125" class="indexterm"></a><a class="link" href="#ref.stdlib.core.Div">divide operation</a> on Orc numbers can encounter a
non-terminating decimal expansion, where there is no exact representable
decimal result.  In this case, the divide operation falls back to division
using IEEE 754 binary64 (formerly called double precision)
binary floating-point operands.
This fall back may result in a loss of precision for this operation.
</p><p>
Similarly, the <a name="N1012E" class="indexterm"></a><a class="link" href="#ref.stdlib.core.Exponent">exponent operation</a> may fall back to IEEE 754 binary64
binary floating-point operands in the case of a fractional exponent.
This fall back may result in a loss of precision for this operation.
</p><div class="section" title="1.2.1.&nbsp;Literals"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.numeric.literals"></a>1.2.1.&nbsp;Literals</h3></div></div></div><div class="section" title="1.2.1.1.&nbsp;Syntax"><div class="titlepage"><div><div><h4 class="title"><a name="ref.data.numeric.literals.syntax"></a>1.2.1.1.&nbsp;Syntax</h4></div></div></div><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[54]</td><td width="10%" valign="top" align="right"><a href="#ebnf.literal.integer"><a class="link" href="#ref.data.numeric.literals.syntax" title="1.2.1.1.&nbsp;Syntax">IntegerLiteral</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				DecimalDigit<span class="bold"><strong>+</strong></span>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[55]</td><td width="10%" valign="top" align="right"><a href="#ebnf.literal.number"><a class="link" href="#ref.data.numeric.literals.syntax" title="1.2.1.1.&nbsp;Syntax">NumberLiteral</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<a href="#ebnf.literal.integer">IntegerLiteral</a> <a href="#ebnf.literal.decimalpart">DecimalPart</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.literal.exponentpart">ExponentPart</a><span class="bold"><strong>?</strong></span>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[56]</td><td width="10%" valign="top" align="right"><a href="#ebnf.literal.decimalpart">DecimalPart</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<code class="code">.</code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[57]</td><td width="10%" valign="top" align="right"><a href="#ebnf.literal.exponentpart">ExponentPart</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				               <code class="code"><span class="hl-variable">E</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-variable">E</span><span class="hl-operator">+</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-variable">E</span><span class="hl-operator">-</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-variable">e</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-variable">e</span><span class="hl-operator">+</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-variable">e</span><span class="hl-operator">-</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>Numeric literals in Orc are specified in decimal.
Leading zeros are allowed, but have no significance.  Trailing zeros after a decimal point also have no significance.
If a numeric literal contains a decimal point or an "<code class="code"><span class="hl-variable">E</span></code>", it is a number (floating point) literal, otherwise it is an integer literal.
</p></div></div><div class="section" title="1.2.2.&nbsp;Operations"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.numeric.operations"></a>1.2.2.&nbsp;Operations</h3></div></div></div><p>Notable operations on integers and numbers include:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Add: <code class="code"><span class="hl-operator">+</span></code></p></li><li class="listitem"><p>Subtract: <code class="code"><span class="hl-operator">-</span></code></p></li><li class="listitem"><p>Negate (unary minus): <code class="code"><span class="hl-operator">-</span></code></p></li><li class="listitem"><p>Multiply: <code class="code"><span class="hl-operator">*</span></code></p></li><li class="listitem"><p>Divide: <code class="code"><span class="hl-operator">/</span></code></p></li><li class="listitem"><p>Exponent: <code class="code"><span class="hl-operator">**</span></code></p></li><li class="listitem"><p>Remainder: <code class="code"><span class="hl-operator">%</span></code></p></li><li class="listitem"><p>Absolute value: <code class="code"><span class="hl-variable">abs</span></code></p></li><li class="listitem"><p>Signum: <code class="code"><span class="hl-variable">signum</span></code></p></li><li class="listitem"><p>Floor: <code class="code"><span class="hl-variable">Floor</span></code></p></li><li class="listitem"><p>Ceiling: <code class="code"><span class="hl-variable">Ceil</span></code></p></li></ul></div><p>
</p><p>
	Arithmetic operators with two integer arguments will perform an integer operation and 
	return an integer result; for example, <code class="code"><span class="hl-literal">5</span> <span class="hl-operator">/</span> <span class="hl-literal">2</span></code> performs integer <a name="N10194" class="indexterm"></a>division and 
	returns 2. However, if either argument to an operator has a decimal part 
	(even if it is trivial, as in <code class="code"><span class="hl-literal">3.0</span></code>), the other argument will be promoted, and 
	a decimal operation will be performed. For example, <code class="code"><span class="hl-literal">5</span> <span class="hl-operator">/</span> <span class="hl-literal">2.0</span></code> and <code class="code"><span class="hl-literal">5.0</span> <span class="hl-operator">/</span> <span class="hl-literal">2</span></code> both 
	perform decimal division and return 2.5. 
</p></div><div class="section" title="1.2.3.&nbsp;Java calls"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.numeric.javacalls"></a>1.2.3.&nbsp;Java calls</h3></div></div></div><p>
Orc integer values are passed in calls to and returns
from Java code as <code class="code">java.math.BigInteger</code>, or if the callee
method expects a specific numeric type, an Orc integer will be
converted to a <code class="code">java.lang.Byte</code>, <code class="code">java.lang.Short</code>,
<code class="code">java.lang.Integer</code>, <code class="code">java.lang.Long</code>,
<code class="code">java.lang.Float</code>, or <code class="code">java.lang.Double</code>, as appropriate.
These values are boxed and unboxed per <em class="citetitle"><a class="citetitle" href="http://java.sun.com/docs/books/jls/third_edition/html/conversions.html#5.1.7" target="_top">The Java Language Specification</a></em>.
</p><p>
Orc number values are passed in calls to and returns
from Java code as <code class="code">java.math.BigDecimal</code>, or if the callee
method expects a specific numeric type, an Orc number will be
converted to a <code class="code">java.lang.Float</code> or 
<code class="code">java.lang.Double</code>, as appropriate.
These values are boxed and unboxed per <em class="citetitle"><a class="citetitle" href="http://java.sun.com/docs/books/jls/third_edition/html/conversions.html#5.1.7" target="_top">The Java Language Specification</a></em>.
</p></div><div class="section" title="1.2.4.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.numeric.type"></a>1.2.4.&nbsp;Type</h3></div></div></div><p>
		All numeric values (integers and numbers) have type <code class="code"><span class="hl-variable">Number</span></code>. Integer values also
		have the more specific type <code class="code"><span class="hl-variable">Integer</span></code>, which is a subtype of <code class="code"><span class="hl-variable">Number</span></code>.
	</p></div><div class="section" title="1.2.5.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.numeric.examples"></a>1.2.5.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.numeric.examples.precedence_link" onclick="toggle(this, 'ref.data.numeric.examples.precedence_content')">
					&minus;
				</a><span class="exampleCaption">Operator Precedence</span></div><div class="exampleBody" id="ref.data.numeric.examples.precedence_content"><pre class="orc">
<span class="hl-comment">{- Operators follow common precedence practice. 
   Combinators have lower precedence than operators.
-}</span>

<span class="hl-literal">4</span> <span class="hl-operator">+</span> <span class="hl-literal">15</span> <span class="hl-operator">/</span> <span class="hl-literal">3</span> <span class="hl-operator">*</span> <span class="hl-literal">2</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">result</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">result</span>

<span class="hl-comment">{-
OUTPUT:
14
-}</span>
</pre><p>See the Orc <a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">precedence table</a>.</p></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.numeric.examples.precedence_link'), 'ref.data.numeric.examples.precedence_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.numeric.examples.int2float_link" onclick="toggle(this, 'ref.data.numeric.examples.int2float_content')">
					&minus;
				</a><span class="exampleCaption">Integer to Number Promotion</span></div><div class="exampleBody" id="ref.data.numeric.examples.int2float_content"><pre class="orc">
<span class="hl-comment">{- Arithmetic operations, when all arguments are integers,
   operate as integer operations.  If any argument is a floating-
   point number, then the operation treats all arguments as
   floating-point numbers and operates in that domain.
-}</span>

<span class="hl-literal">16</span> <span class="hl-operator">-</span> <span class="hl-literal">8</span> <span class="hl-operator">+</span> <span class="hl-literal">50.0</span> <span class="hl-operator">/</span> <span class="hl-literal">3</span> <span class="hl-operator">*</span> <span class="hl-literal">1</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">a</span><span class="hl-combinator">&gt;</span>
<span class="hl-literal">16</span> <span class="hl-operator">-</span> <span class="hl-site">Floor</span>(<span class="hl-literal">8.5</span>) <span class="hl-operator">+</span> <span class="hl-site">Ceil</span>(<span class="hl-literal">4e1</span> <span class="hl-operator">+</span> <span class="hl-literal">9.99</span>) <span class="hl-operator">/</span> <span class="hl-literal">3</span> <span class="hl-operator">*</span> <span class="hl-literal">1</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">b</span><span class="hl-combinator">&gt;</span>
(<span class="hl-variable">a</span>, <span class="hl-variable">b</span>) 

<span class="hl-comment">{-
OUTPUT:
(24.666666666666668, 24)
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.numeric.examples.int2float_link'), 'ref.data.numeric.examples.int2float_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.numeric.examples.sqrt_link" onclick="toggle(this, 'ref.data.numeric.examples.sqrt_content')">
					&minus;
				</a><span class="exampleCaption">Square Roots and Squares</span></div><div class="exampleBody" id="ref.data.numeric.examples.sqrt_content"><pre class="orc">
<span class="hl-comment">{- Calculate the square roots and squares of
   a list of numbers
-}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">nums</span> <span class="hl-operator">=</span> [<span class="hl-literal">1</span>, <span class="hl-literal">2</span>, <span class="hl-literal">3</span>, <span class="hl-literal">4.0</span>, <span class="hl-literal">5.00</span>]

<span class="hl-site">each</span>(<span class="hl-variable">nums</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> ( 
  <span class="hl-variable">x</span><span class="hl-operator">**</span>(<span class="hl-literal">1.0</span><span class="hl-operator">/</span><span class="hl-literal">2</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">sqrt</span><span class="hl-combinator">&gt;</span>
  <span class="hl-variable">x</span><span class="hl-operator">**</span><span class="hl-literal">2</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">sq</span><span class="hl-combinator">&gt;</span>
  (<span class="hl-variable">x</span>,<span class="hl-variable">sqrt</span>,<span class="hl-variable">sq</span>)
)

<span class="hl-comment">{-
OUTPUT:PERMUTABLE
(1, 1.0, 1)
(2, 1.4142135623730951, 4)
(3, 1.7320508075688772, 9)
(4.0, 2.0, 16.00)
(5.00, 2.23606797749979, 25.0000)
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.numeric.examples.sqrt_link'), 'ref.data.numeric.examples.sqrt_content'); }, 125);
</script></div><div class="section" title="1.2.6.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.numeric.links"></a>1.2.6.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Add"><code class="code"><span class="hl-operator">+</span></code> operator</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Sub"><code class="code"><span class="hl-operator">-</span></code> operator</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.UMinus">unary <code class="code"><span class="hl-operator">-</span></code> operator</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Mult"><code class="code"><span class="hl-operator">*</span></code> operator</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Exponent"><code class="code"><span class="hl-operator">**</span></code> (exponentiation) operator</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Div"><code class="code"><span class="hl-operator">/</span></code> operator</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Mod"><code class="code"><span class="hl-operator">%</span></code> (modulus) operator</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.abs"><code class="code"><span class="hl-variable">abs</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.signum"><code class="code"><span class="hl-variable">signum</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Floor"><code class="code"><span class="hl-variable">Floor</span></code> site</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Ceil"><code class="code"><span class="hl-variable">Ceil</span></code> site</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.values" class="olink">Literal Values</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.operators" class="olink">Operators</a></p></li></ul></div></div></div><div class="section" title="1.3.&nbsp;Character Strings"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.data.string"></a>1.3.&nbsp;Character Strings</h2></div></div></div><p>Orc's character sequence representation is a <a name="N10277" class="indexterm"></a><a name="N1027C" class="indexterm"></a><em class="firstterm">string</em>.
Characters in Orc strings are drawn from the Unicode
character set, and are encoded in the UTF-16 encoding form.
(Note that Orc source code files are encoded in the UTF-8 encoding form.)
Orc strings have an explicit length and are not zero-terminated.
They are limited to a maximum length of 2^31-1 (2 147 483 647) characters.</p><div class="section" title="1.3.1.&nbsp;Literals"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.string.literals"></a>1.3.1.&nbsp;Literals</h3></div></div></div><div class="section" title="1.3.1.1.&nbsp;Syntax"><div class="titlepage"><div><div><h4 class="title"><a name="ref.data.string.literals.syntax"></a>1.3.1.1.&nbsp;Syntax</h4></div></div></div><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[58]</td><td width="10%" valign="top" align="right"><a href="#ebnf.literal.string"><a class="link" href="#ref.data.string.literals.syntax" title="1.3.1.1.&nbsp;Syntax">CharacterStringLiteral</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<code class="code"><span class="hl-literal">"</span></code>Character<span class="bold"><strong>+</strong></span><code class="code"><span class="hl-literal">"</span></code> &#10073; <code class="code"><span class="hl-literal">""</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>String literals are enclosed in quotation marks (U+0022).
Any Unicode character can be placed between the quotation marks, except:
line terminators (CR, LF, NEL [U+0085], LS [U+2028], FF, or PS [U+2029])
or a quotation mark.
A reverse solidus (backslash) and its subsequent character are treated as follows:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="code">\<span class="hl-variable">f</span></code>: represents form feed (FF) (U+000C)</p></li><li class="listitem"><p><code class="code">\<span class="hl-variable">n</span></code>: represents line feed (LF) (U+000A)</p></li><li class="listitem"><p><code class="code">\<span class="hl-variable">r</span></code>: represents carriage return (CR) (U+000D)</p></li><li class="listitem"><p><code class="code">\<span class="hl-variable">t</span></code>: represents character tabulation (HT) (U+0009)</p></li><li class="listitem"><p><code class="code">\\</code>: represents reverse solidus (backslash) (U+005C)</p></li><li class="listitem"><p><code class="code">\<span class="hl-literal">"</span></code>: represents quotation mark (U+0022)</p></li><li class="listitem"><p><code class="code">\</code> followed by any other character: represents that character</p></li></ul></div><p>
</p></div></div><div class="section" title="1.3.2.&nbsp;Operations"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.string.operations"></a>1.3.2.&nbsp;Operations</h3></div></div></div><p>Notable string operations include:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>All <code class="code">java.lang.String</code> operations</p></li><li class="listitem"><p>Convert an Orc value to a string: <a class="link" href="#ref.stdlib.text.Write"><code class="code"><span class="hl-variable">write</span></code></a></p></li><li class="listitem"><p>Split a string into a list of strings corresponding to its lines: <a class="link" href="#ref.stdlib.text.lines"><code class="code"><span class="hl-variable">lines</span></code></a></p></li><li class="listitem"><p>Combine a list of strings into one multi-line string: <a class="link" href="#ref.stdlib.text.unlines"><code class="code"><span class="hl-variable">unlines</span></code></a></p></li><li class="listitem"><p>Split a string into a list of strings corresponding to its words: <a class="link" href="#ref.stdlib.text.words"><code class="code"><span class="hl-variable">words</span></code></a></p></li><li class="listitem"><p>Combine a list of strings into one multi-word strings: <a class="link" href="#ref.stdlib.text.unwords"><code class="code"><span class="hl-variable">unwords</span></code></a></p></li></ul></div><p> 
</p></div><div class="section" title="1.3.3.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.string.type"></a>1.3.3.&nbsp;Type</h3></div></div></div><p>
		A string value has type <code class="code"><span class="hl-variable">String</span></code>.
	</p></div><div class="section" title="1.3.4.&nbsp;Java calls"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.string.javacalls"></a>1.3.4.&nbsp;Java calls</h3></div></div></div><p>
Orc strings are passed in calls to and returns
from Java code as <code class="code">java.lang.String</code>.</p></div><div class="section" title="1.3.5.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.string.examples"></a>1.3.5.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.string.examples.concat_link" onclick="toggle(this, 'ref.data.string.examples.concat_content')">
					&minus;
				</a><span class="exampleCaption">String Concatenation</span></div><div class="exampleBody" id="ref.data.string.examples.concat_content"><pre class="orc">
<span class="hl-comment">{- Concatenate two strings -}</span>

<span class="hl-literal">"hello"</span> <span class="hl-operator">+</span> <span class="hl-literal">" world"</span>

<span class="hl-comment">{-
OUTPUT:
"hello world"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.string.examples.concat_link'), 'ref.data.string.examples.concat_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.string.examples.functions_link" onclick="toggle(this, 'ref.data.string.examples.functions_content')">
					&minus;
				</a><span class="exampleCaption">String Functions</span></div><div class="exampleBody" id="ref.data.string.examples.functions_content"><pre class="orc">
<span class="hl-comment">{- Showcase some Orc library string functions -}</span>

<span class="hl-site">Println</span>(<span class="hl-literal">"I go to the console"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-site">unwords</span>([<span class="hl-literal">"I"</span>, <span class="hl-literal">"like"</span>, <span class="hl-literal">"Orc"</span>])

<span class="hl-comment">{-
OUTPUT:
I go to the console
"I like Orc"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.string.examples.functions_link'), 'ref.data.string.examples.functions_content'); }, 125);
</script></div><div class="section" title="1.3.6.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.string.links"></a>1.3.6.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.stdlib.text.Write"><code class="code"><span class="hl-variable">Write</span></code> site</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.text.lines"><code class="code"><span class="hl-variable">lines</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.text.unlines"><code class="code"><span class="hl-variable">unlines</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.text.words"><code class="code"><span class="hl-variable">words</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.text.unwords"><code class="code"><span class="hl-variable">unwords</span></code> function</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.values" class="olink">Literal Values</a></p></li></ul></div></div></div><div class="section" title="1.4.&nbsp;signal"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.data.signal"></a>1.4.&nbsp;<code class="code"><span class="hl-keyword">signal</span></code></h2></div></div></div><p>A <a name="N1034A" class="indexterm"></a><em class="firstterm">signal</em> is a value that carries no information. 
It typically indicates completion of a <a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">call</a>, when there is no other meaningful value to return. 
It is analogous to <code class="code"><span class="hl-keyword">void</span></code> in Java or <code class="code">()</code> in ML.
</p><div class="section" title="1.4.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.signal.syntax"></a>1.4.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[52]</td><td width="10%" valign="top" align="right"><a href="#ebnf.literal.signal"><a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">SignalLiteral</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<code class="code"><span class="hl-keyword">signal</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="1.4.2.&nbsp;Operations"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.signal.operations"></a>1.4.2.&nbsp;Operations</h3></div></div></div><p>Notable signal operations include:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Publish a signal if an expression is true: <a class="link" href="#ref.stdlib.core.Ift"><code class="code"><span class="hl-variable">Ift</span></code></a></p></li><li class="listitem"><p>Publish a signal if an expression is false: <a class="link" href="#ref.stdlib.core.Iff"><code class="code"><span class="hl-variable">Iff</span></code></a></p></li><li class="listitem"><p>Publish some number of signals simultaneously: <a class="link" href="#ref.stdlib.util.signals"><code class="code"><span class="hl-variable">signals</span></code></a></p></li></ul></div><p>
</p></div><div class="section" title="1.4.3.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.signal.type"></a>1.4.3.&nbsp;Type</h3></div></div></div><p>
		The <code class="code"><span class="hl-keyword">signal</span></code> value has type <code class="code"><span class="hl-variable">Signal</span></code>.
	</p></div><div class="section" title="1.4.4.&nbsp;Java calls"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.signal.javacalls"></a>1.4.4.&nbsp;Java calls</h3></div></div></div><p>Orc signals don't correspond to any Java value, so if a signal
is passed to Java code, it will be as an <code class="code">java.lang.Object</code> of a type not specified here.
A return of type <code class="code"><span class="hl-keyword">void</span></code> from Java code is converted into a signal return value.</p></div><div class="section" title="1.4.5.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.signal.links"></a>1.4.5.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Ift"><code class="code"><span class="hl-variable">Ift</span></code> site</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Iff"><code class="code"><span class="hl-variable">Iff</span></code> site</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.time.metronome"><code class="code"><span class="hl-variable">metronome</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.util.signals"><code class="code"><span class="hl-variable">signals</span></code> function</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.sites" class="olink">Sites</a></p></li></ul></div></div></div><div class="section" title="1.5.&nbsp;Lists"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.data.list"></a>1.5.&nbsp;Lists</h2></div></div></div><p>
A <a name="N103D6" class="indexterm"></a><em class="firstterm">list</em> consists of a finite sequence of values. 
The empty list is written as <code class="code">[]</code>.
</p><div class="section" title="1.5.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.list.syntax"></a>1.5.1.&nbsp;Syntax</h3></div></div></div><p>
    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[4]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.list"><a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">List</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">[</code> <a href="#ebnf.expression">Expression</a>  <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.expression">Expression</a> <code class="code">]</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
  </p></div><div class="section" title="1.5.2.&nbsp;Constructors"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.list.constructors"></a>1.5.2.&nbsp;Constructors</h3></div></div></div><p>
The list expression <code class="code">[</code> <em class="replaceable"><code>E<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>E<sub>n</sub></code></em> <code class="code">]</code> <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> the list <code class="code">[</code> <em class="replaceable"><code>v<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>v<sub>n</sub></code></em> <code class="code">]</code>
only if each expression <em class="replaceable"><code>E<sub>i</sub></code></em> <a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">deflates</a> to value <em class="replaceable"><code>v<sub>i</sub></code></em>. 
Otherwise, it <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p></div><div class="section" title="1.5.3.&nbsp;Operations"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.list.operations"></a>1.5.3.&nbsp;Operations</h3></div></div></div><p>Notable list operations include:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><em>Cons</em></span> (construct) a list with first element <em class="replaceable"><code>h</code></em> and remaining elements <em class="replaceable"><code>t</code></em>: <em class="replaceable"><code>h</code></em><code class="code"><span class="hl-operator">:</span></code><em class="replaceable"><code>t</code></em></p></li><li class="listitem"><p>Publish <code class="code"><span class="hl-literal">true</span></code> iff the list <em class="replaceable"><code>l</code></em> has no elements: <code class="code"><span class="hl-site">empty</span>(</code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish the length of list <em class="replaceable"><code>l</code></em>: <code class="code"><span class="hl-site">length</span>(</code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish the first element of list <em class="replaceable"><code>l</code></em>: <code class="code"><span class="hl-site">head</span>(</code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish a list with every element in list <em class="replaceable"><code>l</code></em> except the first: <code class="code"><span class="hl-site">tail</span>(</code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish all but the last element of list <em class="replaceable"><code>l</code></em>: <code class="code"><span class="hl-site">init</span>(</code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish the last element of list <em class="replaceable"><code>l</code></em>: <code class="code"><span class="hl-site">last</span>(</code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish the <em class="replaceable"><code>n</code></em>th element of a list, counting from 0: <code class="code"><span class="hl-site">index</span>(</code><em class="replaceable"><code>l</code></em><code class="code">, </code><em class="replaceable"><code>n</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish a list with the first <em class="replaceable"><code>n</code></em> elements of the list <em class="replaceable"><code>l</code></em>: <code class="code"><span class="hl-site">take</span>(</code><em class="replaceable"><code>n</code></em><code class="code">, </code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish a list with all but the first <em class="replaceable"><code>n</code></em> elements of the list <em class="replaceable"><code>l</code></em>: <code class="code"><span class="hl-site">drop</span>(</code><em class="replaceable"><code>n</code></em><code class="code">, </code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish every value in list <em class="replaceable"><code>l</code></em>, simultaneously: <code class="code"><span class="hl-site">each</span>(</code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Concatenate list <em class="replaceable"><code>a</code></em> and list <em class="replaceable"><code>b</code></em>: <code class="code"><span class="hl-site">append</span>(</code><em class="replaceable"><code>a</code></em><code class="code">, </code><em class="replaceable"><code>b</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish a list with the elements of list <em class="replaceable"><code>l</code></em> in reverse order: <code class="code"><span class="hl-site">reverse</span>(</code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish a list containing only those elements of <em class="replaceable"><code>l</code></em> which satisfy the function <em class="replaceable"><code>f</code></em>: <code class="code"><span class="hl-site">filter</span>(</code><em class="replaceable"><code>f</code></em><code class="code">, </code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Apply unary function <em class="replaceable"><code>f</code></em> to every element of list <em class="replaceable"><code>l</code></em> (in parallel), and return a list of the results: <code class="code"><span class="hl-site">map</span>(</code><em class="replaceable"><code>f</code></em><code class="code">, </code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Apply a binary function to every element of a list: <code class="code"><span class="hl-variable">foldl</span></code>, <code class="code"><span class="hl-variable">foldr</span></code>, and many variations thereof.</p></li><li class="listitem"><p>Combine two lists into a list of pairs, and its reverse: <code class="code"><span class="hl-variable">zip</span></code> and <code class="code"><span class="hl-variable">unzip</span></code></p></li><li class="listitem"><p>Concatenate a list of lists <em class="replaceable"><code>l</code></em> into a single list: <code class="code"><span class="hl-site">concat</span>(</code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li><li class="listitem"><p>Publish <code class="code"><span class="hl-literal">true</span></code> if item <em class="replaceable"><code>x</code></em> is a member of list <em class="replaceable"><code>l</code></em>: <code class="code"><span class="hl-site">member</span>(</code><em class="replaceable"><code>l</code></em><code class="code">)</code></p></li></ul></div><p>
</p></div><div class="section" title="1.5.4.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.list.type"></a>1.5.4.&nbsp;Type</h3></div></div></div><p>
The type of a list is <code class="code"><span class="hl-site">List</span>[</code><em class="replaceable"><code>U</code></em><code class="code">]</code>, where <em class="replaceable"><code>U</code></em> is the <a class="link" href="#ref.types.subtyping.join" title="9.3.3.&nbsp;Join">join</a> 
of the types of each of its elements. In particular, if all of the elements 
have the same type <em class="replaceable"><code>T</code></em>, then the list will have type <code class="code"><span class="hl-site">List</span>[</code><em class="replaceable"><code>T</code></em><code class="code">]</code>.
</p></div><div class="section" title="1.5.5.&nbsp;Java calls"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.list.javacalls"></a>1.5.5.&nbsp;Java calls</h3></div></div></div><p>
Orc lists do not correspond to any Java value, so if a list is passed to Java code, 
it will be as a <code class="code">java.lang.Object</code> of a type not specified here.
</p></div><div class="section" title="1.5.6.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.list.examples"></a>1.5.6.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.list.examples.sample_link" onclick="toggle(this, 'ref.data.list.examples.sample_content')">
					&minus;
				</a><span class="exampleCaption">Sample Lists</span></div><div class="exampleBody" id="ref.data.list.examples.sample_content"><pre class="orc">
  []                       <span class="hl-comment">-- empty list</span>
<span class="hl-combinator">|</span> [<span class="hl-literal">1</span>, <span class="hl-literal">2</span>, <span class="hl-literal">3</span>]                <span class="hl-comment">-- a list of integers</span>
<span class="hl-combinator">|</span> [(<span class="hl-literal">1</span>, <span class="hl-literal">2</span>), (<span class="hl-literal">2</span>, <span class="hl-literal">3</span>), (<span class="hl-literal">3</span>, <span class="hl-literal">4</span>)] <span class="hl-comment">-- a list of tuples of integers</span>
<span class="hl-combinator">|</span> [<span class="hl-literal">1</span>, <span class="hl-literal">1</span> <span class="hl-operator">*</span> <span class="hl-literal">2</span>, <span class="hl-literal">1</span> <span class="hl-operator">*</span> <span class="hl-literal">2</span> <span class="hl-operator">*</span> <span class="hl-literal">3</span>]    <span class="hl-comment">-- a list of the first 3 factorials</span>
<span class="hl-combinator">|</span> [[<span class="hl-literal">1</span>], [<span class="hl-literal">2</span>, <span class="hl-literal">2</span>], [<span class="hl-literal">3</span>, <span class="hl-literal">3</span>, <span class="hl-literal">3</span>]] <span class="hl-comment">-- a list of lists of integers</span>

<span class="hl-comment">{-
OUTPUT:PERMUTABLE:
[]
[1, 2, 3]
[(1, 2), (2, 3), (3, 4)]
[1, 2, 6]
[[1], [2, 2], [3, 3, 3]]
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.list.examples.sample_link'), 'ref.data.list.examples.sample_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.list.examples.notsets_link" onclick="toggle(this, 'ref.data.list.examples.notsets_content')">
					&minus;
				</a><span class="exampleCaption">Lists Are Not Sets</span></div><div class="exampleBody" id="ref.data.list.examples.notsets_content"><pre class="orc">
<span class="hl-comment">{- 
  Lists do not behave like sets.
  The order and number of elements in a list do matter.
-}</span>

  [<span class="hl-literal">2</span>,<span class="hl-literal">3</span>] <span class="hl-operator">/</span><span class="hl-operator">=</span> [<span class="hl-literal">3</span>,<span class="hl-literal">2</span>]  
<span class="hl-combinator">|</span> [<span class="hl-literal">2</span>] <span class="hl-operator">/</span><span class="hl-operator">=</span> [<span class="hl-literal">2</span>,<span class="hl-literal">2</span>]

<span class="hl-comment">{-
OUTPUT:
true
true
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.list.examples.notsets_link'), 'ref.data.list.examples.notsets_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.list.examples.cons_link" onclick="toggle(this, 'ref.data.list.examples.cons_content')">
					&minus;
				</a><span class="exampleCaption">Building Lists with Cons</span></div><div class="exampleBody" id="ref.data.list.examples.cons_content"><pre class="orc">
  <span class="hl-literal">3</span><span class="hl-operator">:</span>[]
<span class="hl-combinator">|</span> <span class="hl-literal">4</span><span class="hl-operator">:</span><span class="hl-literal">3</span><span class="hl-operator">:</span>[<span class="hl-literal">2</span>,<span class="hl-literal">1</span>]

<span class="hl-comment">{-
OUTPUT:PERMUTABLE:
[3]
[4, 3, 2, 1]
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.list.examples.cons_link'), 'ref.data.list.examples.cons_content'); }, 125);
</script></div><div class="section" title="1.5.7.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.list.links"></a>1.5.7.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.patterns.list" title="5.4.&nbsp;List Pattern">List pattern</a></p></li><li class="listitem"><p><a class="link" href="#ref.patterns.cons" title="5.7.&nbsp;Cons Pattern">Cons pattern</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list" title="11.4.&nbsp;list: Operations on lists.">Standard library list functions</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.each"><code class="code"><span class="hl-variable">each</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.map"><code class="code"><span class="hl-variable">map</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.reverse"><code class="code"><span class="hl-variable">reverse</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.filter"><code class="code"><span class="hl-variable">filter</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.head"><code class="code"><span class="hl-variable">head</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.tail"><code class="code"><span class="hl-variable">tail</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.init"><code class="code"><span class="hl-variable">init</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.last"><code class="code"><span class="hl-variable">last</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.empty"><code class="code"><span class="hl-variable">empty</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.index"><code class="code"><span class="hl-variable">index</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.append"><code class="code"><span class="hl-variable">append</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.foldl"><code class="code"><span class="hl-variable">foldl</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.foldl1"><code class="code"><span class="hl-variable">foldl1</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.foldr"><code class="code"><span class="hl-variable">foldr</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.foldr1"><code class="code"><span class="hl-variable">foldr1</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.afold"><code class="code"><span class="hl-variable">afold</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.cfold"><code class="code"><span class="hl-variable">cfold</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.zip"><code class="code"><span class="hl-variable">zip</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.unzip"><code class="code"><span class="hl-variable">unzip</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.concat"><code class="code"><span class="hl-variable">concat</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.length"><code class="code"><span class="hl-variable">length</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.take"><code class="code"><span class="hl-variable">take</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.drop"><code class="code"><span class="hl-variable">drop</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.member"><code class="code"><span class="hl-variable">member</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.merge"><code class="code"><span class="hl-variable">merge</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.mergeBy"><code class="code"><span class="hl-variable">mergeBy</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.mergeUnique"><code class="code"><span class="hl-variable">mergeUnique</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.mergeUniqueBy"><code class="code"><span class="hl-variable">mergeUniqueBy</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.sort"><code class="code"><span class="hl-variable">sort</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.sortBy"><code class="code"><span class="hl-variable">sortBy</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.sortUnique"><code class="code"><span class="hl-variable">sortUnique</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.sortUniqueBy"><code class="code"><span class="hl-variable">sortUniqueBy</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.group"><code class="code"><span class="hl-variable">group</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.groupBy"><code class="code"><span class="hl-variable">groupBy</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.range"><code class="code"><span class="hl-variable">range</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.rangeBy"><code class="code"><span class="hl-variable">rangeBy</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.any"><code class="code"><span class="hl-variable">any</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.all"><code class="code"><span class="hl-variable">all</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.sum"><code class="code"><span class="hl-variable">sum</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.product"><code class="code"><span class="hl-variable">product</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.and"><code class="code"><span class="hl-variable">and</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.or"><code class="code"><span class="hl-variable">or</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.minimum"><code class="code"><span class="hl-variable">minimum</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.maximum"><code class="code"><span class="hl-variable">maximum</span></code> function</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.lists" class="olink">Lists</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.idioms.lists" class="olink">Idioms: Lists</a></p></li></ul></div></div></div><div class="section" title="1.6.&nbsp;Tuples"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.data.tuple"></a>1.6.&nbsp;Tuples</h2></div></div></div><p>
A <a name="N106F5" class="indexterm"></a><em class="firstterm">tuple</em> is a sequence of at least two values. Orc does not have 0-tuples or 1-tuples.
</p><p>Tuples are intended to be used for sequences with a fixed length and varying element types,
whereas <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">lists</a> are intended to be used for sequences with varying length and a fixed element type.</p><div class="section" title="1.6.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.tuple.syntax"></a>1.6.1.&nbsp;Syntax</h3></div></div></div><p>
    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[3]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.tuple"><a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">Tuple</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">(</code> <a href="#ebnf.expression">Expression</a>  <code class="code">,</code> <span class="bold"><strong><span class="bold"><strong>&hellip;</strong></span></strong></span> <code class="code">,</code> <a href="#ebnf.expression">Expression</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">[&nbsp;<a href="#tuplesize">Tuple Size &ge; 2</a>&nbsp;]</td></tr></table></td></tr></table><p>
  </p></div><div class="section" title="1.6.2.&nbsp;Constructors"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.tuple.constructors"></a>1.6.2.&nbsp;Constructors</h3></div></div></div><p>
The tuple expression <code class="code">(</code> <em class="replaceable"><code>E<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>E<sub>n</sub></code></em> <code class="code">)</code> 
<a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> the tuple value <code class="code">(</code> <em class="replaceable"><code>v<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>v<sub>n</sub></code></em> <code class="code">)</code>
only if each expression <em class="replaceable"><code>E<sub>i</sub></code></em> <a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">deflates</a> to value <em class="replaceable"><code>v<sub>i</sub></code></em>.
Otherwise, it <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p></div><div class="section" title="1.6.3.&nbsp;Operations"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.tuple.operations"></a>1.6.3.&nbsp;Operations</h3></div></div></div><p>Notable tuple operations include:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Return the tuple element at position <em class="replaceable"><code>index</code></em>, starting from 0: <em class="replaceable"><code>tuple</code></em><code class="code">(</code><em class="replaceable"><code>index</code></em><code class="code">)</code></p></li><li class="listitem"><p>Return the first element of a pair: <code class="code"><span class="hl-site">fst</span>(</code><em class="replaceable"><code>tuple</code></em><code class="code">)</code></p></li><li class="listitem"><p>Return the second element of a pair: <code class="code"><span class="hl-site">snd</span>(</code><em class="replaceable"><code>tuple</code></em><code class="code">)</code></p></li></ul></div><p>
</p></div><div class="section" title="1.6.4.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.tuple.type"></a>1.6.4.&nbsp;Type</h3></div></div></div><p>
The type of a tuple value <code class="code">(</code><em class="replaceable"><code>v<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>v<sub>n</sub></code></em><code class="code">)</code>
where <em class="replaceable"><code>v<sub>i</sub></code></em> has type <em class="replaceable"><code>T<sub>i</sub></code></em>,
is a tuple type, written <code class="code">(</code><em class="replaceable"><code>T<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>T<sub>n</sub></code></em><code class="code">)</code>.
</p></div><div class="section" title="1.6.5.&nbsp;Java calls"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.tuple.javacalls"></a>1.6.5.&nbsp;Java calls</h3></div></div></div><p>Orc tuples don't correspond to any Java value, so if a tuple is passed to Java code, it will be as a <code class="code">java.lang.Object</code> of a type not specified here.</p></div><div class="section" title="1.6.6.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.tuple.examples"></a>1.6.6.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.tuple.examples.tupselect_link" onclick="toggle(this, 'ref.data.tuple.examples.tupselect_content')">
					&minus;
				</a><span class="exampleCaption">Tuple Selection</span></div><div class="exampleBody" id="ref.data.tuple.examples.tupselect_content"><pre class="orc">
<span class="hl-comment">{- Unzip a list of tuples into a tuple of lists -}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">squares</span> <span class="hl-operator">=</span> [(<span class="hl-literal">1</span>,<span class="hl-literal">1</span>), (<span class="hl-literal">2</span>,<span class="hl-literal">4</span>), (<span class="hl-literal">3</span>,<span class="hl-literal">9</span>), (<span class="hl-literal">4</span>,<span class="hl-literal">16</span>)]

<span class="hl-keyword">signal</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> ( <span class="hl-site">map</span>(<span class="hl-variable">fst</span>,<span class="hl-variable">squares</span>) , <span class="hl-site">map</span>(<span class="hl-variable">snd</span>,<span class="hl-variable">squares</span>) ) 

<span class="hl-comment">{-
OUTPUT:
([1, 2, 3, 4], [1, 4, 9, 16])
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.tuple.examples.tupselect_link'), 'ref.data.tuple.examples.tupselect_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.tuple.examples.forkjoin_link" onclick="toggle(this, 'ref.data.tuple.examples.forkjoin_content')">
					&minus;
				</a><span class="exampleCaption">Fork-Join</span></div><div class="exampleBody" id="ref.data.tuple.examples.forkjoin_content"><pre class="orc">
<span class="hl-comment">{- Print "fork", but wait at least 500ms before printing "join" -}</span>

( <span class="hl-site">Println</span>(<span class="hl-literal">"fork"</span>), <span class="hl-site">Rwait</span>(<span class="hl-literal">500</span>) ) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Println</span>(<span class="hl-literal">"join"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>

<span class="hl-comment">{-
OUTPUT:
fork
join
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.tuple.examples.forkjoin_link'), 'ref.data.tuple.examples.forkjoin_content'); }, 125);
</script></div><div class="section" title="1.6.7.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.tuple.links"></a>1.6.7.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.patterns.tuple" title="5.3.&nbsp;Tuple Pattern">Tuple pattern</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.state.fst"><code class="code"><span class="hl-variable">fst</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.state.snd"><code class="code"><span class="hl-variable">snd</span></code> function</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.tuples" class="olink">Tuples</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.idioms.forkjoin" class="olink">Fork-Join</a></p></li></ul></div></div></div><div class="section" title="1.7.&nbsp;Records"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.data.record"></a>1.7.&nbsp;Records</h2></div></div></div><p>
A <a name="N10808" class="indexterm"></a><em class="firstterm">record</em> is an unordered finite map from <a name="N1080F" class="indexterm"></a>keys to values. 
The empty record is written as <code class="code">{. .}</code>. 
</p><div class="section" title="1.7.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.record.syntax"></a>1.7.1.&nbsp;Syntax</h3></div></div></div><p>
    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[5]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.record"><a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">Record</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">{.</code> <a href="#ebnf.key">Key</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.expression">Expression</a>  <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code>  <a href="#ebnf.key">Key</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.expression">Expression</a> <code class="code">.}</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
  </p></div><div class="section" title="1.7.2.&nbsp;Constructors"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.record.constructors"></a>1.7.2.&nbsp;Constructors</h3></div></div></div><p>
A record is constructed from a comma-separated sequence of bindings enclosed by dotted braces. Each binding
associates a key with an expression.
</p><p>
The record expression <code class="code">{.</code> <em class="replaceable"><code>K<sub>0</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>E<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>K<sub>n</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>E<sub>n</sub></code></em> <code class="code">.}</code> 
<a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> the record <code class="code">{.</code> <em class="replaceable"><code>K<sub>0</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>v<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>K<sub>n</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>v<sub>n</sub></code></em> <code class="code">.}</code>
only if each expression <em class="replaceable"><code>E<sub>i</sub></code></em> <a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">deflates</a> to value <em class="replaceable"><code>v<sub>i</sub></code></em>. 
Otherwise, it <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p>Duplicate bindings for the same key are allowed, but only the rightmost binding will
be used in the resulting record value.</p></div><div class="section" title="1.7.3.&nbsp;Operations"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.record.operations"></a>1.7.3.&nbsp;Operations</h3></div></div></div><p>Notable record operations include:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Publish the value bound to key <em class="replaceable"><code>k</code></em> in record <em class="replaceable"><code>r</code></em> (a <a name="N108A2" class="indexterm"></a><a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">dot access</a>): <em class="replaceable"><code>r</code></em><code class="code">.</code><em class="replaceable"><code>k</code></em>
</p></li><li class="listitem"><p>
<a name="N108B3" class="indexterm"></a>Extend a record <em class="replaceable"><code>r</code></em> with new entries : <em class="replaceable"><code>r</code></em><code class="code"> <span class="hl-operator">+</span> </code><em class="replaceable"><code>s</code></em> 
</p></li></ul></div><p>
</p><p>
A record extension <em class="replaceable"><code>r</code></em><code class="code"> <span class="hl-operator">+</span> </code><em class="replaceable"><code>s</code></em> publishes a new record with all of the bindings of <em class="replaceable"><code>s</code></em>, 
plus all of the bindings in <em class="replaceable"><code>r</code></em> which do not bind keys mentioned in <em class="replaceable"><code>s</code></em>. 
In other words, <em class="replaceable"><code>s</code></em> overrides <em class="replaceable"><code>r</code></em>. 
Record extension is associative, but not commutative.
The expression 
<code class="code">{.</code> <em class="replaceable"><code>K<sub>0</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>E<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>K<sub>n</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>E<sub>n</sub></code></em> <code class="code">.}</code> 
is equivalent to the expression
<code class="code">{.</code> <em class="replaceable"><code>K<sub>0</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>E<sub>0</sub></code></em> <code class="code">.}</code> <code class="code"><span class="hl-operator">+</span></code> &hellip; <code class="code"><span class="hl-operator">+</span></code> <code class="code">{.</code> <em class="replaceable"><code>K<sub>n</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>E<sub>n</sub></code></em> <code class="code">.}</code>.
</p></div><div class="section" title="1.7.4.&nbsp;Special Keys"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.record.specialkeys"></a>1.7.4.&nbsp;Special Keys</h3></div></div></div><p>
There are two record keys that have special meanings:
</p><p> 
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
If a record has a binding for the <a name="N10939" class="indexterm"></a><code class="code"><span class="hl-variable">apply</span></code> key, then the record may be <a class="link" href="#ref.expressions.call.record" title="2.4.4.&nbsp;Record Application">called like a site or function</a>.
</p></li><li class="listitem"><p>
If a record has a binding for the <a name="N10946" class="indexterm"></a><code class="code"><span class="hl-variable">unapply</span></code> key, then the record may be <a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">used in a call pattern</a>.
</p></li></ul></div><p>
</p></div><div class="section" title="1.7.5.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.record.type"></a>1.7.5.&nbsp;Type</h3></div></div></div><p>
The type of a record value <code class="code">{.</code> <em class="replaceable"><code>K<sub>0</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>v<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>K<sub>n</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>v<sub>n</sub></code></em> <code class="code">.}</code>
where <em class="replaceable"><code>v<sub>i</sub></code></em> has type <em class="replaceable"><code>T<sub>i</sub></code></em>,
is a record type, written <code class="code">{.</code> <em class="replaceable"><code>K<sub>0</sub></code></em> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <em class="replaceable"><code>T<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>K<sub>n</sub></code></em> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <em class="replaceable"><code>T<sub>n</sub></code></em> <code class="code">.}</code>.
</p></div><div class="section" title="1.7.6.&nbsp;Java calls"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.record.javacalls"></a>1.7.6.&nbsp;Java calls</h3></div></div></div><p>Orc records do not correspond to any Java value, so if a record is passed to Java code, it will be as a <code class="code">java.lang.Object</code> of a type not specified here.</p></div><div class="section" title="1.7.7.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.record.examples"></a>1.7.7.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.record.examples.vecnorm_link" onclick="toggle(this, 'ref.data.record.examples.vecnorm_content')">
					&minus;
				</a><span class="exampleCaption">Normalizing Vectors</span></div><div class="exampleBody" id="ref.data.record.examples.vecnorm_content"><pre class="orc">
<span class="hl-comment">{- Normalize a given integer vector using records -}</span>

<span class="hl-keyword">def</span> <span class="hl-site">magnitude</span>(<span class="hl-variable">v</span>) <span class="hl-operator">=</span> 
  (<span class="hl-variable">v</span>.<span class="hl-variable">x</span> <span class="hl-operator">*</span> <span class="hl-variable">v</span>.<span class="hl-variable">x</span> <span class="hl-operator">+</span> 
   <span class="hl-variable">v</span>.<span class="hl-variable">y</span> <span class="hl-operator">*</span> <span class="hl-variable">v</span>.<span class="hl-variable">y</span> <span class="hl-operator">+</span> 
   <span class="hl-variable">v</span>.<span class="hl-variable">z</span> <span class="hl-operator">*</span> <span class="hl-variable">v</span>.<span class="hl-variable">z</span>) <span class="hl-operator">**</span> <span class="hl-literal">0.5</span>
  
<span class="hl-keyword">def</span> <span class="hl-site">norm</span>(<span class="hl-variable">v</span>) <span class="hl-operator">=</span> 
  <span class="hl-keyword">val</span> <span class="hl-variable">m</span> <span class="hl-operator">=</span> <span class="hl-site">magnitude</span>(<span class="hl-variable">v</span>)
  {. <span class="hl-variable">x</span> <span class="hl-operator">=</span> <span class="hl-variable">v</span>.<span class="hl-variable">x</span> <span class="hl-operator">/</span> <span class="hl-variable">m</span>, 
     <span class="hl-variable">y</span> <span class="hl-operator">=</span> <span class="hl-variable">v</span>.<span class="hl-variable">y</span> <span class="hl-operator">/</span> <span class="hl-variable">m</span>, 
     <span class="hl-variable">z</span> <span class="hl-operator">=</span> <span class="hl-variable">v</span>.<span class="hl-variable">z</span> <span class="hl-operator">/</span> <span class="hl-variable">m</span> .}
     
<span class="hl-keyword">val</span> <span class="hl-variable">velocity</span> <span class="hl-operator">=</span> {. <span class="hl-variable">x</span> <span class="hl-operator">=</span> <span class="hl-literal">3.0</span>, <span class="hl-variable">y</span> <span class="hl-operator">=</span> <span class="hl-literal">0.0</span>, <span class="hl-variable">z</span> <span class="hl-operator">=</span> <span class="hl-literal">4.0</span> .}      
<span class="hl-site">norm</span>(<span class="hl-variable">velocity</span>) 

<span class="hl-comment">{-
OUTPUT:
{. x = 0.6, y = 0, z = 0.8 .}
-}</span>

</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.record.examples.vecnorm_link'), 'ref.data.record.examples.vecnorm_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.record.examples.recexp_link" onclick="toggle(this, 'ref.data.record.examples.recexp_content')">
					&minus;
				</a><span class="exampleCaption">Record Extension</span></div><div class="exampleBody" id="ref.data.record.examples.recexp_content"><pre class="orc">
<span class="hl-comment">{- Add an alpha field to an rgb color record -}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">rgb</span> <span class="hl-operator">=</span> {. <span class="hl-variable">red</span> <span class="hl-operator">=</span> <span class="hl-literal">60</span>, <span class="hl-variable">green</span> <span class="hl-operator">=</span> <span class="hl-literal">230</span>, <span class="hl-variable">blue</span> <span class="hl-operator">=</span> <span class="hl-literal">5</span> .}
<span class="hl-keyword">val</span> <span class="hl-variable">rgba</span> <span class="hl-operator">=</span> <span class="hl-variable">rgb</span> <span class="hl-operator">+</span> {. <span class="hl-variable">alpha</span> <span class="hl-operator">=</span> <span class="hl-literal">128</span> .}
<span class="hl-variable">rgba</span>.<span class="hl-variable">alpha</span>

<span class="hl-comment">{-
OUTPUT:
128
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.record.examples.recexp_link'), 'ref.data.record.examples.recexp_content'); }, 125);
</script></div><div class="section" title="1.7.8.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.record.links"></a>1.7.8.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.patterns.record" title="5.5.&nbsp;Record Pattern">Record pattern</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">Dot access</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.records" class="olink">Records</a></p></li></ul></div></div></div><div class="section" title="1.8.&nbsp;Algebraic Data Types"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.data.datatype"></a>1.8.&nbsp;Algebraic Data Types</h2></div></div></div><p>An Orc <a name="N109EC" class="indexterm"></a><a name="N109F1" class="indexterm"></a><em class="firstterm">datatype</em> is an algebraic data type, or "tagged union".
A datatype value contains a sequence of values enclosed by a <a name="N109F8" class="indexterm"></a><em class="firstterm">tag</em>.
This value can be <a name="N109FF" class="indexterm"></a><a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">matched by a pattern</a>.
</p><p>
  Datatypes are defined by a <a class="link" href="#ref.declarations.type.datatype" title="4.6.4.&nbsp;Datatype"><code class="code"><span class="hl-keyword">type</span></code> declaration</a>.
  Each <a name="N10A0E" class="indexterm"></a><em class="firstterm">constructor</em> 
  in the declaration introduces a new tag, followed by a sequence of <span class="emphasis"><em>slots</em></span>.
  The <code class="code"><span class="hl-combinator">|</span></code> separator allows multiple constructors to be defined at the same time.
</p><p>
  In an untyped program, slots are written as <code class="code"><span class="hl-variable">_</span></code>. In a typed program, slots contain types.
</p><div class="section" title="1.8.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.datatype.syntax"></a>1.8.1.&nbsp;Syntax</h3></div></div></div><p>
    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[32]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.type.datatype"><a class="link" href="#ref.declarations.type.datatype" title="4.6.4.&nbsp;Datatype">DeclareDatatype</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">type</span></code> <a href="#ebnf.typevariable">TypeVariable</a> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.constructor">Constructor</a> <code class="code"><span class="hl-combinator">|</span></code> <span class="bold"><strong>&hellip;</strong></span> <code class="code"><span class="hl-combinator">|</span></code> <a href="#ebnf.constructor">Constructor</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[33]</td><td width="10%" valign="top" align="right"><a href="#ebnf.constructor"><a class="link" href="#ref.data.datatype.constructors" title="1.8.2.&nbsp;Constructors">Constructor</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		     <a href="#ebnf.variable">Variable</a> <code class="code">(</code> <a href="#ebnf.slot">Slot</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.slot">Slot</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[34]</td><td width="10%" valign="top" align="right"><a href="#ebnf.slot"><a class="link" href="#ref.data.datatype" title="1.8.&nbsp;Algebraic Data Types">Slot</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.type">Type</a>
		    &#10073; <code class="code"><span class="hl-variable">_</span></code> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
  </p></div><div class="section" title="1.8.2.&nbsp;Constructors"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.datatype.constructors"></a>1.8.2.&nbsp;Constructors</h3></div></div></div><p>
  Each constructor is a <a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">site</a>, which takes one argument for each slot
  of the constructor, and <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> a datatype value consisting of the sequence of argument
  values, tagged with that constructor's unique tag.
</p><p>
  Each constructor also has a corresponding <a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern"><code class="code"><span class="hl-variable">unapply</span></code> member</a>,
  which takes a value with that constructor's tag, removes the tag, and publishes the sequence of values as a tuple.
  If its argument does not have the tag, it halts. 
  Thus, constructors can be used in pattern matching. 
</p></div><div class="section" title="1.8.3.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.datatype.type"></a>1.8.3.&nbsp;Type</h3></div></div></div><p>
A datatype declaration defines a new <a name="N10A4E" class="indexterm"></a><em class="firstterm">sum type</em>.
</p><p>
Each constructor defined by the datatype has the <a class="link" href="#ref.data.closure.type" title="1.9.1.&nbsp;Type">function type</a> 
<code class="code"><a name="N10A5C" class="indexterm"></a><span class="hl-keyword">lambda</span></code> <code class="code">[</code> <em class="replaceable"><code>X<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>X<sub>n</sub></code></em> <code class="code">]</code><code class="code">(</code> <em class="replaceable"><code>T<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>T<sub>n</sub></code></em> <code class="code">)</code> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <em class="replaceable"><code>S</code></em>,
where <em class="replaceable"><code>X<sub>i</sub></code></em> are the <a class="link" href="#ref.types.polymorphism" title="9.2.&nbsp;Parametric Polymorphism">type parameters</a> of the datatype, <em class="replaceable"><code>T<sub>i</sub></code></em> are the types in the slots of the constructor,
and <em class="replaceable"><code>S</code></em> is the sum type.
</p><p>
Each constructor also has a corresponding <a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern"><code class="code"><span class="hl-variable">unapply</span></code> member</a>,
with type <code class="code"><span class="hl-keyword">lambda</span></code> <code class="code">[</code> <em class="replaceable"><code>X<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>X<sub>n</sub></code></em> <code class="code">]</code><code class="code">(</code><em class="replaceable"><code>S</code></em><code class="code">)</code> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <code class="code">(</code> <em class="replaceable"><code>T<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>T<sub>n</sub></code></em> <code class="code">)</code>.
</p><p>
A datatype declaration may define a <a name="N10AE5" class="indexterm"></a><em class="firstterm">recursive type</em>: the name of the type
may be used in the definition of the type itself. In fact, this is the only way to declare a recursive
type in Orc.
</p></div><div class="section" title="1.8.4.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.datatype.examples"></a>1.8.4.&nbsp;Examples</h3></div></div></div><p></p><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.datatypes.examples.enumeration_link" onclick="toggle(this, 'ref.data.datatypes.examples.enumeration_content')">
					&minus;
				</a><span class="exampleCaption">Enumeration</span></div><div class="exampleBody" id="ref.data.datatypes.examples.enumeration_content"><pre class="orc">
<span class="hl-comment">{- An enumeration, such as Java's enum, can be represented by a datatype
   whose constructors have no arguments. Note that an empty argument list,
   (), is still needed.
-}</span>
<span class="hl-keyword">type</span> <span class="hl-variable">objective</span> <span class="hl-operator">=</span> <span class="hl-site">Primary</span>() <span class="hl-combinator">|</span> <span class="hl-site">Secondary</span>() <span class="hl-combinator">|</span> <span class="hl-site">Tertiary</span>()

[<span class="hl-site">Secondary</span>(), <span class="hl-site">Tertiary</span>()]

<span class="hl-comment">{-
OUTPUT:
[Secondary(), Tertiary()]
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.datatypes.examples.enumeration_link'), 'ref.data.datatypes.examples.enumeration_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.datatypes.examples.shapes_link" onclick="toggle(this, 'ref.data.datatypes.examples.shapes_content')">
					&minus;
				</a><span class="exampleCaption">Geometric shape datatype</span></div><div class="exampleBody" id="ref.data.datatypes.examples.shapes_content"><pre class="orc">
<span class="hl-comment">{- A Shape type with three data constructors -}</span>
<span class="hl-keyword">type</span> <span class="hl-variable">Shape</span> <span class="hl-operator">=</span> <span class="hl-site">Rectangle</span>(<span class="hl-variable">_</span>, <span class="hl-variable">_</span>) <span class="hl-combinator">|</span> <span class="hl-site">Circle</span> (<span class="hl-variable">_</span>)

<span class="hl-keyword">def</span> <span class="hl-site">area</span>(<span class="hl-site">Rectangle</span>(<span class="hl-variable">width</span>,<span class="hl-variable">height</span>)) <span class="hl-operator">=</span> <span class="hl-variable">width</span> <span class="hl-operator">*</span> <span class="hl-variable">height</span>
<span class="hl-keyword">def</span> <span class="hl-site">area</span>(<span class="hl-site">Circle</span>(<span class="hl-variable">radius</span>)) <span class="hl-operator">=</span> <span class="hl-literal">3.1415926535897</span> <span class="hl-operator">*</span> <span class="hl-variable">radius</span> <span class="hl-operator">**</span> <span class="hl-literal">2</span>

<span class="hl-site">area</span>(<span class="hl-site">Rectangle</span>(<span class="hl-literal">2</span>, <span class="hl-literal">3</span>)) <span class="hl-combinator">|</span> <span class="hl-site">area</span>(<span class="hl-site">Circle</span>(<span class="hl-literal">1</span>))

<span class="hl-comment">{-
OUTPUT:PERMUTABLE:
6
3.14159265358970
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.datatypes.examples.shapes_link'), 'ref.data.datatypes.examples.shapes_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.datatypes.examples.binarytree_link" onclick="toggle(this, 'ref.data.datatypes.examples.binarytree_content')">
					&minus;
				</a><span class="exampleCaption">Binary tree node</span></div><div class="exampleBody" id="ref.data.datatypes.examples.binarytree_content"><pre class="orc">
<span class="hl-comment">{- This is a binary tree datatype
   Leaf nodes carry integer values
-}</span>

<span class="hl-keyword">type</span> <span class="hl-variable">Node</span> <span class="hl-operator">=</span> <span class="hl-site">LeafNode</span>(<span class="hl-variable">Integer</span>) <span class="hl-combinator">|</span> <span class="hl-site">InnerNode</span>(<span class="hl-variable">Node</span>, <span class="hl-variable">Node</span>)

<span class="hl-comment">{- Constructing a simple tree
    /\
   1 /\
    2  3
-}</span>
<span class="hl-site">InnerNode</span>(<span class="hl-site">LeafNode</span>(<span class="hl-literal">1</span>),<span class="hl-site">InnerNode</span>(<span class="hl-site">LeafNode</span>(<span class="hl-literal">2</span>),<span class="hl-site">LeafNode</span>(<span class="hl-literal">3</span>)))

<span class="hl-comment">{-
OUTPUT:
InnerNode(LeafNode(1), InnerNode(LeafNode(2), LeafNode(3)))
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.datatypes.examples.binarytree_link'), 'ref.data.datatypes.examples.binarytree_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.datatypes.examples.binarytreepoly_link" onclick="toggle(this, 'ref.data.datatypes.examples.binarytreepoly_content')">
					&minus;
				</a><span class="exampleCaption">Polymorphic binary tree node</span></div><div class="exampleBody" id="ref.data.datatypes.examples.binarytreepoly_content"><pre class="orc">
<span class="hl-comment">{- This is a binary tree datatype
   Leaf nodes carry values of type T
-}</span>

<span class="hl-keyword">type</span> <span class="hl-site">Node</span>[<span class="hl-variable">T</span>] <span class="hl-operator">=</span> <span class="hl-site">LeafNode</span>(<span class="hl-variable">T</span>) <span class="hl-combinator">|</span> <span class="hl-site">InnerNode</span>(<span class="hl-variable">Node</span>, <span class="hl-variable">Node</span>)

<span class="hl-comment">{- Constructing a simple tree
      /\
   "A" /\
    "B"  "C"
-}</span>
<span class="hl-site">InnerNode</span>[<span class="hl-variable">String</span>](<span class="hl-site">LeafNode</span>(<span class="hl-literal">"A"</span>),<span class="hl-site">InnerNode</span>(<span class="hl-site">LeafNode</span>(<span class="hl-literal">"B"</span>),<span class="hl-site">LeafNode</span>(<span class="hl-literal">"C"</span>)))

<span class="hl-comment">{-
OUTPUT:
InnerNode(LeafNode("A"), InnerNode(LeafNode("B"), LeafNode("C")))
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.datatypes.examples.binarytreepoly_link'), 'ref.data.datatypes.examples.binarytreepoly_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.datatypes.examples.option_link" onclick="toggle(this, 'ref.data.datatypes.examples.option_content')">
					&minus;
				</a><span class="exampleCaption">Orc built-in Option type</span></div><div class="exampleBody" id="ref.data.datatypes.examples.option_content"><pre class="programlisting">
<span class="hl-comment">{- A datatype for optional values of type T -}</span>

<span class="hl-keyword">type</span> <span class="hl-site">Option</span>[<span class="hl-variable">T</span>] <span class="hl-operator">=</span> <span class="hl-site">Some</span>(<span class="hl-variable">T</span>) <span class="hl-combinator">|</span> <span class="hl-variable">None</span>

<span class="hl-comment">{-
NONRUNNABLE
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.datatypes.examples.option_link'), 'ref.data.datatypes.examples.option_content'); }, 125);
</script></div><div class="section" title="1.8.5.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.datatype.links"></a>1.8.5.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">Call pattern</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.type" title="4.6.&nbsp;type: Declare Type"><code class="code"><span class="hl-keyword">type</span></code>:  Declare Type</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.datatypes" class="olink">Datatypes</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div><div class="section" title="1.9.&nbsp;Closures"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.data.closure"></a>1.9.&nbsp;Closures</h2></div></div></div><p>
Functions are first-class values in Orc. <a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function">Defining a function</a> creates a special value called a 
<a name="N10B44" class="indexterm"></a><em class="firstterm">closure</em>; the defined name of the function is a variable and the value bound to it
 is the closure. A closure can be <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">published</a>, passed as an argument to a <a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">call</a>, 
 or put into a data structure, just like any other value.
</p><p>
Since all declarations &mdash; including function declarations &mdash; are lexically scoped, these closures are
<a class="link" href="http://en.wikipedia.org/wiki/Lexical_closure" target="_top">lexical closures</a>. 
When a closure is created, if the body of the function contains any variables other than the formal parameters,
closure creation <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocks</a> until those variables are bound, and then the values bound to those variables are stored 
as part of the closure. Then, when the closure is <a class="link" href="#ref.expressions.call.function" title="2.4.3.&nbsp;Function Calls">called</a>, the evaluation of the function body uses those stored bindings. 
</p><div class="section" title="1.9.1.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.closure.type"></a>1.9.1.&nbsp;Type</h3></div></div></div><p>
		The type of a closure is a <a name="N10B67" class="indexterm"></a><em class="firstterm">function type</em> <code class="code"><a name="N10B6F" class="indexterm"></a><span class="hl-keyword">lambda</span></code> <code class="code">[</code><em class="replaceable"><code>X<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>X<sub>m</sub></code></em><code class="code">]</code><code class="code">(</code><em class="replaceable"><code>T<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>T<sub>n</sub></code></em><code class="code">)</code> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <em class="replaceable"><code>R</code></em>,
		where <em class="replaceable"><code>T<sub>i</sub></code></em> are the argument types of the closure, <em class="replaceable"><code>R</code></em> is its return type,
		and <em class="replaceable"><code>X<sub>j</sub></code></em> are the type parameters if the function is <a class="link" href="#ref.types.polymorphism" title="9.2.&nbsp;Parametric Polymorphism">polymorphic</a>.
		This type is <a class="link" href="#ref.types.typeinfo.function" title="9.4.2.&nbsp;Function Type Information">derived</a> from the original definition of the function.
	</p></div><div class="section" title="1.9.2.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.closure.examples"></a>1.9.2.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.closure.examples.stagedadd_link" onclick="toggle(this, 'ref.data.closure.examples.stagedadd_content')">
					&minus;
				</a><span class="exampleCaption">Staged Addition</span></div><div class="exampleBody" id="ref.data.closure.examples.stagedadd_content"><pre class="orc">
<span class="hl-comment">{- Create a closure using inc, and then apply it -}</span>

<span class="hl-keyword">def</span> <span class="hl-site">inc</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span> 
  <span class="hl-keyword">def</span> <span class="hl-site">addnto</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-variable">x</span> <span class="hl-operator">+</span> <span class="hl-variable">n</span>
  <span class="hl-variable">addnto</span>
  
<span class="hl-keyword">val</span> <span class="hl-variable">f</span> <span class="hl-operator">=</span> <span class="hl-site">inc</span>(<span class="hl-literal">3</span>)
<span class="hl-site">f</span>(<span class="hl-literal">4</span>)

<span class="hl-comment">{-
OUTPUT:
7
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.closure.examples.stagedadd_link'), 'ref.data.closure.examples.stagedadd_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.closure.examples.onetwosum_link" onclick="toggle(this, 'ref.data.closure.examples.onetwosum_content')">
					&minus;
				</a><span class="exampleCaption">One Two Sum</span></div><div class="exampleBody" id="ref.data.closure.examples.onetwosum_content"><pre class="orc">
<span class="hl-comment">{- The function triple() is used as a closure -}</span>

<span class="hl-keyword">def</span> <span class="hl-site">onetwosum</span>(<span class="hl-variable">f</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-literal">1</span>) <span class="hl-operator">+</span> <span class="hl-site">f</span>(<span class="hl-literal">2</span>)
<span class="hl-keyword">def</span> <span class="hl-site">triple</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-variable">x</span> <span class="hl-operator">*</span> <span class="hl-literal">3</span>
<span class="hl-site">onetwosum</span>(<span class="hl-variable">triple</span>)

<span class="hl-comment">{-
OUTPUT:
9
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.closure.examples.onetwosum_link'), 'ref.data.closure.examples.onetwosum_content'); }, 125);
</script></div><div class="section" title="1.9.3.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.closure.links"></a>1.9.3.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function"><code class="code"><span class="hl-keyword">def</span></code>: Define Function</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.lambda" title="2.8.&nbsp;lambda"><code class="code"><span class="hl-keyword">lambda</span></code> Expression</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.call.function" title="2.4.3.&nbsp;Function Calls">Function Calls</a></p></li><li class="listitem"><p><a class="link" href="#ref.types.typeinfo.function" title="9.4.2.&nbsp;Function Type Information">Adding Type Information to Functons</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.closures" class="olink">First-Class Functions</a></p></li></ul></div></div></div><div class="section" title="1.10.&nbsp;Mutable State"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.data.mutable"></a>1.10.&nbsp;Mutable State</h2></div></div></div><p>A mutable object is a value on which operations may
yield different results when called at different times.
Mutable objects are common in imperative programming languages.
They reflect the concept of a storage location in a von Neumann style architecture.</p><p>Most of Orc's value types are immutable. The <a class="link" href="#ref.stdlib.state" title="11.6.&nbsp;state: General-purpose supplemental data structures.">standard library</a> provides the following kinds of mutable objects:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="code"><a name="N10C03" class="indexterm"></a><span class="hl-variable">Ref</span></code>: Reference to a value that can be changed</p></li><li class="listitem"><p><code class="code"><a name="N10C0B" class="indexterm"></a><span class="hl-variable">Cell</span></code>: A write-once <code class="code"><span class="hl-variable">Ref</span></code></p></li><li class="listitem"><p><code class="code"><span class="hl-variable">Channel</span></code>: A queue of values</p></li><li class="listitem"><p><code class="code"><span class="hl-variable">BoundedChannel</span></code>: A queue of values with a maximum size</p></li><li class="listitem"><p><code class="code"><span class="hl-variable">Array</span></code>: A mutable integer-indexed sequence of values</p></li><li class="listitem"><p><code class="code"><span class="hl-variable">Counter</span></code>: A value that can be incremented and decremented atomically</p></li><li class="listitem"><p><code class="code"><span class="hl-variable">Dictionary</span></code>: A mutable dynamic record</p></li></ul></div><p>
</p><div class="section" title="1.10.1.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.mutable.links"></a>1.10.1.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.stdlib.state.Ref"><code class="code"><span class="hl-variable">Ref</span></code> site</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.state.Cell"><code class="code"><span class="hl-variable">Cell</span></code> site</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.state.Channel"><code class="code"><span class="hl-variable">Channel</span></code> site</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.state.BoundedChannel"><code class="code"><span class="hl-variable">BoundedChannel</span></code> site</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.state.Array"><code class="code"><span class="hl-variable">Array</span></code> site</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.state.Counter"><code class="code"><span class="hl-variable">Counter</span></code> site</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.state.Dictionary"><code class="code"><span class="hl-variable">Dictionary</span></code> site</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.idioms.mutable" class="olink">Mutable References</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.idioms.channels" class="olink">Channels</a></p></li></ul></div></div></div><div class="section" title="1.11.&nbsp;External Values"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.data.external"></a>1.11.&nbsp;External Values</h2></div></div></div><p>Orc's value set is "open" &mdash; any value returned from a <a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">site call</a> can be used in an Orc execution.
For example, Orc programs running on a Java virtual machine (JVM) can <a class="link" href="#ref.sites.java" title="6.2.&nbsp;Java sites">interact with any Java object</a>.</p><div class="section" title="1.11.1.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.external.types"></a>1.11.1.&nbsp;Type</h3></div></div></div><p>
    External values usually have types that cannot be represented using Orc's primitive types or structured types.
    An <a class="link" href="#ref.declarations.type.import" title="4.6.3.&nbsp;Type Import"><code class="code"><span class="hl-keyword">import</span> <span class="hl-keyword">type</span></code> declaration</a> may be used to import such a type into the Orc type system.
  </p></div><div class="section" title="1.11.2.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.external.examples"></a>1.11.2.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.external.examples.javabitset_link" onclick="toggle(this, 'ref.data.external.examples.javabitset_content')">
					&minus;
				</a><span class="exampleCaption">Java BitSet</span></div><div class="exampleBody" id="ref.data.external.examples.javabitset_content"><pre class="orc">
<span class="hl-comment">{- Using the Java class java.util.BitSet,
   construct a new instance, and then
   set bits 2 and 4 in the BitSet instance
-}</span>

<span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">BitSet</span> <span class="hl-operator">=</span> <span class="hl-literal">"java.util.BitSet"</span>

<span class="hl-site">BitSet</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">b</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">b</span>.<span class="hl-site">set</span>(<span class="hl-literal">2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">b</span>.<span class="hl-site">set</span>(<span class="hl-literal">4</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">b</span>.<span class="hl-site">toString</span>()

<span class="hl-comment">{-
OUTPUT:
"{2, 4}"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.external.examples.javabitset_link'), 'ref.data.external.examples.javabitset_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.data.external.examples.javahashmap_link" onclick="toggle(this, 'ref.data.external.examples.javahashmap_content')">
					&minus;
				</a><span class="exampleCaption">Java HashMap</span></div><div class="exampleBody" id="ref.data.external.examples.javahashmap_content"><pre class="orc">
<span class="hl-comment">{- Using the Java class java.util.HashMap, construct a new instance, 
   and then put and get some entries
-}</span>

<span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">HashMap</span> <span class="hl-operator">=</span> <span class="hl-literal">"java.util.HashMap"</span>

<span class="hl-site">HashMap</span>[<span class="hl-variable">String</span>, <span class="hl-variable">String</span>]() <span class="hl-combinator">&gt;</span><span class="hl-variable">m</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">m</span>.<span class="hl-site">put</span>(<span class="hl-literal">"Mickey"</span>, <span class="hl-literal">"Minnie"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> 
<span class="hl-variable">m</span>.<span class="hl-site">put</span>(<span class="hl-literal">"Donald"</span>, <span class="hl-literal">"Daisy"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">m</span>.<span class="hl-site">get</span>(<span class="hl-literal">"Mickey"</span>)

<span class="hl-comment">{-
OUTPUT:
"Minnie"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.data.external.examples.javahashmap_link'), 'ref.data.external.examples.javahashmap_content'); }, 125);
</script></div><div class="section" title="1.11.3.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.data.external.links"></a>1.11.3.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.sites.java" title="6.2.&nbsp;Java sites">Java Sites</a></p></li><li class="listitem"><p><a class="link" href="#ref.sites.web" title="6.3.&nbsp;Web Services">Web Services</a></p></li><li class="listitem"><p><a class="link" href="#ref.sites.custom" title="6.4.&nbsp;Custom sites">Custom Sites</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.site.type" title="4.4.3.&nbsp;Type">Typing of Sites</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.import" class="olink">Importing Resources</a></p></li></ul></div></div></div></div><div lang="" class="chapter" title="Chapter&nbsp;2.&nbsp;Expressions"><div class="titlepage"><div><div><h2 class="title"><a name="ref.expressions"></a>Chapter&nbsp;2.&nbsp;Expressions</h2></div></div></div><p>
	Orc <a name="N10CD2" class="indexterm"></a>expressions are executed, rather than evaluated.
	An execution may call external services and <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a> some number of values (possibly zero).
	Different executions of the same expression may have completely different
	behaviors; they may call different services, may receive different
	responses from the same site, and may publish different values.  This
	chapter shows how various expressions are executed in Orc.
</p><div class="section" title="2.1.&nbsp;Literal Value"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.expressions.literal"></a>2.1.&nbsp;Literal Value</h2></div></div></div><p>
    A literal value may occur on its own as an expression. 
    Execution of a literal value immediately <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> that value and then <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a>.
    </p><div class="section" title="2.1.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.literal.syntax"></a>2.1.1.&nbsp;Syntax</h3></div></div></div><p>
		    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[51]</td><td width="10%" valign="top" align="right"><a href="#ebnf.literal">Literal</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<a href="#ebnf.literal.signal">SignalLiteral</a>
				<br>&#10073; <a href="#ebnf.literal.boolean">BooleanLiteral</a>
				<br>&#10073; <a href="#ebnf.literal.number">NumberLiteral</a>
				<br>&#10073; <a href="#ebnf.literal.string">CharacterStringLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-literal">null</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		  </p></div><div class="section" title="2.1.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.literal.type"></a>2.1.2.&nbsp;Type</h3></div></div></div><p>
		    The type for each literal value is given in the <a class="link" href="#ref.data" title="Chapter&nbsp;1.&nbsp;Data Values">Data Values</a> chapter.		     
		  </p></div><div class="section" title="2.1.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.literal.examples"></a>2.1.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.literal.examples.magritte_link" onclick="toggle(this, 'ref.expressions.literal.examples.magritte_content')">
					&minus;
				</a><span class="exampleCaption">String Literal as Expression</span></div><div class="exampleBody" id="ref.expressions.literal.examples.magritte_content"><pre class="orc">
<span class="hl-comment">{-
  http://en.wikipedia.org/wiki/The_Treachery_of_Images
-}</span>

<span class="hl-literal">"ceci n'est pas une |"</span>

<span class="hl-comment">{-
OUTPUT:
"ceci n'est pas une |"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.literal.examples.magritte_link'), 'ref.expressions.literal.examples.magritte_content'); }, 125);
</script></div><div class="section" title="2.1.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.literal.links"></a>2.1.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.data" title="Chapter&nbsp;1.&nbsp;Data Values">Data Values</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publication</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.values" class="olink">Literal Values</a></p></li></ul></div></div></div><div class="section" title="2.2.&nbsp;Variable"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.expressions.variable"></a>2.2.&nbsp;Variable</h2></div></div></div><p>
    A variable may occur on its own as an expression. 
    Execution of a variable <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> the value bound to that variable, and then <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a>.
    </p><p>
    The variable might be executed before it is bound to a value. 
    This could occur if the variable was introduced by a <a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator">pruning combinator</a>,
    or if it is the name of a <a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function">defined function</a> whose body contains unbound variables.
    In this case, execution of that variable <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocks</a> until the variable is bound.  
    </p><p>
    If the variable was introduced by a pruning combinator, 
    and the right side of that combinator halts before the variable becomes bound, 
    execution of the variable also halts.
    </p><div class="section" title="2.2.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.variable.syntax"></a>2.2.1.&nbsp;Syntax</h3></div></div></div><p>
		    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[59]</td><td width="10%" valign="top" align="right"><a href="#ebnf.variable">Variable</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a class="link" href="#ref.syntax.lexical.tokens.identifier" title="10.2.2.1.&nbsp;Identifier">Identifier</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		  </p></div><div class="section" title="2.2.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.variable.type"></a>2.2.2.&nbsp;Type</h3></div></div></div><p>
		    The type of a variable expression is the type given to it by the current <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">typing context</a>.		     
		  </p></div><div class="section" title="2.2.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.variable.examples"></a>2.2.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.variable.examples.blockonvar_link" onclick="toggle(this, 'ref.expressions.variable.examples.blockonvar_content')">
					&minus;
				</a><span class="exampleCaption">Blocking on a Variable</span></div><div class="exampleBody" id="ref.expressions.variable.examples.blockonvar_content"><pre class="orc">
<span class="hl-comment">{-
  Publish the values bound to two variables.
  One of the bindings occurs only after some time has passed,
  so execution of that variable blocks.
-}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">x</span> <span class="hl-operator">=</span> <span class="hl-literal">0</span>
<span class="hl-keyword">val</span> <span class="hl-variable">y</span> <span class="hl-operator">=</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">1</span>

<span class="hl-variable">x</span> <span class="hl-combinator">|</span> <span class="hl-variable">y</span>

<span class="hl-comment">{-
OUTPUT:
0
1
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.variable.examples.blockonvar_link'), 'ref.expressions.variable.examples.blockonvar_content'); }, 125);
</script></div><div class="section" title="2.2.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.variable.links"></a>2.2.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publication</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">Halting</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">Blocking</a></p></li><li class="listitem"><p><a class="link" href="#ref.combinators" title="Chapter&nbsp;3.&nbsp;Combinators">Combinators</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.combinators.sequential" class="olink">Sequential Combinator</a></p></li></ul></div></div></div><div class="section" title="2.3.&nbsp;stop"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.expressions.stop"></a>2.3.&nbsp;<code class="code"><span class="hl-keyword">stop</span></code></h2></div></div></div><p>
		The <code class="code"><a name="N10D9A" class="indexterm"></a><span class="hl-keyword">stop</span></code> expression does nothing. 
		Execution of <code class="code"><span class="hl-keyword">stop</span></code> immediately <a name="N10DA2" class="indexterm"></a><a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
		</p><div class="section" title="2.3.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.stop.syntax"></a>2.3.1.&nbsp;Syntax</h3></div></div></div><p>
		    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[2]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.stop"><a class="link" href="#ref.expressions.stop" title="2.3.&nbsp;stop">Stop</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">stop</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		  </p></div><div class="section" title="2.3.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.stop.type"></a>2.3.2.&nbsp;Type</h3></div></div></div><p>
		    <code class="code"><span class="hl-keyword">stop</span></code> has type <a class="link" href="#ref.types.subtyping.Bot" title="9.3.2.&nbsp;Bot"><code class="code"><span class="hl-variable">Bot</span></code></a>. 
		  </p></div><div class="section" title="2.3.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.stop.examples"></a>2.3.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.stop.examples.printsilent_link" onclick="toggle(this, 'ref.expressions.stop.examples.printsilent_content')">
					&minus;
				</a><span class="exampleCaption">Print Silently</span></div><div class="exampleBody" id="ref.expressions.stop.examples.printsilent_content"><pre class="orc">
<span class="hl-comment">{-  
  Print three numbers in sequence, and then halt without publishing
  a signal from Println. 
-}</span>

<span class="hl-site">Println</span>(<span class="hl-literal">"1"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> 
<span class="hl-site">Println</span>(<span class="hl-literal">"2"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> 
<span class="hl-site">Println</span>(<span class="hl-literal">"3"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-keyword">stop</span>

<span class="hl-comment">{-
OUTPUT:
1
2
3
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.stop.examples.printsilent_link'), 'ref.expressions.stop.examples.printsilent_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.stop.examples.squareroot_link" onclick="toggle(this, 'ref.expressions.stop.examples.squareroot_content')">
					&minus;
				</a><span class="exampleCaption">Square Root</span></div><div class="exampleBody" id="ref.expressions.stop.examples.squareroot_content"><pre class="orc">
<span class="hl-comment">{-  Define a square root function which halts silently if 
    its argument is negative.
-}</span>

<span class="hl-keyword">def</span> <span class="hl-site">squareroot</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span> <span class="hl-keyword">if</span> (<span class="hl-variable">n</span> <span class="hl-operator">&lt;:</span> <span class="hl-literal">0</span>) <span class="hl-keyword">then</span> <span class="hl-keyword">stop</span> <span class="hl-keyword">else</span> (<span class="hl-variable">n</span> <span class="hl-operator">**</span> <span class="hl-literal">0.5</span>)

<span class="hl-site">squareroot</span>(<span class="hl-operator">-</span><span class="hl-literal">1</span>)

<span class="hl-comment">{-
OUTPUT:
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.stop.examples.squareroot_link'), 'ref.expressions.stop.examples.squareroot_content'); }, 125);
</script></div><div class="section" title="2.3.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.stop.links"></a>2.3.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">Halting</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">Silence</a></p></li><li class="listitem"><p><a class="link" href="#ref.types.subtyping.Bot" title="9.3.2.&nbsp;Bot"><code class="code"><span class="hl-variable">Bot</span></code></a></p></li><li class="listitem"><p><a class="link" href="#ref.combinators.otherwise" title="3.4.&nbsp;Otherwise Combinator">Otherwise combinator</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.combinators.sequential" class="olink">Sequential Combinator</a></p></li></ul></div></div></div><div class="section" title="2.4.&nbsp;Site and Function Calls"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.expressions.call"></a>2.4.&nbsp;Site and Function Calls</h2></div></div></div><p>
			A <a name="N10E08" class="indexterm"></a><em class="firstterm">call</em> is an invocation of a <a name="N10E0F" class="indexterm"></a><em class="firstterm">target</em> expression on a sequence of <a name="N10E16" class="indexterm"></a><em class="firstterm">argument</em> expressions. 
			First, the target expression is <a name="N10E1D" class="indexterm"></a><a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">deflated</a> to a value <em class="replaceable"><code>g</code></em>.
			If <em class="replaceable"><code>g</code></em> is a <a class="link" href="#ref.sites" title="Chapter&nbsp;6.&nbsp;Sites and Services">site</a>, then the call is a <a name="N10E2E" class="indexterm"></a><em class="firstterm">site call</em>. 
			If <em class="replaceable"><code>g</code></em> is a <a class="link" href="#ref.data.closure" title="1.9.&nbsp;Closures">closure</a>, then the call is a <a name="N10E3C" class="indexterm"></a><em class="firstterm">function call</em>.
			If <em class="replaceable"><code>g</code></em> is a <a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">record</a>, then the call is a <a name="N10E4A" class="indexterm"></a><em class="firstterm">record application</em>.
			Each of these cases is described below.		
			</p><div class="section" title="2.4.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.call.syntax"></a>2.4.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[6]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.call"><a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">Call</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <a href="#ebnf.typearguments">TypeArguments</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.arguments">Arguments</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[68]</td><td width="10%" valign="top" align="right"><a href="#ebnf.arguments">Arguments</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">(</code> <a href="#ebnf.expression">Expression</a>  <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.expression">Expression</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[69]</td><td width="10%" valign="top" align="right"><a href="#ebnf.typearguments">TypeArguments</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">[</code> <a href="#ebnf.type">Type</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.type">Type</a> <code class="code">]</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="2.4.2.&nbsp;Site Calls"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.call.site"></a>2.4.2.&nbsp;Site Calls</h3></div></div></div><p>
	    A <a name="N10E69" class="indexterm"></a>site call is <a name="N10E6D" class="indexterm"></a><em class="firstterm">strict</em>.
	    Execution of a site call <em class="replaceable"><code>g</code></em><code class="code">(</code> <em class="replaceable"><code>E<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>E<sub>n</sub></code></em> <code class="code">)</code>
	    deflates each expression <em class="replaceable"><code>E<sub>i</sub></code></em> to a value <em class="replaceable"><code>v<sub>i</sub></code></em>.
	    The site <em class="replaceable"><code>g</code></em> is then invoked with arguments <em class="replaceable"><code>v<sub>i</sub></code></em>.
	  </p><p>
	    A site call <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> at most one value. Once it publishes a value, it immediately <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a>.
	    If the site is <a class="link" href="#ref.concepts.helpful" title="8.5.&nbsp;Helpful Sites">helpful</a>, the call may halt without publishing a value.
	  </p></div><div class="section" title="2.4.3.&nbsp;Function Calls"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.call.function"></a>2.4.3.&nbsp;Function Calls</h3></div></div></div><p>
	    Unlike a site call, a <a name="N10EB2" class="indexterm"></a>function call is <a name="N10EB6" class="indexterm"></a><em class="firstterm">lenient</em>. 
	    <a class="link" href="#ref.declarations.def.execution" title="4.2.2.&nbsp;Function Execution">Execution of a function call</a> <em class="replaceable"><code>g</code></em><code class="code">(</code> <em class="replaceable"><code>E<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>E<sub>n</sub></code></em> <code class="code">)</code>
	    deflates each expression <em class="replaceable"><code>E<sub>i</sub></code></em>, but does not wait for values to be published; instead, the body of the function executes immediately.
	    
	  </p><p>
	    Since a function call executes an arbitrary expression, it may <a name="N10EE0" class="indexterm"></a>publish any number of values.
	  </p></div><div class="section" title="2.4.4.&nbsp;Record Application"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.call.record"></a>2.4.4.&nbsp;Record Application</h3></div></div></div><p>
	    A record may be called if it has a member named <a name="N10EEA" class="indexterm"></a><code class="code"><span class="hl-variable">apply</span></code>.
	    In this case, the value <em class="replaceable"><code>v</code></em> bound to <code class="code"><span class="hl-variable">apply</span></code> in the record is retrieved,
	    and then <em class="replaceable"><code>v</code></em> is called on the arguments.
	    <em class="replaceable"><code>v</code></em> may be a site, a closure, or even another record.
	    The call behaves exactly as if <em class="replaceable"><code>v</code></em> had been the original call target. 
	  </p><p>
	    If a record without an <code class="code"><span class="hl-variable">apply</span></code> member is called, the call halts <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
	  </p></div><div class="section" title="2.4.5.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.call.type"></a>2.4.5.&nbsp;Type</h3></div></div></div><p>
	      In addition to argument expressions, a call may also have type arguments <em class="replaceable"><code>A<sub>j</sub></code></em>, since the target
	      may have a <a class="link" href="#ref.types.polymorphism" title="9.2.&nbsp;Parametric Polymorphism">polymorphic</a> type.     
	    </p><p>
	      Suppose the target expression <em class="replaceable"><code>E</code></em> has type <em class="replaceable"><code>S</code></em>,
	      and each argument expression <em class="replaceable"><code>E<sub>i</sub></code></em> has type <em class="replaceable"><code>S<sub>i</sub></code></em>.
	    </p><p>
	    	If <em class="replaceable"><code>S</code></em> is a <a class="link" href="#ref.data.closure.type" title="1.9.1.&nbsp;Type">function type</a> <code class="code"><a name="N10F34" class="indexterm"></a><span class="hl-keyword">lambda</span></code> <code class="code">[</code><em class="replaceable"><code>X<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>X<sub>m</sub></code></em><code class="code">]</code><code class="code">(</code><em class="replaceable"><code>T<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>T<sub>n</sub></code></em><code class="code">)</code> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <em class="replaceable"><code>R</code></em>,
	    	then there must be exactly as many arguments as <a name="N10F66" class="indexterm"></a>argument types, 
	    	and each argument type <em class="replaceable"><code>S<sub>i</sub></code></em> must be a <a class="link" href="#ref.types.subtyping" title="9.3.&nbsp;Subtyping">subtype</a> of the corresponding type <em class="replaceable"><code>T<sub>i</sub></code></em> (with all <em class="replaceable"><code>X<sub>j</sub></code></em> replaced by <em class="replaceable"><code>A<sub>j</sub></code></em>).
	    	Then the type of the whole call is <em class="replaceable"><code>R</code></em>, the return type.	    	  
	    </p><p>
	      If <em class="replaceable"><code>S</code></em> is the type of a site, <em class="replaceable"><code>S</code></em> itself behaves like a site during typehcecking.
	      The typechecker passes the argument types <em class="replaceable"><code>S<sub>i</sub></code></em> and type arguments <em class="replaceable"><code>A<sub>j</sub></code></em> to <em class="replaceable"><code>S</code></em>,
	      which then responds with the return type <em class="replaceable"><code>R</code></em>, or indicates that the argument types are not appropriate.
	      If <em class="replaceable"><code>S</code></em> does respond, then the type of the call expression is the return type <em class="replaceable"><code>R</code></em>.
	    </p></div><div class="section" title="2.4.6.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.call.examples"></a>2.4.6.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.call.examples.sites_are_strict_link" onclick="toggle(this, 'ref.expressions.call.examples.sites_are_strict_content')">
					&minus;
				</a><span class="exampleCaption">Sites are Strict</span></div><div class="exampleBody" id="ref.expressions.call.examples.sites_are_strict_content"><pre class="orc">
<span class="hl-comment">{- A site call is strict. -}</span> 

<span class="hl-site">Println</span>(<span class="hl-site">Rwait</span>(<span class="hl-literal">500</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Waited 0.5 seconds"</span> <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Waited 1 second"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>

<span class="hl-comment">{-
OUTPUT:
Waited 0.5 seconds
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.call.examples.sites_are_strict_link'), 'ref.expressions.call.examples.sites_are_strict_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.call.examples.functions_are_lenient_link" onclick="toggle(this, 'ref.expressions.call.examples.functions_are_lenient_content')">
					&minus;
				</a><span class="exampleCaption">Functions are Lenient</span></div><div class="exampleBody" id="ref.expressions.call.examples.functions_are_lenient_content"><pre class="orc">
<span class="hl-comment">{- 
  A function call is lenient.
  Parts of the function that do not need the arguments can execute immediately. 
  However, any part that uses the arguments must wait.
-}</span>

<span class="hl-keyword">def</span> <span class="hl-site">Printfn</span>(<span class="hl-variable">s</span>) <span class="hl-operator">=</span>
    <span class="hl-site">Println</span>(<span class="hl-literal">"Immediate"</span>) 
  <span class="hl-combinator">|</span> <span class="hl-variable">s</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Println</span>(<span class="hl-literal">"Waiting"</span>)
  
<span class="hl-site">Printfn</span>(<span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>

<span class="hl-comment">{-
OUTPUT:
Immediate
Waiting
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.call.examples.functions_are_lenient_link'), 'ref.expressions.call.examples.functions_are_lenient_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.call.examples.record_apply_link" onclick="toggle(this, 'ref.expressions.call.examples.record_apply_content')">
					&minus;
				</a><span class="exampleCaption">Function with Domain and Range</span></div><div class="exampleBody" id="ref.expressions.call.examples.record_apply_content"><pre class="orc">
<span class="hl-comment">{-
  Use a record with an apply member to create
  a function enhanced with .domain and .range members.
-}</span> 

<span class="hl-keyword">val</span> <span class="hl-variable">implies</span> <span class="hl-operator">=</span>
  <span class="hl-keyword">def</span> <span class="hl-site">imp</span>(<span class="hl-literal">true</span>,<span class="hl-literal">false</span>) <span class="hl-operator">=</span> <span class="hl-literal">false</span> 
  <span class="hl-keyword">def</span> <span class="hl-site">imp</span>(<span class="hl-variable">_</span>,<span class="hl-variable">_</span>) <span class="hl-operator">=</span> <span class="hl-literal">true</span> 
  {.
    <span class="hl-variable">apply</span> <span class="hl-operator">=</span> <span class="hl-variable">imp</span>,
    <span class="hl-variable">domain</span> <span class="hl-operator">=</span> [(<span class="hl-literal">true</span>,<span class="hl-literal">true</span>),(<span class="hl-literal">true</span>,<span class="hl-literal">false</span>),(<span class="hl-literal">false</span>,<span class="hl-literal">true</span>),(<span class="hl-literal">false</span>,<span class="hl-literal">false</span>)],
    <span class="hl-variable">range</span> <span class="hl-operator">=</span> [<span class="hl-literal">true</span>, <span class="hl-literal">false</span>]
  .}

<span class="hl-site">each</span>(<span class="hl-variable">implies</span>.<span class="hl-variable">domain</span>) <span class="hl-combinator">&gt;</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)<span class="hl-combinator">&gt;</span> 
<span class="hl-site">implies</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">z</span><span class="hl-combinator">&gt;</span> 
<span class="hl-site">member</span>(<span class="hl-variable">z</span>, <span class="hl-variable">implies</span>.<span class="hl-variable">range</span>)
  
<span class="hl-comment">{-
OUTPUT:
true
true
true
true
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.call.examples.record_apply_link'), 'ref.expressions.call.examples.record_apply_content'); }, 125);
</script></div><div class="section" title="2.4.7.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.call.links"></a>2.4.7.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">Call Pattern</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">Dot Access</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">Operators</a></p></li><li class="listitem"><p><a class="link" href="#ref.sites" title="Chapter&nbsp;6.&nbsp;Sites and Services">Sites and Services</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">Records</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.closure" title="1.9.&nbsp;Closures">Closures</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function"><code class="code"><span class="hl-keyword">def</span></code>:  Define Function</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">Deflation</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publication</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">Silence</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">Blocking</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">Halting</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">Killing</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.helpful" title="8.5.&nbsp;Helpful Sites">Helpful Sites</a></p></li><li class="listitem"><p><a class="link" href="#ref.types.polymorphism.calls" title="9.2.3.&nbsp;Polymorphic calls">Polymorphic Calls</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.import" class="olink">Importing Resources</a></p></li></ul></div></div></div><div class="section" title="2.5.&nbsp;Dot Access"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.expressions.dot"></a>2.5.&nbsp;Dot Access</h2></div></div></div><p>
			A <a name="N11024" class="indexterm"></a><em class="firstterm">dot access</em> is an expression that retrieves a named <a name="N1102C" class="indexterm"></a><em class="firstterm">member</em> of a value.
			It consists of a <a name="N11033" class="indexterm"></a><em class="firstterm">target</em> expression <em class="replaceable"><code>E</code></em> and a <a name="N1103D" class="indexterm"></a><em class="firstterm">key</em> <em class="replaceable"><code>K</code></em>.
			First, <em class="replaceable"><code>E</code></em> is <a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">deflated</a> to a value <em class="replaceable"><code>v</code></em>.
			If the value <em class="replaceable"><code>v</code></em> has a member named <em class="replaceable"><code>K</code></em>, that member
			is <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">published</a>. Otherwise, the expression <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a>.
		</p><p>
			Not all values have members. 
			<a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">Records</a> have members, as do many <a class="link" href="#ref.sites" title="Chapter&nbsp;6.&nbsp;Sites and Services">sites</a>.
			A value created by an <a class="link" href="#ref.declarations.class" title="4.5.&nbsp;import class: Import Class from Java">imported class</a> has
			a member for each method and field of the corresponding class.
			A value created by a <a class="link" href="#ref.declarations.class" title="4.5.&nbsp;import class: Import Class from Java">defined class</a> has
			a member for each <code class="code"><span class="hl-keyword">def</span></code> and <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code> declaration in the class.
		</p><p>
			Like many expressions in Orc, a dot access is simply another form of <a name="N11079" class="indexterm"></a><a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">site call</a>. The key
			is converted to a special value and passed to the site call as the only argument. The
			site call publishes the member named by the key if it exists, and halts otherwise.
		</p><div class="section" title="2.5.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.dot.syntax"></a>2.5.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[7]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.dot"><a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">DotAccess</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a><code class="code">.</code><a href="#ebnf.key">Key</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="2.5.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.dot.type"></a>2.5.2.&nbsp;Type</h3></div></div></div><p>
	    	If the target expression <em class="replaceable"><code>E</code></em> has the <a class="link" href="#ref.data.record.type" title="1.7.5.&nbsp;Type">record type</a> <code class="code">{.</code> <em class="replaceable"><code>K<sub>0</sub></code></em> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <em class="replaceable"><code>T<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>K<sub>n</sub></code></em> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <em class="replaceable"><code>T<sub>n</sub></code></em> <code class="code">.}</code>,
	    	then the dot access <em class="replaceable"><code>E</code></em><code class="code">.</code><em class="replaceable"><code>K<sub>i</sub></code></em> has type <em class="replaceable"><code>T<sub>i</sub></code></em>.
	    </p><p>
	    	If the target has a Java class or object type, the <a class="link" href="#ref.declarations.class.type" title="4.5.2.&nbsp;Type">usual Java typing rules</a> apply.
	    </p><p>
	      If the target is a site, then the type of the dot access is determined entirely by the site, like any other site call.
	    </p></div><div class="section" title="2.5.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.dot.examples"></a>2.5.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.dot.examples.recordaccess_link" onclick="toggle(this, 'ref.expressions.dot.examples.recordaccess_content')">
					&minus;
				</a><span class="exampleCaption">Record Access</span></div><div class="exampleBody" id="ref.expressions.dot.examples.recordaccess_content"><pre class="orc">
<span class="hl-comment">{- Add two members of a record -}</span> 

<span class="hl-keyword">val</span> <span class="hl-variable">displacement</span> <span class="hl-operator">=</span> {. <span class="hl-variable">dx</span> <span class="hl-operator">=</span> <span class="hl-literal">3.0</span>, <span class="hl-variable">dy</span> <span class="hl-operator">=</span> <span class="hl-literal">0.3</span>, <span class="hl-variable">dz</span> <span class="hl-operator">=</span> <span class="hl-literal">1.1</span> .}

<span class="hl-variable">displacement</span>.<span class="hl-variable">dx</span> <span class="hl-operator">+</span> <span class="hl-variable">displacement</span>.<span class="hl-variable">dy</span>

<span class="hl-comment">{-
OUTPUT:
3.3
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.dot.examples.recordaccess_link'), 'ref.expressions.dot.examples.recordaccess_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.dot.examples.channelops_link" onclick="toggle(this, 'ref.expressions.dot.examples.channelops_content')">
					&minus;
				</a><span class="exampleCaption">Channel Operations</span></div><div class="exampleBody" id="ref.expressions.dot.examples.channelops_content"><pre class="orc">
<span class="hl-comment">{- Create a channel, and perform some operations on it. -}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">b</span> <span class="hl-operator">=</span> <span class="hl-site">Channel</span>()

  <span class="hl-variable">b</span>.<span class="hl-site">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">b</span>.<span class="hl-site">put</span>(<span class="hl-variable">x</span><span class="hl-operator">+</span><span class="hl-literal">1</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
<span class="hl-combinator">|</span> <span class="hl-variable">b</span>.<span class="hl-site">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">y</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">b</span>.<span class="hl-site">put</span>(<span class="hl-variable">y</span><span class="hl-operator">*</span><span class="hl-literal">2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
<span class="hl-combinator">|</span> <span class="hl-variable">b</span>.<span class="hl-site">put</span>(<span class="hl-literal">3</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
  <span class="hl-combinator">;</span>
  <span class="hl-variable">b</span>.<span class="hl-site">get</span>()

<span class="hl-comment">{-
OUTPUT:
7
-}</span>
<span class="hl-comment">{-
OUTPUT:
8
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.dot.examples.channelops_link'), 'ref.expressions.dot.examples.channelops_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.dot.examples.channelmethods_link" onclick="toggle(this, 'ref.expressions.dot.examples.channelmethods_content')">
					&minus;
				</a><span class="exampleCaption">Capture Channel Methods</span></div><div class="exampleBody" id="ref.expressions.dot.examples.channelmethods_content"><pre class="orc">
<span class="hl-comment">{- Access the 'put' and 'get' members of a channel, and use them as separate sites. -}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">c</span> <span class="hl-operator">=</span> <span class="hl-site">Channel</span>()
<span class="hl-keyword">val</span> <span class="hl-variable">send</span> <span class="hl-operator">=</span> <span class="hl-variable">c</span>.<span class="hl-variable">put</span>
<span class="hl-keyword">val</span> <span class="hl-variable">receive</span> <span class="hl-operator">=</span> <span class="hl-variable">c</span>.<span class="hl-variable">get</span>

<span class="hl-site">map</span>(<span class="hl-variable">send</span>, [<span class="hl-literal">1</span>, <span class="hl-literal">2</span>, <span class="hl-literal">3</span>]) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-site">signals</span>(<span class="hl-literal">3</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-site">receive</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> 
<span class="hl-site">Println</span>(<span class="hl-literal">"Received: "</span> <span class="hl-operator">+</span> <span class="hl-variable">x</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-keyword">stop</span>

<span class="hl-comment">{-
OUTPUT:PERMUTABLE:
Received: 1
Received: 2
Received: 3
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.dot.examples.channelmethods_link'), 'ref.expressions.dot.examples.channelmethods_content'); }, 125);
</script></div><div class="section" title="2.5.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.dot.links"></a>2.5.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">Records</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.defclass" title="4.3.&nbsp;def class: Define Site in Orc"><code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code>: Define Site in Orc</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.class" title="4.5.&nbsp;import class: Import Class from Java"><code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code>:  Import Class from Java</a></p></li><li class="listitem"><p><a class="link" href="#ref.sites.java" title="6.2.&nbsp;Java sites">Java Sites</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.dotaccess" class="olink">The <code class="code">.</code> notation</a></p></li></ul></div></div></div><div class="section" title="2.6.&nbsp;Operators"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.expressions.operators"></a>2.6.&nbsp;Operators</h2></div></div></div><p>
Orc has a standard set of infix, prefix, and postfix <a name="N11123" class="indexterm"></a><em class="firstterm">operators</em>. 
Operators in Orc are syntactic sugar for <a name="N1112B" class="indexterm"></a><a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">site calls</a>;
they <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a> at most once, and their operands are <a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">deflated</a>.
For example, <code class="code"><span class="hl-literal">1</span> <span class="hl-operator">+</span> <span class="hl-literal">2</span></code> is equivalent to <code class="code">(<span class="hl-operator">+</span>)(<span class="hl-literal">1</span>, <span class="hl-literal">2</span>)</code> and <code class="code"><span class="hl-literal">1</span> <span class="hl-operator">+</span> <span class="hl-literal">2</span> <span class="hl-operator">*</span> <span class="hl-literal">3</span></code> is equivalent to <code class="code">(<span class="hl-operator">+</span>)(<span class="hl-literal">1</span>, (<span class="hl-operator">*</span>)(<span class="hl-literal">2</span>, <span class="hl-literal">3</span>))</code>.
</p><p>
Operators are parsed using the <a name="N11148" class="indexterm"></a><a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">precedence and associativity</a> rules of Orc. 
In particular, these rules describe the relationship between operators and <a class="link" href="#ref.combinators" title="Chapter&nbsp;3.&nbsp;Combinators">combinators</a>.
</p><div class="section" title="2.6.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.operators.syntax"></a>2.6.1.&nbsp;Syntax</h3></div></div></div><p>
		</p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[8]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.prefixoperation"><a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">PrefixOperation</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">PrefixOperator</a> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[9]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.infixoperation"><a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">InfixOperation</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">InfixOperator</a> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[10]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.postfixoperation"><a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">PostfixOperation</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">PostfixOperator</a> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	</p></div><div class="section" title="2.6.2.&nbsp;Standard Orc Operators"><div class="titlepage"><div><div><h3 class="title"><a name="N11165"></a>2.6.2.&nbsp;Standard Orc Operators</h3></div></div></div><div class="section" title="2.6.2.1.&nbsp;Arithmetic Operators"><div class="titlepage"><div><div><h4 class="title"><a name="N11168"></a>2.6.2.1.&nbsp;Arithmetic Operators</h4></div></div></div><div class="informaltable"><table border="0"><colgroup><col align="center"><col align="left"></colgroup><tbody valign="top"><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">+</span></code></td><td align="left" valign="top">Addition</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">-</span></code></td><td align="left" valign="top">Subtraction</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">*</span></code></td><td align="left" valign="top">Multiplication</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">/</span></code></td><td align="left" valign="top">Division</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">%</span></code></td><td align="left" valign="top">Modulus</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">**</span></code></td><td align="left" valign="top">Exponentiation</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">-</span></code> (unary prefix form)</td><td align="left" valign="top">Arithmetic negation</td></tr></tbody></table></div><p>
Numeric literals with no decimal part, such as <code class="code"><span class="hl-literal">3</span></code>, are treated as integers. Arithmetic operators with two integer arguments will perform
an integer operation and return an integer result; for example, <code class="code"><span class="hl-literal">5</span> <span class="hl-operator">/</span> <span class="hl-literal">2</span></code> performs integer division and returns <code class="code"><span class="hl-literal">2</span></code>.
However, if either argument to an operator has a decimal part (even if it is trivial, as in <code class="code"><span class="hl-literal">3.0</span></code>), the other argument will
be promoted, and a decimal operation will be performed. For example, <code class="code"><span class="hl-literal">5</span> <span class="hl-operator">/</span> <span class="hl-literal">2.0</span></code> and <code class="code"><span class="hl-literal">5.0</span> <span class="hl-operator">/</span> <span class="hl-literal">2</span></code> both 
perform decimal division and return <code class="code"><span class="hl-literal">2.5</span></code>.
</p></div><div class="section" title="2.6.2.2.&nbsp;Comparison Operators"><div class="titlepage"><div><div><h4 class="title"><a name="N111BA"></a>2.6.2.2.&nbsp;Comparison Operators</h4></div></div></div><div class="informaltable"><table border="0"><colgroup><col align="center"><col align="left"></colgroup><tbody valign="top"><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">=</span></code></td><td align="left" valign="top">Equal to</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">/</span><span class="hl-operator">=</span></code></td><td align="left" valign="top">Not equal to</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">&lt;:</span></code></td><td align="left" valign="top">Less than</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">:&gt;</span></code></td><td align="left" valign="top">Greater than</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">&lt;=</span></code></td><td align="left" valign="top">Less than or equal to</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">&gt;=</span></code></td><td align="left" valign="top">Greater than or equal to</td></tr></tbody></table></div><p>
The <code class="code"><span class="hl-operator">=</span></code> operator can compare values of any type. Values of different type are always unequal; for example,
<code class="code"><span class="hl-literal">10</span> <span class="hl-operator">=</span> <span class="hl-literal">true</span></code> publishes <code class="code"><span class="hl-literal">false</span></code>.
</p></div><div class="section" title="2.6.2.3.&nbsp;Logical Operators"><div class="titlepage"><div><div><h4 class="title"><a name="N111F9"></a>2.6.2.3.&nbsp;Logical Operators</h4></div></div></div><div class="informaltable"><table border="0"><colgroup><col align="center"><col align="left"></colgroup><tbody valign="top"><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">&amp;&amp;</span></code></td><td align="left" valign="top"><a name="N1120E" class="indexterm"></a>Logical and</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">||</span></code></td><td align="left" valign="top"><a name="N11217" class="indexterm"></a>Logical or</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">~</span></code></td><td align="left" valign="top"><a name="N11220" class="indexterm"></a>Logical negation</td></tr></tbody></table></div></div><div class="section" title="2.6.2.4.&nbsp;String Operators"><div class="titlepage"><div><div><h4 class="title"><a name="N11224"></a>2.6.2.4.&nbsp;String Operators</h4></div></div></div><div class="informaltable"><table border="0"><colgroup><col align="center"><col align="left"></colgroup><tbody valign="top"><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">+</span></code></td><td align="left" valign="top">Concatenation</td></tr></tbody></table></div></div><div class="section" title="2.6.2.5.&nbsp;List Operators"><div class="titlepage"><div><div><h4 class="title"><a name="N1123A"></a>2.6.2.5.&nbsp;List Operators</h4></div></div></div><div class="informaltable"><table border="0"><colgroup><col align="center"><col align="left"></colgroup><tbody valign="top"><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">:</span></code></td><td align="left" valign="top">List construction</td></tr></tbody></table></div></div><div class="section" title="2.6.2.6.&nbsp;Record Operators"><div class="titlepage"><div><div><h4 class="title"><a name="N11250"></a>2.6.2.6.&nbsp;Record Operators</h4></div></div></div><div class="informaltable"><table border="0"><colgroup><col align="center"><col align="left"></colgroup><tbody valign="top"><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">+</span></code></td><td align="left" valign="top">Extension</td></tr></tbody></table></div></div><div class="section" title="2.6.2.7.&nbsp;Reference Operators"><div class="titlepage"><div><div><h4 class="title"><a name="N11266"></a>2.6.2.7.&nbsp;Reference Operators</h4></div></div></div><div class="informaltable"><table border="0"><colgroup><col align="center"><col align="left"></colgroup><tbody valign="top"><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">?</span></code></td><td align="left" valign="top">Dereference</td></tr><tr><td align="center" valign="top"><code class="code"><span class="hl-operator">:=</span></code></td><td align="left" valign="top">Assignment</td></tr></tbody></table></div></div></div><div class="section" title="2.6.3.&nbsp;Redefining Operators"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.operators.redefining"></a>2.6.3.&nbsp;Redefining Operators</h3></div></div></div><p>
The <a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">operators' syntax</a> (fixity, precedence, and <a name="N1128C" class="indexterm"></a>associativity) is fixed by the Orc grammar; however, the site
called is defined by the <a class="link" href="#ref.stdlib" title="Chapter&nbsp;11.&nbsp;Standard Library">library</a> and can be changed by a <a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function"><code class="code"><span class="hl-keyword">def</span></code></a>
or <a class="link" href="#ref.declarations.site" title="4.4.&nbsp;import site: Import Site"><code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">site</span></code></a> declaration.
</p><p>
Orc permits a special identifier form for operators: the operator name
surrounded by parenthesis, as in <code class="code">(<span class="hl-operator">+</span>)</code>.
To disambiguate the unary prefix operator <code class="code"><span class="hl-operator">-</span></code> from the
binary infix operator <code class="code"><span class="hl-operator">-</span></code>, Orc translates the
unary prefix operator as <code class="code">(<span class="hl-literal">0</span><span class="hl-operator">-</span>)</code>. Binding a value to such
an identifier redefines the corresponding operator in the scope of
that binding.
</p></div><div class="section" title="2.6.4.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="N112AC"></a>2.6.4.&nbsp;Type</h3></div></div></div><p>
  Assuming that an operator has not been redefined, it obeys the following typing rules:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
    An arithmetic operation publishes an <code class="code"><span class="hl-variable">Integer</span></code> if all of its operands have type <code class="code"><span class="hl-variable">Integer</span></code>. 
    If any operand has type <code class="code"><a name="N112BC" class="indexterm"></a><span class="hl-variable">Number</span></code> (but not <code class="code"><span class="hl-variable">Integer</span></code>), the operation publishes a <code class="code"><span class="hl-variable">Number</span></code>.
  </p></li><li class="listitem"><p>
    A comparison operation allows operands of any type, and publishes a <code class="code"><span class="hl-variable">Boolean</span></code>.
  </p></li><li class="listitem"><p>
    A logical operation allows only <code class="code"><span class="hl-variable">Boolean</span></code> operands, and publishes a <code class="code"><span class="hl-variable">Boolean</span></code>.
  </p></li><li class="listitem"><p>
    A string concatenation requires at least one <code class="code"><span class="hl-variable">String</span></code> operand.
    Other operands may be of type <code class="code"><span class="hl-variable">Top</span></code>; they are converted to strings. 
    String concatenation publishes a <code class="code"><span class="hl-variable">String</span></code>.
  </p></li><li class="listitem"><p>
    <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">List</a> construction is <a class="link" href="#ref.types.polymorphism" title="9.2.&nbsp;Parametric Polymorphism">polymorphic</a>.
    It takes an operand of type <em class="replaceable"><code>T</code></em> and an operand of type <code class="code"><span class="hl-variable">List</span></code><code class="code">[</code><em class="replaceable"><code>T</code></em><code class="code">]</code>.
    It returns a value of type <code class="code"><span class="hl-variable">List</span></code><code class="code">[</code><em class="replaceable"><code>T</code></em><code class="code">]</code>.
  </p></li><li class="listitem"><p>
    Record extension takes two <a class="link" href="#ref.data.record.type" title="1.7.5.&nbsp;Type">records</a> and publishes a record.
  </p></li><li class="listitem"><p>
    Dereference takes an operand of type <code class="code"><a name="N1130D" class="indexterm"></a><span class="hl-variable">Ref</span></code><code class="code">[</code><em class="replaceable"><code>T</code></em><code class="code">]</code> and publishes a <em class="replaceable"><code>T</code></em>.
  </p></li><li class="listitem"><p>
    Assignment takes operands of types <code class="code"><span class="hl-variable">Ref</span></code><code class="code">[</code><em class="replaceable"><code>T</code></em><code class="code">]</code> and <em class="replaceable"><code>T</code></em>, and publishes a <code class="code"><span class="hl-variable">Signal</span></code>. 
  </p></li></ul></div><p>
</p></div><div class="section" title="2.6.5.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.operators.examples"></a>2.6.5.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.operators.examples.precedence_link" onclick="toggle(this, 'ref.expressions.operators.examples.precedence_content')">
					&minus;
				</a><span class="exampleCaption">Operator precedence</span></div><div class="exampleBody" id="ref.expressions.operators.examples.precedence_content"><pre class="orc">
<span class="hl-literal">1</span> <span class="hl-operator">+</span> <span class="hl-literal">2</span> <span class="hl-operator">*</span> <span class="hl-literal">3</span>
  
<span class="hl-comment">{-
OUTPUT:
7
-}</span> 
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.operators.examples.precedence_link'), 'ref.expressions.operators.examples.precedence_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.operators.examples.pubonce_link" onclick="toggle(this, 'ref.expressions.operators.examples.pubonce_content')">
					&minus;
				</a><span class="exampleCaption">Operators publish once</span></div><div class="exampleBody" id="ref.expressions.operators.examples.pubonce_content"><pre class="orc">
<span class="hl-literal">1</span> <span class="hl-operator">+</span> (<span class="hl-literal">2</span> <span class="hl-combinator">|</span> <span class="hl-literal">3</span>)

<span class="hl-comment">{-
OUTPUT:
3
-}</span>
<span class="hl-comment">{-
OUTPUT:
4
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.operators.examples.pubonce_link'), 'ref.expressions.operators.examples.pubonce_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.operators.examples.redefine_link" onclick="toggle(this, 'ref.expressions.operators.examples.redefine_content')">
					&minus;
				</a><span class="exampleCaption">Redefine an operator</span></div><div class="exampleBody" id="ref.expressions.operators.examples.redefine_content"><pre class="orc">
<span class="hl-comment">{- Redefine the "||", "~", and "?" operators -}</span>

<span class="hl-keyword">def</span> (<span class="hl-operator">||</span>)(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>) <span class="hl-operator">=</span> <span class="hl-variable">x</span> <span class="hl-operator">+</span> <span class="hl-literal">", or "</span> <span class="hl-operator">+</span> <span class="hl-variable">y</span>
<span class="hl-keyword">def</span> (<span class="hl-operator">~</span>)(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-literal">"not "</span> <span class="hl-operator">+</span> <span class="hl-variable">x</span>
<span class="hl-keyword">def</span> (<span class="hl-operator">?</span>)(<span class="hl-variable">r</span>) <span class="hl-operator">=</span> <span class="hl-variable">r</span> <span class="hl-operator">+</span> <span class="hl-literal">", that is the question."</span>

<span class="hl-keyword">signal</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> (<span class="hl-literal">"To be"</span> <span class="hl-operator">||</span> <span class="hl-operator">~</span> <span class="hl-literal">"to be"</span>)<span class="hl-operator">?</span>

<span class="hl-comment">{-
OUTPUT:
"To be, or not to be, that is the question."
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.operators.examples.redefine_link'), 'ref.expressions.operators.examples.redefine_content'); }, 125);
</script></div><div class="section" title="2.6.6.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.operators.links"></a>2.6.6.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">Precedence and Associativity Table</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">Site Calls</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.numeric" title="1.2.&nbsp;Numerics">Numerics</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.string" title="1.3.&nbsp;Character Strings">Strings</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.boolean" title="1.1.&nbsp;Booleans">Booleans</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">Lists</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">Records</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.state.Ref"><code class="code"><span class="hl-variable">Ref</span></code></a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.operators" class="olink">Operators</a></p></li></ul></div></div></div><div class="section" title="2.7.&nbsp;if then else"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.expressions.ifthenelse"></a>2.7.&nbsp;<code class="code"><span class="hl-keyword">if</span> <span class="hl-keyword">then</span> <span class="hl-keyword">else</span></code></h2></div></div></div><a name="N11389" class="indexterm"></a><p>
		The expression <code class="code"><span class="hl-keyword">if</span></code> <em class="replaceable"><code>E<sub>c</sub></code></em> <code class="code"><span class="hl-keyword">then</span></code> <em class="replaceable"><code>E<sub>t</sub></code></em> <code class="code"><span class="hl-keyword">else</span></code> <em class="replaceable"><code>E<sub>f</sub></code></em>
		is a conditional expression.
		It executes as follows:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>If <em class="replaceable"><code>E<sub>c</sub></code></em> <a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">deflates</a> to <code class="code"><span class="hl-literal">true</span></code>, execute <em class="replaceable"><code>E<sub>t</sub></code></em>.</p></li><li class="listitem"><p>If <em class="replaceable"><code>E<sub>c</sub></code></em> deflates to <code class="code"><span class="hl-literal">false</span></code>, execute <em class="replaceable"><code>E<sub>f</sub></code></em>.</p></li><li class="listitem"><p>If <em class="replaceable"><code>E<sub>c</sub></code></em> deflates to a non-Boolean value, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a>.</p></li><li class="listitem"><p>If <em class="replaceable"><code>E<sub>c</sub></code></em> halts <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>, halt.</p></li></ul></div><p>
		 
		</p><div class="section" title="2.7.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.ifthenelse.syntax"></a>2.7.1.&nbsp;Syntax</h3></div></div></div><p>
		    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[15]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.conditional"><a class="link" href="#ref.expressions.ifthenelse" title="2.7.&nbsp;if then else">Conditional</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">if</span></code> <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-keyword">then</span></code> <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-keyword">else</span></code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		  </p></div><div class="section" title="2.7.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.ifthenelse.type"></a>2.7.2.&nbsp;Type</h3></div></div></div><p>
		    The type of <code class="code"><span class="hl-keyword">if</span></code> <em class="replaceable"><code>E<sub>c</sub></code></em> <code class="code"><span class="hl-keyword">then</span></code> <em class="replaceable"><code>E<sub>t</sub></code></em> <code class="code"><span class="hl-keyword">else</span></code> <em class="replaceable"><code>E<sub>f</sub></code></em>
		    is the <a class="link" href="#ref.types.subtyping.join" title="9.3.3.&nbsp;Join">join</a> of the types of <em class="replaceable"><code>E<sub>t</sub></code></em> and <em class="replaceable"><code>E<sub>f</sub></code></em>.
		    Additionally, <em class="replaceable"><code>E<sub>c</sub></code></em> must have type <code class="code"><span class="hl-variable">Boolean</span></code>.
		  </p></div><div class="section" title="2.7.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.ifthenelse.examples"></a>2.7.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.ifthenelse.examples.binarysearch_link" onclick="toggle(this, 'ref.expressions.ifthenelse.examples.binarysearch_content')">
					&minus;
				</a><span class="exampleCaption">Binary Search in a Sorted Array</span></div><div class="exampleBody" id="ref.expressions.ifthenelse.examples.binarysearch_content"><pre class="orc">
<span class="hl-comment">{-
  Binary search in a sorted array.
-}</span>

<span class="hl-keyword">def</span> <span class="hl-site">binary_search</span>(<span class="hl-variable">x</span>,<span class="hl-variable">a</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">def</span> <span class="hl-site">searchIn</span>(<span class="hl-variable">lo</span>, <span class="hl-variable">hi</span>) <span class="hl-operator">=</span>
    <span class="hl-keyword">if</span> (<span class="hl-variable">lo</span> <span class="hl-operator">&gt;=</span> <span class="hl-variable">hi</span>) <span class="hl-keyword">then</span> 
      <span class="hl-literal">false</span>
    <span class="hl-keyword">else</span> (
      <span class="hl-keyword">val</span> <span class="hl-variable">mid</span> <span class="hl-operator">=</span> (<span class="hl-variable">lo</span><span class="hl-operator">+</span><span class="hl-variable">hi</span>) <span class="hl-operator">/</span> <span class="hl-literal">2</span>
	     <span class="hl-keyword">val</span> <span class="hl-variable">y</span> <span class="hl-operator">=</span> <span class="hl-site">a</span>(<span class="hl-variable">mid</span>)<span class="hl-operator">?</span>
      <span class="hl-keyword">if</span> (<span class="hl-variable">x</span> <span class="hl-operator">=</span> <span class="hl-variable">y</span>) <span class="hl-keyword">then</span> 
        <span class="hl-literal">true</span>
      <span class="hl-keyword">else</span> <span class="hl-keyword">if</span> (<span class="hl-variable">x</span> <span class="hl-operator">&lt;:</span> <span class="hl-variable">y</span>) <span class="hl-keyword">then</span>
        <span class="hl-site">searchIn</span>(<span class="hl-variable">lo</span>, <span class="hl-variable">mid</span>) 
      <span class="hl-keyword">else</span> 
        <span class="hl-site">searchIn</span>(<span class="hl-variable">mid</span><span class="hl-operator">+</span><span class="hl-literal">1</span>, <span class="hl-variable">hi</span>)
    )
  <span class="hl-site">searchIn</span>(<span class="hl-literal">0</span>, <span class="hl-variable">a</span>.<span class="hl-variable">length</span><span class="hl-operator">?</span>)
      
<span class="hl-keyword">val</span> <span class="hl-variable">a</span> <span class="hl-operator">=</span> <span class="hl-site">Array</span>(<span class="hl-literal">15</span>)
      
<span class="hl-site">for</span>(<span class="hl-literal">0</span>, <span class="hl-literal">15</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">i</span><span class="hl-combinator">&gt;</span> 
<span class="hl-site">a</span>(<span class="hl-variable">i</span>) <span class="hl-operator">:=</span> <span class="hl-literal">2</span><span class="hl-operator">*</span><span class="hl-variable">i</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> 
<span class="hl-keyword">stop</span> <span class="hl-combinator">;</span>

<span class="hl-site">binary_search</span>(<span class="hl-literal">19</span>, <span class="hl-variable">a</span>) <span class="hl-combinator">|</span> <span class="hl-site">binary_search</span>(<span class="hl-literal">22</span>, <span class="hl-variable">a</span>)

<span class="hl-comment">{-
OUTPUT:PERMUTABLE
true
false
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.ifthenelse.examples.binarysearch_link'), 'ref.expressions.ifthenelse.examples.binarysearch_content'); }, 125);
</script></div><div class="section" title="2.7.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.ifthenelse.links"></a>2.7.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.data.boolean" title="1.1.&nbsp;Booleans">Booleans</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Ift"><code class="code"><span class="hl-variable">Ift</span></code></a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.core.Iff"><code class="code"><span class="hl-variable">Iff</span></code></a></p></li></ul></div></div></div><div class="section" title="2.8.&nbsp;lambda"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.expressions.lambda"></a>2.8.&nbsp;<code class="code"><span class="hl-keyword">lambda</span></code></h2></div></div></div><p>
		Sometimes one would like to create a <a class="link" href="#ref.data.closure" title="1.9.&nbsp;Closures">closure</a> directly, without bothering to give it a name. 
		There is a special keyword <code class="code"><a name="N11458" class="indexterm"></a><span class="hl-keyword">lambda</span></code> for this purpose. By writing a 
		<a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function">function definition</a> without the keyword <code class="code"><a name="N11462" class="indexterm"></a><span class="hl-keyword">def</span></code> and replacing the function name with
		the keyword <code class="code"><span class="hl-keyword">lambda</span></code>, that definition becomes an expression which <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> a closure. 
		</p><p>
		Note that a <code class="code"><span class="hl-keyword">lambda</span></code> cannot create a recursive function, since the function is
		not given a name in the body.
		</p><div class="section" title="2.8.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.lambda.syntax"></a>2.8.1.&nbsp;Syntax</h3></div></div></div><p>
		    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[16]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.lambda"><a class="link" href="#ref.expressions.lambda" title="2.8.&nbsp;lambda">Lambda</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">lambda</span></code> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.parameters">Parameters</a> <a href="#ebnf.returntype">ReturnType</a><span class="bold"><strong>?</strong></span> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		  </p></div><div class="section" title="2.8.2.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.lambda.examples"></a>2.8.2.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.expressions.lambda.examples.onetwosum_link" onclick="toggle(this, 'ref.expressions.lambda.examples.onetwosum_content')">
					&minus;
				</a><span class="exampleCaption">One Two Sum</span></div><div class="exampleBody" id="ref.expressions.lambda.examples.onetwosum_content"><pre class="orc">
<span class="hl-comment">{- Define a function that sums the results of its argument function
   evaluated with arguments 1 and 2
-}</span>

<span class="hl-keyword">def</span> <span class="hl-site">onetwosum</span>(<span class="hl-variable">f</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-literal">1</span>) <span class="hl-operator">+</span> <span class="hl-site">f</span>(<span class="hl-literal">2</span>)

<span class="hl-site">onetwosum</span>( <span class="hl-keyword">lambda</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-variable">x</span> <span class="hl-operator">*</span> <span class="hl-literal">3</span> )

<span class="hl-comment">{- 
  identical to:
  def triple(x) = x * 3
  onetwosum(triple)
-}</span>

<span class="hl-comment">{-
OUTPUT:
9
-}</span>

</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.expressions.lambda.examples.onetwosum_link'), 'ref.expressions.lambda.examples.onetwosum_content'); }, 125);
</script></div><div class="section" title="2.8.3.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.lambda.type"></a>2.8.3.&nbsp;Type</h3></div></div></div><p>
		    The type of a <code class="code"><span class="hl-keyword">lambda</span></code> expression is exactly the type of the <a class="link" href="#ref.data.closure" title="1.9.&nbsp;Closures">closure</a> it creates.
		  </p></div><div class="section" title="2.8.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.expressions.lambda.links"></a>2.8.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.data.closure" title="1.9.&nbsp;Closures">Closures</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function"><code class="code"><span class="hl-keyword">def</span></code>:  Define Function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.idioms" title="11.3.&nbsp;idioms: Higher-order Orc programming idioms.">Higher-Order Idioms</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.map"><code class="code"><span class="hl-variable">map</span></code> function</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.list.filter"><code class="code"><span class="hl-variable">filter</span></code> function</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.closures" class="olink">First-Class Functions</a></p></li></ul></div></div></div></div><div lang="" class="chapter" title="Chapter&nbsp;3.&nbsp;Combinators"><div class="titlepage"><div><div><h2 class="title"><a name="ref.combinators"></a>Chapter&nbsp;3.&nbsp;Combinators</h2></div></div></div><p>
Orc has four <a name="N114D2" class="indexterm"></a><em class="firstterm">combinators</em>: parallel, sequential, pruning, and otherwise. A combinator forms an
expression from two component expressions. Each combinator captures a different aspect of concurrency.
Syntactically, the combinators are written infix, and have lower <a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">precedence</a> than <a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">operators</a> or <a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">calls</a>, 
but higher precedence than other expression forms.
</p><div class="section" title="3.1.&nbsp;Parallel Combinator"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.combinators.parallel"></a>3.1.&nbsp;Parallel Combinator</h2></div></div></div><a name="N114EF" class="indexterm"></a><p>
		  </p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>G</code></em></span></dt><dd><p>
			  Execution of expression <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>G</code></em>
			   occurs by executing <em class="replaceable"><code>F</code></em> 
			  and <em class="replaceable"><code>G</code></em> concurrently. Whenever <em class="replaceable"><code>F</code></em> or <em class="replaceable"><code>G</code></em> communicates with a <a class="link" href="#ref.sites" title="Chapter&nbsp;6.&nbsp;Sites and Services">service</a> or 
			  <a name="N11517" class="indexterm"></a><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> a value, <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>G</code></em> does so as well.
			  Therefore, <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>G</code></em> interleaves 
			  the publications of <em class="replaceable"><code>F</code></em>
			  and <em class="replaceable"><code>G</code></em> arbitrarily.
		    </p></dd></dl></div><p>
		  </p><div class="section" title="3.1.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.parallel.syntax"></a>3.1.1.&nbsp;Syntax</h3></div></div></div><p>
		    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[11]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.parallel"><a class="link" href="#ref.combinators.parallel" title="3.1.&nbsp;Parallel Combinator">Parallel</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-combinator">|</span></code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		  </p><p><span class="strong"><strong>Combinator Precedence Level</strong></span>: 
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.sequential" class="olink">sequential</a> &gt;
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.parallel" class="olink">parallel</a> &gt; 
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.pruning" class="olink">pruning</a> &gt; 
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.otherwise" class="olink">otherwise</a>
			  [<a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">Full Table</a>]
			  </p></div><div class="section" title="3.1.2.&nbsp;Notable Identities"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.parallel.identities"></a>3.1.2.&nbsp;Notable Identities</h3></div></div></div><p>
			  </p><div class="identitylist"><table border="0"><colgroup><col align="right"><col align="center"><col align="left"><col align="right"></colgroup><tbody><tr><td align="right"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>G</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>H</code></em></td><td align="center"> = </td><td align="left"><code class="code">(</code><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>G</code></em><code class="code">)</code><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>H</code></em></td><td align="right">  (Left Associative)</td></tr><tr><td align="right"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>G</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>H</code></em></td><td align="center"> = </td><td align="left"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">|</span> (</code><em class="replaceable"><code>G</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>H</code></em><code class="code">)</code></td><td align="right">  (Right Associative)</td></tr><tr><td align="right"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>G</code></em></td><td align="center"> = </td><td align="left"><em class="replaceable"><code>G</code></em><code class="code"> <span class="hl-combinator">|</span> </code><em class="replaceable"><code>F</code></em></td><td align="right">  (Commutative)</td></tr></tbody></table></div><p>
			  </p></div><div class="section" title="3.1.3.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.parallel.type"></a>3.1.3.&nbsp;Type</h3></div></div></div><p>
				The type of <em class="replaceable"><code>F</code></em> <code class="code"><span class="hl-combinator">|</span></code> <em class="replaceable"><code>G</code></em> is the <a class="link" href="#ref.types.subtyping.join" title="9.3.3.&nbsp;Join">join</a> of the types of <em class="replaceable"><code>F</code></em> and <em class="replaceable"><code>G</code></em>.
			</p></div><div class="section" title="3.1.4.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.parallel.examples"></a>3.1.4.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.parallel.examples.parapub_link" onclick="toggle(this, 'ref.combinators.parallel.examples.parapub_content')">
					&minus;
				</a><span class="exampleCaption">Parallel Publication</span></div><div class="exampleBody" id="ref.combinators.parallel.examples.parapub_content"><pre class="orc">
<span class="hl-comment">{- Publish 1 and 2 in parallel -}</span>

<span class="hl-literal">1</span> <span class="hl-combinator">|</span> <span class="hl-literal">1</span><span class="hl-operator">+</span><span class="hl-literal">1</span>

<span class="hl-comment">{-
OUTPUT:PERMUTABLE
1
2
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.parallel.examples.parapub_link'), 'ref.combinators.parallel.examples.parapub_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.parallel.examples.parasite_link" onclick="toggle(this, 'ref.combinators.parallel.examples.parasite_content')">
					&minus;
				</a><span class="exampleCaption">Parallel Site Calls</span></div><div class="exampleBody" id="ref.combinators.parallel.examples.parasite_content"><pre class="orc">
<span class="hl-keyword">include</span> <span class="hl-literal">"search.inc"</span>

<span class="hl-comment">{- Access two search sites, Google and Yahoo, in parallel.
   
   Publish any results they return.
   
   Since each call may publish a value, the expression
   may publish up to two values.
-}</span>  

<span class="hl-site">Google</span>(<span class="hl-literal">"cupcake"</span>) <span class="hl-combinator">|</span> <span class="hl-site">Yahoo</span>(<span class="hl-literal">"cupcake"</span>)
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.parallel.examples.parasite_link'), 'ref.combinators.parallel.examples.parasite_content'); }, 125);
</script></div><div class="section" title="3.1.5.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.parallel.links"></a>3.1.5.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publication</a></p></li><li class="listitem"><p><a class="link" href="#ref.types.subtyping.join" title="9.3.3.&nbsp;Join">Join</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.combinators.parallel" class="olink">Parallel Combinator</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div><div class="section" title="3.2.&nbsp;Sequential Combinator"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.combinators.sequential"></a>3.2.&nbsp;Sequential Combinator</h2></div></div></div><a name="N1161C" class="indexterm"></a><p>
		  </p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&gt;</span></code><em class="replaceable"><code>x</code></em><code class="code"><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>G</code></em></span></dt><dd><p>
			  The execution of <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&gt;</span></code><em class="replaceable"><code>x</code></em><code class="code"><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>G</code></em>
			   starts by executing <em class="replaceable"><code>F</code></em>. Whenever <em class="replaceable"><code>F</code></em> 
			  <a name="N11642" class="indexterm"></a><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> a value, a new execution of <em class="replaceable"><code>G</code></em> begins in parallel with <em class="replaceable"><code>F</code></em> (and with any previous 
			  executions of <em class="replaceable"><code>G</code></em>); in that execution of <em class="replaceable"><code>G</code></em>, variable <em class="replaceable"><code>x</code></em> is bound to the value
			  published by <em class="replaceable"><code>F</code></em>. Any value 
			  published by any executions of <em class="replaceable"><code>G</code></em> is published by the whole expression, but the values published 
			  by <em class="replaceable"><code>F</code></em> are not published by the whole expression; they are consumed by the variable binding. 
			</p></dd><dt><span class="term"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&gt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>G</code></em></span></dt><dd><p>
			  The sequential combinator may be written as <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&gt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>G</code></em>, 
			  where <em class="replaceable"><code>P</code></em> is a <a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">pattern</a> instead of 
			  just a variable name. Any value published by <em class="replaceable"><code>F</code></em> is matched against the pattern <em class="replaceable"><code>P</code></em>. 
			  If this match is successful, a new execution of <em class="replaceable"><code>G</code></em> begins, with all of the bindings 
			  from the match. Otherwise, the published value is simply ignored, and no new execution
			  of <em class="replaceable"><code>G</code></em> is begun.
			</p></dd><dt><span class="term"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>G</code></em></span></dt><dd><p>
			  This is equivalent to using a <a class="link" href="#ref.patterns.wildcard" title="5.9.&nbsp;Wildcard Pattern">wildcard pattern</a>: <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&gt;</span><span class="hl-variable">_</span><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>G</code></em>.  Every publication
			  of <em class="replaceable"><code>F</code></em> will match the combinator pattern, causing an execution of <em class="replaceable"><code>G</code></em> for every individual
			  publication of <em class="replaceable"><code>F</code></em>.  No bindings will be made in <em class="replaceable"><code>G</code></em> from these publications.
			</p></dd></dl></div><p>
		  </p><div class="section" title="3.2.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.sequential.syntax"></a>3.2.1.&nbsp;Syntax</h3></div></div></div><p>
		    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[12]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.sequential"><a class="link" href="#ref.combinators.sequential" title="3.2.&nbsp;Sequential Combinator">Sequence</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code">&gt;</code><a href="#ebnf.pattern">Pattern</a><span class="bold"><strong>?</strong></span><code class="code">&gt;</code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		  </p><p><span class="strong"><strong>Combinator Precedence Level</strong></span>: 
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.sequential" class="olink">sequential</a> &gt;
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.parallel" class="olink">parallel</a> &gt; 
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.pruning" class="olink">pruning</a> &gt;
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.otherwise" class="olink">otherwise</a>
			        [<a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">Full Table</a>]
			  </p></div><div class="section" title="3.2.2.&nbsp;Notable Identities"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.sequential.identities"></a>3.2.2.&nbsp;Notable Identities</h3></div></div></div><p>
			  </p><div class="identitylist"><table border="0"><colgroup><col align="right"><col align="center"><col align="left"><col align="right"></colgroup><tbody><tr><td align="right"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&gt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>G</code></em><code class="code"> <span class="hl-combinator">&gt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>H</code></em></td><td align="center"> = </td><td align="left"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&gt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&gt;</span> </code><code class="code">(</code><em class="replaceable"><code>G</code></em><code class="code"> <span class="hl-combinator">&gt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>H</code></em><code class="code">)</code></td><td align="right">  (Right Associative)</td></tr></tbody></table></div><p>
			  </p></div><div class="section" title="3.2.3.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.sequential.type"></a>3.2.3.&nbsp;Type</h3></div></div></div><p>
				The type of <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&gt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>G</code></em> 
				is the type of <em class="replaceable"><code>G</code></em> in the <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">context</a> &#915;<sub>F</sub>, 
				where &#915;<sub>F</sub> is the result of matching the pattern <em class="replaceable"><code>P</code></em> against the type of <em class="replaceable"><code>F</code></em>.
			</p></div><div class="section" title="3.2.4.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.sequential.examples"></a>3.2.4.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.sequential.examples.binding_link" onclick="toggle(this, 'ref.combinators.sequential.examples.binding_content')">
					&minus;
				</a><span class="exampleCaption">Variable Binding</span></div><div class="exampleBody" id="ref.combinators.sequential.examples.binding_content"><pre class="orc">
<span class="hl-comment">{- Publish 1 and 2 in parallel -}</span>
  
(<span class="hl-literal">0</span> <span class="hl-combinator">|</span> <span class="hl-literal">1</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">n</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">n</span><span class="hl-operator">+</span><span class="hl-literal">1</span>

<span class="hl-comment">{-
OUTPUT:PERMUTABLE
1
2
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.sequential.examples.binding_link'), 'ref.combinators.sequential.examples.binding_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.sequential.examples.filtering_link" onclick="toggle(this, 'ref.combinators.sequential.examples.filtering_content')">
					&minus;
				</a><span class="exampleCaption">Filtering</span></div><div class="exampleBody" id="ref.combinators.sequential.examples.filtering_content"><pre class="orc">
<span class="hl-comment">{- Filter out values of the form (_,false) -}</span>

( (<span class="hl-literal">4</span>,<span class="hl-literal">true</span>) <span class="hl-combinator">|</span> (<span class="hl-literal">5</span>,<span class="hl-literal">false</span>) <span class="hl-combinator">|</span> (<span class="hl-literal">6</span>,<span class="hl-literal">true</span>) )  <span class="hl-combinator">&gt;</span>(<span class="hl-variable">x</span>,<span class="hl-literal">true</span>)<span class="hl-combinator">&gt;</span> <span class="hl-variable">x</span>

<span class="hl-comment">{-
OUTPUT:PERMUTABLE
4
6
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.sequential.examples.filtering_link'), 'ref.combinators.sequential.examples.filtering_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.sequential.examples.suppressed_link" onclick="toggle(this, 'ref.combinators.sequential.examples.suppressed_content')">
					&minus;
				</a><span class="exampleCaption">Suppressed Publication</span></div><div class="exampleBody" id="ref.combinators.sequential.examples.suppressed_content"><pre class="orc">
<span class="hl-comment">{- Print two strings to the console,
   but don't publish the return values of the calls.
-}</span>

<span class="hl-site">Println</span>(<span class="hl-literal">"goodbye"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-site">Println</span>(<span class="hl-literal">"world"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-keyword">stop</span>

<span class="hl-comment">{-
OUTPUT:
goodbye
world
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.sequential.examples.suppressed_link'), 'ref.combinators.sequential.examples.suppressed_content'); }, 125);
</script></div><div class="section" title="3.2.5.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.sequential.links"></a>3.2.5.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publication</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">Silence</a></p></li><li class="listitem"><p><a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">Patterns</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal"><code class="code"><span class="hl-keyword">signal</span></code></a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.combinators.sequential" class="olink">Sequential Combinator</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.sites" class="olink">Sites</a></p></li></ul></div></div></div><div class="section" title="3.3.&nbsp;Pruning Combinator"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.combinators.pruning"></a>3.3.&nbsp;Pruning Combinator</h2></div></div></div><a name="N1179D" class="indexterm"></a><p>
		  </p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>x</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em></span></dt><dd><p>
			  	The execution of <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>x</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em> 
			  	starts by executing <em class="replaceable"><code>F</code></em> and <em class="replaceable"><code>G</code></em> in parallel. Whenever
				<em class="replaceable"><code>F</code></em> <a name="N117C6" class="indexterm"></a><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> a value, that value is published by the entire execution. When <em class="replaceable"><code>G</code></em> publishes its first value, that
				value is bound to <em class="replaceable"><code>x</code></em> in <em class="replaceable"><code>F</code></em>, and then the execution of <em class="replaceable"><code>G</code></em> is immediately <a name="N117D9" class="indexterm"></a><a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">killed</a>. 
				A killed expression cannot call any <a class="link" href="#ref.sites" title="Chapter&nbsp;6.&nbsp;Sites and Services">sites</a> or publish any values. During the execution of <em class="replaceable"><code>F</code></em>, 
				any part of the execution that depends on <em class="replaceable"><code>x</code></em> 
				will be <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocked</a> until <em class="replaceable"><code>x</code></em> is bound (to
				the first value published by <em class="replaceable"><code>G</code></em>). If <em class="replaceable"><code>G</code></em> never publishes a value, those parts remain blocked forever.
			  </p></dd><dt><span class="term"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em></span></dt><dd><p>
				The pruning combinator may include a full <a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">pattern</a> <em class="replaceable"><code>P</code></em> instead of just a variable name. Any value published
				by <em class="replaceable"><code>G</code></em> is matched against the pattern <em class="replaceable"><code>P</code></em>. If this match is successful, then <em class="replaceable"><code>G</code></em> is killed and all of the bindings
				of pattern <em class="replaceable"><code>P</code></em> are made in <em class="replaceable"><code>F</code></em>. Otherwise, the published value is simply ignored and <em class="replaceable"><code>G</code></em> continues to execute.
			  </p></dd><dt><span class="term"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em></span></dt><dd><p>
				This is equivalent to using a <a class="link" href="#ref.patterns.wildcard" title="5.9.&nbsp;Wildcard Pattern">wildcard pattern</a>, <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span><span class="hl-variable">_</span><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em>.  <em class="replaceable"><code>G</code></em> continues to execute 
				until it publishes a value.  Any value published by <em class="replaceable"><code>G</code></em> will match the pattern. After the successful match, 
				<em class="replaceable"><code>G</code></em> is killed, but no bindings are made in <em class="replaceable"><code>F</code></em>.
				No part of execution of <em class="replaceable"><code>F</code></em> is suspended by the pruning combinator since there is no variable to be bound.
			 </p></dd></dl></div><p>
		  </p><div class="section" title="3.3.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.pruning.syntax"></a>3.3.1.&nbsp;Syntax</h3></div></div></div><p>
		    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[13]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.pruning"><a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator">Prune</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code">&lt;</code><a href="#ebnf.pattern">Pattern</a><span class="bold"><strong>?</strong></span><code class="code">&lt;</code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		  </p><p><span class="strong"><strong>Combinator Precedence Level</strong></span>: 
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.sequential" class="olink">sequential</a> &gt;
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.parallel" class="olink">parallel</a> &gt; 
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.pruning" class="olink">pruning</a> &gt;
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.otherwise" class="olink">otherwise</a>
			        [<a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">Full Table</a>]
			  </p></div><div class="section" title="3.3.2.&nbsp;Notable Identities"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.pruning.identities"></a>3.3.2.&nbsp;Notable Identities</h3></div></div></div><p>
			  </p><div class="identitylist"><table border="0"><colgroup><col align="right"><col align="center"><col align="left"><col align="right"></colgroup><tbody><tr><td align="right"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em><code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>H</code></em></td><td align="center"> = </td><td align="left"><code class="code">(</code><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em><code class="code">)</code><code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>H</code></em></td><td align="right">  (Left Associative)</td></tr></tbody></table></div><p>
			  </p></div><div class="section" title="3.3.3.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.pruning.type"></a>3.3.3.&nbsp;Type</h3></div></div></div><p>
				The type of <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em> 
				is the type of <em class="replaceable"><code>F</code></em> in the <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">context</a> &#915;<sub>G</sub>, 
				where &#915;<sub>G</sub> is the result of matching the pattern <em class="replaceable"><code>P</code></em> against the type of <em class="replaceable"><code>G</code></em>.
			</p></div><div class="section" title="3.3.4.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.pruning.examples"></a>3.3.4.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.pruning.examples.exclusive_link" onclick="toggle(this, 'ref.combinators.pruning.examples.exclusive_content')">
					&minus;
				</a><span class="exampleCaption">Exclusive Publication</span></div><div class="exampleBody" id="ref.combinators.pruning.examples.exclusive_content"><pre class="orc">
<span class="hl-comment">{- Simulate a coin toss by publishing either "heads" or "tails" arbitrarily -}</span>

<span class="hl-variable">x</span> <span class="hl-combinator">&lt;</span><span class="hl-variable">x</span><span class="hl-combinator">&lt;</span> (<span class="hl-literal">"heads"</span> <span class="hl-combinator">|</span> <span class="hl-literal">"tails"</span>)

<span class="hl-comment">{-
OUTPUT:
"heads"
-}</span>
<span class="hl-comment">{-
OUTPUT:
"tails"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.pruning.examples.exclusive_link'), 'ref.combinators.pruning.examples.exclusive_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.pruning.examples.printfirst_link" onclick="toggle(this, 'ref.combinators.pruning.examples.printfirst_content')">
					&minus;
				</a><span class="exampleCaption">Print First Result</span></div><div class="exampleBody" id="ref.combinators.pruning.examples.printfirst_content"><pre class="orc">
<span class="hl-keyword">include</span> <span class="hl-literal">"search.inc"</span>

<span class="hl-comment">{- Query Google and Yahoo for a search result
   Print out the result that arrives first; ignore the other result
-}</span>

<span class="hl-site">Println</span>(<span class="hl-variable">result</span>) <span class="hl-combinator">&lt;</span><span class="hl-variable">result</span><span class="hl-combinator">&lt;</span> ( <span class="hl-site">Google</span>(<span class="hl-literal">"cupcake"</span>) <span class="hl-combinator">|</span> <span class="hl-site">Yahoo</span>(<span class="hl-literal">"cupcake"</span>) )
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.pruning.examples.printfirst_link'), 'ref.combinators.pruning.examples.printfirst_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.pruning.examples.patternpub_link" onclick="toggle(this, 'ref.combinators.pruning.examples.patternpub_content')">
					&minus;
				</a><span class="exampleCaption">Pattern Publication</span></div><div class="exampleBody" id="ref.combinators.pruning.examples.patternpub_content"><pre class="orc">
<span class="hl-comment">{- Publish either 9 or 25, but not 16. -}</span>

<span class="hl-variable">x</span><span class="hl-operator">*</span><span class="hl-variable">x</span> <span class="hl-combinator">&lt;</span>(<span class="hl-variable">x</span>,<span class="hl-literal">true</span>)<span class="hl-combinator">&lt;</span> ( (<span class="hl-literal">3</span>,<span class="hl-literal">true</span>) <span class="hl-combinator">|</span> (<span class="hl-literal">4</span>,<span class="hl-literal">false</span>) <span class="hl-combinator">|</span> (<span class="hl-literal">5</span>,<span class="hl-literal">true</span>) )

<span class="hl-comment">{-
OUTPUT:
9
-}</span>
<span class="hl-comment">{-
OUTPUT:
25
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.pruning.examples.patternpub_link'), 'ref.combinators.pruning.examples.patternpub_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.pruning.examples.timed_link" onclick="toggle(this, 'ref.combinators.pruning.examples.timed_content')">
					&minus;
				</a><span class="exampleCaption">Timed Termination</span></div><div class="exampleBody" id="ref.combinators.pruning.examples.timed_content"><pre class="orc">
<span class="hl-comment">{- Print all publications of the metronome function for 90 msec 
   (after the execution of metronome starts). 
   Then kill metronome.  Note that metronome(20) publishes a
   signal every 20 msec.
-}</span>

<span class="hl-keyword">stop</span> <span class="hl-combinator">&lt;</span><span class="hl-combinator">&lt;</span> (<span class="hl-site">metronome</span>(<span class="hl-literal">20</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Println</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span> <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">90</span>) )

<span class="hl-comment">{-
OUTPUT:
signal
signal
signal
signal
signal
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.pruning.examples.timed_link'), 'ref.combinators.pruning.examples.timed_content'); }, 125);
</script></div><div class="section" title="3.3.5.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.pruning.links"></a>3.3.5.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publication</a></p></li><li class="listitem"><p><a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">Patterns</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.val" title="4.1.&nbsp;val: Bind Value"><code class="code"><span class="hl-keyword">val</span></code> Declaration</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">Blocking</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">Killing</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">Halting</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">Deflation</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.combinators.pruning" class="olink">Pruning Combinator</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.sites" class="olink">Sites</a></p></li></ul></div></div></div><div class="section" title="3.4.&nbsp;Otherwise Combinator"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.combinators.otherwise"></a>3.4.&nbsp;Otherwise Combinator</h2></div></div></div><a name="N11948" class="indexterm"></a><a name="N1194B" class="indexterm"></a><p>
		  </p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">;</span> </code><em class="replaceable"><code>G</code></em></span></dt><dd><p>
				The execution of
				<em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">;</span> </code><em class="replaceable"><code>G</code></em> proceeds as follows. First, <em class="replaceable"><code>F</code></em> is executed. 
				If <em class="replaceable"><code>F</code></em> <a name="N11969" class="indexterm"></a><a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a>, 
				and has not <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">published</a> any value, then <em class="replaceable"><code>G</code></em> executes. 
				If <em class="replaceable"><code>F</code></em> <a name="N1197A" class="indexterm"></a>publishes one or more values, 
				then <em class="replaceable"><code>G</code></em> is ignored. The publications of <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">;</span> </code><em class="replaceable"><code>G</code></em> are those
				of <em class="replaceable"><code>F</code></em> if <em class="replaceable"><code>F</code></em> publishes, or those of <em class="replaceable"><code>G</code></em>
				if <em class="replaceable"><code>F</code></em> is <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silent</a>.
			</p></dd></dl></div><p>
		  </p><div class="section" title="3.4.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.otherwise.syntax"></a>3.4.1.&nbsp;Syntax</h3></div></div></div><p>
		    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[14]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.otherwise"><a class="link" href="#ref.combinators.otherwise" title="3.4.&nbsp;Otherwise Combinator">Otherwise</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-combinator">;</span></code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		  </p><p><span class="strong"><strong>Combinator Precedence Level</strong></span>: 
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.sequential" class="olink">sequential</a> &gt;
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.parallel" class="olink">parallel</a> &gt; 
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.pruning" class="olink">pruning</a> &gt; 
			  <a href="../userguide/userguide.html#ug.introduction.complex.combinators.otherwise" class="olink">otherwise</a>
			        [<a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">Full Table</a>]
		  </p></div><div class="section" title="3.4.2.&nbsp;Notable Identities"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.otherwise.identities"></a>3.4.2.&nbsp;Notable Identities</h3></div></div></div><p>
			  </p><div class="identitylist"><table border="0"><colgroup><col align="right"><col align="center"><col align="left"><col align="right"></colgroup><tbody><tr><td align="right"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">;</span> </code><em class="replaceable"><code>G</code></em><code class="code"> <span class="hl-combinator">;</span> </code><em class="replaceable"><code>H</code></em></td><td align="center"> = </td><td align="left"><code class="code">(</code><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">;</span> </code><em class="replaceable"><code>G</code></em><code class="code">) <span class="hl-combinator">;</span> </code><em class="replaceable"><code>H</code></em></td><td align="right">  (Left Associative)</td></tr><tr><td align="right"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">;</span> </code><em class="replaceable"><code>G</code></em><code class="code"> <span class="hl-combinator">;</span> </code><em class="replaceable"><code>H</code></em></td><td align="center"> = </td><td align="left"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">;</span> (</code><em class="replaceable"><code>G</code></em><code class="code"> <span class="hl-combinator">;</span> </code><em class="replaceable"><code>H</code></em><code class="code">)</code></td><td align="right">  (Right Associative)</td></tr></tbody></table></div><p>
			  </p></div><div class="section" title="3.4.3.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.otherwise.type"></a>3.4.3.&nbsp;Type</h3></div></div></div><p>
				The type of <em class="replaceable"><code>F</code></em> <code class="code"><span class="hl-combinator">;</span></code> <em class="replaceable"><code>G</code></em> 
				is the <a class="link" href="#ref.types.subtyping.join" title="9.3.3.&nbsp;Join">join</a> of the types of <em class="replaceable"><code>F</code></em> and <em class="replaceable"><code>G</code></em>.
			</p></div><div class="section" title="3.4.4.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.otherwise.examples"></a>3.4.4.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.otherwise.examples.fallback_link" onclick="toggle(this, 'ref.combinators.otherwise.examples.fallback_content')">
					&minus;
				</a><span class="exampleCaption">Fall-back Search</span></div><div class="exampleBody" id="ref.combinators.otherwise.examples.fallback_content"><pre class="orc">
<span class="hl-keyword">include</span> <span class="hl-literal">"search.inc"</span>

<span class="hl-comment">{- Attempt to retrieve search results from Google.
   If Google does not respond, then use Yahoo.
-}</span>  

<span class="hl-site">Google</span>(<span class="hl-literal">"cupcake"</span>) <span class="hl-combinator">;</span> <span class="hl-site">Yahoo</span>(<span class="hl-literal">"cupcake"</span>)
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.otherwise.examples.fallback_link'), 'ref.combinators.otherwise.examples.fallback_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.otherwise.examples.sublist_link" onclick="toggle(this, 'ref.combinators.otherwise.examples.sublist_content')">
					&minus;
				</a><span class="exampleCaption">Lexicographic sublist</span></div><div class="exampleBody" id="ref.combinators.otherwise.examples.sublist_content"><pre class="orc">
<span class="hl-comment">{- A call to sum(n, xs), where n is an integer and xs is a list
   of integers, find the first sublist of xs lexicographically
   whose elements add up to n.  The call publishes nothing if
   there is no solution
-}</span>

<span class="hl-keyword">def</span> <span class="hl-site">sum</span>(<span class="hl-literal">0</span>,[]) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">sum</span>(<span class="hl-variable">n</span>,[]) <span class="hl-operator">=</span> <span class="hl-keyword">stop</span>
<span class="hl-keyword">def</span> <span class="hl-site">sum</span>(<span class="hl-variable">n</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span>
  <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-site">sum</span>(<span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-variable">x</span>, <span class="hl-variable">xs</span>) <span class="hl-combinator">;</span> <span class="hl-site">sum</span>(<span class="hl-variable">n</span>, <span class="hl-variable">xs</span>)
  
<span class="hl-site">sum</span>(<span class="hl-operator">-</span><span class="hl-literal">5</span>,[<span class="hl-operator">-</span><span class="hl-literal">2</span>,<span class="hl-literal">5</span>,<span class="hl-literal">1</span>,<span class="hl-literal">4</span>,<span class="hl-literal">8</span>,<span class="hl-operator">-</span><span class="hl-literal">7</span>])

<span class="hl-comment">{-
OUTPUT:
[-2, 4, -7]
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.otherwise.examples.sublist_link'), 'ref.combinators.otherwise.examples.sublist_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.otherwise.examples.transfer_link" onclick="toggle(this, 'ref.combinators.otherwise.examples.transfer_content')">
					&minus;
				</a><span class="exampleCaption">Channel Transfer</span></div><div class="exampleBody" id="ref.combinators.otherwise.examples.transfer_content"><pre class="orc">
<span class="hl-comment">{- Transfer all items from a channel to a list.  Assume that the
   process has exclusive access to the channel, so that no other
   process is adding or removing items.
-}</span>

<span class="hl-keyword">def</span> <span class="hl-site">xfer</span>(<span class="hl-variable">ch</span>) <span class="hl-operator">=</span>
  <span class="hl-variable">ch</span>.<span class="hl-site">getD</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-site">xfer</span>(<span class="hl-variable">ch</span>) <span class="hl-combinator">;</span> []

<span class="hl-keyword">val</span> <span class="hl-variable">ch</span> <span class="hl-operator">=</span> <span class="hl-site">Channel</span>()

<span class="hl-variable">ch</span>.<span class="hl-site">put</span>(<span class="hl-literal">1</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">ch</span>.<span class="hl-site">put</span>(<span class="hl-literal">2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">ch</span>.<span class="hl-site">put</span>(<span class="hl-literal">3</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">ch</span>.<span class="hl-site">put</span>(<span class="hl-literal">4</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">xfer</span>(<span class="hl-variable">ch</span>) 

<span class="hl-comment">{-
OUTPUT:
[1, 2, 3, 4]
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.otherwise.examples.transfer_link'), 'ref.combinators.otherwise.examples.transfer_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.combinators.otherwise.examples.helpfulpub_link" onclick="toggle(this, 'ref.combinators.otherwise.examples.helpfulpub_content')">
					&minus;
				</a><span class="exampleCaption">Helpful publication</span></div><div class="exampleBody" id="ref.combinators.otherwise.examples.helpfulpub_content"><pre class="programlisting">
<span class="hl-comment">{- Publish a list of all publications of f.
   Assume f is helpful.  Assume you have xfer() from above.
-}</span>

<span class="hl-site">f</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">b</span>.<span class="hl-site">put</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span> <span class="hl-combinator">;</span> <span class="hl-site">xfer</span>(<span class="hl-variable">b</span>)

<span class="hl-comment">{-
NONRUNNABLE
-}</span>

<span class="hl-comment">{- (1 | 2 | 3) &gt;x&gt; c.put(x) &gt;&gt; stop ; xfer(c) outputs
   [1,2,3]
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.combinators.otherwise.examples.helpfulpub_link'), 'ref.combinators.otherwise.examples.helpfulpub_content'); }, 125);
</script></div><div class="section" title="3.4.5.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.combinators.otherwise.links"></a>3.4.5.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">Halting</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publication</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">Silence</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.helpful" title="8.5.&nbsp;Helpful Sites">Helpful Sites</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.stop" title="2.3.&nbsp;stop"><code class="code"><span class="hl-keyword">stop</span></code></a></p></li><li class="listitem"><p><a class="link" href="#ref.types.subtyping.join" title="9.3.3.&nbsp;Join">Join</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.combinators.otherwise" class="olink">Otherwise Combinator</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.sites" class="olink">Sites</a></p></li></ul></div></div></div></div><div lang="" class="chapter" title="Chapter&nbsp;4.&nbsp;Declarations"><div class="titlepage"><div><div><h2 class="title"><a name="ref.declarations"></a>Chapter&nbsp;4.&nbsp;Declarations</h2></div></div></div><p>
A declaration binds variables to values, or type variables to types, in an expression.
The values may be as simple as integers or booleans, or as complex as functions, sites, or classes. 
Declarations follow the rules of <a class="link" href="http://en.wikipedia.org/wiki/Lexical_scoping#Lexical_scoping" target="_top">lexical scoping</a>.
</p><p>
 
</p><div class="section" title="4.1.&nbsp;val: Bind Value"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.declarations.val"></a>4.1.&nbsp;<code class="code"><span class="hl-keyword">val</span></code>:  Bind Value</h2></div></div></div><p>
			The <code class="code"><a name="N11AAC" class="indexterm"></a><span class="hl-keyword">val</span></code> declaration binds variables to values. The declaration <code class="code"><a name="N11AB2" class="indexterm"></a><span class="hl-keyword">val</span></code> <em class="replaceable"><code>P</code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>G</code></em>, followed by expression <em class="replaceable"><code>F</code></em>, is a different way of writing the expression <em class="replaceable"><code>F</code></em> <code class="code">&lt;</code><em class="replaceable"><code>P</code></em><code class="code">&lt;</code> <em class="replaceable"><code>G</code></em>.
			Thus, <code class="code"><span class="hl-keyword">val</span></code> shares all of the behavior of the <a name="N11AD3" class="indexterm"></a><a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator">pruning combinator</a>.
		</p><div class="section" title="4.1.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.val.syntax"></a>4.1.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[21]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.val"><a class="link" href="#ref.declarations.val" title="4.1.&nbsp;val: Bind Value">DeclareVal</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">val</span></code> <a href="#ebnf.pattern">Pattern</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.expression">Expression</a> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="4.1.2.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.val.examples"></a>4.1.2.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.val.examples.bindings_link" onclick="toggle(this, 'ref.declarations.val.examples.bindings_content')">
					&minus;
				</a><span class="exampleCaption">Binding variables to values</span></div><div class="exampleBody" id="ref.declarations.val.examples.bindings_content"><pre class="orc">
<span class="hl-comment">{- Bind x to true or false arbitrarily 
   Bind y to 2
-}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">x</span> <span class="hl-operator">=</span> <span class="hl-literal">true</span> <span class="hl-combinator">|</span> <span class="hl-literal">false</span>
<span class="hl-keyword">val</span> <span class="hl-variable">y</span> <span class="hl-operator">=</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">200</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">2</span> <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">300</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">3</span>

<span class="hl-literal">"x is "</span> <span class="hl-operator">+</span> <span class="hl-variable">x</span> <span class="hl-operator">+</span> <span class="hl-literal">", "</span> <span class="hl-operator">+</span>
<span class="hl-literal">"y is "</span> <span class="hl-operator">+</span> <span class="hl-variable">y</span>

<span class="hl-comment">{-
OUTPUT:
"x is true, y is 2"
-}</span>
<span class="hl-comment">{-
OUTPUT:
"x is false, y is 2"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.val.examples.bindings_link'), 'ref.declarations.val.examples.bindings_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.val.examples.timeout_link" onclick="toggle(this, 'ref.declarations.val.examples.timeout_content')">
					&minus;
				</a><span class="exampleCaption">Timeout</span></div><div class="exampleBody" id="ref.declarations.val.examples.timeout_content"><pre class="orc">
<span class="hl-keyword">include</span> <span class="hl-literal">"search.inc"</span>

<span class="hl-comment">{- Publish the result of a Google search.
   If it takes more than 5 seconds, time out.
-}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">result</span> <span class="hl-operator">=</span> <span class="hl-site">Google</span>(<span class="hl-literal">"impatience"</span>) <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">5000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Search timed out."</span>

<span class="hl-variable">result</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.val.examples.timeout_link'), 'ref.declarations.val.examples.timeout_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.val.examples.die_link" onclick="toggle(this, 'ref.declarations.val.examples.die_content')">
					&minus;
				</a><span class="exampleCaption">Roll Die</span></div><div class="exampleBody" id="ref.declarations.val.examples.die_content"><pre class="orc">
<span class="hl-comment">{- Bind an arbitrary integer between 1 and 6, inclusive,
   to a variable in order to simulate a 6-sided die roll.
-}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">roll</span> <span class="hl-operator">=</span> (<span class="hl-literal">1</span> <span class="hl-combinator">|</span> <span class="hl-literal">2</span> <span class="hl-combinator">|</span> <span class="hl-literal">3</span> <span class="hl-combinator">|</span> <span class="hl-literal">4</span> <span class="hl-combinator">|</span> <span class="hl-literal">5</span> <span class="hl-combinator">|</span> <span class="hl-literal">6</span>)
<span class="hl-literal">"You rolled "</span> <span class="hl-operator">+</span> <span class="hl-variable">roll</span>

<span class="hl-comment">{-
OUTPUT:
"You rolled 1"
-}</span>
<span class="hl-comment">{-
OUTPUT:
"You rolled 2"
-}</span>
<span class="hl-comment">{-
OUTPUT:
"You rolled 3"
-}</span>
<span class="hl-comment">{-
OUTPUT:
"You rolled 4"
-}</span>
<span class="hl-comment">{-
OUTPUT:
"You rolled 5"
-}</span>
<span class="hl-comment">{-
OUTPUT:
"You rolled 6"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.val.examples.die_link'), 'ref.declarations.val.examples.die_content'); }, 125);
</script></div><div class="section" title="4.1.3.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.val.links"></a>4.1.3.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator">Pruning Combinator</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publication</a></p></li><li class="listitem"><p><a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">Patterns</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">Blocking</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">Killing</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">Halting</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.val" class="olink"><code class="code"><span class="hl-keyword">val</span></code> Declaration</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.val" class="olink">Val</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.combinators.sequential" class="olink">Sequential Combinator</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.combinators.pruning" class="olink">Pruning Combinator</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div><div class="section" title="4.2.&nbsp;def: Define Function"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.declarations.def"></a>4.2.&nbsp;<code class="code"><span class="hl-keyword">def</span></code>:  Define Function</h2></div></div></div><a name="N11B52" class="indexterm"></a><p>
			The <code class="code"><a name="N11B58" class="indexterm"></a><span class="hl-keyword">def</span></code> declaration defines a function. 
			A function definition consists of an identifier, a sequence of <a name="N11B5D" class="indexterm"></a><em class="firstterm">parameters</em>,
		  and a <a name="N11B65" class="indexterm"></a><em class="firstterm">body</em> expression. 
		</p><p>
		  An Orc function behaves much like a function, method, procedure, or subroutine in other programming languages. 
		  However, there are two key differences:
		</p><p>
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		Orc functions are <a name="N11B74" class="indexterm"></a><a class="link" href="#ref.expressions.call.function" title="2.4.3.&nbsp;Function Calls">lenient</a>: when a function is called, the argument expressions and the 
		function body are evaluated in parallel. 
		</p></li><li class="listitem"><p>
		Orc functions may <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a> any number of values, including zero,
		during the execution of the function body.
		</p></li></ul></div><p>
		</p><p>
		Orc functions have additional features, many of them adopted from typed functional programming languages:
		</p><p>
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Orc functions may be recursive. A group of functions may be mutually recursive.</p></li><li class="listitem"><p><a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">Patterns</a> may be used as function parameters.</p></li><li class="listitem"><p>A function may have a guard, which allows the function body to be executed only if a given condition holds.</p></li><li class="listitem"><p>A function may be defined by multiple clauses.</p></li></ul></div><p>
		</p><div class="section" title="4.2.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.def.syntax"></a>4.2.1.&nbsp;Syntax</h3></div></div></div><p>
		    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[22]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.def"><a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function">DeclareDefinition</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">def</span></code> <a href="#ebnf.variable">Variable</a> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.parameters">Parameters</a> <a href="#ebnf.returntype">ReturnType</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.guard">Guard</a><span class="bold"><strong>?</strong></span> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.expression">Expression</a> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[64]</td><td width="10%" valign="top" align="right"><a href="#ebnf.parameters">Parameters</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">(</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[24]</td><td width="10%" valign="top" align="right"><a href="#ebnf.guard"><a class="link" href="#ref.declarations.def.guard" title="4.2.5.&nbsp;Guards">Guard</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">if</span></code> <code class="code">(</code> <a href="#ebnf.expression">Expression</a> <code class="code">)</code> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		  </p></div><div class="section" title="4.2.2.&nbsp;Function Execution"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.def.execution"></a>4.2.2.&nbsp;Function Execution</h3></div></div></div><p>
		  The simplest case of argument binding uses only <a class="link" href="#ref.patterns.variable" title="5.2.&nbsp;Variable Pattern">variables</a> and <a class="link" href="#ref.patterns.wildcard" title="5.9.&nbsp;Wildcard Pattern">wildcards</a> as parameters.
		  </p><p>
		   When a function is <a class="link" href="#ref.expressions.call.function" title="2.4.3.&nbsp;Function Calls">called</a>, the function body executes,
		   and in parallel the argument expressions of the call are <a name="N11BBE" class="indexterm"></a><a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">deflated</a>.
		   </p><p>
		   If the execution of the body encounters a <a class="link" href="#ref.expressions.variable" title="2.2.&nbsp;Variable">use of a parameter</a> whose corresponding argument expression 
		  has not yet published a value, that use <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocks</a> 
		  until the argument value is available,
			but the rest of the body continues to execute. 
			</p><p>
		  Whenever the execution of the body would publish a value, the function call publishes that value.
		  If execution of the body <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a>, the function call also halts.
		  As a result, a function call might publish any number of times, including zero.
		  </p><p>
		  If the function call is <a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">killed</a>,
		  execution of the body expression is also immediately killed.
		  </p><p>
		  Because functions are lenient, the following two programs are equivalent:
		  
		  </p><pre class="programlisting">
<span class="hl-keyword">def</span> <span class="hl-site">fn</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>) <span class="hl-operator">=</span> <span class="hl-variable">E</span>
<span class="hl-site">fn</span>(<span class="hl-variable">G</span>,<span class="hl-variable">H</span>)
</pre><p>

</p><pre class="programlisting">
<span class="hl-keyword">val</span> <span class="hl-variable">x</span> <span class="hl-operator">=</span> <span class="hl-variable">G</span>
<span class="hl-keyword">val</span> <span class="hl-variable">y</span> <span class="hl-operator">=</span> <span class="hl-variable">H</span>
<span class="hl-variable">E</span>
</pre><p>

		</p></div><div class="section" title="4.2.3.&nbsp;Patterns as Parameters"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.def.pattern"></a>4.2.3.&nbsp;Patterns as Parameters</h3></div></div></div><p>
		  A function parameter may be any pattern. 
		  A <a name="N11BEB" class="indexterm"></a><em class="firstterm">lenient pattern</em> is either a variable pattern or a wildcard pattern; 
		  such patterns will never fail to match. 
		  Any other pattern is a <a name="N11BF2" class="indexterm"></a><em class="firstterm">strict pattern</em>, which could fail to match. 
		  </p><p>
		  When a function is called, the call blocks until a value is available for each strict pattern. The values are then matched
		  against the strict patterns. If all of these matches succeed, then the function call executes as described earlier. If any 
		  strict pattern match fails, or if any of the argument expressions corresponding to a strict pattern halts, 
		  then the function call halts. 
		  </p><p>
		  Suppose <code class="code"><span class="hl-variable">P</span></code> is a strict pattern. The following two programs are equivalent:
		  
		  </p><pre class="programlisting">
<span class="hl-keyword">def</span> <span class="hl-site">fn</span>(<span class="hl-variable">x</span>,<span class="hl-variable">P</span>) <span class="hl-operator">=</span> <span class="hl-variable">E</span>
<span class="hl-site">fn</span>(<span class="hl-variable">G</span>,<span class="hl-variable">H</span>)
</pre><p>

</p><pre class="programlisting">
<span class="hl-keyword">val</span> <span class="hl-variable">x</span> <span class="hl-operator">=</span> <span class="hl-variable">G</span>
<span class="hl-keyword">val</span> <span class="hl-variable">z</span> <span class="hl-operator">=</span> <span class="hl-variable">H</span>
<span class="hl-variable">z</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">P</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">E</span>
</pre><p>

		</p></div><div class="section" title="4.2.4.&nbsp;Recursion"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.def.recursion"></a>4.2.4.&nbsp;Recursion</h3></div></div></div><a name="N11C0D" class="indexterm"></a><p>
        Functions can be recursive; that is, the name of a function may be used in its own body.
      </p><pre class="programlisting">
<span class="hl-comment">{- A recursive factorial function -}</span>
<span class="hl-keyword">def</span> <span class="hl-site">fact</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span> <span class="hl-keyword">if</span> (<span class="hl-variable">n</span> <span class="hl-operator">&lt;=</span> <span class="hl-literal">1</span>) <span class="hl-keyword">then</span> <span class="hl-literal">1</span> <span class="hl-keyword">else</span> <span class="hl-variable">n</span> <span class="hl-operator">*</span> <span class="hl-site">fact</span>(<span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-literal">1</span>)
</pre><p>
        A recursive function might continue executing indefinitely, producing an infinite number of publications.
      </p><pre class="programlisting">
<span class="hl-comment">{- Publishes a signal every second, forever -}</span>
<span class="hl-keyword">def</span> <span class="hl-site">metronome</span>() <span class="hl-operator">=</span> <span class="hl-keyword">signal</span> <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">metronome</span>()
</pre><p>
        A set of functions may be mutually recursive by naming each other in their bodies.
        There is no special keyword for <a name="N11C1C" class="indexterm"></a>mutual recursion; 
        whenever two or more function definitions are adjacent, they are allowed to mutually recurse.
        </p></div><div class="section" title="4.2.5.&nbsp;Guards"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.def.guard"></a>4.2.5.&nbsp;Guards</h3></div></div></div><p>
		  A function definition may include a guard, of the form <code class="code"><span class="hl-keyword">if</span></code> <code class="code">(</code> <em class="replaceable"><code>E</code></em> <code class="code">)</code>.
		  When a function is called, and each strict pattern matches successfuly as described earlier, then the guard expression
		  <em class="replaceable"><code>E</code></em> is deflated. If <em class="replaceable"><code>E</code></em> deflates to <code class="code"><span class="hl-literal">true</span></code>, then the function
		  body is executed. If <em class="replaceable"><code>E</code></em> deflates to some other value, or halts without publishing a value,
		  then the function call halts silently. 
		  </p><p>
		  Suppose <code class="code"><span class="hl-variable">P</span></code> is a strict pattern and <code class="code"><span class="hl-variable">Gd</span></code> is a guard expression.
		  The following two programs are equivalent:
		  
		  </p><pre class="programlisting">
<span class="hl-keyword">def</span> <span class="hl-site">fn</span>(<span class="hl-variable">x</span>,<span class="hl-variable">P</span>) <span class="hl-keyword">if</span> (<span class="hl-variable">Gd</span>) <span class="hl-operator">=</span> <span class="hl-variable">E</span>
<span class="hl-site">fn</span>(<span class="hl-variable">G</span>,<span class="hl-variable">H</span>)
</pre><p>

</p><pre class="programlisting">
<span class="hl-keyword">val</span> <span class="hl-variable">x</span> <span class="hl-operator">=</span> <span class="hl-variable">G</span>
<span class="hl-keyword">val</span> <span class="hl-variable">z</span> <span class="hl-operator">=</span> <span class="hl-variable">H</span>
<span class="hl-variable">z</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">P</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Ift</span>(<span class="hl-variable">Gd</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">E</span>
</pre><p>

			</p></div><div class="section" title="4.2.6.&nbsp;Clausal Definition"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.def.clauses"></a>4.2.6.&nbsp;Clausal Definition</h3></div></div></div><p>
			  A function can be defined by a sequence of <a name="N11C54" class="indexterm"></a><em class="firstterm">clauses</em>: repeated
			  function definitions with the same identifier but different parameters. Each clause must have
			  the same number of parameters.  
			</p><p>
			  When a function with multiple clauses is called, the argument expressions are deflated, and in
			  parallel the first clause is executed.
			  The clause will <a name="N11C5E" class="indexterm"></a><em class="firstterm">fail</em> under any of the following conditions:
			  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>One of the parameters is a strict pattern, and that pattern fails to match.</p></li><li class="listitem"><p>One of the parameters is a strict pattern, and the corresponding argument expression has halted <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.</p></li><li class="listitem"><p>There is a guard expression, and it did not deflate to <code class="code"><span class="hl-literal">true</span></code>.</p></li></ol></div><p>
			  
			  If each strict pattern matches successfully, and the guard expression (if present) deflates to <code class="code"><span class="hl-literal">true</span></code>, 
			  then the corresponding function body executes. 
			  If the clause fails, then the next clause is executed.
			  If the last clause fails, then the function call halts silently. 
			</p></div><div class="section" title="4.2.7.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.def.type"></a>4.2.7.&nbsp;Type</h3></div></div></div><p>
	      When a function is defined, the function identifier is bound to a <a class="link" href="#ref.data.closure" title="1.9.&nbsp;Closures">closure</a>.
	      A definition must be given <a class="link" href="#ref.types.typeinfo.function" title="9.4.2.&nbsp;Function Type Information">additional type information</a> so that the typechecker can deduce the correct <a class="link" href="#ref.data.closure.type" title="1.9.1.&nbsp;Type">function type</a> for the identifier.
	    </p></div><div class="section" title="4.2.8.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.def.examples"></a>4.2.8.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.def.examples.lenientpairs_link" onclick="toggle(this, 'ref.declarations.def.examples.lenientpairs_content')">
					&minus;
				</a><span class="exampleCaption">Available Pairs</span></div><div class="exampleBody" id="ref.declarations.def.examples.lenientpairs_content"><pre class="orc">
<span class="hl-comment">{- 
  Publish pairs of results from three computations, as they become available.
-}</span>
<span class="hl-keyword">def</span> <span class="hl-site">pairs</span>(<span class="hl-variable">x</span>, <span class="hl-variable">y</span>, <span class="hl-variable">z</span>) <span class="hl-operator">=</span> (<span class="hl-variable">x</span>, <span class="hl-variable">y</span>) <span class="hl-combinator">|</span> (<span class="hl-variable">x</span>, <span class="hl-variable">z</span>) <span class="hl-combinator">|</span> (<span class="hl-variable">y</span>, <span class="hl-variable">z</span>)
			
<span class="hl-site">pairs</span>(<span class="hl-site">Rwait</span>(<span class="hl-literal">2000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">0</span>, <span class="hl-literal">1</span>, <span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">2</span>)

<span class="hl-comment">{-
OUTPUT:
(1, 2)
(0, 1)
(0, 2)
-}</span>
<span class="hl-comment">{-
OUTPUT:
(1, 2)
(0, 2)
(0, 1)
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.def.examples.lenientpairs_link'), 'ref.declarations.def.examples.lenientpairs_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.def.examples.parallelor_link" onclick="toggle(this, 'ref.declarations.def.examples.parallelor_content')">
					&minus;
				</a><span class="exampleCaption">Parallel-Or Function</span></div><div class="exampleBody" id="ref.declarations.def.examples.parallelor_content"><pre class="orc">
<span class="hl-comment">{- 
  Define a parallel-or function. 
-}</span>
<span class="hl-keyword">def</span> <span class="hl-site">parallelor</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>) <span class="hl-operator">=</span> 
  <span class="hl-keyword">val</span> <span class="hl-variable">first</span> <span class="hl-operator">=</span> <span class="hl-site">Ift</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span> <span class="hl-combinator">|</span> <span class="hl-site">Ift</span>(<span class="hl-variable">y</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span> <span class="hl-combinator">|</span> (<span class="hl-variable">x</span> <span class="hl-operator">||</span> <span class="hl-variable">y</span>)
  <span class="hl-variable">first</span>
			
<span class="hl-site">parallelor</span>(<span class="hl-literal">false</span>, <span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span>)

<span class="hl-comment">{-
OUTPUT:
true
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.def.examples.parallelor_link'), 'ref.declarations.def.examples.parallelor_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.def.examples.evenodd_link" onclick="toggle(this, 'ref.declarations.def.examples.evenodd_content')">
					&minus;
				</a><span class="exampleCaption">Even/Odd Using Mutual Recursion</span></div><div class="exampleBody" id="ref.declarations.def.examples.evenodd_content"><pre class="orc">
<span class="hl-comment">{- Test if a number is even or odd, using mutual recursion -}</span>
<span class="hl-keyword">def</span> <span class="hl-site">even</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span> <span class="hl-site">Ift</span>(<span class="hl-variable">n</span> <span class="hl-operator">=</span> <span class="hl-literal">0</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span>
            <span class="hl-combinator">|</span> <span class="hl-site">Ift</span>(<span class="hl-variable">n</span> <span class="hl-operator">&lt;:</span> <span class="hl-literal">0</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">odd</span>(<span class="hl-variable">n</span><span class="hl-operator">+</span><span class="hl-literal">1</span>) 
            <span class="hl-combinator">|</span> <span class="hl-site">Ift</span>(<span class="hl-variable">n</span> <span class="hl-operator">:&gt;</span> <span class="hl-literal">0</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">odd</span>(<span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-literal">1</span>)
    
<span class="hl-keyword">def</span> <span class="hl-site">odd</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span> <span class="hl-site">Ift</span>(<span class="hl-variable">n</span> <span class="hl-operator">=</span> <span class="hl-literal">0</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">false</span>
           <span class="hl-combinator">|</span> <span class="hl-site">Ift</span>(<span class="hl-variable">n</span> <span class="hl-operator">&lt;:</span> <span class="hl-literal">0</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">even</span>(<span class="hl-variable">n</span><span class="hl-operator">+</span><span class="hl-literal">1</span>) 
           <span class="hl-combinator">|</span> <span class="hl-site">Ift</span>(<span class="hl-variable">n</span> <span class="hl-operator">:&gt;</span> <span class="hl-literal">0</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">even</span>(<span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-literal">1</span>)

<span class="hl-site">odd</span>(<span class="hl-operator">-</span><span class="hl-literal">4</span>)

<span class="hl-comment">{- 
OUTPUT:
false
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.def.examples.evenodd_link'), 'ref.declarations.def.examples.evenodd_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.def.examples.listhead_link" onclick="toggle(this, 'ref.declarations.def.examples.listhead_content')">
					&minus;
				</a><span class="exampleCaption">List Head</span></div><div class="exampleBody" id="ref.declarations.def.examples.listhead_content"><pre class="orc">
<span class="hl-comment">{- 
  Publish the head of a nonempty list.
  If the list is empty, halt silently.
-}</span>
<span class="hl-keyword">def</span> <span class="hl-site">head</span>(<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">_</span>) <span class="hl-operator">=</span> <span class="hl-variable">h</span>

<span class="hl-site">head</span>([<span class="hl-literal">2</span>, <span class="hl-literal">3</span>]) <span class="hl-combinator">|</span> <span class="hl-site">head</span>([])

<span class="hl-comment">{-
OUTPUT:
2
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.def.examples.listhead_link'), 'ref.declarations.def.examples.listhead_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.def.examples.listlength_link" onclick="toggle(this, 'ref.declarations.def.examples.listlength_content')">
					&minus;
				</a><span class="exampleCaption">List Length</span></div><div class="exampleBody" id="ref.declarations.def.examples.listlength_content"><pre class="orc">
<span class="hl-comment">{- Find the length of a list -}</span>
<span class="hl-keyword">def</span> <span class="hl-site">length</span>([]) <span class="hl-operator">=</span> <span class="hl-literal">0</span>
<span class="hl-keyword">def</span> <span class="hl-site">length</span>(<span class="hl-variable">_</span><span class="hl-operator">:</span><span class="hl-variable">rest</span>) <span class="hl-operator">=</span> <span class="hl-site">length</span>(<span class="hl-variable">rest</span>) <span class="hl-operator">+</span> <span class="hl-literal">1</span>
			
<span class="hl-site">length</span>([<span class="hl-literal">1</span>, <span class="hl-literal">2</span>, <span class="hl-literal">4</span>])

<span class="hl-comment">{-
OUTPUT:
3
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.def.examples.listlength_link'), 'ref.declarations.def.examples.listlength_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.def.examples.listsum_link" onclick="toggle(this, 'ref.declarations.def.examples.listsum_content')">
					&minus;
				</a><span class="exampleCaption">List Sum</span></div><div class="exampleBody" id="ref.declarations.def.examples.listsum_content"><pre class="orc">
<span class="hl-comment">{- Sum the elements of a list -}</span>

<span class="hl-keyword">def</span> <span class="hl-site">sum</span>([]) <span class="hl-operator">=</span> <span class="hl-literal">0</span>
<span class="hl-keyword">def</span> <span class="hl-site">sum</span>(<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">t</span>) <span class="hl-operator">=</span> <span class="hl-variable">h</span> <span class="hl-operator">+</span> <span class="hl-site">sum</span>(<span class="hl-variable">t</span>)
<span class="hl-site">sum</span>([<span class="hl-literal">1</span>, <span class="hl-literal">2</span>, <span class="hl-literal">3</span>])

<span class="hl-comment">{-
OUTPUT:
6
-}</span>

</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.def.examples.listsum_link'), 'ref.declarations.def.examples.listsum_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.def.examples.zip_link" onclick="toggle(this, 'ref.declarations.def.examples.zip_content')">
					&minus;
				</a><span class="exampleCaption">Same-Length Zip</span></div><div class="exampleBody" id="ref.declarations.def.examples.zip_content"><pre class="orc">
<span class="hl-comment">{- 
  "Zip" a pair of lists together into a list of pairs.
  If the lists are of inequal length, halt silently.
-}</span>
<span class="hl-keyword">def</span> <span class="hl-site">zip</span>(<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>, <span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">ys</span>) <span class="hl-operator">=</span> (<span class="hl-variable">x</span>, <span class="hl-variable">y</span>)<span class="hl-operator">:</span><span class="hl-site">zip</span>(<span class="hl-variable">xs</span>, <span class="hl-variable">ys</span>)
<span class="hl-keyword">def</span> <span class="hl-site">zip</span>([], []) <span class="hl-operator">=</span> []

  <span class="hl-site">zip</span>([<span class="hl-literal">0</span>, <span class="hl-literal">1</span>], [<span class="hl-literal">false</span>, <span class="hl-literal">true</span>]) 
<span class="hl-combinator">|</span> <span class="hl-site">zip</span>([<span class="hl-literal">1</span>, <span class="hl-literal">2</span>, <span class="hl-literal">3</span>], <span class="hl-keyword">signal</span>)

<span class="hl-comment">{-
OUTPUT:
[(0, false), (1, true)]
-}</span>

</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.def.examples.zip_link'), 'ref.declarations.def.examples.zip_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.def.clausal.examples.fib_link" onclick="toggle(this, 'ref.declarations.def.clausal.examples.fib_content')">
					&minus;
				</a><span class="exampleCaption">Fibonacci Function</span></div><div class="exampleBody" id="ref.declarations.def.clausal.examples.fib_content"><pre class="orc">
<span class="hl-comment">{- Fibonacci numbers -}</span>

<span class="hl-keyword">def</span> <span class="hl-site">fib</span>(<span class="hl-literal">0</span>) <span class="hl-operator">=</span> <span class="hl-literal">1</span>
<span class="hl-keyword">def</span> <span class="hl-site">fib</span>(<span class="hl-literal">1</span>) <span class="hl-operator">=</span> <span class="hl-literal">1</span>
<span class="hl-keyword">def</span> <span class="hl-site">fib</span>(<span class="hl-variable">n</span>) <span class="hl-keyword">if</span> (<span class="hl-variable">n</span> <span class="hl-operator">:&gt;</span> <span class="hl-literal">1</span>) <span class="hl-operator">=</span> <span class="hl-site">fib</span>(<span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-literal">1</span>) <span class="hl-operator">+</span> <span class="hl-site">fib</span>(<span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-literal">2</span>)

<span class="hl-site">fib</span>(<span class="hl-literal">5</span>)

<span class="hl-comment">{-
OUTPUT:
8
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.def.clausal.examples.fib_link'), 'ref.declarations.def.clausal.examples.fib_content'); }, 125);
</script></div><div class="section" title="4.2.9.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.def.links"></a>4.2.9.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.expressions.call.function" title="2.4.3.&nbsp;Function Calls">Function Calls</a></p></li><li class="listitem"><p><a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">Patterns</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publication</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">Blocking</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">Deflation</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.lambda" title="2.8.&nbsp;lambda"><code class="code"><span class="hl-keyword">lambda</span></code> Expressions</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.closure" title="1.9.&nbsp;Closures">Closures</a></p></li><li class="listitem"><p><a class="link" href="#ref.types.typeinfo.function" title="9.4.2.&nbsp;Function Type Information">Adding Type Information to Functions</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.defclass" title="4.3.&nbsp;def class: Define Site in Orc"><code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code>: Define Site in Orc</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.functions" class="olink">Functions</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.closures" class="olink">First-class Functions</a></p></li></ul></div></div></div><div class="section" title="4.3.&nbsp;def class: Define Site in Orc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.declarations.defclass"></a>4.3.&nbsp;<code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code>: Define Site in Orc</h2></div></div></div><p>
      The <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code> declaration provides the capability to implement 
      <a class="link" href="#ref.sites" title="Chapter&nbsp;6.&nbsp;Sites and Services">sites</a> within Orc itself.
      It is syntactically similar to the <a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function"><code class="code"><span class="hl-keyword">def</span></code> declaration</a>, but serves a different purpose. 
      </p><p>
      The body of a <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code> consists of a sequence of declarations followed by a 
      <a name="N11D2E" class="indexterm"></a><em class="firstterm">goal</em> expression. Each <code class="code"><span class="hl-keyword">def</span></code> or
			<code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code> declaration in this sequence is called a <a name="N11D3C" class="indexterm"></a><em class="firstterm">method</em>; 
			a class must have at least one method.       
      </p><p>
      </p><p>
      Orc's <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code> provides encapsulation in a manner similar to classes in object-oriented
      languages. In addition to colocating methods and the shared resources on which they operate,
      an Orc class may also encapsulate some computation via the goal expression, colocating methods 
      and resources with some orchestration which manages or monitors those resources.  
      </p><div class="section" title="4.3.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.defclass.syntax"></a>4.3.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[23]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.defclass"><a class="link" href="#ref.declarations.defclass" title="4.3.&nbsp;def class: Define Site in Orc">DeclareDefclass</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code> <a href="#ebnf.variable">Variable</a> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.parameters">Parameters</a> <a href="#ebnf.returntype">ReturnType</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.guard">Guard</a><span class="bold"><strong>?</strong></span> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.declaration">Declaration</a><span class="bold"><strong>+</strong></span> <a href="#ebnf.expression">Expression</a> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="4.3.2.&nbsp;Creating Instances"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.defclass.instances"></a>4.3.2.&nbsp;Creating Instances</h3></div></div></div><p>
	  A <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code> declaration binds its identifier to a new site, which we call an Orc class. 
	  When this site is called, it creates and <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> an <a name="N11D63" class="indexterm"></a><em class="firstterm">instance</em>, 
	  a site which has all of the methods defined in the class.
	  </p><p>
	  In parallel, execution of the goal expression begins. 
	  Any value published by the goal expression is discarded. 
	  The class is a site, meaning that the execution of the goal expression cannot be <a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">killed</a> by Orc; 
	  it continues independently of the rest of the program.
	  </p><p>
	  When an instance is created, each <a class="link" href="#ref.declarations.val" title="4.1.&nbsp;val: Bind Value"><code class="code"><span class="hl-keyword">val</span></code> declaration</a> begins to execute, 
	  and each method is captured as a <a class="link" href="#ref.data.closure" title="1.9.&nbsp;Closures">closure</a>.
	  This has two important implications:
	  
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        Different instances will have different values for each <code class="code"><span class="hl-keyword">val</span></code> declaration,
        created by separate computations, and these bindings are captured by the method closures.
        In particular, this means that an instance could create some <a class="link" href="#ref.data.mutable" title="1.10.&nbsp;Mutable State">mutable resource</a>, such as
        a mutable cell or a semaphore, which is then manipulated by the methods; different
        instances will have different underlying mutable resources. Instances are thus very similar 
        to objects in object-oriented languages, and <code class="code"><span class="hl-keyword">val</span></code> declarations are analogous to
        private fields.
      </p></li><li class="listitem"><p>
        Recall that creation of a closure is strict in the closure's free variables. Thus,
        the creation of the instance may block on some free variable within the class (i.e.
        a variable bound by <code class="code"><span class="hl-keyword">val</span></code>), or a free variable in the scope of the class.
        In practice, this means that instance creation will block on every <code class="code"><span class="hl-keyword">val</span></code>
        declaration whose name is mentioned in any method. Furthermore, the goal expression
        might begin executing even before the instance is published.
      </p></li></ul></div><p>
	  
	  </p></div><div class="section" title="4.3.3.&nbsp;Calling Methods"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.defclass.methods"></a>4.3.3.&nbsp;Calling Methods</h3></div></div></div><p>
	  Each instance returned by a call to the class has a method for each <code class="code"><span class="hl-keyword">def</span></code> or <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code>
	  declaration in the class body. A method is accessed using a <a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">dot access</a>;
	  the identifier name of the declaration is used as the key. When a method is called, the corresponding definition
	  executes.
	  </p><p>
	  Each method behaves as a site, in particular a <a class="link" href="#ref.concepts.helpful" title="8.5.&nbsp;Helpful Sites">helpful</a> site. Therefore,
	  
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	      A method call, unlike a <a class="link" href="#ref.expressions.call.function" title="2.4.3.&nbsp;Function Calls">function call</a>, is strict in all of its arguments.
	    </p></li><li class="listitem"><p>
        A method call publishes at most one value. If the method is a <code class="code"><span class="hl-keyword">def</span></code>, its first publication
        is used, and execution of the body continues, but subsequent publications are ignored.   
      </p></li><li class="listitem"><p>
        If the method is a <code class="code"><span class="hl-keyword">def</span></code>, and execution of its body expression <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>,
        then the method call also halts silently, exactly like a helpful site.   
      </p></li><li class="listitem"><p>
        A method call cannot be <a name="N11DC9" class="indexterm"></a><a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">killed</a> by the pruning combinator.
        Once the method has been called, its execution continues independently of the rest of the Orc program. 
      </p></li></ul></div><p>
	  
	  </p><p>
	    The <a name="N11DD3" class="indexterm"></a>methods of an instance may be executed concurrently through concurrent invocations;
	    there is no synchronization or serialization mechanism to prevent this. Different calls to the same
	    method may even execute concurrently with each other.
	    If any method uses a shared resource, care must be taken to ensure that different method invocations
	    do not interfere with each other in unexpected ways.
    </p></div><div class="section" title="4.3.4.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.defclass.type"></a>4.3.4.&nbsp;Type</h3></div></div></div><p>
	      A <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code> declaration is typechecked in the same way as a <code class="code"><span class="hl-keyword">def</span></code> declaration, with one exception.
	      The return type of a <a name="N11DE3" class="indexterm"></a>closure created by <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code>, rather than being the type of the body expression, is instead a <a class="link" href="#ref.data.record.type" title="1.7.5.&nbsp;Type">record type</a>
	      <code class="code">{.</code> <em class="replaceable"><code>m<sub>0</sub></code></em> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <em class="replaceable"><code>T<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>m<sub>n</sub></code></em> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <em class="replaceable"><code>T<sub>n</sub></code></em> <code class="code">.}</code>,
	      where each <em class="replaceable"><code>m<sub>i</sub></code></em> is the name of a method,
	      and <em class="replaceable"><code>T<sub>i</sub></code></em> is its type.
	    </p></div><div class="section" title="4.3.5.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.defclass.examples"></a>4.3.5.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.defclass.semantics.examples.matrix_link" onclick="toggle(this, 'ref.declarations.defclass.semantics.examples.matrix_content')">
					&minus;
				</a><span class="exampleCaption">Matrix Definition</span></div><div class="exampleBody" id="ref.declarations.defclass.semantics.examples.matrix_content"><p>
	  		Orc's standard library supports only one dimensional arrays, and array
			indices always start at 0. We define a template for a 2-dimensional matrix whose
			row and column indices range over arbitrary intervals.
	  	</p><pre class="orc">
<span class="hl-comment">{- Create a matrix whose indices range from 
   (rowlo, collo) to (rowhi, colhi) inclusive,
   with a method to access its elements.
-}</span>

<span class="hl-keyword">def</span> <span class="hl-variable">class</span> <span class="hl-site">Matrix</span>((<span class="hl-variable">rowlo</span>, <span class="hl-variable">rowhi</span>), (<span class="hl-variable">collo</span>, <span class="hl-variable">colhi</span>)) <span class="hl-operator">=</span>
 <span class="hl-keyword">val</span> <span class="hl-variable">mat</span> <span class="hl-operator">=</span> <span class="hl-site">Array</span>((<span class="hl-variable">rowhi</span> <span class="hl-operator">-</span> <span class="hl-variable">rowlo</span> <span class="hl-operator">+</span> <span class="hl-literal">1</span>) <span class="hl-operator">*</span> (<span class="hl-variable">colhi</span> <span class="hl-operator">-</span> <span class="hl-variable">collo</span> <span class="hl-operator">+</span> <span class="hl-literal">1</span>))

 <span class="hl-keyword">def</span> <span class="hl-site">access</span>(<span class="hl-variable">i</span>, <span class="hl-variable">j</span>) <span class="hl-operator">=</span> <span class="hl-site">mat</span>((<span class="hl-variable">i</span> <span class="hl-operator">-</span> <span class="hl-variable">rowlo</span>) <span class="hl-operator">*</span> (<span class="hl-variable">colhi</span> <span class="hl-operator">-</span> <span class="hl-variable">collo</span> <span class="hl-operator">+</span> <span class="hl-literal">1</span>) <span class="hl-operator">+</span> <span class="hl-variable">j</span>)

<span class="hl-keyword">stop</span>

<span class="hl-comment">{- Usage -}</span>
<span class="hl-keyword">val</span> <span class="hl-variable">A</span> <span class="hl-operator">=</span> <span class="hl-site">Matrix</span>((<span class="hl-operator">-</span><span class="hl-literal">2</span>, <span class="hl-literal">0</span>), (<span class="hl-operator">-</span><span class="hl-literal">1</span>, <span class="hl-literal">3</span>)).<span class="hl-variable">access</span>
<span class="hl-site">A</span>(<span class="hl-operator">-</span><span class="hl-literal">1</span>, <span class="hl-literal">2</span>) <span class="hl-operator">:=</span> <span class="hl-literal">5</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">A</span>(<span class="hl-operator">-</span><span class="hl-literal">1</span>, <span class="hl-literal">2</span>) <span class="hl-operator">:=</span> <span class="hl-literal">3</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">A</span>(<span class="hl-operator">-</span><span class="hl-literal">1</span>, <span class="hl-literal">2</span>)<span class="hl-operator">?</span>

<span class="hl-comment">{-
OUTPUT:
3
-}</span>
</pre><p>
		  	Note: We have defined <code class="code"><span class="hl-variable">A</span></code> as the "access" method of the defined
			matrix. This allows us to retrieve and update the matrix elements using
			traditional notation.
		  </p></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.defclass.semantics.examples.matrix_link'), 'ref.declarations.defclass.semantics.examples.matrix_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.defclass.semantics.examples.createsite_link" onclick="toggle(this, 'ref.declarations.defclass.semantics.examples.createsite_content')">
					&minus;
				</a><span class="exampleCaption">Create a Write-Once Site</span></div><div class="exampleBody" id="ref.declarations.defclass.semantics.examples.createsite_content"><p>
		  	We create a site, <code class="code"><a name="N11E37" class="indexterm"></a><span class="hl-variable">Cell</span></code>, that defines a write-once variable. It
			supports two methods: <code class="code"><span class="hl-variable">read</span></code> <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocks</a> until the variable has been
			written, and then it publishes its value; <code class="code"><span class="hl-site">write</span>(<span class="hl-variable">v</span>)</code> <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocks</a> forever if a value has
			already been written, otherwise it writes <code class="code"><span class="hl-variable">v</span></code> as the value and
			publishes a <code class="code"><span class="hl-keyword">signal</span></code>.
		  </p><p>
		  	We use two library sites, <code class="code"><a name="N11E53" class="indexterm"></a><span class="hl-variable">Semaphore</span></code> (to ensure <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocking</a> of write if a
			value has been written) and <code class="code"><a name="N11E5D" class="indexterm"></a><span class="hl-variable">Ref</span></code> to store the value.
		  </p><pre class="orc">
<span class="hl-comment">{- Create a mutable cell site -}</span>

<span class="hl-keyword">def</span> <span class="hl-variable">class</span> <span class="hl-site">Cell</span>() <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">s</span> <span class="hl-operator">=</span> <span class="hl-site">Semaphore</span>(<span class="hl-literal">1</span>)
  <span class="hl-keyword">val</span> <span class="hl-variable">r</span> <span class="hl-operator">=</span> <span class="hl-site">Ref</span>()

  <span class="hl-keyword">def</span> <span class="hl-site">write</span>(<span class="hl-variable">v</span>) <span class="hl-operator">=</span> <span class="hl-variable">s</span>.<span class="hl-site">acquire</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">r</span> <span class="hl-operator">:=</span> <span class="hl-variable">v</span>
  <span class="hl-keyword">def</span> <span class="hl-site">read</span>() <span class="hl-operator">=</span> <span class="hl-variable">r</span><span class="hl-operator">?</span>

  <span class="hl-keyword">stop</span>

<span class="hl-keyword">val</span> <span class="hl-variable">c</span> <span class="hl-operator">=</span> <span class="hl-site">Cell</span>()

<span class="hl-variable">c</span> <span class="hl-operator">:=</span> <span class="hl-literal">42</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">c</span><span class="hl-operator">?</span>

<span class="hl-comment">{-
OUTPUT:
42
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.defclass.semantics.examples.createsite_link'), 'ref.declarations.defclass.semantics.examples.createsite_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.defclass.semantics.examples.extendsite_link" onclick="toggle(this, 'ref.declarations.defclass.semantics.examples.extendsite_content')">
					&minus;
				</a><span class="exampleCaption">Extend Functionality of an Existing Site</span></div><div class="exampleBody" id="ref.declarations.defclass.semantics.examples.extendsite_content"><p>
		  	The <code class="code"><a name="N11E6C" class="indexterm"></a><span class="hl-variable">Channel</span></code> site 
		  	implements an unbounded channel. We add a new method,
			<code class="code"><span class="hl-variable">length</span></code>, that returns the number of items in the channel. 
		  </p><pre class="orc">
<span class="hl-comment">{- Extend the pre existing channel site with a length field -}</span>

<span class="hl-keyword">def</span> <span class="hl-variable">class</span> <span class="hl-site">CustomChannel</span>() <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">ch</span> <span class="hl-operator">=</span> <span class="hl-site">Channel</span>()
  <span class="hl-keyword">val</span> <span class="hl-variable">chlen</span> <span class="hl-operator">=</span> <span class="hl-site">Counter</span>(<span class="hl-literal">0</span>)

  <span class="hl-keyword">def</span> <span class="hl-site">put</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-variable">ch</span>.<span class="hl-site">put</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">chlen</span>.<span class="hl-site">inc</span>()
  <span class="hl-keyword">def</span> <span class="hl-site">get</span>() <span class="hl-operator">=</span> <span class="hl-variable">ch</span>.<span class="hl-site">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">chlen</span>.<span class="hl-site">dec</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">x</span>
  <span class="hl-keyword">def</span> <span class="hl-site">length</span>() <span class="hl-operator">=</span> <span class="hl-variable">chlen</span>.<span class="hl-site">value</span>()

  <span class="hl-keyword">stop</span>

<span class="hl-keyword">val</span> <span class="hl-variable">cc</span> <span class="hl-operator">=</span> <span class="hl-site">CustomChannel</span>()

  <span class="hl-site">signals</span>(<span class="hl-literal">10</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">cc</span>.<span class="hl-site">put</span>(<span class="hl-literal">"item"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
<span class="hl-combinator">|</span> <span class="hl-site">signals</span>(<span class="hl-literal">5</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">cc</span>.<span class="hl-site">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
<span class="hl-combinator">;</span> <span class="hl-variable">cc</span>.<span class="hl-site">length</span>()

<span class="hl-comment">{-
OUTPUT:
5
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.defclass.semantics.examples.extendsite_link'), 'ref.declarations.defclass.semantics.examples.extendsite_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.defclass.semantics.examples.concaccess_link" onclick="toggle(this, 'ref.declarations.defclass.semantics.examples.concaccess_content')">
					&minus;
				</a><span class="exampleCaption">Managing Concurrent Access</span></div><div class="exampleBody" id="ref.declarations.defclass.semantics.examples.concaccess_content"><p>
		  	The methods of a class instance may be executed concurrently through
			concurrent invocations. Concurrent execution may cause interference,
			as in the example of the <code class="code"><span class="hl-variable">Newset</span></code> example. Typically, <a name="N11E80" class="indexterm"></a>semaphores are used to
			restrict access to methods and/or data. We rewrite <code class="code"><span class="hl-variable">Newset</span></code> in which all
			accesses to shared data <code class="code"><span class="hl-variable">ne</span></code> are protected using a semaphore.
		  </p><pre class="orc">
<span class="hl-comment">{- Manage access to a set via a site -}</span>

<span class="hl-keyword">def</span> <span class="hl-variable">class</span> <span class="hl-site">Newset</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span>
 <span class="hl-keyword">val</span> <span class="hl-variable">b</span> <span class="hl-operator">=</span> <span class="hl-site">BoundedChannel</span>(<span class="hl-variable">n</span>)
 <span class="hl-keyword">val</span> (<span class="hl-variable">s</span> , <span class="hl-variable">ne</span>) <span class="hl-operator">=</span> (<span class="hl-site">Semaphore</span>(<span class="hl-literal">1</span>) , <span class="hl-site">Ref</span>(<span class="hl-literal">0</span>))

 <span class="hl-comment">{- Add an element to the set if it is non-full.
   If the set is full, wait until the set becomes non-full.
   Return a signal on completion.
 -}</span>
 <span class="hl-keyword">def</span> <span class="hl-site">add</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-variable">b</span>.<span class="hl-site">put</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">s</span>.<span class="hl-site">acquire</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">ne</span> <span class="hl-operator">:=</span> <span class="hl-variable">ne</span><span class="hl-operator">?</span> <span class="hl-operator">+</span> <span class="hl-literal">1</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">s</span>.<span class="hl-site">release</span>()

 <span class="hl-comment">{- Remove some element from the set if it is non-empty.
   If the set is empty, wait until the set becomes non-empty.
   Return the removed value.
 -}</span>
 <span class="hl-keyword">def</span> <span class="hl-site">remove</span>() <span class="hl-operator">=</span> <span class="hl-variable">b</span>.<span class="hl-site">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">s</span>.<span class="hl-site">acquire</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">ne</span> <span class="hl-operator">:=</span> <span class="hl-variable">ne</span><span class="hl-operator">?</span> <span class="hl-operator">-</span> <span class="hl-literal">1</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
   <span class="hl-variable">s</span>.<span class="hl-site">release</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">x</span>

 <span class="hl-comment">{- Return the size, i.e., the number of elements currently in the set
 -}</span>
 <span class="hl-keyword">def</span> <span class="hl-site">size</span>() <span class="hl-operator">=</span> <span class="hl-variable">s</span>.<span class="hl-site">acquire</span>() <span class="hl-variable">ne</span><span class="hl-operator">?</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">s</span>.<span class="hl-site">release</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">x</span>

<span class="hl-keyword">stop</span>

<span class="hl-comment">{-
OUTPUT:
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.defclass.semantics.examples.concaccess_link'), 'ref.declarations.defclass.semantics.examples.concaccess_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.defclass.semantics.examples.goal_link" onclick="toggle(this, 'ref.declarations.defclass.semantics.examples.goal_content')">
					&minus;
				</a><span class="exampleCaption">Computing with the Goal Expression</span></div><div class="exampleBody" id="ref.declarations.defclass.semantics.examples.goal_content"><p>
		  	All the goal expressions shown so far have been merely <code class="code"><span class="hl-keyword">stop</span></code>. In the
			following example, the goal expression of the class initiates an
			computation in which a number is printed every second; all the
			publications of the goal expression are ignored.
		  </p><pre class="orc">
<span class="hl-comment">{- Perform a print action with the goal expression 
   of a class: counting down from n to 0.
-}</span>

<span class="hl-keyword">def</span> <span class="hl-variable">class</span> <span class="hl-site">countdown</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span>

 <span class="hl-keyword">def</span> <span class="hl-site">downfrom</span>(<span class="hl-variable">i</span>) <span class="hl-keyword">if</span> (<span class="hl-variable">i</span> <span class="hl-operator">&gt;=</span> <span class="hl-literal">0</span>) <span class="hl-operator">=</span> <span class="hl-variable">i</span> <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">downfrom</span>(<span class="hl-variable">i</span><span class="hl-operator">-</span><span class="hl-literal">1</span>)

 <span class="hl-comment">{- Goal -}</span> <span class="hl-site">downfrom</span>(<span class="hl-variable">n</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">i</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Println</span>(<span class="hl-variable">i</span>)

<span class="hl-keyword">val</span> <span class="hl-variable">_</span> <span class="hl-operator">=</span> <span class="hl-site">countdown</span>(<span class="hl-literal">5</span>)
<span class="hl-comment">{- Goal of the whole program -}</span>  <span class="hl-keyword">stop</span>

<span class="hl-comment">{-
OUTPUT:
5
4
3
2
1
0
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.defclass.semantics.examples.goal_link'), 'ref.declarations.defclass.semantics.examples.goal_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.defclass.semantics.examples.stopwatch_link" onclick="toggle(this, 'ref.declarations.defclass.semantics.examples.stopwatch_content')">
					&minus;
				</a><span class="exampleCaption">Stopwatch</span></div><div class="exampleBody" id="ref.declarations.defclass.semantics.examples.stopwatch_content"><pre class="orc">
<span class="hl-comment">{- 
  An instance of Stopwatch has the following operations:
     
    start():  
      Start a paused stopwatch and publish a signal.
      If the stopwatch is already running, halt instead.
    finish(): 
      Pause a running stopwatch and publish the time
      that has passed since it was last started.
      If the stopwatch is already paused, halt instead.
-}</span> 

<span class="hl-keyword">def</span> <span class="hl-variable">class</span> <span class="hl-site">Stopwatch</span>() <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">now</span> <span class="hl-operator">=</span> <span class="hl-site">Rclock</span>().<span class="hl-variable">time</span> 
  <span class="hl-keyword">val</span> <span class="hl-variable">checkpoint</span> <span class="hl-operator">=</span> <span class="hl-site">Ref</span>(<span class="hl-site">now</span>())
  <span class="hl-keyword">val</span> (<span class="hl-variable">startlock</span>, <span class="hl-variable">finishlock</span>) <span class="hl-operator">=</span> (<span class="hl-site">Semaphore</span>(<span class="hl-literal">0</span>), <span class="hl-site">Semaphore</span>(<span class="hl-literal">0</span>))
  <span class="hl-keyword">def</span> <span class="hl-site">start</span>() <span class="hl-operator">=</span> 
    <span class="hl-variable">startlock</span>.<span class="hl-site">acquireD</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
      <span class="hl-site">now</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">starttime</span><span class="hl-combinator">&gt;</span> 
      <span class="hl-variable">checkpoint</span> <span class="hl-operator">:=</span> <span class="hl-variable">starttime</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
    <span class="hl-variable">finishlock</span>.<span class="hl-site">release</span>()
  <span class="hl-keyword">def</span> <span class="hl-site">finish</span>() <span class="hl-operator">=</span>
    <span class="hl-variable">finishlock</span>.<span class="hl-site">acquireD</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
      <span class="hl-variable">checkpoint</span><span class="hl-operator">?</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">starttime</span><span class="hl-combinator">&gt;</span>
      <span class="hl-site">now</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">endtime</span><span class="hl-combinator">&gt;</span>
      <span class="hl-variable">checkpoint</span> <span class="hl-operator">:=</span> <span class="hl-variable">endtime</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
    <span class="hl-variable">startlock</span>.<span class="hl-site">release</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
    <span class="hl-variable">endtime</span> <span class="hl-operator">-</span> <span class="hl-variable">starttime</span>
  
  <span class="hl-variable">startlock</span>.<span class="hl-site">release</span>()    
  
  
<span class="hl-keyword">val</span> <span class="hl-variable">watch</span> <span class="hl-operator">=</span> <span class="hl-site">Stopwatch</span>()

<span class="hl-variable">watch</span>.<span class="hl-site">start</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">400</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">watch</span>.<span class="hl-site">finish</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">i</span><span class="hl-combinator">&gt;</span>
<span class="hl-site">Rwait</span>(<span class="hl-literal">200</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-variable">watch</span>.<span class="hl-site">start</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">100</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">watch</span>.<span class="hl-site">finish</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">j</span><span class="hl-combinator">&gt;</span>
(<span class="hl-variable">i</span><span class="hl-operator">+</span><span class="hl-variable">j</span> <span class="hl-operator">&gt;=</span> <span class="hl-literal">500</span>) <span class="hl-operator">&amp;&amp;</span> (<span class="hl-variable">i</span><span class="hl-operator">+</span><span class="hl-variable">j</span> <span class="hl-operator">&lt;=</span> <span class="hl-literal">525</span>)

<span class="hl-comment">{-
OUTPUT:
true
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.defclass.semantics.examples.stopwatch_link'), 'ref.declarations.defclass.semantics.examples.stopwatch_content'); }, 125);
</script></div><div class="section" title="4.3.6.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.defclass.links"></a>4.3.6.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">Site Calls</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">Dot Access</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publication</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.record.type" title="1.7.5.&nbsp;Type">Record Types</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.helpful" title="8.5.&nbsp;Helpful Sites">Helpful Sites</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function"><code class="code"><span class="hl-keyword">def</span></code>:  Define Function</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.defclass" class="olink">Defining Classes</a></p></li></ul></div></div></div><div class="section" title="4.4.&nbsp;import site: Import Site"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.declarations.site"></a>4.4.&nbsp;<code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">site</span></code>: Import Site</h2></div></div></div><p>
<a name="N11EDC" class="indexterm"></a>
A <em class="firstterm">site declaration</em> makes an Orc <a class="link" href="#ref.sites" title="Chapter&nbsp;6.&nbsp;Sites and Services">site</a> that is present in the environment available for use by the program.
	</p><p>
Orc sites provide operations such as arithmetic functions, platform facilities, or Web services for Orc programs to invoke.
The Orc standard prelude, which is implicitly included in Orc programs by the compiler, contains declarations for all items in the Orc <a class="link" href="#ref.stdlib" title="Chapter&nbsp;11.&nbsp;Standard Library">standard library</a>.
Sites beyond those in the standard library are made available by a site declaration.
A site declaration names a variable to bind to the site and specifies a location from with the site is obtained (<a name="N11EED" class="indexterm"></a>site resolution).
In the present Orc implementation, this location is specified as a fully qualified name of a class that can be loaded from the JVM classpath.
	</p><div class="section" title="4.4.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.site.syntax"></a>4.4.1.&nbsp;Syntax</h3></div></div></div><p>
			</p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[26]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.site"><a class="link" href="#ref.declarations.site" title="4.4.&nbsp;import site: Import Site">DeclareSite</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">site</span></code> <a href="#ebnf.variable">Variable</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.classname">ClassName</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		</p></div><div class="section" title="4.4.2.&nbsp;Site Resolution"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.site.resolve"></a>4.4.2.&nbsp;Site Resolution</h3></div></div></div><p>
A site is resolved as follows:
The site class loader is requested to load the class of the fully qualified name specified in the site declaration.
The resolver verifies that the loaded class is a subtype of <code class="code">orc.values.site.Site</code>.
If so, that class is bound to the variable name in the site declaration.
If it is not, the resolver attempts to load the Scala companion module for this class.
If this exists and is a subtype of <code class="code">orc.values.site.Site</code>, it is bound to the variable name in the site declaration.
If it is not found, or is not the expected type, site resolution fails.
		</p><p>
The site class loader referred to above is the usual JVM stack of delegating class loaders.
In the Orc implementation, the stack is initially the first non-<code class="code">null</code> of: 1) the current thread's context class loader, 2) the class loader of the site resolver class, or 3) the JVM system class loader.
This loader has a URL class loader stacked on it if a site classpath is configured.
Thus, if a site classpath is configured, is is searched first.
If no class is found on the site classpath, or the site classpath is not configured, then the normal classpath is searched.
		</p></div><div class="section" title="4.4.3.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.site.type"></a>4.4.3.&nbsp;Type</h3></div></div></div><p>
			The type of a site is determined entirely by the site itself. It may
			be representable in Orc, for example as a <a class="link" href="#ref.data.closure.type" title="1.9.1.&nbsp;Type">function type</a>,
			or it may be an entirely opaque type. The type of a site behaves very
			much like a site itself during typechecking; it is invoked with
			argument types and responds with a return type.
		</p><p>
		  The Orc typechecker cannot independently verify that a site's stated type is correct.
		  If the site misrepresents its type, this may result in a runtime type error.
		</p></div><div class="section" title="4.4.4.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.site.examples"></a>4.4.4.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.site.examples.basic_link" onclick="toggle(this, 'ref.declarations.site.examples.basic_content')">
					&minus;
				</a><span class="exampleCaption">Declaring a user-supplied site</span></div><div class="exampleBody" id="ref.declarations.site.examples.basic_content"><pre class="programlisting">
<span class="hl-comment">{-
 - Assume a JVM class file named com.example.MySite is
 - availalble on the classpath, and that it implements
 - the orc.values.site.Site trait.
 -}</span>

<span class="hl-keyword">import</span> <span class="hl-variable">site</span> <span class="hl-variable">MySite</span> <span class="hl-operator">=</span> <span class="hl-literal">"com.example.MySite"</span>

<span class="hl-site">MySite</span>()
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.site.examples.basic_link'), 'ref.declarations.site.examples.basic_content'); }, 125);
</script></div><div class="section" title="4.4.5.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.site.links"></a>4.4.5.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.stdlib" title="Chapter&nbsp;11.&nbsp;Standard Library">Standard Library</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.import" class="olink">Importing Resources</a></p></li></ul></div></div></div><div class="section" title="4.5.&nbsp;import class: Import Class from Java"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.declarations.class"></a>4.5.&nbsp;<code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code>:  Import Class from Java</h2></div></div></div><p>
Orc programs can use services of the platform on which the Orc runtime engine runs.
In this implementation of Orc, this platform is the Java Runtime Environment (JRE).
<a name="N11F4A" class="indexterm"></a>Java classes may be imported into Orc 
programs and <a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">called</a> as Orc sites.
	</p><p>
The declaration <a name="N11F54" class="indexterm"></a><code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span> </code><em class="replaceable"><code>S</code></em><code class="code"> <span class="hl-operator">=</span> <span class="hl-literal">"</span></code><em class="replaceable"><code>J</code></em><code class="code"><span class="hl-literal">"</span></code>
binds the variable <em class="replaceable"><code>S</code></em> to a site representing the Java class <em class="replaceable"><code>J</code></em>.
Calls to <em class="replaceable"><code>S</code></em> invoke the corresponding <a name="N11F6B" class="indexterm"></a>constructor of the Java class <em class="replaceable"><code>J</code></em>.
The created class instance is published from the site call.
Instance methods may be invoked on this published value.
Calls to <em class="replaceable"><code>S</code></em><code class="code">.</code><em class="replaceable"><code>m</code></em> invoke the corresponding class static method of the Java class <em class="replaceable"><code>J</code></em>.
The return value of the method is <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">published</a> from the site call.
Further details of the Orc-Java interface are in the <a class="link" href="#ref.sites.java" title="6.2.&nbsp;Java sites">Java sites</a> section.
	</p><div class="section" title="4.5.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.class.syntax"></a>4.5.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[27]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.class"><a class="link" href="#ref.declarations.class" title="4.5.&nbsp;import class: Import Class from Java">DeclareClass</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code> <a href="#ebnf.variable">Variable</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.classname">ClassName</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="4.5.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.class.type"></a>4.5.2.&nbsp;Type</h3></div></div></div><p>
	    When typechecking declared classes, the Orc typechecker interfaces with the <a name="N11F96" class="indexterm"></a>Java type system, so that operations on
	    Java objects typecheck as one would expect in a Java program, with a few exceptions.
	    
	    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Methods with return type <code class="code"><span class="hl-keyword">void</span></code> in Java have return type <code class="code"><span class="hl-variable">Signal</span></code> in Orc.</p></li><li class="listitem"><p>Interfaces are not fully supported.</p></li><li class="listitem"><p>Type parameter bounds are not supported.</p></li></ul></div><p>
	    
	  </p><p>
	  In addition to declaring a site, the <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code> declaration also declares a type with the same name.
	  It is the Orc type for instances of that Java class. For example, the declaration <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">File</span> <span class="hl-operator">=</span> <span class="hl-variable">java</span>.<span class="hl-variable">io</span>.<span class="hl-variable">File</span></code>
	  declares a type <code class="code"><span class="hl-variable">File</span></code>, which is the type of all instances of <code class="code">java.io.File</code>.
		</p><p>
		If a <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code> declaration binds a generic Java class, then the corresponding Orc type is instead a <a class="link" href="#ref.types.polymorphism" title="9.2.&nbsp;Parametric Polymorphism">type operator</a>,
		and the constructor site takes type parameters.
		</p><p>
		<a class="link" href="#ref.types.subtyping" title="9.3.&nbsp;Subtyping">Subtyping</a> between Java object types is determined by Java's subtyping relation: if
		one class is a subclass of another, then that type will be a subtype of the other.
		The typechecker does not implement a true <a class="link" href="#ref.types.subtyping.join" title="9.3.3.&nbsp;Join">join</a> operation for Java types; it will
		find a common ancestor, but not the least common ancestor. 
		</p></div><div class="section" title="4.5.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.class.examples"></a>4.5.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.class.examples.call_link" onclick="toggle(this, 'ref.declarations.class.examples.call_content')">
					&minus;
				</a><span class="exampleCaption">Invoke a Java constructor and instance method</span></div><div class="exampleBody" id="ref.declarations.class.examples.call_content"><pre class="orc">
<span class="hl-comment">{- Use a Java class to count the number of tokens in a string -}</span>

<span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">StringTokenizer</span> <span class="hl-operator">=</span> <span class="hl-literal">"java.util.StringTokenizer"</span>

<span class="hl-comment">-- Invoke a constructor:</span>
<span class="hl-keyword">val</span> <span class="hl-variable">st</span> <span class="hl-operator">=</span> <span class="hl-site">StringTokenizer</span>(<span class="hl-literal">"Elegance is not a dispensable luxury, but a quality that decides between success and failure."</span>, <span class="hl-literal">" "</span>)

<span class="hl-comment">-- Invoke a method</span>
<span class="hl-variable">st</span>.<span class="hl-site">countTokens</span>()

<span class="hl-comment">{-
OUTPUT:
15
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.class.examples.call_link'), 'ref.declarations.class.examples.call_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.class.examples.staticcall_link" onclick="toggle(this, 'ref.declarations.class.examples.staticcall_content')">
					&minus;
				</a><span class="exampleCaption">Invoke a Java static method</span></div><div class="exampleBody" id="ref.declarations.class.examples.staticcall_content"><pre class="orc">
<span class="hl-comment">{- Use a Java class to calculate a log value -}</span>

<span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">JavaMath</span> <span class="hl-operator">=</span> <span class="hl-literal">"java.lang.Math"</span>

<span class="hl-comment">-- Invoke a static method:</span>
<span class="hl-variable">JavaMath</span>.<span class="hl-site">log10</span>(<span class="hl-literal">42.0</span>)

<span class="hl-comment">{-
OUTPUT:
1.6232492903979006
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.class.examples.staticcall_link'), 'ref.declarations.class.examples.staticcall_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.class.examples.generic_link" onclick="toggle(this, 'ref.declarations.class.examples.generic_content')">
					&minus;
				</a><span class="exampleCaption">Declaring and instantiating a Java generic class</span></div><div class="exampleBody" id="ref.declarations.class.examples.generic_content"><pre class="orc">
<span class="hl-comment">{- Use a Java class to represent tree data structures -}</span>

<span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">TreeSet</span> <span class="hl-operator">=</span> <span class="hl-literal">"java.util.TreeSet"</span>

<span class="hl-keyword">val</span> <span class="hl-variable">s</span> <span class="hl-operator">=</span> <span class="hl-site">TreeSet</span>[<span class="hl-variable">String</span>]()
<span class="hl-variable">s</span>.<span class="hl-site">add</span>(<span class="hl-literal">"Orc"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">s</span>.<span class="hl-site">add</span>(<span class="hl-literal">"Java"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">s</span>.<span class="hl-site">add</span>(<span class="hl-literal">"Orc"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">s</span>.<span class="hl-site">size</span>()

<span class="hl-comment">{-
OUTPUT:
2
-}</span> 
		</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.class.examples.generic_link'), 'ref.declarations.class.examples.generic_content'); }, 125);
</script></div><div class="section" title="4.5.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.class.links"></a>4.5.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.sites.java" title="6.2.&nbsp;Java sites">Java Sites</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">Dot Access</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">Site Calls</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.import" class="olink">Importing Resources</a></p></li></ul></div></div></div><div class="section" title="4.6.&nbsp;type: Declare Type"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.declarations.type"></a>4.6.&nbsp;<code class="code"><span class="hl-keyword">type</span></code>:  Declare Type</h2></div></div></div><a name="N12012" class="indexterm"></a><p>
			A type declaration binds a type variable to a type. There are three kinds of 
			type declarations: <em class="firstterm">aliases</em>, 
			<span class="emphasis"><em>imports</em></span>, and <span class="emphasis"><em>datatypes</em></span>.
			</p><div class="section" title="4.6.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.type.syntax"></a>4.6.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[29]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.type"><a class="link" href="#ref.declarations.type" title="4.6.&nbsp;type: Declare Type">DeclareType</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.declaration.type.alias">DeclareTypeAlias</a>
				<br>&#10073; <a href="#ebnf.declaration.type.import">DeclareTypeImport</a>
				<br>&#10073; <a href="#ebnf.declaration.type.datatype">DeclareDatatype</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[30]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.type.alias"><a class="link" href="#ref.declarations.type.alias" title="4.6.2.&nbsp;Type Alias">DeclareTypeAlias</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">type</span></code> <a href="#ebnf.typevariable">TypeVariable</a> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.type">Type</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[31]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.type.import"><a class="link" href="#ref.declarations.type.import" title="4.6.3.&nbsp;Type Import">DeclareTypeImport</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">import</span> <span class="hl-keyword">type</span></code> <a href="#ebnf.typevariable">TypeVariable</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.classname">ClassName</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="4.6.2.&nbsp;Type Alias"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.type.alias"></a>4.6.2.&nbsp;Type Alias</h3></div></div></div><p>
	    A <a name="N12039" class="indexterm"></a><em class="firstterm">type alias</em> gives an existing type a new name, for the programmer's ease of use.
			There is no distinction between the alias and the aliased type; they can be used
			interchangeably. A type alias may not be recursive.
	  </p><p>
	    A type alias may have type parameters, in which case it defines a <a class="link" href="#ref.types.polymorphism" title="9.2.&nbsp;Parametric Polymorphism">type operator</a>
	    which can be applied to other types.
	  </p></div><div class="section" title="4.6.3.&nbsp;Type Import"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.type.import"></a>4.6.3.&nbsp;Type Import</h3></div></div></div><p>
			A <a name="N1204C" class="indexterm"></a><em class="firstterm">type import</em> gives a name to a type described by some external service.
			This allows new types to be added to Orc, in much the same way that
			the <a class="link" href="#ref.declarations.site" title="4.4.&nbsp;import site: Import Site"><code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">site</span></code> declaration</a> declaration allows new sites to be added to Orc.
			Type imports are often used in conjunction with the <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">site</span></code>,
			to give a name to the type of values produced by the site.
	  </p></div><div class="section" title="4.6.4.&nbsp;Datatype"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.type.datatype"></a>4.6.4.&nbsp;Datatype</h3></div></div></div><a name="N12061" class="indexterm"></a><p>
	    A <span class="emphasis"><em><a name="N12067" class="indexterm"></a>datatype declaration</em></span> defines a new type, called a <a name="N1206C" class="indexterm"></a><em class="firstterm">sum type</em>, which is the
	    type of all values produced by any of the declared <a class="link" href="#ref.data.datatype.type" title="1.8.3.&nbsp;Type">constructors</a>. 
	  </p><p>
	    A datatype declaration may be polymorphic, introducing new type variables which may be used within
	    the slots of the constructors. It may also be recursive; the type name itself can be used within the
	    slots of the constructors. A datatype declaration is the only way to define type recursively in Orc.
	  </p><p>
	    The datatype declaration also assigns types to each of the constructors that it defines.
	  </p></div><div class="section" title="4.6.5.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.type.examples"></a>4.6.5.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.type.examples.aliases_link" onclick="toggle(this, 'ref.declarations.type.examples.aliases_content')">
					&minus;
				</a><span class="exampleCaption">Aliasing Types</span></div><div class="exampleBody" id="ref.declarations.type.examples.aliases_content"><pre class="programlisting">
<span class="hl-comment">{- Define a three-dimensional vector type, and a polymorphic relation type  -}</span>

<span class="hl-keyword">type</span> <span class="hl-variable">Vector</span> <span class="hl-operator">=</span> {. <span class="hl-variable">x</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>, <span class="hl-variable">y</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>, <span class="hl-variable">z</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span> .}
<span class="hl-keyword">type</span> <span class="hl-site">Relation</span>[<span class="hl-variable">R</span>] <span class="hl-operator">=</span> (<span class="hl-variable">R</span>,<span class="hl-variable">R</span>) <span class="hl-operator">=</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">Boolean</span>

<span class="hl-comment">{-
NONRUNNABLE
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.type.examples.aliases_link'), 'ref.declarations.type.examples.aliases_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.type.examples.imports_link" onclick="toggle(this, 'ref.declarations.type.examples.imports_content')">
					&minus;
				</a><span class="exampleCaption">Importing Types</span></div><div class="exampleBody" id="ref.declarations.type.examples.imports_content"><pre class="programlisting">
<span class="hl-comment">{- Import the Cell type of write-once cells, and import Java's URI type -}</span>

<span class="hl-keyword">import</span> <span class="hl-keyword">type</span> <span class="hl-variable">Cell</span> <span class="hl-operator">=</span> <span class="hl-literal">"orc.lib.state.types.CellType"</span>
<span class="hl-keyword">import</span> <span class="hl-keyword">type</span> <span class="hl-variable">URI</span> <span class="hl-operator">=</span> <span class="hl-literal">"java.net.URI"</span>

<span class="hl-comment">{-
NONRUNNABLE
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.type.examples.imports_link'), 'ref.declarations.type.examples.imports_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.type.examples.tree_link" onclick="toggle(this, 'ref.declarations.type.examples.tree_content')">
					&minus;
				</a><span class="exampleCaption">Binary Tree Type</span></div><div class="exampleBody" id="ref.declarations.type.examples.tree_content"><pre class="orc">
<span class="hl-comment">{- 
   Define a polymorphic binary tree datatype,
   then construct a tree of integers and a
   tree of booleans.
-}</span>

<span class="hl-keyword">type</span> <span class="hl-site">Tree</span>[<span class="hl-variable">T</span>] <span class="hl-operator">=</span> <span class="hl-site">Node</span>(<span class="hl-site">Tree</span>[<span class="hl-variable">T</span>], <span class="hl-variable">T</span>, <span class="hl-site">Tree</span>[<span class="hl-variable">T</span>]) <span class="hl-combinator">|</span> <span class="hl-site">Empty</span>()

<span class="hl-keyword">val</span> <span class="hl-variable">intTree</span> <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">left</span> <span class="hl-operator">=</span> <span class="hl-site">Node</span>(<span class="hl-site">Empty</span>(), <span class="hl-literal">0</span>, <span class="hl-site">Empty</span>())
  <span class="hl-keyword">val</span> <span class="hl-variable">right</span> <span class="hl-operator">=</span> <span class="hl-site">Node</span>(<span class="hl-site">Empty</span>(), <span class="hl-literal">2</span>, <span class="hl-site">Empty</span>())
  <span class="hl-site">Node</span>(<span class="hl-variable">left</span>, <span class="hl-literal">1</span>, <span class="hl-variable">right</span>)

<span class="hl-keyword">val</span> <span class="hl-variable">boolTree</span> <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">left</span> <span class="hl-operator">=</span> <span class="hl-site">Node</span>(<span class="hl-site">Empty</span>(), <span class="hl-literal">false</span>, <span class="hl-site">Empty</span>())
  <span class="hl-site">Node</span>(<span class="hl-variable">left</span>, <span class="hl-literal">true</span>, <span class="hl-site">Empty</span>())

<span class="hl-variable">intTree</span> <span class="hl-combinator">|</span> <span class="hl-variable">boolTree</span> 

<span class="hl-comment">{-
OUTPUT:PERMUTABLE
Node(Node(Empty(), false, Empty()), true, Empty())
Node(Node(Empty(), 0, Empty()), 1, Node(Empty(), 2, Empty()))
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.type.examples.tree_link'), 'ref.declarations.type.examples.tree_content'); }, 125);
</script></div><div class="section" title="4.6.6.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.type.links"></a>4.6.6.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.data.datatype" title="1.8.&nbsp;Algebraic Data Types">Algebraic Data Types</a></p></li><li class="listitem"><p><a class="link" href="#ref.types.polymorphism.types" title="9.2.1.&nbsp;Parametric types">Parametric Types</a></p></li><li class="listitem"><p><a class="link" href="#ref.types.metatheory" title="9.1.&nbsp;Metatheory">Type System Metatheory</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.datatypes" class="olink">Datatypes</a></p></li></ul></div></div></div><div class="section" title="4.7.&nbsp;include: Include Orc File"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.declarations.include"></a>4.7.&nbsp;<code class="code"><span class="hl-keyword">include</span></code>:  Include Orc File</h2></div></div></div><p>
It is often convenient to group related declarations into units that can be
shared between programs. The <code class="code"><a name="N120C0" class="indexterm"></a><span class="hl-keyword">include</span></code> declaration offers a simple
way to do this. It names a source file containing a sequence of Orc declarations;
those declarations are incorporated into the program as if they had textually
replaced the include declaration. An include declaration may occur wherever any other
declaration occurs, even in a nested scope. An included file may itself contain 
<code class="code"><span class="hl-keyword">include</span></code> declarations.  Included files may come from local files, any
URI recognized by the Java library (http, https, ftp, etc.), and include resources
found in the Orc JAR files.
			</p><div class="section" title="4.7.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.include.syntax"></a>4.7.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[28]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.include"><a class="link" href="#ref.declarations.include" title="4.7.&nbsp;include: Include Orc File">DeclareInclude</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">include</span></code> <a href="#ebnf.filename">FileName</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="4.7.2.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.include.examples"></a>4.7.2.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.include.examples.fold_link" onclick="toggle(this, 'ref.declarations.include.examples.fold_content')">
					&minus;
				</a><span class="exampleCaption">fold.inc,used below</span></div><div class="exampleBody" id="ref.declarations.include.examples.fold_content"><pre class="programlisting">
<span class="hl-comment">{- Contents of fold.inc -}</span>

<span class="hl-keyword">def</span> <span class="hl-site">foldl</span>(<span class="hl-variable">f</span>,[],<span class="hl-variable">s</span>) <span class="hl-operator">=</span> <span class="hl-variable">s</span>
<span class="hl-keyword">def</span> <span class="hl-site">foldl</span>(<span class="hl-variable">f</span>,<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">t</span>,<span class="hl-variable">s</span>) <span class="hl-operator">=</span> <span class="hl-site">foldl</span>(<span class="hl-variable">f</span>,<span class="hl-variable">t</span>,<span class="hl-site">f</span>(<span class="hl-variable">h</span>,<span class="hl-variable">s</span>))

<span class="hl-keyword">def</span> <span class="hl-site">foldr</span>(<span class="hl-variable">f</span>,<span class="hl-variable">l</span>,<span class="hl-variable">s</span>) <span class="hl-operator">=</span> <span class="hl-site">foldl</span>(<span class="hl-variable">f</span>,<span class="hl-site">rev</span>(<span class="hl-variable">l</span>),<span class="hl-variable">s</span>)
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.include.examples.fold_link'), 'ref.declarations.include.examples.fold_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.declarations.include.examples.include_link" onclick="toggle(this, 'ref.declarations.include.examples.include_content')">
					&minus;
				</a><span class="exampleCaption">Include a separate file</span></div><div class="exampleBody" id="ref.declarations.include.examples.include_content"><pre class="programlisting">
<span class="hl-comment">{- This is the same as inserting the contents of fold.inc here -}</span>
<span class="hl-keyword">include</span> <span class="hl-literal">"fold.inc"</span>

<span class="hl-keyword">def</span> <span class="hl-site">sum</span>(<span class="hl-variable">L</span>) <span class="hl-operator">=</span> <span class="hl-site">foldl</span>(<span class="hl-keyword">lambda</span>(<span class="hl-variable">a</span>,<span class="hl-variable">b</span>) <span class="hl-operator">=</span> <span class="hl-variable">a</span><span class="hl-operator">+</span><span class="hl-variable">b</span>, <span class="hl-variable">L</span>, <span class="hl-literal">0</span>)

<span class="hl-site">sum</span>([<span class="hl-literal">1</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>])
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.declarations.include.examples.include_link'), 'ref.declarations.include.examples.include_content'); }, 125);
</script></div><div class="section" title="4.7.3.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.declarations.include.links"></a>4.7.3.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.declarations" title="Chapter&nbsp;4.&nbsp;Declarations">Declarations</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.import" class="olink">Importing Resources</a></p></li></ul></div></div></div></div><div lang="" class="chapter" title="Chapter&nbsp;5.&nbsp;Patterns"><div class="titlepage"><div><div><h2 class="title"><a name="ref.patterns"></a>Chapter&nbsp;5.&nbsp;Patterns</h2></div></div></div><p>
<a name="N12107" class="indexterm"></a><em class="firstterm">Patterns</em> are used in <a class="link" href="#ref.combinators" title="Chapter&nbsp;3.&nbsp;Combinators">combinators</a>, in <a class="link" href="#ref.declarations.val" title="4.1.&nbsp;val: Bind Value"><code class="code"><span class="hl-keyword">val</span></code></a> declarations, and in <a class="link" href="#ref.declarations.def.clauses" title="4.2.6.&nbsp;Clausal Definition">clausal definitions</a> of functions, to select values and bind variables to values. 
A pattern is given by a shape and a set of variables. A <span class="emphasis"><em>shape</em></span> is either a tuple, a list, 
a record, a call, a literal value,
or wildcard (written as <code class="code"><span class="hl-variable">_</span></code>). If the shape describes a structured value (such as a tuple), its components may
also be shapes. For example, the shape <code class="code">(<span class="hl-variable">_</span>,<span class="hl-literal">3</span>)</code> describes all pairs whose second element is <code class="code"><span class="hl-literal">3</span></code>, 
and the pattern <code class="code">(<span class="hl-variable">x</span>,<span class="hl-literal">3</span>)</code> binds <code class="code"><span class="hl-variable">x</span></code> to the first element of all such pairs.      
</p><p>
Note that a pattern may fail to match a value, if it does not have the same shape as that value.
When this occurs, the unmatched value is simply discarded.
</p><p>
A pattern such as <code class="code">(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)</code> may bind multiple variables. 
However, patterns are <a name="N12134" class="indexterm"></a><em class="firstterm">linear</em>, meaning that a pattern may mention a variable name at most once. 
For example, <code class="code">(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>,<span class="hl-variable">x</span>)</code> is not a valid pattern.
</p><p>
During typechecking, a pattern is matched against a type instead of a value. This match produces a 
<a name="N12141" class="indexterm"></a><a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">typing context</a>, which associates a type with each variable that occurs in the pattern.
</p><div class="section" title="5.1.&nbsp;Literal Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.patterns.literal"></a>5.1.&nbsp;Literal Pattern</h2></div></div></div><p>
		A <a name="N12152" class="indexterm"></a><em class="firstterm">literal pattern</em> matches only the same literal value.
		It is often used in <a class="link" href="#ref.declarations.def.clauses" title="4.2.6.&nbsp;Clausal Definition">clausal definitions</a> of functions.
	</p><div class="section" title="5.1.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.literal.syntax"></a>5.1.1.&nbsp;Syntax</h3></div></div></div><p>
			</p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[37]</td><td width="10%" valign="top" align="right"><a href="#ebnf.pattern.literal"><a class="link" href="#ref.patterns.literal" title="5.1.&nbsp;Literal Pattern">LiteralPattern</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.literal">Literal</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		</p></div><div class="section" title="5.1.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.literal.type"></a>5.1.2.&nbsp;Type</h3></div></div></div><p>
			When a literal pattern is matched against a type
			<em class="replaceable"><code>T</code></em>
			,
			the type of the literal value must be a <a class="link" href="#ref.types.subtyping" title="9.3.&nbsp;Subtyping">subtype</a> of the type
			<em class="replaceable"><code>T</code></em>
			.
			The match produces an empty <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">typing context</a>, since it binds no variables.
		</p></div><div class="section" title="5.1.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.literal.examples"></a>5.1.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.literal.examples.implication_link" onclick="toggle(this, 'ref.patterns.literal.examples.implication_content')">
					&minus;
				</a><span class="exampleCaption">Implication by Cases</span></div><div class="exampleBody" id="ref.patterns.literal.examples.implication_content"><pre class="orc">
<span class="hl-comment">{- Defining logical implication by cases -}</span>

<span class="hl-keyword">def</span> <span class="hl-site">implies</span>(<span class="hl-literal">true</span>, <span class="hl-literal">true</span>) <span class="hl-operator">=</span> <span class="hl-literal">true</span>
<span class="hl-keyword">def</span> <span class="hl-site">implies</span>(<span class="hl-literal">true</span>, <span class="hl-literal">false</span>) <span class="hl-operator">=</span> <span class="hl-literal">false</span>
<span class="hl-keyword">def</span> <span class="hl-site">implies</span>(<span class="hl-literal">false</span>, <span class="hl-literal">true</span>) <span class="hl-operator">=</span> <span class="hl-literal">true</span>
<span class="hl-keyword">def</span> <span class="hl-site">implies</span>(<span class="hl-literal">false</span>, <span class="hl-literal">false</span>) <span class="hl-operator">=</span> <span class="hl-literal">true</span>

<span class="hl-site">implies</span>(<span class="hl-literal">false</span>, <span class="hl-literal">false</span>)

<span class="hl-comment">{-
OUTPUT:
true
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.literal.examples.implication_link'), 'ref.patterns.literal.examples.implication_content'); }, 125);
</script></div><div class="section" title="5.1.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.literal.links"></a>5.1.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.data.boolean" title="1.1.&nbsp;Booleans">Boolean literals</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.numeric" title="1.2.&nbsp;Numerics">Numeric literals</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.string" title="1.3.&nbsp;Character Strings">String literals</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div><div class="section" title="5.2.&nbsp;Variable Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.patterns.variable"></a>5.2.&nbsp;Variable Pattern</h2></div></div></div><p>
		  When a <a name="N121B2" class="indexterm"></a><em class="firstterm">variable pattern</em> <em class="replaceable"><code>x</code></em> is matched against a value <em class="replaceable"><code>v</code></em>, 
	    the <a name="N121BF" class="indexterm"></a>variable <em class="replaceable"><code>x</code></em> is bound to the value <em class="replaceable"><code>v</code></em>.
		</p><div class="section" title="5.2.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.variable.syntax"></a>5.2.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[38]</td><td width="10%" valign="top" align="right"><a href="#ebnf.pattern.variable"><a class="link" href="#ref.patterns.variable" title="5.2.&nbsp;Variable Pattern">VariablePattern</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.variable">Variable</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="5.2.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.variable.type"></a>5.2.2.&nbsp;Type</h3></div></div></div><p>
	    When a variable pattern <em class="replaceable"><code>x</code></em> is matched against a type <em class="replaceable"><code>T</code></em>, 
	    it produces the <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">typing context</a> { <em class="replaceable"><code>x</code></em> has type <em class="replaceable"><code>T</code></em> }.
	  </p></div><div class="section" title="5.2.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.variable.examples"></a>5.2.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.variable.examples.pairsum_link" onclick="toggle(this, 'ref.patterns.variable.examples.pairsum_content')">
					&minus;
				</a><span class="exampleCaption">Sum Pair</span></div><div class="exampleBody" id="ref.patterns.variable.examples.pairsum_content"><pre class="orc">
<span class="hl-comment">{- Sum the elements of a pair -}</span>
<span class="hl-keyword">val</span> (<span class="hl-variable">x</span>, <span class="hl-variable">y</span>) <span class="hl-operator">=</span> (<span class="hl-literal">3</span>, <span class="hl-literal">4</span>)

<span class="hl-variable">x</span> <span class="hl-operator">+</span> <span class="hl-variable">y</span>

<span class="hl-comment">{-
OUTPUT:
7
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.variable.examples.pairsum_link'), 'ref.patterns.variable.examples.pairsum_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.variable.examples.pairtolist_link" onclick="toggle(this, 'ref.patterns.variable.examples.pairtolist_content')">
					&minus;
				</a><span class="exampleCaption">Pair to List</span></div><div class="exampleBody" id="ref.patterns.variable.examples.pairtolist_content"><pre class="orc">
<span class="hl-comment">{- Convert pairs to lists -}</span>

( (<span class="hl-literal">3</span>,<span class="hl-literal">4</span>) <span class="hl-combinator">|</span> (<span class="hl-literal">2</span>,<span class="hl-literal">6</span>) <span class="hl-combinator">|</span> (<span class="hl-literal">1</span>,<span class="hl-literal">5</span>) ) <span class="hl-combinator">&gt;</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)<span class="hl-combinator">&gt;</span> [<span class="hl-variable">x</span>,<span class="hl-variable">y</span>]

<span class="hl-comment">{-
OUTPUT:PERMUTABLE:
[1, 5]
[2, 6]
[3, 4]
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.variable.examples.pairtolist_link'), 'ref.patterns.variable.examples.pairtolist_content'); }, 125);
</script></div><div class="section" title="5.2.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.variable.links"></a>5.2.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.combinators.sequential" title="3.2.&nbsp;Sequential Combinator">Sequential Combinator</a></p></li><li class="listitem"><p><a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator">Pruning Combinator</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.val" title="4.1.&nbsp;val: Bind Value"><code class="code"><span class="hl-keyword">val</span></code>:  Bind Value</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div><div class="section" title="5.3.&nbsp;Tuple Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.patterns.tuple"></a>5.3.&nbsp;Tuple Pattern</h2></div></div></div><p>
				Each element of a <a name="N12228" class="indexterm"></a><em class="firstterm">tuple pattern</em> matches the corresponding element of a <a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">tuple value</a>.
			</p><div class="section" title="5.3.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.tuple.syntax"></a>5.3.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[39]</td><td width="10%" valign="top" align="right"><a href="#ebnf.pattern.tuple"><a class="link" href="#ref.patterns.tuple" title="5.3.&nbsp;Tuple Pattern">TuplePattern</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">(</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">[&nbsp;<a href="#tuplesize">Tuple Size &ge; 2</a>&nbsp;]</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="5.3.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.tuple.type"></a>5.3.2.&nbsp;Type</h3></div></div></div><p>
	    When a tuple pattern <code class="code">(</code> <em class="replaceable"><code>P<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>P<sub>n</sub></code></em> <code class="code">)</code> 
	    is matched against a tuple type <code class="code">(</code> <em class="replaceable"><code>T<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>T<sub>n</sub></code></em> <code class="code">)</code>,
	    each <em class="replaceable"><code>P<sub>i</sub></code></em> is matched against the corresponding
	    <em class="replaceable"><code>T<sub>i</sub></code></em>,
	    producing <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">typing contexts</a> &#915;<sub>i</sub>. The typing context
	    produced by the whole match is the union of the contexts &#915;<sub>i</sub>.
	  </p></div><div class="section" title="5.3.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.tuple.examples"></a>5.3.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.tuple.examples.filtering_link" onclick="toggle(this, 'ref.patterns.tuple.examples.filtering_content')">
					&minus;
				</a><span class="exampleCaption">Filtering</span></div><div class="exampleBody" id="ref.patterns.tuple.examples.filtering_content"><pre class="orc">
<span class="hl-comment">{- Publish a signal for each tuple with a first value of true -}</span>

((<span class="hl-literal">false</span>, <span class="hl-literal">true</span>) <span class="hl-combinator">|</span> (<span class="hl-literal">true</span>, <span class="hl-literal">false</span>) <span class="hl-combinator">|</span> (<span class="hl-literal">false</span>, <span class="hl-literal">false</span>)) <span class="hl-combinator">&gt;</span>(<span class="hl-literal">true</span>, <span class="hl-variable">_</span>)<span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span>

<span class="hl-comment">{-
OUTPUT:
signal
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.tuple.examples.filtering_link'), 'ref.patterns.tuple.examples.filtering_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.tuple.examples.patternpublication_link" onclick="toggle(this, 'ref.patterns.tuple.examples.patternpublication_content')">
					&minus;
				</a><span class="exampleCaption">Pattern Publication</span></div><div class="exampleBody" id="ref.patterns.tuple.examples.patternpublication_content"><pre class="orc">
<span class="hl-comment">{- Publish 3, 6, and 9 in arbitrary order -}</span>

(<span class="hl-literal">3</span>,<span class="hl-literal">6</span>,<span class="hl-literal">9</span>)  <span class="hl-combinator">&gt;</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>,<span class="hl-variable">z</span>)<span class="hl-combinator">&gt;</span>  ( <span class="hl-variable">x</span> <span class="hl-combinator">|</span> <span class="hl-variable">y</span> <span class="hl-combinator">|</span> <span class="hl-variable">z</span> )

<span class="hl-comment">{-
OUTPUT:PERMUTABLE
3
6
9
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.tuple.examples.patternpublication_link'), 'ref.patterns.tuple.examples.patternpublication_content'); }, 125);
</script></div><div class="section" title="5.3.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.tuple.links"></a>5.3.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">Tuples</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div><div class="section" title="5.4.&nbsp;List Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.patterns.list"></a>5.4.&nbsp;List Pattern</h2></div></div></div><p>
			Each element of a <a name="N122B6" class="indexterm"></a><em class="firstterm">list pattern</em> matches the corresponding element of a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list value</a>.
		</p><div class="section" title="5.4.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.list.syntax"></a>5.4.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[40]</td><td width="10%" valign="top" align="right"><a href="#ebnf.pattern.list"><a class="link" href="#ref.patterns.list" title="5.4.&nbsp;List Pattern">ListPattern</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">[</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">]</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="5.4.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.list.type"></a>5.4.2.&nbsp;Type</h3></div></div></div><p>
	    When a list pattern <code class="code">[</code> <em class="replaceable"><code>P<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>P<sub>n</sub></code></em> <code class="code">]</code> 
	    is matched against a list type <code class="code"><span class="hl-site">List</span>[</code><em class="replaceable"><code>T</code></em><code class="code">]</code>,
	    each <em class="replaceable"><code>P<sub>i</sub></code></em> is matched against the type <em class="replaceable"><code>T</code></em>, 
	    producing <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">typing contexts</a> &#915;<sub>i</sub>. The typing context
	    produced by the whole match is the union of the contexts &#915;<sub>i</sub>.
	  </p></div><div class="section" title="5.4.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.list.examples"></a>5.4.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.list.examples.associative_link" onclick="toggle(this, 'ref.patterns.list.examples.associative_content')">
					&minus;
				</a><span class="exampleCaption">Insertion Sort</span></div><div class="exampleBody" id="ref.patterns.list.examples.associative_content"><pre class="orc">
<span class="hl-comment">{- Insertion Sort -}</span>

<span class="hl-keyword">def</span> <span class="hl-site">insert</span>(<span class="hl-variable">x</span>, []) <span class="hl-operator">=</span> [<span class="hl-variable">x</span>]
<span class="hl-keyword">def</span> <span class="hl-site">insert</span>(<span class="hl-variable">x</span>, <span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">ys</span>) <span class="hl-operator">=</span> <span class="hl-keyword">if</span> (<span class="hl-variable">x</span> <span class="hl-operator">&lt;:</span> <span class="hl-variable">y</span>) <span class="hl-keyword">then</span> <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">ys</span> <span class="hl-keyword">else</span> <span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-site">insert</span>(<span class="hl-variable">x</span>,<span class="hl-variable">ys</span>)

<span class="hl-keyword">def</span> <span class="hl-site">sort</span>([]) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">sort</span>([<span class="hl-variable">x</span>]) <span class="hl-operator">=</span> [<span class="hl-variable">x</span>]
<span class="hl-keyword">def</span> <span class="hl-site">sort</span>([<span class="hl-variable">x</span>,<span class="hl-variable">y</span>]) <span class="hl-operator">=</span> <span class="hl-keyword">if</span> (<span class="hl-variable">x</span> <span class="hl-operator">&lt;:</span> <span class="hl-variable">y</span>) <span class="hl-keyword">then</span> [<span class="hl-variable">x</span>,<span class="hl-variable">y</span>] <span class="hl-keyword">else</span> [<span class="hl-variable">y</span>,<span class="hl-variable">x</span>]
<span class="hl-keyword">def</span> <span class="hl-site">sort</span>(<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">insert</span>(<span class="hl-variable">x</span>, <span class="hl-site">sort</span>(<span class="hl-variable">xs</span>))

<span class="hl-site">sort</span>([<span class="hl-literal">3</span>, <span class="hl-literal">1</span>, <span class="hl-literal">4</span>, <span class="hl-literal">1</span>, <span class="hl-literal">5</span>, <span class="hl-literal">9</span>])

<span class="hl-comment">{-
OUTPUT:
[1, 1, 3, 4, 5, 9]
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.list.examples.associative_link'), 'ref.patterns.list.examples.associative_content'); }, 125);
</script></div><div class="section" title="5.4.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.list.links"></a>5.4.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.patterns.cons" title="5.7.&nbsp;Cons Pattern">Cons Pattern</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">Lists</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div><div class="section" title="5.5.&nbsp;Record Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.patterns.record"></a>5.5.&nbsp;Record Pattern</h2></div></div></div><p>
			When a <a name="N12331" class="indexterm"></a><em class="firstterm">record pattern</em> is matched against a <a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">record value</a>, 
			each key mentioned in the record pattern must have a mapping in the record value, 
			and each such mapped value must match its corresponding pattern. 
			The record value may contain additional keys not mentioned by the record pattern.
		</p><div class="section" title="5.5.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.record.syntax"></a>5.5.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[41]</td><td width="10%" valign="top" align="right"><a href="#ebnf.pattern.record"><a class="link" href="#ref.patterns.record" title="5.5.&nbsp;Record Pattern">RecordPattern</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">{.</code> <a href="#ebnf.key">Key</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.pattern">Pattern</a>  <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code>  <a href="#ebnf.key">Key</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.pattern">Pattern</a> <code class="code">.}</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="5.5.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.record.type"></a>5.5.2.&nbsp;Type</h3></div></div></div><p>
	    When a record pattern <code class="code">{.</code> <em class="replaceable"><code>K<sub>0</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>P<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>K<sub>n</sub></code></em> <code class="code"><span class="hl-operator">=</span></code> <em class="replaceable"><code>P<sub>n</sub></code></em> <code class="code">.}</code> 
	    is matched against a record type <em class="replaceable"><code>R</code></em>, each <em class="replaceable"><code>K<sub>i</sub></code></em>
	    must have a binding in <em class="replaceable"><code>R</code></em>. Then each <em class="replaceable"><code>P<sub>i</sub></code></em> is
	    matched against the type bound to <em class="replaceable"><code>K<sub>i</sub></code></em> in <em class="replaceable"><code>R</code></em>,
	    producing a <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">typing context</a> &#915;<sub>i</sub>. 
	    The typing context produced by the whole match is the union of the contexts &#915;<sub>i</sub>.
	  </p></div><div class="section" title="5.5.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.record.examples"></a>5.5.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.record.examples.studentapp_link" onclick="toggle(this, 'ref.patterns.record.examples.studentapp_content')">
					&minus;
				</a><span class="exampleCaption">Student Applications</span></div><div class="exampleBody" id="ref.patterns.record.examples.studentapp_content"><pre class="orc">
<span class="hl-comment">{- Use records to test for a given string -}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">applicants</span> <span class="hl-operator">=</span> 
[
  {. <span class="hl-variable">name</span> <span class="hl-operator">=</span> <span class="hl-literal">"Harry Q. Bovik"</span>, <span class="hl-variable">college</span> <span class="hl-operator">=</span> <span class="hl-literal">"Carnegie Mellon University"</span>, <span class="hl-variable">status</span> <span class="hl-operator">=</span> <span class="hl-literal">"accepted"</span> .},
  {. <span class="hl-variable">name</span> <span class="hl-operator">=</span> <span class="hl-literal">"Fred Hacker"</span>, <span class="hl-variable">college</span> <span class="hl-operator">=</span> <span class="hl-literal">"Massachusetts Institute of Technology"</span>, <span class="hl-variable">status</span> <span class="hl-operator">=</span> <span class="hl-literal">"rejected"</span> .},
  {. <span class="hl-variable">name</span> <span class="hl-operator">=</span> <span class="hl-literal">"D. F. Automaton"</span>, <span class="hl-variable">college</span> <span class="hl-operator">=</span> <span class="hl-literal">"Final State College"</span>, <span class="hl-variable">status</span> <span class="hl-operator">=</span> <span class="hl-literal">"accepted"</span> .}
]
<span class="hl-site">each</span>(<span class="hl-variable">applicants</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">a</span><span class="hl-combinator">&gt;</span>
(
    <span class="hl-variable">a</span> <span class="hl-combinator">&gt;</span>{. <span class="hl-variable">name</span> <span class="hl-operator">=</span> <span class="hl-variable">n</span>, <span class="hl-variable">status</span> <span class="hl-operator">=</span> <span class="hl-literal">"accepted"</span> .}<span class="hl-combinator">&gt;</span> <span class="hl-site">Println</span>(<span class="hl-variable">n</span> <span class="hl-operator">+</span> <span class="hl-literal">"'s application was accepted"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
  <span class="hl-combinator">|</span> <span class="hl-variable">a</span> <span class="hl-combinator">&gt;</span>{. <span class="hl-variable">name</span> <span class="hl-operator">=</span> <span class="hl-variable">n</span>, <span class="hl-variable">status</span> <span class="hl-operator">=</span> <span class="hl-literal">"rejected"</span> .}<span class="hl-combinator">&gt;</span> <span class="hl-site">Println</span>(<span class="hl-variable">n</span> <span class="hl-operator">+</span> <span class="hl-literal">"'s application was not accepted"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
)

<span class="hl-comment">{-
OUTPUT:PERMUTABLE
Fred Hacker's application was not accepted
D. F. Automaton's application was accepted
Harry Q. Bovik's application was accepted
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.record.examples.studentapp_link'), 'ref.patterns.record.examples.studentapp_content'); }, 125);
</script></div><div class="section" title="5.5.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.record.links"></a>5.5.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">Records</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div><div class="section" title="5.6.&nbsp;Call Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.patterns.call"></a>5.6.&nbsp;Call Pattern</h2></div></div></div><p>
			A <a name="N123C0" class="indexterm"></a><em class="firstterm">call pattern</em>
			allows a <a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">call</a> to be made within a pattern match.
	  </p><p> 
			A pattern <em class="replaceable"><code>x</code></em><code class="code">(</code> <em class="replaceable"><code>P<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>P<sub>n</sub></code></em> <code class="code">)</code>,
			is matched against a value <em class="replaceable"><code>v</code></em> by calling 
			<em class="replaceable"><code>x</code></em><code class="code">.<span class="hl-site">unapply</span>(</code><em class="replaceable"><code>v</code></em><code class="code">)</code>,
			and matching each value <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">published</a> by that call against the <a class="link" href="#ref.patterns.tuple" title="5.3.&nbsp;Tuple Pattern">tuple pattern</a>
			<code class="code">(</code> <em class="replaceable"><code>P<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>P<sub>n</sub></code></em> <code class="code">)</code>.
			If there is only one pattern <em class="replaceable"><code>P</code></em>, then <em class="replaceable"><code>P</code></em> is matched on its own, instead of using a tuple pattern.
			If there are no patterns, a <a class="link" href="#ref.patterns.wildcard" title="5.9.&nbsp;Wildcard Pattern">wildcard pattern</a> is used.
	  </p><p>
	    If <em class="replaceable"><code>x</code></em><code class="code">.<span class="hl-site">unapply</span>(</code><em class="replaceable"><code>v</code></em><code class="code">)</code> <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>,
	    or halts without producing any matching values, then the match fails.
	  </p><p>
	    If multiple values are published and successfully match, then a <a name="N1242E" class="indexterm"></a><em class="firstterm">multimatch</em> occurs:
	    the entire pattern succeeds multiple times. 
	    In a <a class="link" href="#ref.expressions.call.function" title="2.4.3.&nbsp;Function Calls">function call</a>, the matching clause is executed multiple times, once for each match.
	    In a <a class="link" href="#ref.combinators.sequential" title="3.2.&nbsp;Sequential Combinator">sequential combinator</a>, the right hand side is executed multiple times, once for each match.
	    In a <a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator">pruning combinator</a>, one of the matches is chosen arbitrarily.
	  </p><div class="section" title="5.6.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.call.syntax"></a>5.6.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[43]</td><td width="10%" valign="top" align="right"><a href="#ebnf.pattern.call"><a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">CallPattern</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.variable">Variable</a> <code class="code">(</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="5.6.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.call.type"></a>5.6.2.&nbsp;Type</h3></div></div></div><p>
	    When a call pattern is matched against a type <em class="replaceable"><code>S</code></em>,
	    the <code class="code"><span class="hl-variable">unapply</span></code> member of the type <em class="replaceable"><code>S</code></em> must have the <a class="link" href="#ref.data.closure.type" title="1.9.1.&nbsp;Type">function type</a>
	    <code class="code"><span class="hl-keyword">lambda</span></code> <code class="code">(</code><em class="replaceable"><code>T</code></em><code class="code">)</code> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <code class="code">(</code><em class="replaceable"><code>T<sub>0</sub></code></em> <code class="code">,</code> &hellip; <code class="code">,</code> <em class="replaceable"><code>T<sub>n</sub></code></em><code class="code">)</code>,
	    where <em class="replaceable"><code>S</code></em> is a <a class="link" href="#ref.types.subtyping" title="9.3.&nbsp;Subtyping">subtype</a> of <em class="replaceable"><code>T</code></em>.
	    Then each argument pattern <em class="replaceable"><code>P<sub>i</sub></code></em>
	    is matched against the corresponding type <em class="replaceable"><code>T<sub>i</sub></code></em>,
	    producing <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">typing contexts</a> &#915;<sub>i</sub>. The typing context
	    produced by the whole match is the union of the contexts &#915;<sub>i</sub>.
	  </p></div><div class="section" title="5.6.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.call.examples"></a>5.6.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.call.examples.trees_link" onclick="toggle(this, 'ref.patterns.call.examples.trees_content')">
					&minus;
				</a><span class="exampleCaption">Trees</span></div><div class="exampleBody" id="ref.patterns.call.examples.trees_content"><pre class="orc">
<span class="hl-comment">{- 
   Build up a small binary tree, then use call patterns to deconstruct the tree and extract its contents.   
-}</span>

<span class="hl-keyword">type</span> <span class="hl-variable">Tree</span> <span class="hl-operator">=</span> <span class="hl-site">Node</span>(<span class="hl-variable">_</span>,<span class="hl-variable">_</span>,<span class="hl-variable">_</span>) <span class="hl-combinator">|</span> <span class="hl-site">Empty</span>()

<span class="hl-keyword">val</span> <span class="hl-variable">l</span> <span class="hl-operator">=</span> <span class="hl-site">Node</span>(<span class="hl-site">Empty</span>(), <span class="hl-literal">0</span>, <span class="hl-site">Empty</span>())
<span class="hl-keyword">val</span> <span class="hl-variable">r</span> <span class="hl-operator">=</span> <span class="hl-site">Node</span>(<span class="hl-site">Empty</span>(), <span class="hl-literal">2</span>, <span class="hl-site">Empty</span>())
<span class="hl-keyword">val</span> <span class="hl-variable">t</span> <span class="hl-operator">=</span> <span class="hl-site">Node</span>(<span class="hl-variable">l</span>,<span class="hl-literal">1</span>,<span class="hl-variable">r</span>)

<span class="hl-variable">t</span> <span class="hl-combinator">&gt;</span><span class="hl-site">Node</span>(<span class="hl-variable">l</span>,<span class="hl-variable">j</span>,<span class="hl-variable">r</span>)<span class="hl-combinator">&gt;</span>
<span class="hl-variable">l</span> <span class="hl-combinator">&gt;</span><span class="hl-site">Node</span>(<span class="hl-variable">_</span>,<span class="hl-variable">i</span>,<span class="hl-variable">_</span>)<span class="hl-combinator">&gt;</span>
<span class="hl-variable">r</span> <span class="hl-combinator">&gt;</span><span class="hl-site">Node</span>(<span class="hl-variable">_</span>,<span class="hl-variable">k</span>,<span class="hl-variable">_</span>)<span class="hl-combinator">&gt;</span>
( <span class="hl-variable">i</span> <span class="hl-combinator">|</span> <span class="hl-variable">j</span> <span class="hl-combinator">|</span> <span class="hl-variable">k</span> )

<span class="hl-comment">{-
OUTPUT:PERMUTABLE
0
1
2
-}</span>

</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.call.examples.trees_link'), 'ref.patterns.call.examples.trees_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.call.examples.isqrt_link" onclick="toggle(this, 'ref.patterns.call.examples.isqrt_content')">
					&minus;
				</a><span class="exampleCaption">Integer square root</span></div><div class="exampleBody" id="ref.patterns.call.examples.isqrt_content"><pre class="orc">
<span class="hl-comment">{- 
   A user-defined call pattern match, using a record with an unapply member.
   
   The integer square root function, isqrt, returns the square root of a
   perfect square, and halts on any input that is not a perfect square.
   
   isqrt is then used to define a value 'square' that matches perfect squares.
-}</span>

<span class="hl-keyword">def</span> <span class="hl-site">isqrt</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">if</span> (<span class="hl-variable">n</span> <span class="hl-operator">&lt;:</span> <span class="hl-literal">0</span>) 
    <span class="hl-keyword">then</span> <span class="hl-keyword">stop</span>
    <span class="hl-keyword">else</span> (
      <span class="hl-keyword">val</span> <span class="hl-variable">root</span> <span class="hl-operator">=</span> <span class="hl-site">Floor</span>(<span class="hl-variable">n</span> <span class="hl-operator">**</span> <span class="hl-literal">0.5</span>)
      <span class="hl-keyword">if</span> (<span class="hl-variable">n</span> <span class="hl-operator">=</span> <span class="hl-variable">root</span><span class="hl-operator">*</span><span class="hl-variable">root</span>) 
        <span class="hl-keyword">then</span> <span class="hl-variable">root</span> 
        <span class="hl-keyword">else</span> <span class="hl-keyword">stop</span>
    )

<span class="hl-keyword">val</span> <span class="hl-variable">square</span> <span class="hl-operator">=</span> {. <span class="hl-variable">unapply</span> <span class="hl-operator">=</span> <span class="hl-variable">isqrt</span> .}

<span class="hl-site">each</span>([<span class="hl-literal">9</span>, <span class="hl-literal">12</span>, <span class="hl-literal">16</span>, <span class="hl-literal">24</span>, <span class="hl-literal">25</span>]) <span class="hl-combinator">&gt;</span><span class="hl-site">square</span>(<span class="hl-variable">n</span>)<span class="hl-combinator">&gt;</span> <span class="hl-variable">n</span>

<span class="hl-comment">{-
OUTPUT:PERMUTABLE:
3
4
5
-}</span>

</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.call.examples.isqrt_link'), 'ref.patterns.call.examples.isqrt_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.call.examples.factoring_link" onclick="toggle(this, 'ref.patterns.call.examples.factoring_content')">
					&minus;
				</a><span class="exampleCaption">Factoring Using Multimatch</span></div><div class="exampleBody" id="ref.patterns.call.examples.factoring_content"><pre class="orc">
<span class="hl-comment">{- 
   A user-defined call pattern match, using a record with an unapply member.
   
   The factors function publishes all nontrivial positive factors of its argument n 
   (any factor greater than 1 and less than n) 
   
   factors is then used to define a value 'multipleOf' that matches all
   nontrivial positive factors of an integer.
-}</span>

<span class="hl-keyword">def</span> <span class="hl-site">factors</span>(<span class="hl-variable">n</span>) <span class="hl-keyword">if</span> (<span class="hl-variable">n</span> <span class="hl-operator">&lt;:</span> <span class="hl-literal">0</span>) <span class="hl-operator">=</span> <span class="hl-site">factors</span>(<span class="hl-operator">-</span><span class="hl-variable">n</span>)
<span class="hl-keyword">def</span> <span class="hl-site">factors</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span> <span class="hl-site">for</span>(<span class="hl-literal">2</span>, <span class="hl-variable">n</span><span class="hl-operator">/</span><span class="hl-literal">2</span> <span class="hl-operator">+</span> <span class="hl-literal">1</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">i</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Ift</span>(<span class="hl-variable">n</span> <span class="hl-operator">%</span> <span class="hl-variable">i</span> <span class="hl-operator">=</span> <span class="hl-literal">0</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">i</span>

<span class="hl-keyword">val</span> <span class="hl-variable">multipleOf</span> <span class="hl-operator">=</span> {. <span class="hl-variable">unapply</span> <span class="hl-operator">=</span> <span class="hl-variable">factors</span> .}

<span class="hl-literal">30</span> <span class="hl-combinator">&gt;</span><span class="hl-site">multipleOf</span>(<span class="hl-variable">n</span>)<span class="hl-combinator">&gt;</span> <span class="hl-variable">n</span>

<span class="hl-comment">{-
OUTPUT:PERMUTABLE:
2
3
5
6
10
15
-}</span>

</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.call.examples.factoring_link'), 'ref.patterns.call.examples.factoring_content'); }, 125);
</script></div><div class="section" title="5.6.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.call.links"></a>5.6.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.data.datatype" title="1.8.&nbsp;Algebraic Data Types">Algebraic Data Types</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.record.specialkeys" title="1.7.4.&nbsp;Special Keys"><code class="code"><span class="hl-variable">unapply</span></code> key</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">Site and Function Calls</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div><div class="section" title="5.7.&nbsp;Cons Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.patterns.cons"></a>5.7.&nbsp;Cons Pattern</h2></div></div></div><p>
			The <a name="N124E3" class="indexterm"></a><em class="firstterm">cons pattern</em> matches the head and the tail of a nonempty <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
		</p><div class="section" title="5.7.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.cons.syntax"></a>5.7.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[42]</td><td width="10%" valign="top" align="right"><a href="#ebnf.pattern.cons"><a class="link" href="#ref.patterns.cons" title="5.7.&nbsp;Cons Pattern">ConsPattern</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.pattern">Pattern</a> <code class="code"><span class="hl-operator">:</span></code> <a href="#ebnf.pattern">Pattern</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="5.7.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.cons.type"></a>5.7.2.&nbsp;Type</h3></div></div></div><p>
	    When a cons pattern <em class="replaceable"><code>P<sub>h</sub></code></em><code class="code"><span class="hl-operator">:</span></code><em class="replaceable"><code>P<sub>t</sub></code></em> 
	    is matched against a list type <code class="code"><span class="hl-site">List</span>[</code><em class="replaceable"><code>T</code></em><code class="code">]</code>,
	    pattern <em class="replaceable"><code>P<sub>h</sub></code></em> is matched against type <em class="replaceable"><code>T</code></em>,
	    producing <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">typing context</a> &#915;<sub>h</sub>, and
	    pattern <em class="replaceable"><code>P<sub>t</sub></code></em> is matched against type <code class="code"><span class="hl-site">List</span>[</code><em class="replaceable"><code>T</code></em><code class="code">]</code>,
	    producing typing context &#915;<sub>t</sub>.
	    The typing context produced by the whole match is &#915;<sub>h</sub> &cup; &#915;<sub>t</sub>.
	  </p></div><div class="section" title="5.7.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.cons.examples"></a>5.7.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.cons.examples.listdecons_link" onclick="toggle(this, 'ref.patterns.cons.examples.listdecons_content')">
					&minus;
				</a><span class="exampleCaption">List Deconstruction</span></div><div class="exampleBody" id="ref.patterns.cons.examples.listdecons_content"><pre class="orc">
<span class="hl-comment">{- Publish the head and tail of a list as a tuple -}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">a</span> <span class="hl-operator">=</span> [<span class="hl-literal">1</span>, <span class="hl-literal">2</span>, <span class="hl-literal">3</span>]
<span class="hl-variable">a</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">y</span><span class="hl-combinator">&gt;</span> (<span class="hl-variable">x</span>, <span class="hl-variable">y</span>)

<span class="hl-comment">{-
OUTPUT:
(1, [2, 3])
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.cons.examples.listdecons_link'), 'ref.patterns.cons.examples.listdecons_content'); }, 125);
</script></div><div class="section" title="5.7.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.cons.links"></a>5.7.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.patterns.list" title="5.4.&nbsp;List Pattern">List Pattern</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">Lists</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div><div class="section" title="5.8.&nbsp;As Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.patterns.as"></a>5.8.&nbsp;As Pattern</h2></div></div></div><p>
			The <a name="N12565" class="indexterm"></a><code class="code"><span class="hl-keyword">as</span></code> keyword binds a variable to the value matched by a pattern.
			It is a more general way of binding variables than using <a class="link" href="#ref.patterns.variable" title="5.2.&nbsp;Variable Pattern">variable patterns</a> alone.
		</p><div class="section" title="5.8.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.as.syntax"></a>5.8.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[44]</td><td width="10%" valign="top" align="right"><a href="#ebnf.pattern.as"><a class="link" href="#ref.patterns.as" title="5.8.&nbsp;As Pattern">AsPattern</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.pattern">Pattern</a> <code class="code"><span class="hl-keyword">as</span></code> <a href="#ebnf.variable">Variable</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="5.8.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.as.type"></a>5.8.2.&nbsp;Type</h3></div></div></div><p>
	    When <em class="replaceable"><code>P</code></em> <code class="code"><span class="hl-keyword">as</span></code> <em class="replaceable"><code>x</code></em> is matched
	    against a type <em class="replaceable"><code>T</code></em>, the pattern <em class="replaceable"><code>P</code></em> 
	    is matched against <em class="replaceable"><code>T</code></em>, producing <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">typing context</a> &#915;.
	    The typing context produced by the whole match is &#915; &cup; {<em class="replaceable"><code>x</code></em> has type <em class="replaceable"><code>T</code></em>}.
	  </p></div><div class="section" title="5.8.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.as.examples"></a>5.8.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.as.simplefrag_link" onclick="toggle(this, 'ref.patterns.as.simplefrag_content')">
					&minus;
				</a><span class="exampleCaption">Simplified Fragment</span></div><div class="exampleBody" id="ref.patterns.as.simplefrag_content"><pre class="orc">
<span class="hl-comment">{- Consider this initial program fragment, without an 'as' pattern -}</span>
<span class="hl-keyword">val</span> (<span class="hl-variable">a</span>,<span class="hl-variable">b</span>) <span class="hl-operator">=</span> ((<span class="hl-literal">1</span>,<span class="hl-literal">2</span>),(<span class="hl-literal">3</span>,<span class="hl-literal">4</span>))
<span class="hl-keyword">val</span> (<span class="hl-variable">ax</span>,<span class="hl-variable">ay</span>) <span class="hl-operator">=</span> <span class="hl-variable">a</span>
<span class="hl-keyword">val</span> (<span class="hl-variable">bx</span>,<span class="hl-variable">by</span>) <span class="hl-operator">=</span> <span class="hl-variable">b</span>

<span class="hl-comment">{- Compared to the following fragment -}</span>
<span class="hl-keyword">val</span> ((<span class="hl-variable">ax</span>,<span class="hl-variable">ay</span>) <span class="hl-keyword">as</span> <span class="hl-variable">a</span>, (<span class="hl-variable">bx</span>,<span class="hl-variable">by</span>) <span class="hl-keyword">as</span> <span class="hl-variable">b</span>) <span class="hl-operator">=</span> ((<span class="hl-literal">1</span>,<span class="hl-literal">2</span>),(<span class="hl-literal">3</span>,<span class="hl-literal">4</span>))

[<span class="hl-variable">ax</span>, <span class="hl-variable">ay</span>, <span class="hl-variable">a</span>] <span class="hl-combinator">|</span> [<span class="hl-variable">bx</span>, <span class="hl-variable">by</span>, <span class="hl-variable">b</span>]

<span class="hl-comment">{-
OUTPUT:PERMUTABLE
[1, 2, (1, 2)]
[3, 4, (3, 4)]
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.as.simplefrag_link'), 'ref.patterns.as.simplefrag_content'); }, 125);
</script></div><div class="section" title="5.8.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.as.links"></a>5.8.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.patterns.variable" title="5.2.&nbsp;Variable Pattern">Variable Patterns</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div><div class="section" title="5.9.&nbsp;Wildcard Pattern"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.patterns.wildcard"></a>5.9.&nbsp;Wildcard Pattern</h2></div></div></div><p>
			The <a name="N125C8" class="indexterm"></a><em class="firstterm">wildcard pattern</em> matches any value and binds no variables.
		</p><div class="section" title="5.9.1.&nbsp;Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.wildcard.syntax"></a>5.9.1.&nbsp;Syntax</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[36]</td><td width="10%" valign="top" align="right"><a href="#ebnf.pattern.wildcard"><a class="link" href="#ref.patterns.wildcard" title="5.9.&nbsp;Wildcard Pattern">WildcardPattern</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-variable">_</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p></div><div class="section" title="5.9.2.&nbsp;Type"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.wildcard.type"></a>5.9.2.&nbsp;Type</h3></div></div></div><p>
	    A wildcard pattern matches any type. The matching produces an empty <a class="link" href="#ref.types.context" title="9.6.&nbsp;Typing Contexts">typing context</a>.
	  </p></div><div class="section" title="5.9.3.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.wildcard.examples"></a>5.9.3.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.wildcard.examples.assignments_link" onclick="toggle(this, 'ref.patterns.wildcard.examples.assignments_content')">
					&minus;
				</a><span class="exampleCaption">Wildcard Assignments</span></div><div class="exampleBody" id="ref.patterns.wildcard.examples.assignments_content"><pre class="orc">
<span class="hl-comment">{- Showcase various wildcard assignments -}</span>

<span class="hl-keyword">val</span> (<span class="hl-variable">_</span>,(<span class="hl-variable">_</span>,<span class="hl-variable">x</span>),<span class="hl-variable">_</span>) <span class="hl-operator">=</span> (<span class="hl-literal">0</span>,(<span class="hl-literal">2</span>,<span class="hl-literal">2</span>),[<span class="hl-literal">5</span>,<span class="hl-literal">5</span>,<span class="hl-literal">5</span>])
<span class="hl-keyword">val</span> [[<span class="hl-variable">_</span>,<span class="hl-variable">y</span>],[<span class="hl-variable">_</span>,<span class="hl-variable">z</span>]] <span class="hl-operator">=</span> [[<span class="hl-literal">1</span>,<span class="hl-literal">3</span>],[<span class="hl-literal">2</span>,<span class="hl-literal">4</span>]]

[<span class="hl-variable">x</span>, <span class="hl-variable">y</span>, <span class="hl-variable">z</span>]

<span class="hl-comment">{-
OUTPUT:
[2, 3, 4]
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.wildcard.examples.assignments_link'), 'ref.patterns.wildcard.examples.assignments_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.patterns.wildcard.examples.implication_link" onclick="toggle(this, 'ref.patterns.wildcard.examples.implication_content')">
					&minus;
				</a><span class="exampleCaption">Implication by Fewer Cases</span></div><div class="exampleBody" id="ref.patterns.wildcard.examples.implication_content"><pre class="orc">
<span class="hl-comment">{-
  Defining logical implication by cases, 
  using wildcard to abbreviate the 'true' cases. 
-}</span>

<span class="hl-keyword">def</span> <span class="hl-site">implies</span>(<span class="hl-literal">true</span>, <span class="hl-literal">false</span>) <span class="hl-operator">=</span> <span class="hl-literal">false</span>
<span class="hl-keyword">def</span> <span class="hl-site">implies</span>(<span class="hl-variable">_</span>, <span class="hl-variable">_</span>) <span class="hl-operator">=</span> <span class="hl-literal">true</span>

<span class="hl-site">implies</span>(<span class="hl-literal">true</span>, <span class="hl-literal">true</span>)

<span class="hl-comment">{-
OUTPUT:
true
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.patterns.wildcard.examples.implication_link'), 'ref.patterns.wildcard.examples.implication_content'); }, 125);
</script></div><div class="section" title="5.9.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.patterns.wildcard.links"></a>5.9.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.combinators.sequential" title="3.2.&nbsp;Sequential Combinator">Sequential Combinator, <code class="code"> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> </code> Form</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.structures.patterns" class="olink">Patterns</a></p></li></ul></div></div></div></div><div lang="" class="chapter" title="Chapter&nbsp;6.&nbsp;Sites and Services"><div class="titlepage"><div><div><h2 class="title"><a name="ref.sites"></a>Chapter&nbsp;6.&nbsp;Sites and Services</h2></div></div></div><p>
Orc programs communicate with their environment by calling <a name="N1261B" class="indexterm"></a><em class="firstterm">sites</em>.
Sites perform services, which the Orc program orchestrates.
A <a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">site call</a> may return a single value, or may be <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silent</a>, returning no value.
Beyond this, there are no restrictions on sites' behavior.
In prticular, site calls may interact with other site calls, have side effects, or continue to run after returning a value.
</p><p>
Orc has no built-in services, so even <a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">operations</a> as simple as addition are performed by sites.
Sites may also provide complex services, such as a database management system.
</p><p>
Sites may be provided by various types of software components, such as Java classes, Web services, or custom
Orc sites.  An Orc program's views of sites, however, remains uniform across these types.
</p><p>
Some sites, called <a name="N12635" class="indexterm"></a><em class="firstterm">classes</em>, create other sites when called.
Orc programs may import previously-defined sites and classes for use, through use of the <code class="code"><a class="link" href="#ref.declarations.site" title="4.4.&nbsp;import site: Import Site">import site</a></code> and <code class="code"><a class="link" href="#ref.declarations.class" title="4.5.&nbsp;import class: Import Class from Java">import class</a></code> declarations.
Programs may also define classes directly in Orc code, using the <code class="code"><a class="link" href="#ref.declarations.defclass" title="4.3.&nbsp;def class: Define Site in Orc">def class</a></code> declaration.
</p><div class="section" title="6.1.&nbsp;Library sites"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.sites.library"></a>6.1.&nbsp;Library sites</h2></div></div></div><p>
The Orc <a class="link" href="#ref.stdlib" title="Chapter&nbsp;11.&nbsp;Standard Library">Standard Library</a> provides a variety of sites, functions, and types for use in Orc programs.
These sites are declared in the Orc <a name="N12659" class="indexterm"></a><em class="firstterm">prelude</em>, 
a sequence of declarations which is implicitly included in all Orc programs.
</p><p>
Orc programs are expected to rely on the host language and environment for all but the most essential sites.
For example, in the Java implementation of Orc, the entire Java standard library is available to Orc programs via <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code> declarations.
Therefore, the Orc standard library aims only to provide convenience for the most common Orc idioms, not the complete set of features needed for general-purpose programming.
</p><div class="section" title="6.1.1.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.library.examples"></a>6.1.1.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.sites.library.examples.floor_link" onclick="toggle(this, 'ref.sites.library.examples.floor_content')">
					&minus;
				</a><span class="exampleCaption">Using a standard library site</span></div><div class="exampleBody" id="ref.sites.library.examples.floor_content"><pre class="orc">
<span class="hl-comment">{- The Floor site, also called the greatest integer function or integer value -}</span>

<span class="hl-site">Floor</span>(<span class="hl-literal">2.5</span>)

<span class="hl-comment">{-
OUTPUT:
2
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.sites.library.examples.floor_link'), 'ref.sites.library.examples.floor_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.sites.library.examples.if_link" onclick="toggle(this, 'ref.sites.library.examples.if_content')">
					&minus;
				</a><span class="exampleCaption">Another standard library site: Ift</span></div><div class="exampleBody" id="ref.sites.library.examples.if_content"><pre class="orc">
<span class="hl-comment">{- Orc's conditional site: Ift(), publishes a signal if the argument is true -}</span>

<span class="hl-site">Ift</span>(<span class="hl-literal">1</span> <span class="hl-operator">:&gt;</span> <span class="hl-literal">0</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"correct"</span>

<span class="hl-comment">{-
OUTPUT:
"correct"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.sites.library.examples.if_link'), 'ref.sites.library.examples.if_content'); }, 125);
</script></div><div class="section" title="6.1.2.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.library.links"></a>6.1.2.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.stdlib" title="Chapter&nbsp;11.&nbsp;Standard Library">Standard Library</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.helpful" title="8.5.&nbsp;Helpful Sites">Helpful Sites</a></p></li></ul></div></div></div><div class="section" title="6.2.&nbsp;Java sites"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.sites.java"></a>6.2.&nbsp;Java sites</h2></div></div></div><p>
Essential to Orc's role as an orchestration language is Orc's interaction with its host platform,
which in this implementation is the Java virtual machine (JVM).
In addition to calling Orc sites <span class="foreignphrase"><em class="foreignphrase">per se</em></span>, Orc programs can access
arbitrary <a name="N12695" class="indexterm"></a>Java classes using the <a name="N12699" class="indexterm"></a><code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code> declaration.
Values in Java fields, values returned from Java methods, and values returned from Java constructors
may be used in Orc programs just as any other Orc value.
</p><div class="section" title="6.2.1.&nbsp;Java classes"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.java.classes"></a>6.2.1.&nbsp;Java classes</h3></div></div></div><p>
Java classes are named in an Orc program using the <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code> declaration.
In the scope of such a declaration, the declared name is bound to a value that acts as a proxy for the Java class.
This class proxy may be called as an Orc site, which invokes the Java class constructor corresponding to the arguments of the <a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">site call</a>.
The class proxy also presents the class static methods and class static fields in the same manner as
an Orc <a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">record</a>, with keys corresponding to the Java class members' names.
Class <a name="N126B0" class="indexterm"></a>methods appear as record elements that are sites, and are invoked by projecting the record element
using the <a name="N126B4" class="indexterm"></a>dot notation and calling the site.
Fields appear as record elements that are <a class="link" href="#ref.stdlib.state.Ref">references</a>, and are accessed and assigned
by projecting the record element using the dot notation and
using Orc's <code class="code"><span class="hl-operator">?</span></code> and <code class="code"><span class="hl-operator">:=</span></code> operators.
</p><p>
Note that Java allows fields and methods with identical names to be members of the same class.
In this case, Orc's Java class proxy resolves from the usage of a record element
whether to access the field or method.
</p><p>
Orc Java class proxies are not true Orc record values, although they appear syntactically as if they are.
</p><p>
Java classes are loaded from the Orc site classpath, which may be specified as a setting of the Orc
runtime engine; for example via a command-line option or an Eclipse project property.
If the class is not found on the Orc site
classpath, the loading attempt continues using the normal Java classpath.
</p></div><div class="section" title="6.2.2.&nbsp;Java objects"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.java.objects"></a>6.2.2.&nbsp;Java objects</h3></div></div></div><p>
Java objects may be returned by any Orc site call, including constructor or class static method
invocations of an Orc Java class proxy.
Java objects' methods and fields appear in the same manner as
an Orc record with keys corresponding to the members' names.
Methods appear as record elements that are sites, and are invoked by projecting the record element
using the dot notation and calling the site.
<a name="N126CE" class="indexterm"></a>Fields appear as record elements that are references, and are accessed and assigned
by projecting the record element using the dot notation and
using Orc's <code class="code"><span class="hl-operator">?</span></code> and <code class="code"><span class="hl-operator">:=</span></code> operators.
If a Java object is called as a site without projecting a member, the method name <a class="link" href="#ref.data.record.specialkeys" title="1.7.4.&nbsp;Special Keys"><code class="code"><span class="hl-variable">apply</span></code></a> is implicitly used.
</p><p>
Note that Java allows fields and methods with identical names to be members of the same class.
In this case, Orc's Java object proxy attempts to resolve from the usage of a record element
whether to access the field or method.
</p><p>
If a field's value is a class with a member named <code class="code"><span class="hl-variable">read</span></code> this member will be
invoked when an Orc program accesses that field with the <code class="code"><span class="hl-operator">?</span></code> operator.
Similarly, if a field's value is a class with a member named <code class="code"><span class="hl-variable">write</span></code>, this member will be
invoked when an Orc program assigns a new value to that field with the <code class="code"><span class="hl-operator">:=</span></code> operator.
Note that this is a potentially surprising name conflict.
</p></div><div class="section" title="6.2.3.&nbsp;Java value conversions"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.java.conversion"></a>6.2.3.&nbsp;Java value conversions</h3></div></div></div><p>
When interacting with Java classes and objects, Orc performs some conversions of values passed to and from the Java code.
Specifically, Orc applies conversions to the following:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Arguments of invoked constructors and methods</p></li><li class="listitem"><p>Return values of invoked constructors and methods</p></li><li class="listitem"><p>Accessed values from fields</p></li><li class="listitem"><p>Assigned values to fields</p></li><li class="listitem"><p>Accessed values from array components</p></li><li class="listitem"><p>Assigned values to array components</p></li></ul></div><p>
</p><p>
The conversions applied are the following:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="code"><span class="hl-keyword">void</span></code> Java methods return <code class="code"><span class="hl-keyword">signal</span></code> in Orc.</p></li><li class="listitem"><p>Orc <a class="link" href="#ref.data.numeric" title="1.2.&nbsp;Numerics">integers</a> are converted to Java <code class="code">Byte</code>, <code class="code">Short</code>, <code class="code">Integer</code>, <code class="code">Long</code>, <code class="code">Float</code>, or <code class="code">Double</code>, as needed.</p></li><li class="listitem"><p>Orc <a class="link" href="#ref.data.numeric" title="1.2.&nbsp;Numerics">numbers</a> are converted to Java <code class="code">Float</code> or <code class="code">Double</code>, as needed.</p></li><li class="listitem"><p>Java <code class="code">Byte</code>, <code class="code">Short</code>, <code class="code">Integer</code>, and <code class="code">Long</code> are converted to Orc integers.</p></li><li class="listitem"><p>Java <code class="code">Float</code> and <code class="code">Double</code> are converted to Orc numbers.</p></li><li class="listitem"><p>Java primitive values are boxed and unboxed as needed, per <em class="citetitle"><a class="citetitle" href="http://java.sun.com/docs/books/jls/third_edition/html/conversions.html#5.1.7" target="_top">The Java Language Specification</a></em> &sect;5.1.7 and &sect;5.1.8.</p></li><li class="listitem"><p>Java widening primitive conversions are applied as needed, per <em class="citetitle"><a class="citetitle" href="http://java.sun.com/docs/books/jls/third_edition/html/conversions.html#5.1.2" target="_top">The Java Language Specification</a></em> &sect;5.1.2.</p></li></ul></div><p>
Note that Orc integers and numbers represent a larger range of values than the standard Java numeric types.
If an integer conversion is applied to an out-of-range value, the result is the least significant bits of the out-of-range value.
This will change the magnitude of the number and may change its sign.
If a floating-point conversion is applied to an out-of-range value, the result is positive or negative infinity, as appropriate.
</p></div><div class="section" title="6.2.4.&nbsp;Java method and constructor invocation"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.java.overloading"></a>6.2.4.&nbsp;Java method and constructor invocation</h3></div></div></div><p>
Orc invokes a Java method or constructor by closely approximating the Java method
invocation rules specified in <em class="citetitle"><a class="citetitle" href="http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.12" target="_top">The Java Language Specification</a></em> &sect;15.12.
This is only an approximation, because Orc performs Java compile-time steps at
run time using Java's reflection facilities, and therefore has a different
view of the types of values than the Java compiler.
However, in most cases, this difference has no effect.
At present, Orc does not recognize Java variable arity methods.
(In practice, this is a very rarely used feature of Java.)
</p><p>
Orc has a Java stack trace option, which may be specified as a setting to the Orc
runtime engine (for example, via a command-line option or an Eclipse run configuration setting).
This may be helpful when debugging Java invocations.
</p></div><div class="section" title="6.2.5.&nbsp;Java arrays"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.java.array"></a>6.2.5.&nbsp;Java arrays</h3></div></div></div><p>
Java arrays are accessible in Orc.
To refer to a component of a Java array, follow the array value with a
nonnegative integer-valued expression in parenthesis.
Java arrays are zero-origin.
Array components appear as references in Orc.
Their values may be accessed and assigned using Orc's <code class="code"><span class="hl-operator">?</span></code> and <code class="code"><span class="hl-operator">:=</span></code> operators.
The Java <code class="code">length</code> pseudo-field of arrays is available in Orc as <code class="code"><span class="hl-variable">length</span><span class="hl-operator">?</span></code>.
</p></div><div class="section" title="6.2.6.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.java.examples"></a>6.2.6.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.sites.java.examples.constructinvoke_link" onclick="toggle(this, 'ref.sites.java.examples.constructinvoke_content')">
					&minus;
				</a><span class="exampleCaption">Construct a Java object, and invoke methods</span></div><div class="exampleBody" id="ref.sites.java.examples.constructinvoke_content"><pre class="orc">
<span class="hl-comment">{- Name a Java class and use it to invoke object methods -}</span>
<span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">URL</span> <span class="hl-operator">=</span> <span class="hl-literal">"java.net.URL"</span>

<span class="hl-comment">{- Create an instance-}</span>
<span class="hl-keyword">val</span> <span class="hl-variable">googleUrl</span> <span class="hl-operator">=</span> <span class="hl-site">URL</span>(<span class="hl-literal">"http://www.google.com/"</span>)

<span class="hl-comment">{- Invoke some methods -}</span>
<span class="hl-variable">googleUrl</span>.<span class="hl-site">openConnection</span>().<span class="hl-site">getResponseMessage</span>()

<span class="hl-comment">{-
OUTPUT:
"OK"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.sites.java.examples.constructinvoke_link'), 'ref.sites.java.examples.constructinvoke_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.sites.java.examples.static_link" onclick="toggle(this, 'ref.sites.java.examples.static_content')">
					&minus;
				</a><span class="exampleCaption">Accessing class members</span></div><div class="exampleBody" id="ref.sites.java.examples.static_content"><pre class="orc">
<span class="hl-comment">{- Access Java's String and Boolean classes -}</span>

<span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">JavaBoolean</span> <span class="hl-operator">=</span> <span class="hl-literal">"java.lang.Boolean"</span>
<span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">JavaString</span> <span class="hl-operator">=</span> <span class="hl-literal">"java.lang.String"</span>

<span class="hl-comment">-- Static field access</span>
<span class="hl-variable">JavaBoolean</span>.<span class="hl-variable">TRUE</span><span class="hl-operator">?</span> <span class="hl-combinator">|</span>

<span class="hl-comment">-- Constructor invocation</span>
<span class="hl-site">JavaBoolean</span>(<span class="hl-literal">"true"</span>) <span class="hl-combinator">|</span>

<span class="hl-comment">-- Static method access</span>
<span class="hl-variable">JavaBoolean</span>.<span class="hl-site">parseBoolean</span>(<span class="hl-literal">"true"</span>) <span class="hl-combinator">|</span>

<span class="hl-comment">-- Overloading and Orc-Java conversion -- String.valueOf(double) is invoked</span>
<span class="hl-variable">JavaString</span>.<span class="hl-site">valueOf</span>(<span class="hl-literal">2e108</span>)

<span class="hl-comment">{-
OUTPUT:PERMUTABLE
true
true
true
"2E+108"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.sites.java.examples.static_link'), 'ref.sites.java.examples.static_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.sites.java.examples.noarg_link" onclick="toggle(this, 'ref.sites.java.examples.noarg_content')">
					&minus;
				</a><span class="exampleCaption">No-arg constructor invocation, field assignment, and field dereference</span></div><div class="exampleBody" id="ref.sites.java.examples.noarg_content"><pre class="orc">
<span class="hl-comment">{- Constructor invocation -}</span> 

<span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">FieldTestClass</span> <span class="hl-operator">=</span> <span class="hl-literal">"org.omg.CORBA.portable.ServantObject"</span>

<span class="hl-comment">-- No-arg constructor invocation</span>
<span class="hl-site">FieldTestClass</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">testInstance</span><span class="hl-combinator">&gt;</span>

<span class="hl-comment">-- Field assignment</span>
<span class="hl-variable">testInstance</span>.<span class="hl-variable">servant</span> <span class="hl-operator">:=</span> <span class="hl-literal">"test 4"</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>

<span class="hl-comment">-- Field derefence</span>
<span class="hl-variable">testInstance</span>.<span class="hl-variable">servant</span><span class="hl-operator">?</span>

<span class="hl-comment">{-
OUTPUT:
"test 4"
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.sites.java.examples.noarg_link'), 'ref.sites.java.examples.noarg_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.sites.java.examples.intoverflow_link" onclick="toggle(this, 'ref.sites.java.examples.intoverflow_content')">
					&minus;
				</a><span class="exampleCaption">Integer conversion overflow</span></div><div class="exampleBody" id="ref.sites.java.examples.intoverflow_content"><pre class="orc">
<span class="hl-comment">{- Demonstrate an Orc-to-Java integer conversion of an out-of-range value -}</span>

<span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">JavaInteger</span> <span class="hl-operator">=</span> <span class="hl-literal">"java.lang.Integer"</span>

<span class="hl-keyword">val</span> <span class="hl-variable">x</span> <span class="hl-operator">=</span> <span class="hl-literal">1230000000000000000456789</span>

<span class="hl-variable">JavaInteger</span>.<span class="hl-site">valueOf</span>(<span class="hl-variable">x</span>)

<span class="hl-comment">{-
OUTPUT:
-1530464171
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.sites.java.examples.intoverflow_link'), 'ref.sites.java.examples.intoverflow_content'); }, 125);
</script></div><div class="section" title="6.2.7.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.java.links"></a>6.2.7.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.declarations.class" title="4.5.&nbsp;import class: Import Class from Java"><code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code> declaration</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.external" title="1.11.&nbsp;External Values">External data values</a></p></li><li class="listitem"><p><a class="link" href="#ref.sites.custom" title="6.4.&nbsp;Custom sites">Custom sites</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.class.type" title="4.5.2.&nbsp;Type">Interacting with Java Types</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.import" class="olink"><code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code> declaration</a></p></li></ul></div></div></div><div class="section" title="6.3.&nbsp;Web Services"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.sites.web"></a>6.3.&nbsp;Web Services</h2></div></div></div><p>
Some sites provide access to remote services, rather than performing local computation.
In particular, a site could provide access to a <a name="N127E2" class="indexterm"></a>Web service. 
The Orc library provides sites which perform basic HTTP requests and manipulate JSON and XML data representations;
these capabilities are sufficient to interact with many simple web services, especially <a name="N127E6" class="indexterm"></a>RESTful services.
</p><div class="section" title="6.3.1.&nbsp;HTTP"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.web.http"></a>6.3.1.&nbsp;HTTP</h3></div></div></div><a name="N127EE" class="indexterm"></a><p>
The <a class="link" href="#ref.stdlib.web.HTTP"><code class="code"><span class="hl-variable">HTTP</span></code></a> site provides a simple mechanism to send GET and POST requests to a URL.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
<code class="code"><span class="hl-site">HTTP</span>(</code><em class="replaceable"><code>U</code></em><code class="code">)</code>, where <em class="replaceable"><code>U</code></em> is a <code class="code"><span class="hl-variable">java</span>.<span class="hl-variable">net</span>.<span class="hl-variable">URL</span></code>, publishes a site which accepts HTTP requests on the URL <em class="replaceable"><code>U</code></em>.
</p></li><li class="listitem"><p>
<code class="code"><span class="hl-site">HTTP</span>(</code><em class="replaceable"><code>S</code></em><code class="code">)</code> parses the <a class="link" href="#ref.data.string" title="1.3.&nbsp;Character Strings">string</a> <em class="replaceable"><code>S</code></em> as an absolute URL <em class="replaceable"><code>U</code></em>, and then behaves as <code class="code"><span class="hl-site">HTTP</span>(</code><em class="replaceable"><code>U</code></em><code class="code">)</code>.
</p></li><li class="listitem"><p>
<code class="code"><span class="hl-site">HTTP</span>(</code><em class="replaceable"><code>S</code></em><code class="code">,</code><em class="replaceable"><code>Q</code></em><code class="code">)</code> maps the record <em class="replaceable"><code>Q</code></em> to a URL query string <em class="replaceable"><code>QS</code></em> by translating each record binding to a query pair, escaping characters
if necessary. The call then behaves as <code class="code"><span class="hl-site">HTTP</span>(</code><em class="replaceable"><code>S</code></em>+<em class="replaceable"><code>QS</code></em><code class="code">)</code>.
</p></li></ul></div><p>  
</p><p>
The <code class="code"><span class="hl-variable">HTTP</span></code> site publishes a site (call it <em class="replaceable"><code>H</code></em>) with methods <code class="code"><span class="hl-variable">get</span></code> and <code class="code"><span class="hl-variable">post</span></code>:

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
<em class="replaceable"><code>H</code></em><code class="code">.<span class="hl-site">get</span>()</code> performs a <code class="code"><span class="hl-variable">GET</span></code> request on the URL used to create <em class="replaceable"><code>H</code></em>. 
</p></li><li class="listitem"><p>
<em class="replaceable"><code>H</code></em><code class="code">.<span class="hl-site">post</span>(</code><em class="replaceable"><code>P</code></em><code class="code">)</code> performs a <code class="code"><span class="hl-variable">POST</span></code> request with payload <em class="replaceable"><code>P</code></em> on the URL used to create <em class="replaceable"><code>H</code></em>. 
</p></li></ul></div><p>
</p><p>
If the request is successful, the response is published as a single string, which may be translated to a more useful representation by other library sites.
</p></div><div class="section" title="6.3.2.&nbsp;Data Processing"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.web.data"></a>6.3.2.&nbsp;Data Processing</h3></div></div></div><p>
Web services often expect inputs or provide outputs in a particular format, such as XML or JSON. 
The Orc library provides sites which convert between string representations of these data formats
and structured representations which Orc can manipulate.

</p><div class="section" title="6.3.2.1.&nbsp;JSON"><div class="titlepage"><div><div><h4 class="title"><a name="ref.sites.web.json"></a>6.3.2.1.&nbsp;JSON</h4></div></div></div><a name="N12885" class="indexterm"></a><p>
<a class="link" href="http://www.json.org" target="_top">JSON</a> (JavaScript Object Notation) is a lightweight data format often used 
by Web services, especially by services with simple interfaces. The structure of JSON values maps onto Orc values, using nested lists and records.
</p><p>
The library sites <a class="link" href="#ref.stdlib.web.ReadJSON"><code class="code"><span class="hl-variable">ReadJSON</span></code></a> and <a class="link" href="#ref.stdlib.web.WriteJSON"><code class="code"><span class="hl-variable">WriteJSON</span></code></a> convert between string representations of JSON
values and Orc representations of those values. <code class="code"><span class="hl-variable">ReadJSON</span></code> parses a string representation of JSON
and creates an Orc value, where each JSON array becomes an Orc <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>,
each JSON object becomes an Orc <a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">record</a>, and literal values map to their
Orc counterparts. <code class="code"><span class="hl-variable">WriteJSON</span></code> performs the inverse operation, taking a structured value of this form
and producing a string representation of an equivalent JSON value. If <em class="replaceable"><code>j</code></em> is an Orc
representation of a JSON value, then <code class="code"><span class="hl-site">ReadJSON</span>(<span class="hl-site">WriteJSON</span>(</code><em class="replaceable"><code>j</code></em><code class="code">))</code> is
equal to <em class="replaceable"><code>j</code></em>.
</p></div><div class="section" title="6.3.2.2.&nbsp;XML"><div class="titlepage"><div><div><h4 class="title"><a name="ref.sites.web.xml"></a>6.3.2.2.&nbsp;XML</h4></div></div></div><a name="N128B9" class="indexterm"></a><p>
<a class="link" href="http://www.w3.org/XML/" target="_top">XML</a> (Extensible Markup Language) is a structured data format used in many contexts,
including Web services. 
</p><p>
The library sites <a class="link" href="#ref.stdlib.xml.ReadXML"><code class="code"><span class="hl-variable">ReadXML</span></code></a> and <a class="link" href="#ref.stdlib.xml.WriteXML"><code class="code"><span class="hl-variable">WriteXML</span></code></a> convert between string representations of XML
values and Orc representations of those values. <code class="code"><span class="hl-variable">ReadXML</span></code> parses a string representation of XML
and creates an Orc representation, which can be manipulated by Orc's XML library sites. <code class="code"><span class="hl-variable">WriteXML</span></code> 
performs the inverse operation, taking an Orc representation of XML and serializing it to a string.
If <em class="replaceable"><code>x</code></em> is an Orc representation of an XML fragment, 
then <code class="code"><span class="hl-site">ReadXML</span>(<span class="hl-site">WriteXML</span>(</code><em class="replaceable"><code>x</code></em><code class="code">))</code> is equal to <em class="replaceable"><code>x</code></em>.
</p><p>
Unlike JSON, the structure of XML does not map directly to Orc's structured values.
Instead, Orc provides a set of library sites and functions which manipulate XML in a manner similar to Orc's
<a class="link" href="#ref.data.datatype" title="1.8.&nbsp;Algebraic Data Types">datatypes</a>. Orc's XML manipulation capabilities are currently incomplete; 
in particular, it does not handle namespaces. 
All constructed elements have the default namespace, element and attribute tags have no prefixes,
and element matching discards namespace and prefix information.
For more comprehensive XML manipulation, use of underlying platform capabilities 
(such as Scala or Java libraries) is recommended.
</p><div class="section" title="6.3.2.2.1.&nbsp;Primitive XML Sites"><div class="titlepage"><div><div><h5 class="title"><a name="ref.sites.web.xml.primitives"></a>6.3.2.2.1.&nbsp;Primitive XML Sites</h5></div></div></div><p>
There are three library sites that construct XML nodes directly. Each of these sites may also be used in a 
<a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">call pattern</a> to match the corresponding constructed value.
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
    <code class="code"><a class="link" href="#ref.stdlib.xml.XMLElement">XMLElement</a>(</code><em class="replaceable"><code>tag</code></em><code class="code">,</code> <em class="replaceable"><code>attr</code></em><code class="code">,</code> <em class="replaceable"><code>children</code></em><code class="code">)</code> 
    creates a new XML element with the tag given by string <em class="replaceable"><code>tag</code></em>, 
    the set of attributes specified by the record <em class="replaceable"><code>attr</code></em>,
    and the sequence of child elements given by the list <em class="replaceable"><code>children</code></em>. 
    Each value mapped by <em class="replaceable"><code>attr</code></em> is converted to a string in the XML representation.
    <em class="replaceable"><code>attr</code></em> may be an empty record. 
    Each element of <em class="replaceable"><code>children</code></em> must be an XML node.
    <em class="replaceable"><code>children</code></em> may be an empty list.
  </p></li><li class="listitem"><p>
    <code class="code"><a class="link" href="#ref.stdlib.xml.XMLText">XMLText</a>(</code><em class="replaceable"><code>txt</code></em><code class="code">)</code> creates a new XML text node
    whose content is the string <em class="replaceable"><code>txt</code></em>. Characters in <em class="replaceable"><code>txt</code></em>
    which are not permitted in XML text will be encoded.
  </p></li><li class="listitem"><p>
    <code class="code"><a class="link" href="#ref.stdlib.xml.XMLCData">XMLCData</a>(</code><em class="replaceable"><code>txt</code></em><code class="code">)</code> creates a new XML CDATA node
    whose content is the string <em class="replaceable"><code>txt</code></em>. Characters in <em class="replaceable"><code>txt</code></em>
    are <span class="emphasis"><em>not</em></span> encoded.
  </p></li></ul></div><p>
</p><p>
The library site <a class="link" href="#ref.stdlib.xml.IsXML"><code class="code"><span class="hl-variable">IsXML</span></code></a> verifies that its argument is an XML node of some type. 
<code class="code"><span class="hl-site">IsXML</span>(</code><em class="replaceable"><code>x</code></em><code class="code">)</code> publishes <em class="replaceable"><code>x</code></em> if <em class="replaceable"><code>x</code></em> is an XML node;
otherwise it halts silently.
</p></div><div class="section" title="6.3.2.2.2.&nbsp;Manipulating XML"><div class="titlepage"><div><div><h5 class="title"><a name="ref.sites.web.xml.manipulation"></a>6.3.2.2.2.&nbsp;Manipulating XML</h5></div></div></div><p>
The library provides two records, <a class="link" href="#ref.stdlib.xml.xml"><code class="code"><span class="hl-variable">xml</span></code></a> and <a class="link" href="#ref.stdlib.xml.xattr"><code class="code"><span class="hl-variable">xattr</span></code></a>, to manipulate XML
nodes more conveniently than by using the primitive XML sites. Each
record has two members, <code class="code"><span class="hl-variable">apply</span></code> and <code class="code"><span class="hl-variable">unapply</span></code>, 
that are both functions. The apply function builds XML values, 
and the unapply function is used in pattern matching.
</p><p>
<code class="code"><span class="hl-variable">xml</span></code> is convenient when working only with the tree structure
of XML, and not with the attributes of the element nodes.
Note that <code class="code"><span class="hl-variable">xml</span></code>'s apply and unapply members are not inverses of each other. 
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="code"><span class="hl-site">xml</span>(</code><em class="replaceable"><code>t</code></em><code class="code">,</code> <em class="replaceable"><code>cs</code></em><code class="code">)</code> returns a new XML
element with the tag <em class="replaceable"><code>t</code></em>, the list of children <em class="replaceable"><code>cs</code></em>, and no attributes. If any element
of <em class="replaceable"><code>cs</code></em> is not an XML node, it is converted to a string and enclosed in a text node. 
</p></li><li class="listitem"><p>
The pattern <code class="code"><span class="hl-site">xml</span>(</code><em class="replaceable"><code>p<sub>tag</sub></code></em><code class="code">,</code> <em class="replaceable"><code>p<sub>child</sub></code></em><code class="code">)</code>
matches an XML element. 
The pattern <em class="replaceable"><code>p<sub>tag</sub></code></em> is matched against the element tag. 
The pattern <em class="replaceable"><code>p<sub>child</sub></code></em> is matched against each child of the element;
it is a multimatch, so it may succeed multiple times and produces a result on each success. Additionally, when <em class="replaceable"><code>p<sub>child</sub></code></em>
matches a text or CDATA node rather than an element node, it is bound to the string contents of the node, rather than the node itself. 

</p></li></ul></div><p>
</p><p>
<code class="code"><span class="hl-variable">xattr</span></code> is convenient when working only with the attributes
of XML element nodes, and not with the overall tree structure.
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="code"><span class="hl-site">xattr</span>(</code><em class="replaceable"><code>x</code></em><code class="code">,</code> <em class="replaceable"><code>attr</code></em><code class="code">)</code> 
returns a new XML element which is the same as <em class="replaceable"><code>x</code></em> except that all bindings in the record <em class="replaceable"><code>attr</code></em>
have been added to the attributes of the element. 
If <em class="replaceable"><code>attr</code></em> binds any attribute names already bound in <em class="replaceable"><code>x</code></em>, 
<em class="replaceable"><code>attr</code></em> takes precedence and overwrites those bindings. 
</p></li><li class="listitem"><p>
The pattern <code class="code"><span class="hl-site">xattr</span>(</code><em class="replaceable"><code>p<sub>e</sub></code></em><code class="code">,</code> <em class="replaceable"><code>p<sub>a</sub></code></em><code class="code">)</code>
matches an XML element. 
The pattern <em class="replaceable"><code>p<sub>e</sub></code></em> is matched against a copy of the element with no attributes. 
The pattern <em class="replaceable"><code>p<sub>a</sub></code></em> is matched against a record containing the attributes of the element.  
</p></li></ul></div><p>
</p></div></div></div><div class="section" title="6.3.3.&nbsp;SOAP Web Services"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.web.soap"></a>6.3.3.&nbsp;SOAP Web Services</h3></div></div></div><p>
Though Orc does not provide direct bindings to <a name="N12A02" class="indexterm"></a>SOAP web services, it is possible to access such services through Java bindings.
Frameworks such as JAX-WS map SOAP web service functionality to Java classes; these classes can then be <a class="link" href="#ref.sites.java" title="6.2.&nbsp;Java sites">used as sites in Orc</a>.
</p></div><div class="section" title="6.3.4.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.web.examples"></a>6.3.4.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.sites.web.examples.randombytes_link" onclick="toggle(this, 'ref.sites.web.examples.randombytes_content')">
					&minus;
				</a><span class="exampleCaption">Random Bytes from Fourmilab</span></div><div class="exampleBody" id="ref.sites.web.examples.randombytes_content"><pre class="orc">
<span class="hl-comment">{-
   Make a request to the Fourmilab HotBits service 
   to produce a sequence of 4 random bytes in hex.
-}</span>

<span class="hl-comment">{- Returns a string of n random hexadecimal bytes -}</span>
<span class="hl-keyword">def</span> <span class="hl-site">randombytes</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">query</span> <span class="hl-operator">=</span> {. <span class="hl-variable">nbytes</span> <span class="hl-operator">=</span> <span class="hl-variable">n</span>, <span class="hl-variable">fmt</span> <span class="hl-operator">=</span> <span class="hl-literal">"xml"</span> .} 
  <span class="hl-keyword">val</span> <span class="hl-variable">location</span> <span class="hl-operator">=</span> <span class="hl-literal">"https://www.fourmilab.ch/cgi-bin/Hotbits"</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">response</span> <span class="hl-operator">=</span> <span class="hl-site">HTTP</span>(<span class="hl-variable">location</span>, <span class="hl-variable">query</span>).<span class="hl-site">get</span>()
  <span class="hl-keyword">val</span> <span class="hl-site">xml</span>(<span class="hl-literal">"hotbits"</span>, <span class="hl-site">xml</span>(<span class="hl-literal">"random-data"</span>, <span class="hl-variable">data</span>)) <span class="hl-operator">=</span> <span class="hl-site">ReadXML</span>(<span class="hl-variable">response</span>) 
  <span class="hl-variable">data</span>.<span class="hl-site">trim</span>()

<span class="hl-site">randombytes</span>(<span class="hl-literal">4</span>)
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.sites.web.examples.randombytes_link'), 'ref.sites.web.examples.randombytes_content'); }, 125);
</script></div><div class="section" title="6.3.5.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.web.links"></a>6.3.5.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.stdlib.web" title="11.10.&nbsp;web: Web browsing, HTTP, and JSON capabilities.">Standard Library: Web</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.xml" title="11.11.&nbsp;xml: XML manipulation.">Standard Library: XML</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">Lists</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">Records</a></p></li></ul></div></div></div><div class="section" title="6.4.&nbsp;Custom sites"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.sites.custom"></a>6.4.&nbsp;Custom sites</h2></div></div></div><p>
For services beyond those available as library sites, Java sites, and Web service sites,
Orc programs may call sites developed specifically as Orc sites.
The calling Orc program names the site with an <a class="link" href="#ref.declarations.site" title="4.4.&nbsp;import site: Import Site"><code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">site</span></code></a> declaration.
This declaration causes the Orc engine to load the Java class of the given name from
the Orc site classpath or JVM classpath.
Calls to this site are dispatched via Orc's site interface,
which permit the site to interact with the calling program natively.
</p><div class="section" title="6.4.1.&nbsp;Implementing new custom sites"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.custom.implement"></a>6.4.1.&nbsp;Implementing new custom sites</h3></div></div></div><p>
Orc sites may be implemented in any language that can produce Java class files.
However, the Orc team rec
ommends the Scala programming language from Martin Odersky and his team at EPFL (&Eacute;cole Polytechnique F&eacute;d&eacute;rale de Lausanne).
For information on Scala, see <a class="link" href="http://www.scala-lang.org/" target="_top">http://www.scala-lang.org/</a>.
</p><p>
The Orc runtime engine provides a basic <code class="code">Site</code> interface which a site must implement.
This interface specifies an abstract <code class="code">call</code> method that receives a call handle
for the site to respond to the <a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">site call</a>.  The <code class="code">Handle</code> interface provides methods
to respond by either:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publishing</a> a value</p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">Halting</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a></p></li><li class="listitem"><p>Throwing an exception</p></li></ul></div><p>
Additionally, sites may notify the Orc runtime engine of events via the <code class="code">Handle</code>,
such as the need to write a string to the standard output stream.
</p><p>
Site call arguments and return values are not subject to Orc-Java conversions, so the
site must work with native Orc values.  Sites are also responsible for enforcing
arity and type requirements on the argument lists of calls.
</p><p>
Orc provides a number of convenience mix-in traits for site implementors:
</p><div class="variablelist" title="Site interface mix-in traits"><p class="title"><b>Site interface mix-in traits</b></p><dl><dt><span class="term"><code class="code">orc.values.sites.Site</code></span></dt><dd><p>The basic site trait -- a site that can be called.  Implement the <code class="code">call</code> method.</p></dd><dt><span class="term"><code class="code">orc.values.sites.TotalSite</code></span></dt><dd><p>A site that always publishes.  Implement the <code class="code">evaluate</code> method instead of the <code class="code">call</code> method.</p></dd><dt><span class="term"><code class="code">orc.values.sites.PartialSite</code></span></dt><dd><p>A site that sometimes publishes and sometimes halts silently.  Implement the <code class="code">evaluate</code> method instead of the <code class="code">call</code> method.  <code class="code">evaluate</code> should return an <code class="code">Option</code>, <code class="code">Some(x)</code> to publish <code class="code">x</code>, or <code class="code">None</code> to halt.</p></dd><dt><span class="term"><code class="code">orc.values.sites.UnimplementedSite</code></span></dt><dd><p>A site that throws <code class="code">orc.error.NotYetImplementedException</code> when called or type checked.</p></dd><dt><span class="term"><code class="code">orc.values.sites.TypedSite</code></span></dt><dd><p>A site that declares its type to the Orc type checker.</p></dd><dt><span class="term"><code class="code">orc.values.sites.UntypedSite</code></span></dt><dd><p>A site that does not participate in type checking. Use sparingly.</p></dd></dl></div><p>
</p><p>
For a detailed description of the Orc-site interface, refer to the <a class="link" href="http://orc.csres.utexas.edu/javadoc/STABLE/index.html" target="_top">Orc implementation Javadoc</a>.
</p></div><div class="section" title="6.4.2.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.sites.custom.links"></a>6.4.2.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.declarations.site" title="4.4.&nbsp;import site: Import Site"><code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">site</span></code> declaration</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.import" class="olink"><code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">site</span></code></a></p></li></ul></div></div></div></div><div lang="" class="chapter" title="Chapter&nbsp;7.&nbsp;Time"><div class="titlepage"><div><div><h2 class="title"><a name="ref.time"></a>Chapter&nbsp;7.&nbsp;Time</h2></div></div></div><p>
Orc is designed to communicate with the external world, and one of the
most important characteristics of the external world is the passage of
time. Orc implicitly interacts with the passage of time by calling external
services which take time to respond. However, Orc can also explicitly
wait for some amount of time, using the special site <code class="code"><span class="hl-variable">Rwait</span></code>. 
</p><div class="section" title="7.1.&nbsp;Real Time"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.time.real"></a>7.1.&nbsp;Real Time</h2></div></div></div><div class="section" title="7.1.1.&nbsp;Rwait"><div class="titlepage"><div><div><h3 class="title"><a name="ref.time.real.rwait"></a>7.1.1.&nbsp;Rwait</h3></div></div></div><p>
The site <code class="code"><span class="hl-variable">Rwait</span></code> is a relative timer. It takes as a nonnegative integer argument
a number of milliseconds to wait. It waits for <a class="link" href="#ref.concepts.approximation" title="8.6.&nbsp;Approximation in Orc Implementation">approximately</a> that amount of time,
and then responds with a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal"><code class="code"><span class="hl-keyword">signal</span></code></a>.
</p></div><div class="section" title="7.1.2.&nbsp;Rtime"><div class="titlepage"><div><div><h3 class="title"><a name="ref.time.real.rtime"></a>7.1.2.&nbsp;Rtime</h3></div></div></div><p>
			The site <code class="code"><span class="hl-variable">Rtime</span></code> is a program clock. 
			When called, it returns the number of milliseconds that have elapsed since
			the program began executing.
			</p></div><div class="section" title="7.1.3.&nbsp;Rclock"><div class="titlepage"><div><div><h3 class="title"><a name="ref.time.real.rclock"></a>7.1.3.&nbsp;Rclock</h3></div></div></div><p>
			The site <code class="code"><span class="hl-variable">Rclock</span></code> creates new clock instances.
			When called, it returns a new clock, with two <a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">members</a>: <code class="code"><span class="hl-variable">wait</span></code> and <code class="code"><span class="hl-variable">time</span></code>.
			The <code class="code"><span class="hl-variable">wait</span></code> member behaves exactly like <code class="code"><span class="hl-variable">Rwait</span></code>.
			The <code class="code"><span class="hl-variable">time</span></code> member returns the number of milliseconds that have passed since the clock was created.
			</p></div><div class="section" title="7.1.4.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.time.real.examples"></a>7.1.4.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.time.real.examples.simple_link" onclick="toggle(this, 'ref.time.real.examples.simple_content')">
					&minus;
				</a><span class="exampleCaption">Simple example of using Rwait</span></div><div class="exampleBody" id="ref.time.real.examples.simple_content"><pre class="orc">
<span class="hl-comment">{- Print "red", wait for 3 seconds (3000 ms), and then print "green" -}</span>

<span class="hl-site">Println</span>(<span class="hl-literal">"red"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">3000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Println</span>(<span class="hl-literal">"green"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>

<span class="hl-comment">{-
OUTPUT:
red
green
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.time.real.examples.simple_link'), 'ref.time.real.examples.simple_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.time.real.examples.timeout_link" onclick="toggle(this, 'ref.time.real.examples.timeout_content')">
					&minus;
				</a><span class="exampleCaption">Timeout</span></div><div class="exampleBody" id="ref.time.real.examples.timeout_content"><pre class="orc">
<span class="hl-keyword">include</span> <span class="hl-literal">"search.inc"</span>

<span class="hl-comment">{- Publish the result of a Google search.
   If it takes more than 5 seconds, time out.
-}</span>
<span class="hl-variable">result</span> 
  <span class="hl-combinator">&lt;</span><span class="hl-variable">result</span><span class="hl-combinator">&lt;</span> ( <span class="hl-site">Google</span>(<span class="hl-literal">"impatience"</span>) 
           <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">5000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Search timed out."</span>)
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.time.real.examples.timeout_link'), 'ref.time.real.examples.timeout_content'); }, 125);
</script></div><div class="section" title="7.1.5.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.time.real.links"></a>7.1.5.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.stdlib.time" title="11.8.&nbsp;time: Real time.">Standard Library: Time</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib.time.metronome"><code class="code"><span class="hl-variable">metronome</span></code> function</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.idioms.timeout" class="olink">Timeout</a></p></li></ul></div></div></div></div><div lang="" class="chapter" title="Chapter&nbsp;8.&nbsp;Concepts"><div class="titlepage"><div><div><h2 class="title"><a name="ref.concepts"></a>Chapter&nbsp;8.&nbsp;Concepts</h2></div></div></div><p>
These are a few concepts which are essential to Orc, and are used frequently in
other parts of the reference manual.
</p><div class="section" title="8.1.&nbsp;Publication"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.concepts.publish"></a>8.1.&nbsp;Publication</h2></div></div></div><p>
An Orc expression <a name="N12B88" class="indexterm"></a><em class="firstterm">publishes</em> a value when the expression produces a value to be used in the context enclosing the expression.
An extremely simple example of publication is a literal, for example the expression <code class="code"><span class="hl-literal">1</span></code>, which publishes a single integer <a name="N12B93" class="indexterm"></a>value.
Orc expressions may publish zero or more values during their execution.
The effect of publication depends on the context.
For example, each publication of <em class="replaceable"><code>F</code></em> in the <a class="link" href="#ref.combinators.sequential" title="3.2.&nbsp;Sequential Combinator">sequential combinator</a> expression <em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&gt;</span></code>x<code class="code"><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>G</code></em>
causes <em class="replaceable"><code>G</code></em> to be run with <code class="code"><span class="hl-variable">x</span></code> bound to the published value.
An expression that never publishes is said to be <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silent</a>.
	</p><p>
The following is the publication behavior of a few common forms of Orc expressions.
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">Site calls</a> publish only zero or one value.</p></li><li class="listitem"><p><a class="link" href="#ref.expressions.call.function" title="2.4.3.&nbsp;Function Calls">Function calls</a> may publish any number of values.</p></li><li class="listitem"><p>A <a class="link" href="#ref.expressions.literal" title="2.1.&nbsp;Literal Value">literal expression</a> publishes exactly one value.</p></li><li class="listitem"><p><a class="link" href="#ref.expressions.stop" title="2.3.&nbsp;stop"><code class="code"><span class="hl-keyword">stop</span></code></a> never publishes.</p></li><li class="listitem"><p>A <a class="link" href="#ref.expressions.variable" title="2.2.&nbsp;Variable">variable expression</a>, when executed, publishes its value, if bound.
				If not, execution of the variable is <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocked</a> until it is bound.</p></li><li class="listitem"><p>Each of the Orc <a class="link" href="#ref.combinators" title="Chapter&nbsp;3.&nbsp;Combinators">combinators</a> has a unique publication behavior.</p></li></ul></div><p>
	</p><div class="section" title="8.1.1.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.publish.examples"></a>8.1.1.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.concepts.publish.examples.pub0_link" onclick="toggle(this, 'ref.concepts.publish.examples.pub0_content')">
					&minus;
				</a><span class="exampleCaption">Publish no values</span></div><div class="exampleBody" id="ref.concepts.publish.examples.pub0_content"><pre class="orc">
(<span class="hl-literal">1</span> <span class="hl-combinator">|</span> <span class="hl-literal">2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
<span class="hl-comment">{-
OUTPUT:
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.concepts.publish.examples.pub0_link'), 'ref.concepts.publish.examples.pub0_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.concepts.publish.examples.pub2_link" onclick="toggle(this, 'ref.concepts.publish.examples.pub2_content')">
					&minus;
				</a><span class="exampleCaption">Publish one value</span></div><div class="exampleBody" id="ref.concepts.publish.examples.pub2_content"><pre class="orc">
<span class="hl-literal">1</span>
<span class="hl-comment">{-
OUTPUT:
1
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.concepts.publish.examples.pub2_link'), 'ref.concepts.publish.examples.pub2_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.concepts.publish.examples.pub2seq_link" onclick="toggle(this, 'ref.concepts.publish.examples.pub2seq_content')">
					&minus;
				</a><span class="exampleCaption">Publish two values</span></div><div class="exampleBody" id="ref.concepts.publish.examples.pub2seq_content"><pre class="orc">
(<span class="hl-literal">1</span> <span class="hl-combinator">|</span> <span class="hl-literal">2</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">x</span> <span class="hl-operator">+</span> <span class="hl-literal">30</span>
<span class="hl-comment">{-
OUTPUT:PERMUTABLE
31
32
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.concepts.publish.examples.pub2seq_link'), 'ref.concepts.publish.examples.pub2seq_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.concepts.publish.examples.metronome_link" onclick="toggle(this, 'ref.concepts.publish.examples.metronome_content')">
					&minus;
				</a><span class="exampleCaption">Publish an unbounded number of values (metronome)</span></div><div class="exampleBody" id="ref.concepts.publish.examples.metronome_content"><pre class="orc">
<span class="hl-keyword">def</span> <span class="hl-site">metronome</span>() <span class="hl-operator">=</span> <span class="hl-keyword">signal</span> <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">metronome</span>()

<span class="hl-site">metronome</span>()
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.concepts.publish.examples.metronome_link'), 'ref.concepts.publish.examples.metronome_content'); }, 125);
</script></div><div class="section" title="8.1.2.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.publish.links"></a>8.1.2.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.combinators" title="Chapter&nbsp;3.&nbsp;Combinators">Combinators</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">Site Call</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.call.function" title="2.4.3.&nbsp;Function Calls">Function Call</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.stop" title="2.3.&nbsp;stop"><code class="code"><span class="hl-keyword">stop</span></code></a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">Silent</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple" class="olink">Orc expressions</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.combinators" class="olink">Combinators</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.complex.nesting" class="olink">Nesting expressions</a></p></li><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.sites" class="olink">Sites</a></p></li></ul></div></div></div><div class="section" title="8.2.&nbsp;Silence"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.concepts.silent"></a>8.2.&nbsp;Silence</h2></div></div></div><div class="section" title="8.2.1.&nbsp;Definition"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.silent.definition"></a>8.2.1.&nbsp;Definition</h3></div></div></div><p>
			An expression is <a name="N12C4C" class="indexterm"></a><em class="firstterm">silent</em> in an execution if it never <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> in that execution. 
			An expression is always silent if it does not publish in any execution.
			A silent expression may call <a class="link" href="#ref.sites" title="Chapter&nbsp;6.&nbsp;Sites and Services">sites</a>. 
			The type of a silent expression is <a class="link" href="#ref.types.subtyping.Bot" title="9.3.2.&nbsp;Bot"><code class="code"><span class="hl-variable">Bot</span></code></a>. 
		</p></div><div class="section" title="8.2.2.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.silent.examples"></a>8.2.2.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.concepts.silent.examples.sideeffects_link" onclick="toggle(this, 'ref.concepts.silent.examples.sideeffects_content')">
					&minus;
				</a><span class="exampleCaption">Silence with Side Effects</span></div><div class="exampleBody" id="ref.concepts.silent.examples.sideeffects_content"><pre class="orc">
<span class="hl-comment">{- Silent expressions never publish but may have side effects 
   such as output to the console.
-}</span>
 
  <span class="hl-site">Println</span>(<span class="hl-literal">"print but don't publish"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
<span class="hl-combinator">|</span> <span class="hl-keyword">stop</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Println</span>(<span class="hl-literal">"never runs"</span>)

<span class="hl-comment">{-
OUTPUT:
print but don't publish
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.concepts.silent.examples.sideeffects_link'), 'ref.concepts.silent.examples.sideeffects_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.concepts.silent.examples.conditional_link" onclick="toggle(this, 'ref.concepts.silent.examples.conditional_content')">
					&minus;
				</a><span class="exampleCaption">Conditional Silence</span></div><div class="exampleBody" id="ref.concepts.silent.examples.conditional_content"><pre class="orc">
<span class="hl-comment">{- 
  Ift(x) is silent if x is bound to false
  Ift(y) is silent because y is always bound to false
  Ift(z) is silent because z is never bound
-}</span>

<span class="hl-keyword">val</span> <span class="hl-variable">x</span> <span class="hl-operator">=</span> <span class="hl-literal">true</span> <span class="hl-combinator">|</span> <span class="hl-literal">false</span>
<span class="hl-keyword">val</span> <span class="hl-variable">y</span> <span class="hl-operator">=</span> <span class="hl-literal">false</span>
<span class="hl-keyword">val</span> <span class="hl-variable">z</span> <span class="hl-operator">=</span> <span class="hl-keyword">stop</span>

<span class="hl-site">Ift</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">|</span> <span class="hl-site">Ift</span>(<span class="hl-variable">y</span>) <span class="hl-combinator">|</span> <span class="hl-site">Ift</span>(<span class="hl-variable">z</span>)

<span class="hl-comment">{-
OUTPUT:
signal
-}</span>
<span class="hl-comment">{-
OUTPUT:
-}</span>
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.concepts.silent.examples.conditional_link'), 'ref.concepts.silent.examples.conditional_content'); }, 125);
</script></div><div class="section" title="8.2.3.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.silent.links"></a>8.2.3.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.stop" title="2.3.&nbsp;stop"><code class="code"><span class="hl-keyword">stop</span></code></a></p></li><li class="listitem"><p><a class="link" href="#ref.types.subtyping.Bot" title="9.3.2.&nbsp;Bot"><code class="code"><span class="hl-variable">Bot</span></code></a></p></li><li class="listitem"><p><a class="link" href="#ref.combinators.otherwise" title="3.4.&nbsp;Otherwise Combinator">Otherwise combinator</a></p></li></ul></div></div></div><div class="section" title="8.3.&nbsp;Expression States"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.concepts.states"></a>8.3.&nbsp;Expression States</h2></div></div></div><p>
		A <a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">site call</a>, from the site's perspective, has three possible outcomes:
		the site will definitely <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a> a value, the site knows that it will
		never publish a value, and the site does not know if it will ever
		publish a value. For example, a call to
		<code class="code"><span class="hl-site">Ift</span>(<span class="hl-literal">true</span>)</code>
		publishes a signal,
		<code class="code"><span class="hl-site">Ift</span>(<span class="hl-literal">false</span>)</code>
		never publishes, and
		<code class="code"><span class="hl-variable">c</span>.<span class="hl-site">get</span>()</code>
		on channel
		<code class="code"><span class="hl-variable">c</span></code>
		that is currently
		empty may eventually publish or remain non-responsive, depending on
		whether a value is put in
		<code class="code"><span class="hl-variable">c</span></code>
		in the future.
	</p><p>
		A site call, from the caller's perspective, is ready, blocked or
		halted. A call is ready if all its arguments have <a class="link" href="#ref.concepts.deflate" title="8.4.&nbsp;Deflation">deflated</a> to
		values, so that a call can be made. A call is blocked if either (1)
		the caller can not make the call because not all argument values are
		bound (since site calls are strict); this is an <a name="N12CB7" class="indexterm"></a><em class="firstterm">internally blocked</em>
		call, or (2) the caller is waiting for the response after having
		called the site; this is an <a name="N12CBD" class="indexterm"></a><em class="firstterm">externally blocked</em> call. A site call is
		halted if the caller has already received a response or the site has
		indicated that it will never send a response. A site call is killed if
		it is part of <em class="replaceable"><code>G</code></em> in
		<a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span></code>x<code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em></a>
		and <em class="replaceable"><code>G</code></em> publishes.
	</p><p>
		An internally blocked call becomes ready when all its arguments are
		bound to values. An internally blocked call halts if one of its
		arguments will never be bound because the expression that computes its
		value has halted or has been killed. A ready call becomes externally blocked once
		the call is made. A blocked call transitions to halted if it receives a
		response or if the called site can <a class="link" href="#ref.concepts.helpful" title="8.5.&nbsp;Helpful Sites">determine that it will never
		respond</a>; a blocked call may remain blocked forever if the called site
		can not determine if if it will ever respond. Note that a halted call
		stays halted unless it is killed.
	</p><p>
		We extend these concepts to execution of an expression. At any moment,
		an expression has an associated set of site calls under consideration
		for execution; if the expression has begun additional executions,
		as in
		<a class="link" href="#ref.combinators.sequential" title="3.2.&nbsp;Sequential Combinator"><em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&gt;</span></code>x<code class="code"><span class="hl-combinator">&gt;</span> </code><em class="replaceable"><code>G</code></em></a>,
		all the versions of <em class="replaceable"><code>G</code></em> being executed contribute to this set; if the
		expression includes function calls, those calls initiate execution of
		the function bodies which are also expressions that contribute to this
		set; any variable <em class="replaceable"><code>x</code></em> used as an <a class="link" href="#ref.expressions.variable" title="2.2.&nbsp;Variable">expression on its own</a>
		is equivalent to a site call <code class="code"><a class="link" href="#ref.stdlib.core.Let">Let</a>(</code><em class="replaceable"><code>x</code></em><code class="code">)</code>. 
		If some site call in this set is ready, the expression is ready;
		if all calls are blocked, the expression is blocked, and if all calls
		are halted the expression is halted.
	</p><div class="section" title="8.3.1.&nbsp;Ready"><div class="titlepage"><div><div><h3 class="title"><a name="N12CFD"></a>8.3.1.&nbsp;Ready</h3></div></div></div><p>
			A site call is <a name="N12D02" class="indexterm"></a><em class="firstterm">ready</em> if all its argument
			variables are bound to values, so that a call can be made. An
			expression is ready if some site call in its set of associated
			site calls is ready.
		</p></div><div class="section" title="8.3.2.&nbsp;Blocked"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.states.block"></a>8.3.2.&nbsp;Blocked</h3></div></div></div><p>
			A site call is <a name="N12D0F" class="indexterm"></a><em class="firstterm">blocked</em> if (1) the call can not be made because some
			argument of the call is unbound, the call is then internally blocked,
			or (2) the caller is waiting for a response, the call is then
			externally blocked. An expression is blocked if its set of associated
			site calls are all blocked. All component expressions of a blocked
			expression are blocked. A blocked expression stays blocked unless (1)
			an internally blocked site call is made ready by the bindings of its
			arguments, or (2) it is halted, or (3) killed. A halted
			expression never makes site calls nor publishes any value.
		</p></div><div class="section" title="8.3.3.&nbsp;Halted"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.states.halt"></a>8.3.3.&nbsp;Halted</h3></div></div></div><p>
			A site call is <a name="N12D1D" class="indexterm"></a><em class="firstterm">halted</em> if (1) it was internally blocked and one of its
			arguments will never be bound because the expression that computes its
			value has been halted or killed, or (2) it was externally blocked and
			either a response has been received or an indication that there never
			will be a response. An expression is halted if the set of associated
			site calls have all halted. All component expressions of a halted
			expression are halted. A halted expression stays halted unless it is
			killed. A halted expression never makes site calls nor publishes any
			value.
		</p></div><div class="section" title="8.3.4.&nbsp;Killed"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.states.kill"></a>8.3.4.&nbsp;Killed</h3></div></div></div><p>
			Expression <em class="replaceable"><code>G</code></em> is <a name="N12D2E" class="indexterm"></a><em class="firstterm">killed</em> in
			<em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span><span class="hl-variable">x</span><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em>
			if <em class="replaceable"><code>G</code></em> has published. All component
			expressions of a killed expression are killed. A killed expression
			stays killed. A killed expression never makes site calls nor publishes
			any value.
		</p></div><div class="section" title="8.3.5.&nbsp;Helpful Sites"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.states.helpful"></a>8.3.5.&nbsp;Helpful Sites</h3></div></div></div><p>
			Sites that may indicate absence of response are called <em class="firstterm">helpful</em> (see
			<a class="link" href="#ref.concepts.helpful" title="8.5.&nbsp;Helpful Sites">Helpful Sites</a>). Not all sites are helpful.
		</p></div><div class="section" title="8.3.6.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.states.examples"></a>8.3.6.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.concepts.states.examples.parallel_link" onclick="toggle(this, 'ref.concepts.states.examples.parallel_content')">
					&minus;
				</a><span class="exampleCaption">Parallel site calls; ready and blocked states</span></div><div class="exampleBody" id="ref.concepts.states.examples.parallel_content"><p>
				Let <code class="code"><span class="hl-variable">c</span></code> be a channel. Consider expression <em class="replaceable"><code>G</code></em> given by
			</p><p>
				<code class="code"><span class="hl-variable">c</span>.<span class="hl-site">get</span>() <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>)</code>
			</p><p>
				The expression is ready because it can make both calls. After both
				calls have been made, the expression is blocked waiting for their
				responses. Suppose <code class="code"><span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>)</code> responds first. Then
				the expression stays blocked waiting for the response to
				<code class="code"><span class="hl-variable">c</span>.<span class="hl-site">get</span>()</code>. If a response is received, the expression
				halts; if <code class="code"><span class="hl-variable">c</span></code> is empty and another caller closes
				<code class="code"><span class="hl-variable">c</span></code>, then <code class="code"><span class="hl-variable">c</span>.<span class="hl-site">get</span>()</code>	indicates that there will
				be no response, causing <em class="replaceable"><code>G</code></em> to halt; otherwise,
				<em class="replaceable"><code>G</code></em> stays blocked forever.
			</p></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.concepts.states.examples.parallel_link'), 'ref.concepts.states.examples.parallel_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.concepts.states.examples.prune_link" onclick="toggle(this, 'ref.concepts.states.examples.prune_content')">
					&minus;
				</a><span class="exampleCaption">Pruning combinator; killed state</span></div><div class="exampleBody" id="ref.concepts.states.examples.prune_content"><p>
				Consider the expression
			</p><p>
				<em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span><span class="hl-variable">x</span><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em>
			</p><p>
				where <em class="replaceable"><code>G</code></em> from the previous example is
			</p><p>
				<code class="code"><span class="hl-variable">c</span>.<span class="hl-site">get</span>() <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>)</code>
			</p><p>
				As we have shown, <em class="replaceable"><code>G</code></em> will definitely <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a>. Then <em class="replaceable"><code>G</code></em> is killed, and so
				are its sub-expressions.
			</p></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.concepts.states.examples.prune_link'), 'ref.concepts.states.examples.prune_content'); }, 125);
</script><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.concepts.states.examples.otherwise_link" onclick="toggle(this, 'ref.concepts.states.examples.otherwise_content')">
					&minus;
				</a><span class="exampleCaption">Sequential and otherwise combinators</span></div><div class="exampleBody" id="ref.concepts.states.examples.otherwise_content"><p>
				In the previous example let <em class="replaceable"><code>F</code></em> be
			</p><p>
				<code class="code"><span class="hl-variable">x</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">c</span>.<span class="hl-site">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span> <span class="hl-combinator">;</span> <span class="hl-literal">false</span></code>
			</p><p>
				In
				<em class="replaceable"><code>F</code></em><code class="code"> <span class="hl-combinator">&lt;</span><span class="hl-variable">x</span><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em>,
				expression <em class="replaceable"><code>F</code></em> is blocked until <code class="code"><span class="hl-variable">x</span></code> is bound to a value. Since
				<em class="replaceable"><code>G</code></em> eventually publishes, <code class="code"><span class="hl-variable">x</span></code> will be bound eventually. Then the call
				<code class="code"><span class="hl-variable">c</span>.<span class="hl-site">get</span>()</code> is made in <em class="replaceable"><code>F</code></em>. As we have discussed, this call (1) may receive
				a response, in which case true will be published, and the entire
				expression halts, (2) the call receives an indication that there will
				be no response (in case <code class="code"><span class="hl-variable">c</span></code> is empty and it is closed) in which case
				<code class="code"><span class="hl-variable">x</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">c</span>.<span class="hl-site">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span></code>
				halts silently, causing false to be published, or (3) the
				call remains blocked forever, causing <em class="replaceable"><code>F</code></em> to remain blocked.
			</p></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.concepts.states.examples.otherwise_link'), 'ref.concepts.states.examples.otherwise_content'); }, 125);
</script></div><div class="section" title="8.3.7.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.states.links"></a>8.3.7.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.expressions" title="Chapter&nbsp;2.&nbsp;Expressions">Expressions</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">Site and Function Calls</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.stop" title="2.3.&nbsp;stop"><code class="code"><span class="hl-keyword">stop</span></code></a></p></li><li class="listitem"><p><a class="link" href="#ref.combinators" title="Chapter&nbsp;3.&nbsp;Combinators">Combinators</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.helpful" title="8.5.&nbsp;Helpful Sites">Helpful Sites</a></p></li></ul></div></div></div><div class="section" title="8.4.&nbsp;Deflation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.concepts.deflate"></a>8.4.&nbsp;Deflation</h2></div></div></div><div class="section" title="8.4.1.&nbsp;Definition"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.deflate.definition"></a>8.4.1.&nbsp;Definition</h3></div></div></div><p>
			Deflation is an execution mechanism which extracts a single value from an expression that
			might <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a> many values, so that such an expression can be executed in a context that expects
			at most one value.
			</p><p>
			A expression <em class="replaceable"><code>E</code></em> is <a name="N12E07" class="indexterm"></a><em class="firstterm">deflated</em> to a value <em class="replaceable"><code>v</code></em> in a context
			<em class="replaceable"><code>C</code></em> by rewriting</p><p><em class="replaceable"><code>C</code></em>{<em class="replaceable"><code>E</code></em>}</p><p>to</p><p><a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator"><em class="replaceable"><code>C</code></em>{<code class="code"><em class="replaceable"><code>x</code></em></code>}<code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>x</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>E</code></em></a></p><p>When <em class="replaceable"><code>E</code></em> publishes a value <em class="replaceable"><code>v</code></em>, 
			that value is bound to <code class="code"><span class="hl-variable">x</span></code> and used in the context <em class="replaceable"><code>C</code></em>, and <em class="replaceable"><code>E</code></em> is <a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">killed</a>.</p><p>The context <em class="replaceable"><code>C</code></em> may contain multiple expressions to be deflated,
			so this transformation may be applied multiple times. For example, the expression</p><p><code class="code">(</code><em class="replaceable"><code>E</code></em><code class="code">, </code><em class="replaceable"><code>F</code></em><code class="code">, </code><em class="replaceable"><code>G</code></em><code class="code">)</code></p><p>rewrites to</p><p>
			  <code class="code">(<span class="hl-variable">x</span>, <span class="hl-variable">y</span>, <span class="hl-variable">z</span>)</code>
			  <code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>x</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>E</code></em>
			  <code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>y</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>F</code></em>
			  <code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>z</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code><em class="replaceable"><code>G</code></em>
			</p><p>
			  If any deflated expression <a name="N12E7D" class="indexterm"></a><a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>, then the enclosing expression also halts silently. 
			  In the example above, if <em class="replaceable"><code>F</code></em> halted silently, then the expression
			  <code class="code">(</code><em class="replaceable"><code>E</code></em><code class="code">, </code><em class="replaceable"><code>F</code></em><code class="code">, </code><em class="replaceable"><code>G</code></em><code class="code">)</code>
			  would also halt silently. 
			</p><p>
			  However, there is one exception to this rule: if <em class="replaceable"><code>C</code></em> is a <a class="link" href="#ref.expressions.call.function" title="2.4.3.&nbsp;Function Calls">function call</a>
			  it does not halt, since function evaluation is lenient.
			</p><p>
		    Notice that each deflated expression is evaluated concurrently, due to the behavior of the
		    <a name="N12EA5" class="indexterm"></a>pruning combinator. This is what makes Orc a functional concurrent language: when an expression is
		    evaluated recursively, all such evaluations take place simultaneously. 
		  </p></div><div class="section" title="8.4.2.&nbsp;Examples"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.deflate.examples"></a>8.4.2.&nbsp;Examples</h3></div></div></div><div class="example"><div class="exampleHeading"><a class="showHideToggle" href="javascript: void(0);" title="show/hide" id="ref.concepts.deflate.examples.search_link" onclick="toggle(this, 'ref.concepts.deflate.examples.search_content')">
					&minus;
				</a><span class="exampleCaption">Search Comparison</span></div><div class="exampleBody" id="ref.concepts.deflate.examples.search_content"><pre class="orc">
<span class="hl-keyword">include</span> <span class="hl-literal">"search.inc"</span>

<span class="hl-comment">{- 
  Return search results from two major search engines in the form of a record.
  Each search has a timeout; if the search engine does not respond by the timeout,
  the result is instead "no result".  
-}</span>

{. 
  <span class="hl-variable">google</span> <span class="hl-operator">=</span> <span class="hl-site">Google</span>(<span class="hl-literal">"Jack Burton"</span>) <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">5000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"no result"</span>,
  <span class="hl-variable">yahoo</span> <span class="hl-operator">=</span> <span class="hl-site">Yahoo</span>(<span class="hl-literal">"Jack Burton"</span>) <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">7000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"no result"</span>
.}
</pre></div></div><noscript><p>"WARNING: This example requires Javascript to be rendered correctly. Please enable it in your browser."</p></noscript><script type="text/javascript">
setTimeout(function() { toggle(document.getElementById('ref.concepts.deflate.examples.search_link'), 'ref.concepts.deflate.examples.search_content'); }, 125);
</script></div><div class="section" title="8.4.3.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.deflate.links"></a>8.4.3.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator">Pruning Combinator</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publication</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">Silence</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">Killing</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">Site and Function Calls</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">Operators</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">Tuples</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">Lists</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">Records</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.idioms.forkjoin" class="olink">Fork-join</a></p></li></ul></div></div></div><div class="section" title="8.5.&nbsp;Helpful Sites"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.concepts.helpful"></a>8.5.&nbsp;Helpful Sites</h2></div></div></div><a name="N12EFA" class="indexterm"></a><a name="N12EFD" class="indexterm"></a><p>
		A <a name="N12F02" class="indexterm"></a><em class="firstterm">helpful site</em> responds with an indication that it will never <a name="N12F09" class="indexterm"></a><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a>,
		when it knows this outcome for a call. 
	</p><p>
		All library sites in Orc are helpful. Thus, <a class="link" href="#ref.stdlib.core.Ift"><code class="code"><span class="hl-variable">Ift</span></code></a> is a helpful site, and
		<code class="code"><span class="hl-site">Ift</span>(<span class="hl-literal">false</span>)</code> sends an indication to the caller that it will never
		publish. A <a class="link" href="#ref.stdlib.state.Channel"><code class="code"><span class="hl-variable">Channel</span></code></a> is a helpful site, and some of its methods will send
		an indication that they will never publish. In particular, the <code class="code"><span class="hl-variable">get</span></code>
		method is blocked on an empty channel, but it sends an indication it
		will never publish if the channel is closed.
	</p><p>
		The indication from a helpful site that it will never publish causes the call to <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a>.
		This can be exploited by the caller by using the <a class="link" href="#ref.combinators.otherwise" title="3.4.&nbsp;Otherwise Combinator">otherwise combinator</a>.
	</p><p>
		We do not expect arbitrary services to be helpful. 
	</p><div class="section" title="8.5.1.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.helpful.links"></a>8.5.1.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.combinators.otherwise" title="3.4.&nbsp;Otherwise Combinator">Otherwise Combinator</a></p></li><li class="listitem"><p><a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">Halting</a></p></li><li class="listitem"><p><a class="link" href="#ref.stdlib" title="Chapter&nbsp;11.&nbsp;Standard Library">Standard Library</a></p></li></ul></div></div></div><div class="section" title="8.6.&nbsp;Approximation in Orc Implementation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.concepts.approximation"></a>8.6.&nbsp;Approximation in Orc Implementation</h2></div></div></div><p>
			This reference manual describes the ideal behavior of Orc programs. In
			particular, it assumes unbounded memory, an arbitrary amount of
			concurrent processing power, and any level of speed of computation
			demanded by the program. Therefore, we have not treated aspects such
			as floating point overflow, overhead for platform-level thread creation,
			nor the exact speeds of computation. 
		</p><p>
		For example, the program
		</p><p>
		</p><pre class="programlisting">
 <span class="hl-keyword">val</span> <span class="hl-variable">z</span> <span class="hl-operator">=</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span> <span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">3</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">false</span>
</pre><p>
		</p><p>
			is ideally expected to bind value <code class="code"><span class="hl-literal">true</span></code> to <code class="code"><span class="hl-variable">z</span></code>. In practice, we can only
			make a best effort to implement the ideal behavior of <a class="link" href="#ref.time.real.rwait" title="7.1.1.&nbsp;Rwait"><code class="code"><span class="hl-variable">Rwait</span></code></a>. Given that
			<code class="code"><span class="hl-site">Rwait</span>(<span class="hl-literal">2</span>)</code> and <code class="code"><span class="hl-site">Rwait</span>(<span class="hl-literal">3</span>)</code> are very close in real time, an actual
			implementation may indeed assign false to <code class="code"><span class="hl-variable">z</span></code>. The programmer should be
			aware of such limitations, and program around them.
		</p><div class="section" title="8.6.1.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.concepts.approximation.links"></a>8.6.1.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.time.real" title="7.1.&nbsp;Real Time"><code class="code"><span class="hl-variable">Rwait</span></code></a></p></li><li class="listitem"><p><a class="link" href="#ref.data.numeric" title="1.2.&nbsp;Numerics">Numerics</a></p></li></ul></div></div></div></div><div lang="" class="chapter" title="Chapter&nbsp;9.&nbsp;Type System"><div class="titlepage"><div><div><h2 class="title"><a name="ref.types"></a>Chapter&nbsp;9.&nbsp;Type System</h2></div></div></div><p>
The Orc language is
dynamically typed. If an operation occurs at runtime which is not type correct, 
that operation <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a>
<a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>, and reports an error on the console. 
</p><p>
Orc also has an optional static typechecker, which will guarantee that a program is
free of type errors before the program is run. For every expression in the program,
the typechecker tries to find the types of values that the expression could <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a>, 
and then checks that all such types are consistent. The typechecker performs a limited form of
<a class="link" href="#ref.types.metatheory" title="9.1.&nbsp;Metatheory">type inference</a>, so it can discover many of these types automatically.
However, the programmer must provide <a class="link" href="#ref.types.typeinfo" title="9.4.&nbsp;Adding Type Information">additional type information</a> for function definitions
and for a few other specific cases.
</p><p>
The typechecker is disabled by default, though typed syntax is still permitted (and types are still
checked for syntax errors) even when the typechecker is not used. It may be enabled as a project
property in the Eclipse plugin, or by using the <code class="code"><span class="hl-comment">--typecheck</span></code> switch on the command line. 
</p><p>
If the typechecker can verify that a program is correctly typed, it will display the message
</p><p>
<code class="code">Program type checks as </code><em class="replaceable"><code>T</code></em>
</p><p>
This means that the program has no type errors, and that every value published by the program will be of type <em class="replaceable"><code>T</code></em>.
</p><div class="section" title="9.1.&nbsp;Metatheory"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.types.metatheory"></a>9.1.&nbsp;Metatheory</h2></div></div></div><a name="N12FBE" class="indexterm"></a><p><a name="ref.types.metatheory.origin"></a>
		The typechecker uses the <a name="N12FC4" class="indexterm"></a><em class="firstterm">local type inference</em> algorithm described by Pierce and Turner in the paper 
		<a class="link" href="http://www.cis.upenn.edu/~bcpierce/papers/lti-toplas.pdf" target="_top">Local Type Inference</a>.
		The typechecker extends this algorithm with <a class="link" href="#ref.types.polymorphism" title="9.2.&nbsp;Parametric Polymorphism">polymorphic</a> type operators (e.g. <code class="code"><span class="hl-variable">List</span></code> or
		<code class="code"><span class="hl-variable">Channel</span></code>), forming a second-order type system. 
		It also includes polymorphic user-defined <a class="link" href="#ref.declarations.type.datatype" title="4.6.4.&nbsp;Datatype">datatypes</a> and a typing procedure for <a class="link" href="#ref.expressions.call.type" title="2.4.5.&nbsp;Type">site calls</a>.
		</p><p><a name="ref.types.metatheory.polymorphisms"></a>
		The typechecker supports both generics and <a class="link" href="#ref.types.subtyping" title="9.3.&nbsp;Subtyping">subtyping</a>, though it does not currently implement <span class="emphasis"><em>bounded polymorphism</em></span>, which combines the two.
		Sites may also be overloaded (<a name="N12FEB" class="indexterm"></a><em class="firstterm">ad-hoc polymorphism</em>), but the programmer cannot
		write overloaded functions within Orc itself.  
		</p><p><a name="ref.types.metatheory.erasure"></a>
		The Orc type system currently uses an <a name="N12FF5" class="indexterm"></a><em class="firstterm">erasure</em> semantics, 
		meaning that <a class="link" href="#ref.types.typeinfo" title="9.4.&nbsp;Adding Type Information">type information</a>
		does not affect runtime behavior, and may be removed from a program after typechecking is finished. In the
		case of <a class="link" href="#ref.declarations.type.datatype" title="4.6.4.&nbsp;Datatype">datatype declarations</a>, the type information and 
		constructor bindings are separated by the compiler, so that datatypes may be used in an untyped setting.
		</p><div class="section" title="9.1.1.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.metatheory.links"></a>9.1.1.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.types.polymorphism" title="9.2.&nbsp;Parametric Polymorphism">Parametric Polymorphism</a></p></li><li class="listitem"><p><a class="link" href="#ref.types.subtyping" title="9.3.&nbsp;Subtyping">Subtyping</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.type.datatype" title="4.6.4.&nbsp;Datatype">Datatype Declaration</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.typecheck" class="olink">Type Checking</a></p></li></ul></div></div></div><div class="section" title="9.2.&nbsp;Parametric Polymorphism"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.types.polymorphism"></a>9.2.&nbsp;Parametric Polymorphism</h2></div></div></div><p>
	The Orc type system supports <a name="N1302D" class="indexterm"></a><em class="firstterm">parametric polymorphism</em>: functions,
	sites, and types may accept type parameters. This is the same theory that 
	underlies Java's generics.
	</p><p>
	Parametric polymorphism occurs in three contexts: the <a class="link" href="#ref.declarations.type" title="4.6.&nbsp;type: Declare Type">declaration</a> of a parametric type, the <a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function">definition</a> of a
	polymorphic function, or a <a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">call</a> to a polymorphic function or site.
	</p><div class="section" title="9.2.1.&nbsp;Parametric types"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.polymorphism.types"></a>9.2.1.&nbsp;Parametric types</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[50]</td><td width="10%" valign="top" align="right"><a href="#ebnf.type.application"><a class="link" href="#ref.types.polymorphism.types" title="9.2.1.&nbsp;Parametric types">TypeApplication</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.type">Type</a> <a href="#ebnf.typearguments">TypeArguments</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p><p>
			Orc has a special form of type, called a <a name="N13050" class="indexterm"></a><em class="firstterm">type application</em>, which
			applies a type operator to a sequence of type arguments. This permits the instantiation
			of multiple variations of the same type. The simplest example of this feature is the
			<a class="link" href="#ref.data.list.type" title="1.5.4.&nbsp;Type"><code class="code"><span class="hl-variable">List</span></code></a> type operator. For example, the list value <code class="code">[<span class="hl-literal">1</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>]</code> has the type <code class="code"><span class="hl-site">List</span>[<span class="hl-variable">Integer</span>]</code>,
			whereas the list value <code class="code">[<span class="hl-literal">true</span>, <span class="hl-literal">false</span>]</code> has the type <code class="code"><span class="hl-site">List</span>[<span class="hl-variable">Boolean</span>]</code>. 
		</p><p>
			Lists are not the only parametric type. The <a class="link" href="#ref.stdlib" title="Chapter&nbsp;11.&nbsp;Standard Library">standard library</a> includes other parametric types, such as
			<code class="code"><span class="hl-variable">Option</span></code>, <a class="link" href="#ref.stdlib.state.Channel"><code class="code"><span class="hl-variable">Channel</span></code></a>, and <a class="link" href="#ref.stdlib.state.Cell"><code class="code"><span class="hl-variable">Cell</span></code></a>. 
			A <a class="link" href="#ref.declarations.type.alias" title="4.6.2.&nbsp;Type Alias">type alias</a> may have type parameters, thus defining a parametric type. 
			Similarly, a <a class="link" href="#ref.declarations.type.datatype" title="4.6.4.&nbsp;Datatype">datatype declaration</a> may also have type parameters.
		</p></div><div class="section" title="9.2.2.&nbsp;Parametric functions"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.polymorphism.functions"></a>9.2.2.&nbsp;Parametric functions</h3></div></div></div><p>
			A function may be polymorphic, taking one or more type parameters. Such functions can be
			operate generically over different types.
			Consider the following definition of the <code class="code"><span class="hl-variable">append</span></code> function, which appends two lists:
			
			</p><pre class="programlisting">
<span class="hl-keyword">def</span> <span class="hl-site">append</span>[<span class="hl-variable">T</span>](<span class="hl-site">List</span>[<span class="hl-variable">T</span>], <span class="hl-site">List</span>[<span class="hl-variable">T</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">T</span>]
<span class="hl-keyword">def</span> <span class="hl-site">append</span>([], <span class="hl-variable">l</span>) <span class="hl-operator">=</span> <span class="hl-variable">l</span>
<span class="hl-keyword">def</span> <span class="hl-site">append</span>(<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-operator">:</span><span class="hl-variable">t</span>, <span class="hl-variable">l</span>) <span class="hl-operator">=</span> <span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-operator">:</span><span class="hl-site">append</span>(<span class="hl-variable">t</span>,<span class="hl-variable">l</span>)
</pre><p>
			
			The function <code class="code"><span class="hl-variable">append</span></code> has a type parameter <em class="replaceable"><code>T</code></em> in its signature. 
			The type <em class="replaceable"><code>T</code></em> is the type of the elements in the lists being appended.
			Notice that both argument lists must contain the same type of elements. 
			The resulting list contains elements of that same type.
		</p></div><div class="section" title="9.2.3.&nbsp;Polymorphic calls"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.polymorphism.calls"></a>9.2.3.&nbsp;Polymorphic calls</h3></div></div></div><p>
			When calling the <code class="code"><span class="hl-variable">append</span></code> function, in addition to providing its normal arguments, we must
			also provide its type argument:
			
			</p><pre class="programlisting">
<span class="hl-site">append</span>[<span class="hl-variable">Integer</span>]([<span class="hl-literal">1</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>], [<span class="hl-literal">4</span>,<span class="hl-literal">5</span>])
</pre><p>
			
			However, it would be very burdensome and verbose to provide type arguments to all such calls. Fortunately,
			in most cases, the type checker can infer the correct type arguments, in the same way that it infers
			the correct type for many expressions without any additional information. So in this case, we can
			simply write:
			
			</p><pre class="programlisting">
<span class="hl-site">append</span>([<span class="hl-literal">1</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>], [<span class="hl-literal">4</span>,<span class="hl-literal">5</span>])
</pre><p>
			
			and the typechecker infers that the parameter <em class="replaceable"><code>T</code></em> is <code class="code"><span class="hl-variable">Integer</span></code>, since both argument lists are
			of type <code class="code"><span class="hl-site">List</span>[<span class="hl-variable">Integer</span>]</code>. For a more thorough explanation of how this inference occurs, please
			refer to <a class="link" href="#ref.types.metatheory.origin">the typing algorithm</a> on which the Orc typechecker is based.
			</p><p>
			Inference of type arguments will always fail on certain kinds of calls, because the typechecker does
			not have enough information to infer the correct type. The most common case is a site call which
			constructs a parametric type without taking any arguments. For example, the call <code class="code"><span class="hl-site">Channel</span>()</code>
			will never typecheck, since there is no way for the typechecker to know what type of elements the
			channel should contain. In other languages such as ML, the typechecker might be able to infer this information
			from the rest of the program, but Orc's typechecker is based on <span class="emphasis"><em>local</em></span> type inference,
			which must find the information locally, such as from the types of the arguments. So, to construct
			a channel that will contain <a class="link" href="#ref.data.numeric.type" title="1.2.4.&nbsp;Type">numbers</a>, a type argument must be given: <code class="code"><span class="hl-site">Channel</span>[<span class="hl-variable">Number</span>]()</code>.		
			</p></div><div class="section" title="9.2.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.polymorphism.links"></a>9.2.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.types.metatheory" title="9.1.&nbsp;Metatheory">Type System Metatheory</a></p></li><li class="listitem"><p><a class="link" href="#ref.types.subtyping.variance" title="9.3.5.&nbsp;Variance">Variance</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">Site and Function Calls</a></p></li><li class="listitem"><p><a class="link" href="#ref.types.typeinfo.function" title="9.4.2.&nbsp;Function Type Information">Adding Type Information to Functions</a></p></li><li class="listitem"><p><a class="link" href="#ref.declarations.type.datatype" title="4.6.4.&nbsp;Datatype">Datatype Declaration</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.typecheck" class="olink">Type Checking</a></p></li></ul></div></div></div><div class="section" title="9.3.&nbsp;Subtyping"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.types.subtyping"></a>9.3.&nbsp;Subtyping</h2></div></div></div><p>
	A type <em class="replaceable"><code>S</code></em> is a <a name="N130FD" class="indexterm"></a><em class="firstterm">subtype</em> of a type <em class="replaceable"><code>T</code></em>, written <em class="replaceable"><code>S</code></em> <a name="N1310A" class="indexterm"></a>&le; <em class="replaceable"><code>T</code></em>,
	if a value of type <em class="replaceable"><code>S</code></em> can be used in any context expecting a value of type <em class="replaceable"><code>T</code></em>.
	</p><p>
	A type <em class="replaceable"><code>U</code></em> is a <a name="N1311D" class="indexterm"></a><em class="firstterm">supertype</em> of a type <em class="replaceable"><code>T</code></em> if <em class="replaceable"><code>T</code></em> &le; <em class="replaceable"><code>U</code></em>.
	</p><p>
	Subtyping is reflexive: <em class="replaceable"><code>S</code></em> &le; <em class="replaceable"><code>S</code></em>. Subtyping is also
	transitive: if <em class="replaceable"><code>S</code></em> &le; <em class="replaceable"><code>T</code></em> and <em class="replaceable"><code>T</code></em> &le; <em class="replaceable"><code>U</code></em>,
	then <em class="replaceable"><code>S</code></em> &le; <em class="replaceable"><code>U</code></em>.  
	</p><p>
	If an expression has type <em class="replaceable"><code>S</code></em>, and <em class="replaceable"><code>S</code></em> &le; <em class="replaceable"><code>T</code></em>,
	then that expression also has type <em class="replaceable"><code>T</code></em>. This is called <em class="firstterm">subsumption</em>.
	</p><p>
		Types in Orc form a bounded lattice. The lattice is ordered by the subtyping relation,
		its maximal element is the special type <code class="code"><a name="N1315B" class="indexterm"></a><span class="hl-variable">Top</span></code>, and its minimal element is 
		the special type <code class="code"><span class="hl-variable">Bot</span></code>.
  </p><div class="section" title="9.3.1.&nbsp;Top"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.subtyping.top"></a>9.3.1.&nbsp;Top</h3></div></div></div><a name="N13167" class="indexterm"></a><p>
			<code class="code"><span class="hl-variable">Top</span></code> is the universal type. 
			Every value has type <code class="code"><span class="hl-variable">Top</span></code>.
			Every type is a subtype of <code class="code"><span class="hl-variable">Top</span></code>.
		</p></div><div class="section" title="9.3.2.&nbsp;Bot"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.subtyping.Bot"></a>9.3.2.&nbsp;Bot</h3></div></div></div><a name="N13179" class="indexterm"></a><p>
		<code class="code"><span class="hl-variable">Bot</span></code> is the empty type. 
		No value has type <code class="code"><span class="hl-variable">Bot</span></code>. 
		<code class="code"><span class="hl-variable">Bot</span></code> is a subtype of every type.
		An expression has type <code class="code"><span class="hl-variable">Bot</span></code> only if it is <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silent</a>. 
		</p><p>
		<code class="code"><span class="hl-variable">Bot</span></code> has an interesting status in Orc. In other typed languages, if an expression
		has type <code class="code"><span class="hl-variable">Bot</span></code>, this usually indicates a guaranteed error, infinite loop, or other failure
		to return a value. Since sequential programming rarely involves subexpressions that are guaranteed
		never to return, <code class="code"><span class="hl-variable">Bot</span></code> is usually just a curiosity or a formal artifact of the type system,
		and indeed many type systems do not have a <code class="code"><span class="hl-variable">Bot</span></code> type at all.
		</p><p> 
		In Orc, however, <code class="code"><span class="hl-variable">Bot</span></code> is very useful, since it is frequently the case that Orc expressions 
		are written to carry out ongoing concurrent activities but never <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a> any values, and the type system 
		can use the type <code class="code"><span class="hl-variable">Bot</span></code> to indicate that no publications will ever be seen from such
		expressions.
		</p></div><div class="section" title="9.3.3.&nbsp;Join"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.subtyping.join"></a>9.3.3.&nbsp;Join</h3></div></div></div><p>
		  A <a name="N131AE" class="indexterm"></a><em class="firstterm">common supertype</em> of two types <em class="replaceable"><code>S</code></em> and <em class="replaceable"><code>T</code></em> is any type <em class="replaceable"><code>U</code></em> such that 
		<em class="replaceable"><code>S</code></em> &le; <em class="replaceable"><code>U</code></em> and <em class="replaceable"><code>T</code></em> &le; <em class="replaceable"><code>U</code></em>. 
		The <a name="N131CA" class="indexterm"></a><em class="firstterm">join</em> of <em class="replaceable"><code>S</code></em> and <em class="replaceable"><code>T</code></em> is the <span class="emphasis"><em>least</em></span> common 
		supertype of <em class="replaceable"><code>S</code></em> and <em class="replaceable"><code>T</code></em>: it is a subtype of every common supertype of <em class="replaceable"><code>S</code></em> and <em class="replaceable"><code>T</code></em>.
		</p><p>
		  Some common cases:
		  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		  The join of <em class="replaceable"><code>T</code></em> and <em class="replaceable"><code>T</code></em> is <em class="replaceable"><code>T</code></em>.
		  </p></li><li class="listitem"><p>
		  If <em class="replaceable"><code>S</code></em> &le; <em class="replaceable"><code>T</code></em>, then the join of <em class="replaceable"><code>S</code></em> and <em class="replaceable"><code>T</code></em> is <em class="replaceable"><code>T</code></em>.
		  </p></li><li class="listitem"><p>
		  The join of <em class="replaceable"><code>T</code></em> and <code class="code"><span class="hl-variable">Top</span></code> is <code class="code"><span class="hl-variable">Top</span></code>.
		  </p></li><li class="listitem"><p>
		  The join of <em class="replaceable"><code>T</code></em> and <code class="code"><span class="hl-variable">Bot</span></code> is <em class="replaceable"><code>T</code></em>.
		  </p></li></ul></div><p>
		  The join of two unrelated types is usually <code class="code"><span class="hl-variable">Top</span></code>.
		</p></div><div class="section" title="9.3.4.&nbsp;Meet"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.subtyping.meet"></a>9.3.4.&nbsp;Meet</h3></div></div></div><p>
		  A <a name="N13229" class="indexterm"></a><em class="firstterm">common subtype</em> of two types <em class="replaceable"><code>S</code></em> and <em class="replaceable"><code>T</code></em> is any type <em class="replaceable"><code>U</code></em> such that 
		<em class="replaceable"><code>U</code></em> &le; <em class="replaceable"><code>S</code></em> and <em class="replaceable"><code>U</code></em> &le; <em class="replaceable"><code>T</code></em>. 
		The <a name="N13245" class="indexterm"></a><em class="firstterm">meet</em> of <em class="replaceable"><code>S</code></em> and <em class="replaceable"><code>T</code></em> is the <span class="emphasis"><em>greatest</em></span> common 
		subtype of <em class="replaceable"><code>S</code></em> and <em class="replaceable"><code>T</code></em>: it is a supertype of every common subtype of <em class="replaceable"><code>S</code></em> and <em class="replaceable"><code>T</code></em>.
		</p><p>
		  Some common cases:
		  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		  The meet of <em class="replaceable"><code>T</code></em> and <em class="replaceable"><code>T</code></em> is <em class="replaceable"><code>T</code></em>.
		  </p></li><li class="listitem"><p>
		  If <em class="replaceable"><code>S</code></em> &le; <em class="replaceable"><code>T</code></em>, then the meet of <em class="replaceable"><code>S</code></em> and <em class="replaceable"><code>T</code></em> is <em class="replaceable"><code>S</code></em>.
		  </p></li><li class="listitem"><p>
		  The meet of <em class="replaceable"><code>T</code></em> and <code class="code"><span class="hl-variable">Top</span></code> is <em class="replaceable"><code>T</code></em>.
		  </p></li><li class="listitem"><p>
		  The meet of <em class="replaceable"><code>T</code></em> and <code class="code"><span class="hl-variable">Bot</span></code> is <code class="code"><span class="hl-variable">Bot</span></code>.
		  </p></li></ul></div><p>
		  The meet of two unrelated types is usually <code class="code"><span class="hl-variable">Bot</span></code>.
		</p></div><div class="section" title="9.3.5.&nbsp;Variance"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.subtyping.variance"></a>9.3.5.&nbsp;Variance</h3></div></div></div><p>
		When types contain other types as components, such as a tuple type or a polymorphic type, the
		subtype relationship between these composite types depends on the subtype relationships between
		their components. Suppose we have a composite type of the form <em class="replaceable"><code>C</code></em>{<em class="replaceable"><code>T</code></em>},
		where <em class="replaceable"><code>T</code></em> is a type and <em class="replaceable"><code>C</code></em> is the context in
		which it appears. The <a name="N132B0" class="indexterm"></a><em class="firstterm">variance</em>
	  of the context <em class="replaceable"><code>C</code></em> is defined in the standard way:
		
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		<em class="replaceable"><code>C</code></em> is <a name="N132C1" class="indexterm"></a><em class="firstterm">covariant</em> if <em class="replaceable"><code>S</code></em> &le; <em class="replaceable"><code>T</code></em> implies that <em class="replaceable"><code>C</code></em>{<em class="replaceable"><code>S</code></em>} &le; <em class="replaceable"><code>C</code></em>{<em class="replaceable"><code>T</code></em>}
		</p></li><li class="listitem"><p>
		<em class="replaceable"><code>C</code></em> is <a name="N132E0" class="indexterm"></a><em class="firstterm">contravariant</em> if <em class="replaceable"><code>S</code></em> &le; <em class="replaceable"><code>T</code></em> implies that <em class="replaceable"><code>C</code></em>{<em class="replaceable"><code>T</code></em>} &le; <em class="replaceable"><code>C</code></em>{<em class="replaceable"><code>S</code></em>}
		</p></li><li class="listitem"><p>
		<em class="replaceable"><code>C</code></em> is <a name="N132FF" class="indexterm"></a><em class="firstterm">invariant</em> if <em class="replaceable"><code>S</code></em> = <em class="replaceable"><code>T</code></em> implies that <em class="replaceable"><code>C</code></em>{<em class="replaceable"><code>S</code></em>} = <em class="replaceable"><code>C</code></em>{<em class="replaceable"><code>T</code></em>}.
		</p></li></ul></div><p>
		
		</p><p>
		<a class="link" href="#ref.data.tuple.type" title="1.6.4.&nbsp;Type">Tuple types</a>, <a class="link" href="#ref.data.record.type" title="1.7.5.&nbsp;Type">record types</a>, and <a class="link" href="#ref.data.list.type" title="1.5.4.&nbsp;Type">list types</a> are all covariant contexts. 
		In a <a class="link" href="#ref.data.closure.type" title="1.9.1.&nbsp;Type">function type</a>, the return type is a covariant context, but the argument types are contravariant contexts.
		The type parameters of <a class="link" href="#ref.data.mutable" title="1.10.&nbsp;Mutable State">mutable object</a> types are invariant contexts.
		</p><p>
		The variance of the type parameters in an <a class="link" href="#ref.declarations.type.alias" title="4.6.2.&nbsp;Type Alias">aliased type</a> or <a class="link" href="#ref.data.datatype.type" title="1.8.3.&nbsp;Type">datatype</a> is determined from the declaration itself, by observing the contexts in which the parameters appear. 
		If a parameter appears only in covariant contexts, it is covariant. 
		If it appears only in contravariant contexts, it is contravariant. 
		If it appears in both contexts, it is invariant.
		</p></div><div class="section" title="9.3.6.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.subtyping.links"></a>9.3.6.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.types.metatheory" title="9.1.&nbsp;Metatheory">Type System Metatheory</a></p></li></ul></div></div></div><div class="section" title="9.4.&nbsp;Adding Type Information"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.types.typeinfo"></a>9.4.&nbsp;Adding Type Information</h2></div></div></div><a name="N1334E" class="indexterm"></a><p>
	The Orc typechecker uses a <a class="link" href="#ref.types.metatheory.origin">type inference algorithm</a> to deduce
	type information from a program without any help from the programmer. In many contexts, the typechecker can
	find all of the type information it needs; however, there are some cases where extra information is needed.
	For this purpose, there are four kinds of <a name="N13357" class="indexterm"></a>
	type information that may be added to an Orc program.
	</p><p>
	Note that due to the <a class="link" href="#ref.types.metatheory.erasure">erasure</a> property of the Orc type system,
	adding type information will never change the runtime behavior of the program.
	</p><div class="section" title="9.4.1.&nbsp;Explicit Type Arguments"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.typeinfo.explicitargs"></a>9.4.1.&nbsp;Explicit Type Arguments</h3></div></div></div><p>
		Type information may be added to a <a class="link" href="#ref.types.polymorphism.calls" title="9.2.3.&nbsp;Polymorphic calls">polymorphic</a> <a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">site or function call</a>
		by providing explicit type arguments. The typechecker can usually infer type arguments, 
		but there are certain cases where it does not have enough information, such as when 
		calling polymorphic factory sites like <a class="link" href="#ref.stdlib.state.Channel"><code class="code"><span class="hl-variable">Channel</span></code></a> or <a class="link" href="#ref.stdlib.state.Ref"><code class="code"><span class="hl-variable">Ref</span></code></a>.
	</p></div><div class="section" title="9.4.2.&nbsp;Function Type Information"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.typeinfo.function"></a>9.4.2.&nbsp;Function Type Information</h3></div></div></div><p>
		Whenever a <a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function">function is defined</a>,
		in order for the typechecker to determine its type, 
		the definition must be accompanied by information about the argument types and return type
		of the function. If the function is polymorphic, the names of its type parameters must also be given.
		This is the same information that a <a class="link" href="#ref.data.closure.type" title="1.9.1.&nbsp;Type">function type</a> carries.
		There are multiple ways to provide this information, and some of it can be inferred under certain conditions.
  </p><p>
	  The most comprehensive way to provide type information about a function is through a <a name="N1338A" class="indexterm"></a><em class="firstterm">signature</em>.
		A signature precedes a function definition, providing a sequence of type parameters, a sequence of argument types,
		and a return type.
	</p><p>
	  </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[25]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.signature"><a class="link" href="#ref.types.typeinfo.function" title="9.4.2.&nbsp;Function Type Information">DeclareSignature</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">def</span></code> <a href="#ebnf.variable">Variable</a> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.argumenttypes">ArgumentTypes</a> <a href="#ebnf.returntype">ReturnType</a> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[22]</td><td width="10%" valign="top" align="right"><a href="#ebnf.declaration.def"><a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function">DeclareDefinition</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">def</span></code> <a href="#ebnf.variable">Variable</a> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.parameters">Parameters</a> <a href="#ebnf.returntype">ReturnType</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.guard">Guard</a><span class="bold"><strong>?</strong></span> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.expression">Expression</a> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	</p><p>
	  Type information may also be written directly into a <a class="link" href="#ref.declarations.def.clauses" title="4.2.6.&nbsp;Clausal Definition">clause</a> of a function definition. 
	  For example, the following definitions are equivalent:

</p><pre class="programlisting">
<span class="hl-comment">{- Adding type information using a signature -}</span>
<span class="hl-keyword">def</span> <span class="hl-site">min</span>(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>
<span class="hl-keyword">def</span> <span class="hl-site">min</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>) <span class="hl-operator">=</span> <span class="hl-keyword">if</span> (<span class="hl-variable">x</span> <span class="hl-operator">&lt;:</span> <span class="hl-variable">y</span>) <span class="hl-keyword">then</span> <span class="hl-variable">x</span> <span class="hl-keyword">else</span> <span class="hl-variable">y</span>

<span class="hl-comment">{- Inline type information -}</span>
<span class="hl-keyword">def</span> <span class="hl-site">min</span>(<span class="hl-variable">x</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>, <span class="hl-variable">y</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span> <span class="hl-operator">=</span> <span class="hl-keyword">if</span> (<span class="hl-variable">x</span> <span class="hl-operator">&lt;:</span> <span class="hl-variable">y</span>) <span class="hl-keyword">then</span> <span class="hl-variable">x</span> <span class="hl-keyword">else</span> <span class="hl-variable">y</span>
</pre><p>

	</p><p>
	  If the function is not recursive, then the inline return type is optional, because the typechecker 
	  can infer the return type from the body expression.
	</p><p>
	  When writing a <a class="link" href="#ref.expressions.lambda" title="2.8.&nbsp;lambda"><code class="code"><span class="hl-keyword">lambda</span></code> expression</a>, type information
	  must be included in this way, since there is no way to write a separate signature. The return type 
	  is not needed, since a <code class="code"><span class="hl-keyword">lambda</span></code> will never be recursive. The parameter types are required and cannot
	  be inferred, except in one context: when a <code class="code"><span class="hl-keyword">lambda</span></code> expression appears as an argument to a call which
	  requires no other inference, then the argument types can be inferred from the type of the target.  
	</p></div><div class="section" title="9.4.3.&nbsp;Pattern Type Information"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.typeinfo.pattern"></a>9.4.3.&nbsp;Pattern Type Information</h3></div></div></div><p>
	</p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[45]</td><td width="10%" valign="top" align="right"><a href="#ebnf.pattern.withtypeinfo"><a class="link" href="#ref.types.typeinfo.pattern" title="9.4.3.&nbsp;Pattern Type Information">PatternWithTypeInformation</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.pattern">Pattern</a> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <a href="#ebnf.type">Type</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	</p><p>
	A <a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">pattern</a> may specify the type of values against which it may be matched. The typechecker can
	then verify this stated type, rather than attempting to infer it, which may provide enough type information to
	make other inferences possible or resolve ambiguities. Furthermore, adding extra type information makes it easier 
	to pinpoint the source of a typechecking failure. Note that this type information has no effect on
	the runtime match behavior of the pattern.
	</p></div><div class="section" title="9.4.4.&nbsp;Expression Type Information"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.typeinfo.expression"></a>9.4.4.&nbsp;Expression Type Information</h3></div></div></div><p>
		 </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[18]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.withtypeinfo"><a class="link" href="#ref.types.typeinfo.expression" title="9.4.4.&nbsp;Expression Type Information">WithTypeInformation</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <a href="#ebnf.type">Type</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
   </p><p>
		 An expression may specify the type of values that it will <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a>. The typechecker can
		 then verify this stated type, rather than attempting to infer it, which may provide enough type information to
		 make other inferences possible or resolve ambiguities. For example, the typechecker may not be able to infer the 
		 correct <a class="link" href="#ref.types.subtyping.join" title="9.3.3.&nbsp;Join">join</a> type for a <a class="link" href="#ref.combinators.parallel" title="3.1.&nbsp;Parallel Combinator">parallel combinator</a>,
		 but it is always able to check that both branches are <a class="link" href="#ref.types.subtyping" title="9.3.&nbsp;Subtyping">subtypes</a> of an already provided type. 
		 Furthermore, adding extra type information makes it easier to pinpoint the source of a typechecking failure.
	 </p></div><div class="section" title="9.4.5.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.typeinfo.links"></a>9.4.5.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function"><code class="code"><span class="hl-keyword">def</span></code>:  Define Function</a></p></li><li class="listitem"><p><a class="link" href="#ref.expressions.lambda" title="2.8.&nbsp;lambda"><code class="code"><span class="hl-keyword">lambda</span></code> Expressions</a></p></li><li class="listitem"><p><a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">Patterns</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.typecheck.moreinfo" class="olink">Adding Type Information</a></p></li></ul></div></div></div><div class="section" title="9.5.&nbsp;Type Override"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.types.override"></a>9.5.&nbsp;Type Override</h2></div></div></div><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[19]</td><td width="10%" valign="top" align="right"><a href="#ebnf.expression.typeoverride"><a class="link" href="#ref.types.override" title="9.5.&nbsp;Type Override">TypeOverride</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-operator">:</span>!<span class="hl-operator">:</span></code> <a href="#ebnf.type">Type</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
While the typechecker can be helpful, it will not accept programs that are not typesafe according to
its <a class="link" href="#ref.types.metatheory" title="9.1.&nbsp;Metatheory">algorithm</a>. This can be burdensome when the programmer knows that an expression will have a
certain type but the typechecker cannot verify it.
</p><p>
Since the typechecker is optional, it can always be turned off in these cases. But this is often
too drastic a solution: typechecking difficulties often arise from small segments of a much larger
program, and the rest of the program still benefits from typechecking. 
</p><p>
The typechecker may be selectively disabled for parts of a program. For this purpose,
the typechecker allows an <a name="N13420" class="indexterm"></a><em class="firstterm">override</em>
of the type of an expression. Overriding is like <a class="link" href="#ref.types.typeinfo" title="9.4.&nbsp;Adding Type Information">adding type information</a> to an expression, 
but rather than verifying that an expression has the stated type, the typechecker instead 
assumes that the stated type is correct, without examining the expression at all. Thus, 
the programmer can supply any type without being restricted by the typechecking algorithm.
</p><p>
This feature should be used sparingly, with the knowledge that it does compromise the integrity
of the typechecking algorithm. If the supplied type is wrong, runtime type errors could propagate to any
part of the program that depends on that type. Overrides are useful for rapid prototyping, but
they are not recommended for production code.
</p><div class="section" title="9.5.1.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.override.links"></a>9.5.1.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.types.typeinfo" title="9.4.&nbsp;Adding Type Information">Adding Type Information</a></p></li><li class="listitem"><p><a class="link" href="#ref.types.metatheory" title="9.1.&nbsp;Metatheory">Metatheory</a></p></li></ul></div></div></div><div class="section" title="9.6.&nbsp;Typing Contexts"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.types.context"></a>9.6.&nbsp;Typing Contexts</h2></div></div></div><p>
  Whenever one or more variables is bound, the type checker records information from that
  binding to typecheck the uses of that variable in its scope. This information is stored
  in a <a name="N13448" class="indexterm"></a><em class="firstterm">typing context</em>, 
  which is just a sequence of variable names and their types. 
  When an expression is in the scope of many bindings, the
  typechecker will carry a composite context of all of the typing contexts created by all
  of those bindings. 
  </p><p>
  <a class="link" href="#ref.declarations" title="Chapter&nbsp;4.&nbsp;Declarations">Declarations</a>, <a class="link" href="#ref.combinators" title="Chapter&nbsp;3.&nbsp;Combinators">combinators</a>, and <a class="link" href="#ref.expressions.call.function" title="2.4.3.&nbsp;Function Calls">function calls</a> all bind variables. 
  Often, only a single variable is bound, so only one binding is generated. 
  However, <a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">pattern matching</a> may generate an entire set of variable bindings.
  </p><p>
  When a variable is typechecked, its type is found by first looking in the most recent 
  context (i.e. from the nearest binding), and if its type is not found there, proceeding
  further and further out in scope. If the variable is not in the typing context, then it
  is a free variable, which is a syntactic error.
  </p><div class="section" title="9.6.1.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.context.links"></a>9.6.1.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">Patterns</a></p></li></ul></div></div></div></div><div lang="" class="chapter" title="Chapter&nbsp;10.&nbsp;Syntax"><div class="titlepage"><div><div><h2 class="title"><a name="ref.syntax"></a>Chapter&nbsp;10.&nbsp;Syntax</h2></div></div></div><p>These sections explain the Orc syntax and keywords.</p><div class="section" title="10.1.&nbsp;EBNF Grammar"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.syntax.EBNF"></a>10.1.&nbsp;EBNF Grammar</h2></div></div></div><p>
			The Orc language grammar is expressed in Extended Backus-Naur Form (EBNF), with the following meta-notation:
		</p><p><a name="ebnf.meta.questionmark"></a>
		G<span class="bold"><strong>?</strong></span> denotes zero or one occurrences of G. 
		</p><p><a name="ebnf.meta.plus"></a>
		G<span class="bold"><strong>+</strong></span> denotes one or more occurrences of G. 
		</p><p><a name="ebnf.meta.ellipsis"></a>
		G <span class="emphasis"><em>sep</em></span> <span class="bold"><strong><span class="bold"><strong>&hellip;</strong></span></strong></span> <span class="emphasis"><em>sep</em></span> G denotes zero or more occurrences of G, separated by <span class="emphasis"><em>sep</em></span>.
		</p><p>
		</p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[1]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression"></a><a class="link" href="#ref.expressions" title="Chapter&nbsp;2.&nbsp;Expressions">Expression</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
			  <a href="#ebnf.literal">Literal</a>
				<br>&#10073; <a href="#ebnf.variable">Variable</a>
				<br>&#10073; <a href="#ebnf.expression.stop">Stop</a>
				<br>&#10073; <a href="#ebnf.expression.tuple">Tuple</a>
				<br>&#10073; <a href="#ebnf.expression.list">List</a>		    
				<br>&#10073; <a href="#ebnf.expression.record">Record</a>
				<br>&#10073; <a href="#ebnf.expression.call">Call</a>
				<br>&#10073; <a href="#ebnf.expression.dot">DotAccess</a>
				<br>&#10073; <a href="#ebnf.expression.prefixoperation">PrefixOperation</a>
				<br>&#10073; <a href="#ebnf.expression.infixoperation">InfixOperation</a>
				<br>&#10073; <a href="#ebnf.expression.infixoperation">PostfixOperation</a>
				<br>&#10073; <a href="#ebnf.expression.parallel">Parallel</a>
				<br>&#10073; <a href="#ebnf.expression.sequential">Sequence</a>		    
				<br>&#10073; <a href="#ebnf.expression.pruning">Prune</a>
				<br>&#10073; <a href="#ebnf.expression.otherwise">Otherwise</a>
				<br>&#10073; <a href="#ebnf.expression.conditional">Conditional</a>
				<br>&#10073; <a href="#ebnf.expression.lambda">Lambda</a>
				<br>&#10073; <a href="#ebnf.expression.withdeclaration">WithDeclaration</a>
				<br>&#10073; <a href="#ebnf.expression.withtypeinfo">WithTypeInformation</a>
				<br>&#10073; <a href="#ebnf.expression.typeoverride">TypeOverride</a>
				<br>&#10073; <code class="code">(</code> <a href="#ebnf.expression">Expression</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[2]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.stop"></a><a class="link" href="#ref.expressions.stop" title="2.3.&nbsp;stop">Stop</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">stop</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[3]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.tuple"></a><a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">Tuple</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">(</code> <a href="#ebnf.expression">Expression</a>  <code class="code">,</code> <span class="bold"><strong><span class="bold"><strong>&hellip;</strong></span></strong></span> <code class="code">,</code> <a href="#ebnf.expression">Expression</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">[&nbsp;<a href="#tuplesize">Tuple Size &ge; 2</a>&nbsp;]</td></tr><tr><td width="3%" valign="top" align="left">[4]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.list"></a><a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">List</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">[</code> <a href="#ebnf.expression">Expression</a>  <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.expression">Expression</a> <code class="code">]</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[5]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.record"></a><a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">Record</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">{.</code> <a href="#ebnf.key">Key</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.expression">Expression</a>  <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code>  <a href="#ebnf.key">Key</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.expression">Expression</a> <code class="code">.}</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[6]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.call"></a><a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">Call</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <a href="#ebnf.typearguments">TypeArguments</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.arguments">Arguments</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[7]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.dot"></a><a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">DotAccess</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a><code class="code">.</code><a href="#ebnf.key">Key</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[8]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.prefixoperation"></a><a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">PrefixOperation</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">PrefixOperator</a> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[9]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.infixoperation"></a><a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">InfixOperation</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">InfixOperator</a> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[10]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.postfixoperation"></a><a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">PostfixOperation</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <a class="link" href="#ref.syntax.precedence" title="10.3.&nbsp;Precedence, Fixity, and Associativity">PostfixOperator</a> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[11]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.parallel"></a><a class="link" href="#ref.combinators.parallel" title="3.1.&nbsp;Parallel Combinator">Parallel</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-combinator">|</span></code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[12]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.sequential"></a><a class="link" href="#ref.combinators.sequential" title="3.2.&nbsp;Sequential Combinator">Sequence</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code">&gt;</code><a href="#ebnf.pattern">Pattern</a><span class="bold"><strong>?</strong></span><code class="code">&gt;</code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[13]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.pruning"></a><a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator">Prune</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code">&lt;</code><a href="#ebnf.pattern">Pattern</a><span class="bold"><strong>?</strong></span><code class="code">&lt;</code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[14]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.otherwise"></a><a class="link" href="#ref.combinators.otherwise" title="3.4.&nbsp;Otherwise Combinator">Otherwise</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-combinator">;</span></code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[15]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.conditional"></a><a class="link" href="#ref.expressions.ifthenelse" title="2.7.&nbsp;if then else">Conditional</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">if</span></code> <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-keyword">then</span></code> <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-keyword">else</span></code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[16]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.lambda"></a><a class="link" href="#ref.expressions.lambda" title="2.8.&nbsp;lambda">Lambda</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">lambda</span></code> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.parameters">Parameters</a> <a href="#ebnf.returntype">ReturnType</a><span class="bold"><strong>?</strong></span> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[17]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.withdeclaration"></a><a class="link" href="#ref.declarations" title="Chapter&nbsp;4.&nbsp;Declarations">WithDeclaration</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.declaration">Declaration</a> <a href="#ebnf.expression">Expression</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[18]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.withtypeinfo"></a><a class="link" href="#ref.types.typeinfo.expression" title="9.4.4.&nbsp;Expression Type Information">WithTypeInformation</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <a href="#ebnf.type">Type</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[19]</td><td width="10%" valign="top" align="right"><a name="ebnf.expression.typeoverride"></a><a class="link" href="#ref.types.override" title="9.5.&nbsp;Type Override">TypeOverride</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.expression">Expression</a> <code class="code"><span class="hl-operator">:</span>!<span class="hl-operator">:</span></code> <a href="#ebnf.type">Type</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[20]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration"></a><a class="link" href="#ref.declarations" title="Chapter&nbsp;4.&nbsp;Declarations">Declaration</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.declaration.val">DeclareVal</a>
				<br>&#10073; <a href="#ebnf.declaration.def">DeclareDefinition</a>
				<br>&#10073; <a href="#ebnf.declaration.defclass">DeclareDefclass</a>
				<br>&#10073; <a href="#ebnf.declaration.signature">DeclareSignature</a>
			  <br>&#10073; <a href="#ebnf.declaration.site">DeclareSite</a>
				<br>&#10073; <a href="#ebnf.declaration.class">DeclareClass</a>
				<br>&#10073; <a href="#ebnf.declaration.include">DeclareInclude</a>
				<br>&#10073; <a href="#ebnf.declaration.type">DeclareType</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[21]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration.val"></a><a class="link" href="#ref.declarations.val" title="4.1.&nbsp;val: Bind Value">DeclareVal</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">val</span></code> <a href="#ebnf.pattern">Pattern</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.expression">Expression</a> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[22]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration.def"></a><a class="link" href="#ref.declarations.def" title="4.2.&nbsp;def: Define Function">DeclareDefinition</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">def</span></code> <a href="#ebnf.variable">Variable</a> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.parameters">Parameters</a> <a href="#ebnf.returntype">ReturnType</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.guard">Guard</a><span class="bold"><strong>?</strong></span> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.expression">Expression</a> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[23]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration.defclass"></a><a class="link" href="#ref.declarations.defclass" title="4.3.&nbsp;def class: Define Site in Orc">DeclareDefclass</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">class</span></code> <a href="#ebnf.variable">Variable</a> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.parameters">Parameters</a> <a href="#ebnf.returntype">ReturnType</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.guard">Guard</a><span class="bold"><strong>?</strong></span> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.declaration">Declaration</a><span class="bold"><strong>+</strong></span> <a href="#ebnf.expression">Expression</a> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[24]</td><td width="10%" valign="top" align="right"><a name="ebnf.guard"></a><a class="link" href="#ref.declarations.def.guard" title="4.2.5.&nbsp;Guards">Guard</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">if</span></code> <code class="code">(</code> <a href="#ebnf.expression">Expression</a> <code class="code">)</code> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[25]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration.signature"></a><a class="link" href="#ref.types.typeinfo.function" title="9.4.2.&nbsp;Function Type Information">DeclareSignature</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">def</span></code> <a href="#ebnf.variable">Variable</a> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.argumenttypes">ArgumentTypes</a> <a href="#ebnf.returntype">ReturnType</a> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[26]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration.site"></a><a class="link" href="#ref.declarations.site" title="4.4.&nbsp;import site: Import Site">DeclareSite</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">site</span></code> <a href="#ebnf.variable">Variable</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.classname">ClassName</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[27]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration.class"></a><a class="link" href="#ref.declarations.class" title="4.5.&nbsp;import class: Import Class from Java">DeclareClass</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code> <a href="#ebnf.variable">Variable</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.classname">ClassName</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[28]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration.include"></a><a class="link" href="#ref.declarations.include" title="4.7.&nbsp;include: Include Orc File">DeclareInclude</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">include</span></code> <a href="#ebnf.filename">FileName</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[29]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration.type"></a><a class="link" href="#ref.declarations.type" title="4.6.&nbsp;type: Declare Type">DeclareType</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.declaration.type.alias">DeclareTypeAlias</a>
				<br>&#10073; <a href="#ebnf.declaration.type.import">DeclareTypeImport</a>
				<br>&#10073; <a href="#ebnf.declaration.type.datatype">DeclareDatatype</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[30]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration.type.alias"></a><a class="link" href="#ref.declarations.type.alias" title="4.6.2.&nbsp;Type Alias">DeclareTypeAlias</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">type</span></code> <a href="#ebnf.typevariable">TypeVariable</a> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.type">Type</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[31]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration.type.import"></a><a class="link" href="#ref.declarations.type.import" title="4.6.3.&nbsp;Type Import">DeclareTypeImport</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">import</span> <span class="hl-keyword">type</span></code> <a href="#ebnf.typevariable">TypeVariable</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.classname">ClassName</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[32]</td><td width="10%" valign="top" align="right"><a name="ebnf.declaration.type.datatype"></a><a class="link" href="#ref.declarations.type.datatype" title="4.6.4.&nbsp;Datatype">DeclareDatatype</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">type</span></code> <a href="#ebnf.typevariable">TypeVariable</a> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.constructor">Constructor</a> <code class="code"><span class="hl-combinator">|</span></code> <span class="bold"><strong>&hellip;</strong></span> <code class="code"><span class="hl-combinator">|</span></code> <a href="#ebnf.constructor">Constructor</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[33]</td><td width="10%" valign="top" align="right"><a name="ebnf.constructor"></a><a class="link" href="#ref.data.datatype.constructors" title="1.8.2.&nbsp;Constructors">Constructor</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		     <a href="#ebnf.variable">Variable</a> <code class="code">(</code> <a href="#ebnf.slot">Slot</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.slot">Slot</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[34]</td><td width="10%" valign="top" align="right"><a name="ebnf.slot"></a><a class="link" href="#ref.data.datatype" title="1.8.&nbsp;Algebraic Data Types">Slot</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.type">Type</a>
		    &#10073; <code class="code"><span class="hl-variable">_</span></code> 
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[35]</td><td width="10%" valign="top" align="right"><a name="ebnf.pattern"></a><a class="link" href="#ref.patterns" title="Chapter&nbsp;5.&nbsp;Patterns">Pattern</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.pattern.wildcard">WildcardPattern</a>
				<br>&#10073; <a href="#ebnf.pattern.literal">LiteralPattern</a>		    
				<br>&#10073; <a href="#ebnf.pattern.variable">VariablePattern</a>
				<br>&#10073; <a href="#ebnf.pattern.tuple">TuplePattern</a>
				<br>&#10073; <a href="#ebnf.pattern.list">ListPattern</a>
				<br>&#10073; <a href="#ebnf.pattern.record">RecordPattern</a>
				<br>&#10073; <a href="#ebnf.pattern.cons">ConsPattern</a>
				<br>&#10073; <a href="#ebnf.pattern.call">CallPattern</a>
				<br>&#10073; <a href="#ebnf.pattern.as">AsPattern</a>
				<br>&#10073; <a href="#ebnf.pattern.withtypeinfo">PatternWithTypeInformation</a>
				<br>&#10073; <code class="code">(</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[36]</td><td width="10%" valign="top" align="right"><a name="ebnf.pattern.wildcard"></a><a class="link" href="#ref.patterns.wildcard" title="5.9.&nbsp;Wildcard Pattern">WildcardPattern</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-variable">_</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[37]</td><td width="10%" valign="top" align="right"><a name="ebnf.pattern.literal"></a><a class="link" href="#ref.patterns.literal" title="5.1.&nbsp;Literal Pattern">LiteralPattern</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.literal">Literal</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[38]</td><td width="10%" valign="top" align="right"><a name="ebnf.pattern.variable"></a><a class="link" href="#ref.patterns.variable" title="5.2.&nbsp;Variable Pattern">VariablePattern</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.variable">Variable</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[39]</td><td width="10%" valign="top" align="right"><a name="ebnf.pattern.tuple"></a><a class="link" href="#ref.patterns.tuple" title="5.3.&nbsp;Tuple Pattern">TuplePattern</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">(</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">[&nbsp;<a href="#tuplesize">Tuple Size &ge; 2</a>&nbsp;]</td></tr><tr><td width="3%" valign="top" align="left">[40]</td><td width="10%" valign="top" align="right"><a name="ebnf.pattern.list"></a><a class="link" href="#ref.patterns.list" title="5.4.&nbsp;List Pattern">ListPattern</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">[</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">]</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[41]</td><td width="10%" valign="top" align="right"><a name="ebnf.pattern.record"></a><a class="link" href="#ref.patterns.record" title="5.5.&nbsp;Record Pattern">RecordPattern</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">{.</code> <a href="#ebnf.key">Key</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.pattern">Pattern</a>  <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code>  <a href="#ebnf.key">Key</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.pattern">Pattern</a> <code class="code">.}</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[42]</td><td width="10%" valign="top" align="right"><a name="ebnf.pattern.cons"></a><a class="link" href="#ref.patterns.cons" title="5.7.&nbsp;Cons Pattern">ConsPattern</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.pattern">Pattern</a> <code class="code"><span class="hl-operator">:</span></code> <a href="#ebnf.pattern">Pattern</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[43]</td><td width="10%" valign="top" align="right"><a name="ebnf.pattern.call"></a><a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">CallPattern</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.variable">Variable</a> <code class="code">(</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[44]</td><td width="10%" valign="top" align="right"><a name="ebnf.pattern.as"></a><a class="link" href="#ref.patterns.as" title="5.8.&nbsp;As Pattern">AsPattern</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.pattern">Pattern</a> <code class="code"><span class="hl-keyword">as</span></code> <a href="#ebnf.variable">Variable</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[45]</td><td width="10%" valign="top" align="right"><a name="ebnf.pattern.withtypeinfo"></a><a class="link" href="#ref.types.typeinfo.pattern" title="9.4.3.&nbsp;Pattern Type Information">PatternWithTypeInformation</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.pattern">Pattern</a> <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <a href="#ebnf.type">Type</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[46]</td><td width="10%" valign="top" align="right"><a name="ebnf.type"></a>Type</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.typevariable">TypeVariable</a>
				<br>&#10073; <a href="#ebnf.type.tuple">TupleType</a>
				<br>&#10073; <a href="#ebnf.type.record">RecordType</a>
				<br>&#10073; <a href="#ebnf.type.function">FunctionType</a>
				<br>&#10073; <a href="#ebnf.type.application">TypeApplication</a>
				<br>&#10073; <code class="code">(</code> <a href="#ebnf.type">Type</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[47]</td><td width="10%" valign="top" align="right"><a name="ebnf.type.tuple"></a><a class="link" href="#ref.data.tuple.type" title="1.6.4.&nbsp;Type">TupleType</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">(</code> <a href="#ebnf.type">Type</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.type">Type</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">[&nbsp;<a href="#tuplesize">Tuple Size &ge; 2</a>&nbsp;]</td></tr><tr><td width="3%" valign="top" align="left">[48]</td><td width="10%" valign="top" align="right"><a name="ebnf.type.record"></a><a class="link" href="#ref.data.record.type" title="1.7.5.&nbsp;Type">RecordType</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">{.</code> <a href="#ebnf.key">Key</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.type">Type</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code>  <a href="#ebnf.key">Key</a> <code class="code"><span class="hl-operator">=</span></code> <a href="#ebnf.type">Type</a> <code class="code">.}</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[49]</td><td width="10%" valign="top" align="right"><a name="ebnf.type.function"></a><a class="link" href="#ref.data.closure.type" title="1.9.1.&nbsp;Type">FunctionType</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-keyword">lambda</span></code> <a href="#ebnf.typeparameters">TypeParameters</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.argumenttypes">ArgumentTypes</a> <a href="#ebnf.returntype">ReturnType</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[50]</td><td width="10%" valign="top" align="right"><a name="ebnf.type.application"></a><a class="link" href="#ref.types.polymorphism.types" title="9.2.1.&nbsp;Parametric types">TypeApplication</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.type">Type</a> <a href="#ebnf.typearguments">TypeArguments</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[51]</td><td width="10%" valign="top" align="right"><a name="ebnf.literal"></a>Literal</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<a href="#ebnf.literal.signal">SignalLiteral</a>
				<br>&#10073; <a href="#ebnf.literal.boolean">BooleanLiteral</a>
				<br>&#10073; <a href="#ebnf.literal.number">NumberLiteral</a>
				<br>&#10073; <a href="#ebnf.literal.string">CharacterStringLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-literal">null</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[52]</td><td width="10%" valign="top" align="right"><a name="ebnf.literal.signal"></a><a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">SignalLiteral</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<code class="code"><span class="hl-keyword">signal</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[53]</td><td width="10%" valign="top" align="right"><a name="ebnf.literal.boolean"></a><a class="link" href="#ref.data.boolean" title="1.1.&nbsp;Booleans">BooleanLiteral</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<code class="code"><span class="hl-literal">true</span></code> &#10073; <code class="code"><span class="hl-literal">false</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[54]</td><td width="10%" valign="top" align="right"><a name="ebnf.literal.integer"></a><a class="link" href="#ref.data.numeric.literals.syntax" title="1.2.1.1.&nbsp;Syntax">IntegerLiteral</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				DecimalDigit<span class="bold"><strong>+</strong></span>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[55]</td><td width="10%" valign="top" align="right"><a name="ebnf.literal.number"></a><a class="link" href="#ref.data.numeric.literals.syntax" title="1.2.1.1.&nbsp;Syntax">NumberLiteral</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<a href="#ebnf.literal.integer">IntegerLiteral</a> <a href="#ebnf.literal.decimalpart">DecimalPart</a><span class="bold"><strong>?</strong></span> <a href="#ebnf.literal.exponentpart">ExponentPart</a><span class="bold"><strong>?</strong></span>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[56]</td><td width="10%" valign="top" align="right"><a name="ebnf.literal.decimalpart"></a>DecimalPart</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<code class="code">.</code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[57]</td><td width="10%" valign="top" align="right"><a name="ebnf.literal.exponentpart"></a>ExponentPart</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				               <code class="code"><span class="hl-variable">E</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-variable">E</span><span class="hl-operator">+</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-variable">E</span><span class="hl-operator">-</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-variable">e</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-variable">e</span><span class="hl-operator">+</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
				<br>&#10073; <code class="code"><span class="hl-variable">e</span><span class="hl-operator">-</span></code> <a href="#ebnf.literal.integer">IntegerLiteral</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[58]</td><td width="10%" valign="top" align="right"><a name="ebnf.literal.string"></a><a class="link" href="#ref.data.string.literals.syntax" title="1.3.1.1.&nbsp;Syntax">CharacterStringLiteral</a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
				<code class="code"><span class="hl-literal">"</span></code>Character<span class="bold"><strong>+</strong></span><code class="code"><span class="hl-literal">"</span></code> &#10073; <code class="code"><span class="hl-literal">""</span></code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[59]</td><td width="10%" valign="top" align="right"><a name="ebnf.variable"></a>Variable</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a class="link" href="#ref.syntax.lexical.tokens.identifier" title="10.2.2.1.&nbsp;Identifier">Identifier</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[60]</td><td width="10%" valign="top" align="right"><a name="ebnf.typevariable"></a>TypeVariable</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a class="link" href="#ref.syntax.lexical.tokens.identifier" title="10.2.2.1.&nbsp;Identifier">Identifier</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[61]</td><td width="10%" valign="top" align="right"><a name="ebnf.key"></a>Key</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a class="link" href="#ref.syntax.lexical.tokens.identifier" title="10.2.2.1.&nbsp;Identifier">Identifier</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[62]</td><td width="10%" valign="top" align="right"><a name="ebnf.classname"></a>ClassName</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.literal.string">CharacterStringLiteral</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[63]</td><td width="10%" valign="top" align="right"><a name="ebnf.filename"></a>FileName</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="#ebnf.literal.string">CharacterStringLiteral</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[64]</td><td width="10%" valign="top" align="right"><a name="ebnf.parameters"></a>Parameters</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">(</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.pattern">Pattern</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[65]</td><td width="10%" valign="top" align="right"><a name="ebnf.typeparameters"></a>TypeParameters</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">[</code> <a href="#ebnf.typevariable">TypeVariable</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.typevariable">TypeVariable</a> <code class="code">]</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[66]</td><td width="10%" valign="top" align="right"><a name="ebnf.argumenttypes"></a>ArgumentTypes</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">(</code> <a href="#ebnf.type">Type</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.type">Type</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[67]</td><td width="10%" valign="top" align="right"><a name="ebnf.returntype"></a>ReturnType</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code"><span class="hl-operator">:</span><span class="hl-operator">:</span></code> <a href="#ebnf.type">Type</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[68]</td><td width="10%" valign="top" align="right"><a name="ebnf.arguments"></a>Arguments</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">(</code> <a href="#ebnf.expression">Expression</a>  <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.expression">Expression</a> <code class="code">)</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr><tr><td width="3%" valign="top" align="left">[69]</td><td width="10%" valign="top" align="right"><a name="ebnf.typearguments"></a>TypeArguments</td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <code class="code">[</code> <a href="#ebnf.type">Type</a> <code class="code">,</code> <span class="bold"><strong>&hellip;</strong></span> <code class="code">,</code> <a href="#ebnf.type">Type</a> <code class="code">]</code>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
		
		</p><div class="constraintdef"><a name="tuplesize"></a>
		<p><b>Tuple Size &ge; 2</b></p>
		<p>A tuple must contain at least two elements. No 0-tuples or 1-tuples are permitted.</p>
		</div><p>
		
		</p><div class="section" title="10.1.1.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.syntax.EBNF.links"></a>10.1.1.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.syntax.lexical" title="10.2.&nbsp;Lexical Specifications">Lexical Specifications</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.style" class="olink">Syntactic and Stylistic Conventions</a></p></li></ul></div></div></div><div class="section" title="10.2.&nbsp;Lexical Specifications"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.syntax.lexical"></a>10.2.&nbsp;Lexical Specifications</h2></div></div></div><p>
				This page specifies Orc's processing of an input byte stream into an Orc lexical token sequence. 
				This token sequence is the input to the Orc parsing procedure. 
			</p><div class="section" title="10.2.1.&nbsp;Input Byte Stream"><div class="titlepage"><div><div><h3 class="title"><a name="ref.syntax.lexical.inputstream"></a>10.2.1.&nbsp;Input Byte Stream</h3></div></div></div><p>
					Orc can read source code input byte streams from a number of types of sources. For example, Orc 2.0 running on Java SE 6 accepts input from local files, FTP, Gopher, HTTP, and JAR files.
					Orc source code input byte streams must encode a Unicode character sequence using the <a class="link" href="http://www.unicode.org/versions/Unicode5.2.0/ch03.pdf" target="_top">UTF-8</a> encoding form. No other encoding is supported. HTTP headers specifying other charsets are ignored. 
				</p></div><div class="section" title="10.2.2.&nbsp;Lexical Tokens"><div class="titlepage"><div><div><h3 class="title"><a name="ref.syntax.lexical.tokens"></a>10.2.2.&nbsp;Lexical Tokens</h3></div></div></div><p>
					Orc lexical scanning reads Unicode characters and emits corresponding Orc lexical tokens. 
					Orc uses seven lexical token types: identifier, keyword, operator, delimiter, integer literal, floating-point literal, string literal. Orc comments and whitespace are scanned as separators among other tokens and disregarded. 
				</p><div class="section" title="10.2.2.1.&nbsp;Identifier"><div class="titlepage"><div><div><h4 class="title"><a name="ref.syntax.lexical.tokens.identifier"></a>10.2.2.1.&nbsp;Identifier</h4></div></div></div><p>
						Orc scans identifiers per <a class="link" href="http://unicode.org/reports/tr31/" target="_top">Unicode Standard Annex #31, Unicode Identifier and Pattern Syntax</a>, namely: 
					</p><p>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Identifiers start with "Characters having the Unicode General_Category of uppercase letters (Lu), lowercase letters (Ll), titlecase letters (Lt), modifier letters (Lm), other letters (Lo), letter numbers (Nl)". </p></li><li class="listitem"><p>Identifiers can continue with "All of the above, plus characters having the Unicode General_Category of nonspacing marks (Mn), spacing combining marks (Mc), decimal number (Nd), connector punctuations (Pc)", plus Orc's addition of apostrophe as a "prime" mark. </p></li><li class="listitem"><p>All identifiers are normalized to Unicode Normalization Form C as they are parsed. </p></li></ul></div><p>
					</p><p>
						Examples of allowed Orc identifiers: orchestrate, iscenes&aelig;tte, &#949;&#957;&#959;&#961;&#967;&#951;&#963;&#964;&#961;&#974;&#957;&#969;, &#1575;&#1604;&#1575;&#1606;&#1587;&#1580;&#1575;&#1605;, &#32232;&#25490;, &#32244;&#12426;&#19978;&#12370;&#12427;, &#44288;&#54788;&#50501;&#51004;&#47196;_&#54200;&#44257;&#54616;&#45796;, &#1086;&#1088;&#1082;&#1077;&#1089;&#1090;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100;, &#2310;&#2352;&#2381;&#2325;&#2375;&#2360;&#2381;&#2335;&#2381;&#2352;&#2366;_&#2325;&#2352;&#2344;&#2366;.  
					</p><p>
						Also, mathematical letter-like characters are allowed, such as &#8484;, &#8463;, &alefsym;0, and, of course, Greek letters. 
					</p><p>
						Orc also treats an operator (defined below) placed in parenthesis, such as <code class="code">(<span class="hl-operator">+</span>)</code>, as an identifier with the name of the operator (without the parenthesis). 
					</p><p>
						An identifier cannot match a keyword; see the following section. 
					</p></div><div class="section" title="10.2.2.2.&nbsp;Keyword"><div class="titlepage"><div><div><h4 class="title"><a name="ref.syntax.lexical.tokens.keyword"></a>10.2.2.2.&nbsp;Keyword</h4></div></div></div><a name="N13D9B" class="indexterm"></a><p>
						Any token that otherwise follows the rules for identifiers, but matches an entry in the following list is not treated as an identifier, but as a keyword instead. 
					</p><p>
						<code class="code"><span class="hl-keyword">as</span> <span class="hl-keyword">def</span> <span class="hl-keyword">else</span> <span class="hl-keyword">if</span> <span class="hl-keyword">import</span> <span class="hl-keyword">include</span> <span class="hl-keyword">lambda</span> <span class="hl-keyword">signal</span> <span class="hl-keyword">stop</span> <span class="hl-keyword">then</span> <span class="hl-keyword">type</span> <span class="hl-keyword">val</span> <span class="hl-literal">true</span> <span class="hl-literal">false</span> <span class="hl-literal">null</span> <span class="hl-variable">_</span></code>
					</p><p>
						Note that <code class="code"><span class="hl-variable">_</span></code> is a special case: Identifiers cannot start with an underscore, but <code class="code"><span class="hl-variable">_</span></code> scans as a keyword nonetheless. 
					</p></div><div class="section" title="10.2.2.3.&nbsp;Operator"><div class="titlepage"><div><div><h4 class="title"><a name="ref.syntax.lexical.tokens.operator"></a>10.2.2.3.&nbsp;Operator</h4></div></div></div><p>
						An Orc <a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">operator</a> is a character sequence that matches one of the following. 
						This match is greedy &mdash; for example, ** is matched in preference to two * operators, if possible.) 
					</p><p>
						<code class="code"><span class="hl-operator">+</span> <span class="hl-operator">-</span> <span class="hl-operator">*</span> <span class="hl-operator">/</span> <span class="hl-operator">%</span> <span class="hl-operator">**</span> <span class="hl-operator">&amp;&amp;</span> <span class="hl-operator">||</span> <span class="hl-operator">~</span> &lt; &gt;  <span class="hl-operator">=</span> <span class="hl-operator">&lt;:</span> <span class="hl-operator">:&gt;</span> <span class="hl-operator">&lt;=</span> <span class="hl-operator">&gt;=</span> <span class="hl-operator">/</span><span class="hl-operator">=</span> <span class="hl-operator">:</span> . <span class="hl-operator">?</span> <span class="hl-operator">:=</span></code>
					</p></div><div class="section" title="10.2.2.4.&nbsp;Delimiters"><div class="titlepage"><div><div><h4 class="title"><a name="ref.syntax.lexical.tokens.delimiters"></a>10.2.2.4.&nbsp;Delimiters</h4></div></div></div><p>
						An Orc delimiter is a character sequence that matches one of the following.
					</p><p>
						<code class="code">( ) [ ] {. .} , <span class="hl-combinator">|</span> <span class="hl-combinator">;</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-operator">:</span>!<span class="hl-operator">:</span> </code>
					</p></div><div class="section" title="10.2.2.5.&nbsp;Literals"><div class="titlepage"><div><div><h4 class="title"><a name="ref.syntax.lexical.tokens.literals"></a>10.2.2.5.&nbsp;Literals</h4></div></div></div><p>
						<a class="link" href="#ref.data.numeric.literals.syntax" title="1.2.1.1.&nbsp;Syntax">Numeric literals</a> and <a class="link" href="#ref.data.string.literals.syntax" title="1.3.1.1.&nbsp;Syntax">character string literals</a> are
						recognized per the syntax given in those sections.
					</p></div><div class="section" title="10.2.2.6.&nbsp;Comments"><div class="titlepage"><div><div><h4 class="title"><a name="ref.syntax.lexical.tokens.comment"></a>10.2.2.6.&nbsp;Comments</h4></div></div></div><p>
						Orc <a name="N13DDC" class="indexterm"></a>comments take two forms: 
					</p><p>
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="code"><span class="hl-comment">--to end of the line (see newlines, below)</span></code></p></li><li class="listitem"><p><code class="code"><span class="hl-comment">{-  multi-line comment body  -}</span></code></p></li></ol></div><p>
					</p><p>
						A multi-line comment body is any character sequence (possibly empty), where  {-  and  -}  have lexical significance. 
						Orc comments can be nested, so  {-  starts a nested multi-line comment, and -}  ends the current multi-line comment. 
					</p></div><div class="section" title="10.2.2.7.&nbsp;Whitespace"><div class="titlepage"><div><div><h4 class="title"><a name="ref.syntax.lexical.tokens.whitespace"></a>10.2.2.7.&nbsp;Whitespace</h4></div></div></div><p>
						Per <a class="link" href="http://unicode.org/reports/tr31/#Pattern_Syntax" target="_top">Unicode Standard Annex #31, section 4, recommendation R3</a>, Orc treats all Unicode Pattern_White_Space characters as whitespace. 
					</p><p>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>U+0009 HT Character Tabulation</p></li><li class="listitem"><p>U+000B VT Line Tabulation</p></li><li class="listitem"><p>U+0020 Space</p></li><li class="listitem"><p>U+200E Left-to-Right Mark</p></li><li class="listitem"><p>U+200F Right-to-Left Mark</p></li><li class="listitem"><p>And the six newline characters (below)</p></li></ul></div><p>
					</p></div><div class="section" title="10.2.2.8.&nbsp;Newlines"><div class="titlepage"><div><div><h4 class="title"><a name="ref.syntax.lexical.tokens.newline"></a>10.2.2.8.&nbsp;Newlines</h4></div></div></div><p>
						Orc follows the newline definition of <a class="link" href="http://unicode.org/versions/Unicode5.2.0/ch05.pdf" target="_top">Unicode standard section 5.8, Newline Guidelines, recommendation R4</a>. 
					</p><p>
						Namely, Orc stops reading a line when it encounters one of the following characters: 
					</p><p>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>U+000D CR Carriage Return</p></li><li class="listitem"><p>U+000A LF Line Feed</p></li><li class="listitem"><p>U+0085 NEL Next Line</p></li><li class="listitem"><p>U+2028 LS Line Separator</p></li><li class="listitem"><p>U+000C FF Form Feed</p></li><li class="listitem"><p>U+2029 PS Paragraph Separator</p></li></ul></div><p>
					</p></div></div><div class="section" title="10.2.3.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.syntax.lexical.links"></a>10.2.3.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.syntax.EBNF" title="10.1.&nbsp;EBNF Grammar">EBNF Grammar</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.numeric" title="1.2.&nbsp;Numerics">Numeric values</a></p></li><li class="listitem"><p><a class="link" href="#ref.data.string" title="1.3.&nbsp;Character Strings">Character Strings</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.style" class="olink">Syntactic and Stylistic Conventions</a></p></li></ul></div></div></div><div class="section" title="10.3.&nbsp;Precedence, Fixity, and Associativity"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.syntax.precedence"></a>10.3.&nbsp;Precedence, Fixity, and Associativity</h2></div></div></div><a name="N13E58" class="indexterm"></a><p>
<a name="N13E5D" class="indexterm"></a><em class="firstterm">Precedence</em> rules specify the order in which parts of an expression are parsed, in absence of parenthesis.
For example, in <code class="code"><span class="hl-literal">1</span> <span class="hl-operator">+</span> <span class="hl-literal">2</span> <span class="hl-operator">*</span> <span class="hl-literal">3</span></code>, Orc's precedence rules prescribe that the multiplication be parsed as a sub-expression of the addition.
<a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">Operators</a> or <a class="link" href="#ref.combinators" title="Chapter&nbsp;3.&nbsp;Combinators">combinators</a> listed in the table below with higher precedence will be parsed in preference to lower precedence operations or combinators.
</p><p>
<a name="N13E72" class="indexterm"></a><em class="firstterm">Fixity</em> specifies the relative position of an operator and it operands.
For example, <code class="code"><span class="hl-operator">+</span></code> is infix, so the <code class="code"><span class="hl-operator">+</span></code> operator is written in between its operands.
However, <code class="code"><span class="hl-operator">?</span></code> is postfix, so it is written after its operand.
</p><p>
<a name="N13E85" class="indexterm"></a><em class="firstterm">Associativity</em> specifies the grouping of a series of infix operator (or combinator) expressions, in absence of parenthesis.
For example, division is left associative, so <code class="code"><span class="hl-literal">40</span> <span class="hl-operator">/</span> <span class="hl-literal">4</span> <span class="hl-operator">/</span> <span class="hl-literal">2</span></code> is grouped as <code class="code">(<span class="hl-literal">40</span> <span class="hl-operator">/</span> <span class="hl-literal">4</span>) <span class="hl-operator">/</span> <span class="hl-literal">2</span></code> which is 5. It is not <code class="code"><span class="hl-literal">40</span> <span class="hl-operator">/</span> (<span class="hl-literal">4</span> <span class="hl-operator">/</span> <span class="hl-literal">2</span>)</code> = 20.
Similarly, the sequential combinator is right associative, so <code class="code"><span class="hl-variable">e</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">f</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">y</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">g</span></code> is equivalent to <code class="code"><span class="hl-variable">e</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> (<span class="hl-variable">f</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">y</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">g</span>)</code>.
</p><div class="table"><a name="N13E9C"></a><p class="title"><b>Table&nbsp;10.1.&nbsp;Orc Combinator/Operator Precedence, Fixity, and Associativity</b></p><div class="table-contents"><table summary="Orc Combinator/Operator Precedence, Fixity, and Associativity" border="1"><colgroup><col align="center"><col align="left"><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center"><span class="emphasis"><em>Precedence Level</em></span></th><th align="left"><span class="emphasis"><em>Name</em></span></th><th align="center"><span class="emphasis"><em>Symbol</em></span></th><th align="center"><span class="emphasis"><em>Fixity</em></span></th><th align="center"><span class="emphasis"><em>Associativity</em></span></th></tr></thead><tbody><tr><td rowspan="3" align="center">13</td><td align="left"><a class="link" href="#ref.expressions.call" title="2.4.&nbsp;Site and Function Calls">Call</a></td><td align="center"><code class="code"> () </code></td><td align="center">Postfix</td><td align="center">--</td></tr><tr><td align="left"><a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">Dot Access</a></td><td align="center"><code class="code"> . </code></td><td align="center">Postfix</td><td align="center">--</td></tr><tr><td align="left">Dereference</td><td align="center"><code class="code"> <span class="hl-operator">?</span> </code></td><td align="center">Postfix</td><td align="center">--</td></tr><tr><td rowspan="2" align="center">12</td><td align="left">Arithmetic Negation</td><td align="center"><code class="code"> <span class="hl-operator">-</span> </code></td><td align="center">Prefix</td><td align="center">--</td></tr><tr><td align="left">Negation (Logical Complement)</td><td align="center"><code class="code"> <span class="hl-operator">~</span> </code></td><td align="center">Prefix</td><td align="center">--</td></tr><tr><td align="center">11</td><td align="left">Exponentiation</td><td align="center"><code class="code"> <span class="hl-operator">**</span> </code></td><td align="center">Infix</td><td align="center">Right</td></tr><tr><td rowspan="3" align="center">10</td><td align="left">Multiplication</td><td align="center"><code class="code"> <span class="hl-operator">*</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td align="left">Division</td><td align="center"><code class="code"> <span class="hl-operator">/</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td align="left">Modulus</td><td align="center"><code class="code"> <span class="hl-operator">%</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td rowspan="2" align="center">9</td><td align="left">Addition/Concatenation</td><td align="center"><code class="code"> <span class="hl-operator">+</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td align="left">Subtraction</td><td align="center"><code class="code"> <span class="hl-operator">-</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td align="center">8</td><td align="left">List Construction</td><td align="center"><code class="code"> <span class="hl-operator">:</span> </code></td><td align="center">Infix</td><td align="center">Right</td></tr><tr><td rowspan="6" align="center">7</td><td align="left">Equal To</td><td align="center"><code class="code"> <span class="hl-operator">=</span> </code></td><td align="center">Infix</td><td align="center">None</td></tr><tr><td align="left">Not Equal To</td><td align="center"><code class="code"> <span class="hl-operator">/</span><span class="hl-operator">=</span> </code></td><td align="center">Infix</td><td align="center">None</td></tr><tr><td align="left">Less Than</td><td align="center"><code class="code"> <span class="hl-operator">&lt;:</span> </code></td><td align="center">Infix</td><td align="center">None</td></tr><tr><td align="left">Greater Than</td><td align="center"><code class="code"> <span class="hl-operator">:&gt;</span> </code></td><td align="center">Infix</td><td align="center">None</td></tr><tr><td align="left">Less Than or Equal To</td><td align="center"><code class="code"> <span class="hl-operator">&lt;=</span> </code></td><td align="center">Infix</td><td align="center">None</td></tr><tr><td align="left">Greater Than or Equal To</td><td align="center"><code class="code"> <span class="hl-operator">&gt;=</span> </code></td><td align="center">Infix</td><td align="center">None</td></tr><tr><td rowspan="2" align="center">6</td><td align="left">Logical OR</td><td align="center"><code class="code"> <span class="hl-operator">||</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td align="left">Logical AND</td><td align="center"><code class="code"> <span class="hl-operator">&amp;&amp;</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td align="center">5</td><td align="left">Assignment</td><td align="center"><code class="code"> <span class="hl-operator">:=</span> </code></td><td align="center">Infix</td><td align="center">None</td></tr><tr><td align="center">4</td><td align="left"><a class="link" href="#ref.combinators.sequential" title="3.2.&nbsp;Sequential Combinator">Sequential</a></td><td align="center"><code class="code"> <span class="hl-combinator">&gt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&gt;</span> </code></td><td align="center">Infix</td><td align="center">Right</td></tr><tr><td align="center">3</td><td align="left"><a class="link" href="#ref.combinators.parallel" title="3.1.&nbsp;Parallel Combinator">Parallel</a></td><td align="center"><code class="code"> <span class="hl-combinator">|</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td align="center">2</td><td align="left"><a class="link" href="#ref.combinators.pruning" title="3.3.&nbsp;Pruning Combinator">Pruning</a></td><td align="center"><code class="code"> <span class="hl-combinator">&lt;</span></code><em class="replaceable"><code>P</code></em><code class="code"><span class="hl-combinator">&lt;</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td align="center">1</td><td align="left"><a class="link" href="#ref.combinators.otherwise" title="3.4.&nbsp;Otherwise Combinator">Otherwise</a></td><td align="center"><code class="code"> <span class="hl-combinator">;</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td rowspan="5" align="center">0</td><td align="left"><a class="link" href="#ref.types.typeinfo" title="9.4.&nbsp;Adding Type Information">Type Information</a></td><td align="center"><code class="code"> <span class="hl-operator">:</span><span class="hl-operator">:</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td align="left"><a class="link" href="#ref.types.override" title="9.5.&nbsp;Type Override">Type Override</a></td><td align="center"><code class="code"> <span class="hl-operator">:</span>!<span class="hl-operator">:</span> </code></td><td align="center">Infix</td><td align="center">Left</td></tr><tr><td align="left"><a class="link" href="#ref.expressions.lambda" title="2.8.&nbsp;lambda">Closure</a></td><td align="center"><code class="code"><span class="hl-keyword">lambda</span></code></td><td align="center">Prefix</td><td align="center">--</td></tr><tr><td align="left"><a class="link" href="#ref.expressions.ifthenelse" title="2.7.&nbsp;if then else">Conditional</a></td><td align="center"><code class="code"><span class="hl-keyword">if</span> <span class="hl-keyword">then</span> <span class="hl-keyword">else</span></code></td><td align="center">Prefix</td><td align="center">--</td></tr><tr><td align="left"><a class="link" href="#ref.declarations" title="Chapter&nbsp;4.&nbsp;Declarations">Declaration</a></td><td align="center"><code class="code"><span class="hl-keyword">val</span>, <span class="hl-keyword">def</span>, <span class="hl-keyword">import</span>, <span class="hl-keyword">include</span>, <span class="hl-keyword">type</span></code></td><td align="center">Prefix</td><td align="center">--</td></tr></tbody></table></div></div><br class="table-break"><div class="section" title="10.3.1.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.syntax.precedence.links"></a>10.3.1.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">Operators</a></p></li><li class="listitem"><p><a class="link" href="#ref.combinators" title="Chapter&nbsp;3.&nbsp;Combinators">Combinators</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.introduction.simple.operators" class="olink">Operators</a></p></li></ul></div></div></div></div><div lang="" class="chapter" title="Chapter&nbsp;11.&nbsp;Standard Library"><div class="titlepage"><div><div><h2 class="title"><a name="ref.stdlib"></a>Chapter&nbsp;11.&nbsp;Standard Library</h2></div></div></div><div class="section" title="11.1.&nbsp;Introduction"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.stdlib.intro"></a>11.1.&nbsp;Introduction</h2></div></div></div><p>
     The standard library is a set of <a class="link" href="#ref.declarations" title="Chapter&nbsp;4.&nbsp;Declarations">declarations</a> implicitly available to all Orc
     programs.  In this section we give an informal description of the standard library,
     including the type of each declaration and a short explanation of its use.
     </p><p>
     Orc programs are expected to rely on the host language and environment for
     all but the most essential <a class="link" href="#ref.sites" title="Chapter&nbsp;6.&nbsp;Sites and Services">sites</a>.  For example, in the Java implementation of
     Orc, the entire Java standard library is available to Orc programs via
     <a class="link" href="#ref.declarations.class" title="4.5.&nbsp;import class: Import Class from Java"><code class="code"><span class="hl-keyword">import</span> <span class="hl-variable">class</span></code></a> declarations. Therefore the Orc standard library aims only
     to provide convenience for the most common Orc idioms, not the complete set of
     features needed for general-purpose programming.
     </p><p>
     The documentation of library functions uses special notation for types 
     that have <a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">dot-accessible members</a>.
     Member names of an instance of <code class="code"><span class="hl-variable">Type</span></code> are written in the form <code class="code"><span class="hl-keyword">type</span>.<span class="hl-variable">member</span></code>, 
     e.g.  <code class="code"><span class="hl-variable">foo</span>.<span class="hl-variable">get</span></code>
     refers to the <code class="code"><span class="hl-variable">get</span></code> member of an object of type <code class="code"><span class="hl-variable">Foo</span></code>.
     The object type can include <a class="link" href="#ref.types.polymorphism" title="9.2.&nbsp;Parametric Polymorphism">type parameters</a> which are referenced by the member
     type, so for example <code class="code">@<span class="hl-variable">method</span> <span class="hl-site">channel</span>[<span class="hl-variable">A</span>].<span class="hl-site">get</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code> means that
     when the <code class="code"><span class="hl-variable">get</span></code> method is called on a value of type <code class="code"><span class="hl-site">Channel</span>[<span class="hl-variable">A</span>]</code>,
     it will return a value of type <code class="code"><span class="hl-variable">A</span></code>.
     </p><p>
		The Standard Library makes use of colored tags to quickly convey properties 
		of library sites.  The tags and their definitions are as follows:
	 </p><p>
		</p><div class="variablelist" title="Site Property Set"><p class="title"><b>Site Property Set</b></p><dl><dt><span class="term"><table class="proptable"><tr><td bgcolor="#CC0000"><font color="#FFFFFF">Indefinite</font></td></tr></table></span></dt><dd><p>A <a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">call</a> to this site may <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a> execution of an expression, since it is not 
		            guaranteed to always eventually <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a> a value or <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a>.</p></dd><dt><span class="term"><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table></span></dt><dd><p>A call to this site will never block execution of an expression, since it is 
		            guaranteed to always eventually publish a value or halt.</p></dd><dt><span class="term"><table class="proptable"><tr><td bgcolor="#6600FF"><font color="#FFFFFF">Pure</font></td></tr></table></span></dt><dd><p>
		      Any call to this site is pure, meaning that it is deterministic, responds immediately, and has no side effects. 
		      A call to a pure site may be textually replaced with its return value 
		      (or replaced with <a class="link" href="#ref.expressions.stop" title="2.3.&nbsp;stop"><code class="code"><span class="hl-keyword">stop</span></code></a> if the call halts) in any program context.
		      </p></dd><dt><span class="term"><table class="proptable"><tr><td bgcolor="#0000CC"><font color="#FFFFFF">Idempotent</font></td></tr></table></span></dt><dd><p>The site is idempotent; calling it more than once on the same
		      		arguments is equivalent to calling it once on those arguments.</p></dd></dl></div><p>
	</p></div><div class="section" title="11.2.&nbsp;core: Fundamental sites and operators."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.stdlib.core"></a>11.2.&nbsp;core: Fundamental sites and operators.</h2></div></div></div><p>Fundamental sites and operators.
</p><p>These declarations include both prefix and infix sites (operators).  For
consistency, all declarations are written in prefix form, with the site name
followed by the operands.  When the site name is surrounded in parentheses, as
in <code class="code">(<span class="hl-operator">+</span>)</code>, it denotes an infix operator.
</p><p>For a more complete description of the built-in operators and their syntax, see
the <a class="link" href="#ref.expressions.operators" title="2.6.&nbsp;Operators">Operators</a> article.
</p><div class="section" title="11.2.1.&nbsp;Let"><div class="titlepage"><div><div><h3 class="title"><a name="N140F5"></a>11.2.1.&nbsp;<code class="code"><span class="hl-variable">Let</span></code></h3></div></div></div><a name="N140F9" class="indexterm"></a><p><a name="ref.stdlib.core.Let"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Let</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td><td bgcolor="#6600FF"><font color="#FFFFFF">Pure</font></td></tr></table><p>
</p><p>When called with no arguments, returns a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a>.
</p></div><div class="section" title="11.2.2.&nbsp;Let"><div class="titlepage"><div><div><h3 class="title"><a name="N14110"></a>11.2.2.&nbsp;<code class="code"><span class="hl-variable">Let</span></code></h3></div></div></div><a name="N14114" class="indexterm"></a><p><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Let</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>When called with a single argument, returns that argument (behaving as the identity function).
</p></div><div class="section" title="11.2.3.&nbsp;Let"><div class="titlepage"><div><div><h3 class="title"><a name="N1411C"></a>11.2.3.&nbsp;<code class="code"><span class="hl-variable">Let</span></code></h3></div></div></div><a name="N14120" class="indexterm"></a><p><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Let</span>(<span class="hl-variable">A</span>, ...) <span class="hl-operator">:</span><span class="hl-operator">:</span> (<span class="hl-variable">A</span>, ...)</code></p><p>When called with two or more arguments, returns the arguments as a <a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">tuple</a>.
</p></div><div class="section" title="11.2.4.&nbsp;Ift"><div class="titlepage"><div><div><h3 class="title"><a name="N1412C"></a>11.2.4.&nbsp;<code class="code"><span class="hl-variable">Ift</span></code></h3></div></div></div><a name="N14130" class="indexterm"></a><p><a name="ref.stdlib.core.Ift"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Ift</span>(<span class="hl-variable">Boolean</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td><td bgcolor="#6600FF"><font color="#FFFFFF">Pure</font></td></tr></table><p>
</p><p>Returns a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a> if the argument is true, otherwise <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: "Always publishes"</span>
  <span class="hl-site">Ift</span>(<span class="hl-literal">false</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Never publishes"</span>
<span class="hl-combinator">|</span> <span class="hl-site">Ift</span>(<span class="hl-literal">true</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Always publishes"</span></pre><p>
</p></div><div class="section" title="11.2.5.&nbsp;Iff"><div class="titlepage"><div><div><h3 class="title"><a name="N14155"></a>11.2.5.&nbsp;<code class="code"><span class="hl-variable">Iff</span></code></h3></div></div></div><a name="N14159" class="indexterm"></a><p><a name="ref.stdlib.core.Iff"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Iff</span>(<span class="hl-variable">Boolean</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td><td bgcolor="#6600FF"><font color="#FFFFFF">Pure</font></td></tr></table><p>
</p><p>Returns a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a> if the argument is false, otherwise <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: "Always publishes"</span>
  <span class="hl-site">Iff</span>(<span class="hl-literal">false</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Always publishes"</span>
<span class="hl-combinator">|</span> <span class="hl-site">Iff</span>(<span class="hl-literal">true</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Never publishes"</span></pre><p>
</p></div><div class="section" title="11.2.6.&nbsp;Error"><div class="titlepage"><div><div><h3 class="title"><a name="N1417E"></a>11.2.6.&nbsp;<code class="code"><span class="hl-variable">Error</span></code></h3></div></div></div><a name="N14182" class="indexterm"></a><p><a name="ref.stdlib.core.Error"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Error</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Bot</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Emits the given string as an error message, then <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p>Example, using <code class="code"><span class="hl-variable">Error</span></code> to implement assertions:
</p><pre class="orc">
<span class="hl-keyword">def</span> <span class="hl-site">assert</span>(<span class="hl-variable">b</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">if</span> <span class="hl-variable">b</span> <span class="hl-keyword">then</span> <span class="hl-keyword">signal</span> <span class="hl-keyword">else</span> <span class="hl-site">Error</span>(<span class="hl-literal">"assertion failed"</span>)
<span class="hl-comment">-- Fail with the error message: "assertion failed"</span>
<span class="hl-site">assert</span>(<span class="hl-literal">false</span>)</pre><p>
</p></div><div class="section" title="11.2.7.&nbsp;(+)"><div class="titlepage"><div><div><h3 class="title"><a name="N141A3"></a>11.2.7.&nbsp;<code class="code">(<span class="hl-operator">+</span>)</code></h3></div></div></div><a name="N141A7" class="indexterm"></a><p><a name="ref.stdlib.core.Add"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">+</span>)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p><code class="code"><span class="hl-variable">a</span><span class="hl-operator">+</span><span class="hl-variable">b</span></code> returns the sum of <code class="code"><span class="hl-variable">a</span></code> and <code class="code"><span class="hl-variable">b</span></code>.
</p></div><div class="section" title="11.2.8.&nbsp;(-)"><div class="titlepage"><div><div><h3 class="title"><a name="N141B8"></a>11.2.8.&nbsp;<code class="code">(<span class="hl-operator">-</span>)</code></h3></div></div></div><a name="N141BC" class="indexterm"></a><p><a name="ref.stdlib.core.Sub"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">-</span>)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p><code class="code"><span class="hl-variable">a</span><span class="hl-operator">-</span><span class="hl-variable">b</span></code> returns the value of <code class="code"><span class="hl-variable">a</span></code> minus the value of <code class="code"><span class="hl-variable">b</span></code>.
</p></div><div class="section" title="11.2.9.&nbsp;(0-)"><div class="titlepage"><div><div><h3 class="title"><a name="N141CD"></a>11.2.9.&nbsp;<code class="code">(<span class="hl-literal">0</span><span class="hl-operator">-</span>)</code></h3></div></div></div><a name="N141D1" class="indexterm"></a><p><a name="ref.stdlib.core.UMinus"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-literal">0</span><span class="hl-operator">-</span>)(<span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p>Return the additive inverse of the argument.
When this site appears as an operator, it is written in prefix form without the
zero, i.e. <code class="code"><span class="hl-operator">-</span><span class="hl-variable">a</span></code>
</p></div><div class="section" title="11.2.10.&nbsp;(*)"><div class="titlepage"><div><div><h3 class="title"><a name="N141DD"></a>11.2.10.&nbsp;<code class="code">(<span class="hl-operator">*</span>)</code></h3></div></div></div><a name="N141E1" class="indexterm"></a><p><a name="ref.stdlib.core.Mult"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">*</span>)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p><code class="code"><span class="hl-variable">a</span><span class="hl-operator">*</span><span class="hl-variable">b</span></code> returns the product of <code class="code"><span class="hl-variable">a</span></code> and <code class="code"><span class="hl-variable">b</span></code>.
</p></div><div class="section" title="11.2.11.&nbsp;(**)"><div class="titlepage"><div><div><h3 class="title"><a name="N141F2"></a>11.2.11.&nbsp;<code class="code">(<span class="hl-operator">**</span>)</code></h3></div></div></div><a name="N141F6" class="indexterm"></a><p><a name="ref.stdlib.core.Exponent"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">**</span>)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p><code class="code"><span class="hl-variable">a</span> <span class="hl-operator">**</span> <span class="hl-variable">b</span></code> returns
<span class="mathphrase">a<sup>b</sup></span>,
i.e. <code class="code"><span class="hl-variable">a</span></code> raised to the <code class="code"><span class="hl-variable">b</span></code>th power.
</p></div><div class="section" title="11.2.12.&nbsp;(/)"><div class="titlepage"><div><div><h3 class="title"><a name="N1420D"></a>11.2.12.&nbsp;<code class="code">(<span class="hl-operator">/</span>)</code></h3></div></div></div><a name="N14211" class="indexterm"></a><p><a name="ref.stdlib.core.Div"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">/</span>)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p><code class="code"><span class="hl-variable">a</span><span class="hl-operator">/</span><span class="hl-variable">b</span></code> returns <code class="code"><span class="hl-variable">a</span></code> divided by <code class="code"><span class="hl-variable">b</span></code>.
If both arguments have integral types, <code class="code">(<span class="hl-operator">/</span>)</code> performs integral
division, rounding towards zero. Otherwise, it performs floating-point
division. If <code class="code"><span class="hl-variable">b</span><span class="hl-operator">=</span><span class="hl-literal">0</span></code>, <code class="code"><span class="hl-variable">a</span><span class="hl-operator">/</span><span class="hl-variable">b</span></code> <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> with an error.
</p><p>Example:
</p><pre class="orc">
  <span class="hl-literal">7</span><span class="hl-operator">/</span><span class="hl-literal">3</span>   <span class="hl-comment">-- publishes 2</span>
<span class="hl-combinator">|</span> <span class="hl-literal">7</span><span class="hl-operator">/</span><span class="hl-literal">3.0</span> <span class="hl-comment">-- publishes 2.333...</span></pre><p>
</p></div><div class="section" title="11.2.13.&nbsp;(%)"><div class="titlepage"><div><div><h3 class="title"><a name="N14235"></a>11.2.13.&nbsp;<code class="code">(<span class="hl-operator">%</span>)</code></h3></div></div></div><a name="N14239" class="indexterm"></a><p><a name="ref.stdlib.core.Mod"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">%</span>)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p><code class="code"><span class="hl-variable">a</span><span class="hl-operator">%</span><span class="hl-variable">b</span></code> computes the remainder of <code class="code"><span class="hl-variable">a</span><span class="hl-operator">/</span><span class="hl-variable">b</span></code>. If <code class="code"><span class="hl-variable">a</span></code>
and <code class="code"><span class="hl-variable">b</span></code> have integral types, then the remainder is given by
the expression <code class="code"><span class="hl-variable">a</span> <span class="hl-operator">-</span> (<span class="hl-variable">a</span><span class="hl-operator">/</span><span class="hl-variable">b</span>)<span class="hl-operator">*</span><span class="hl-variable">b</span></code>. For a full description, see the
<a class="link" href="http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.17.3" target="_top">Java Language Specification, 3rd edition</a>.
</p></div><div class="section" title="11.2.14.&nbsp;(<:)"><div class="titlepage"><div><div><h3 class="title"><a name="N14255"></a>11.2.14.&nbsp;<code class="code">(<span class="hl-operator">&lt;:</span>)</code></h3></div></div></div><a name="N14259" class="indexterm"></a><p><a name="ref.stdlib.core.Less"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">&lt;:</span>)(<span class="hl-variable">Top</span>, <span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p><code class="code"><span class="hl-variable">a</span> <span class="hl-operator">&lt;:</span> <span class="hl-variable">b</span></code> returns true if <code class="code"><span class="hl-variable">a</span></code> is less than <code class="code"><span class="hl-variable">b</span></code>, and false otherwise.
</p></div><div class="section" title="11.2.15.&nbsp;(<=)"><div class="titlepage"><div><div><h3 class="title"><a name="N1426A"></a>11.2.15.&nbsp;<code class="code">(<span class="hl-operator">&lt;=</span>)</code></h3></div></div></div><a name="N1426E" class="indexterm"></a><p><a name="ref.stdlib.core.Leq"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">&lt;=</span>)(<span class="hl-variable">Top</span>, <span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p><code class="code"><span class="hl-variable">a</span> <span class="hl-operator">&lt;=</span> <span class="hl-variable">b</span></code> returns true if <code class="code"><span class="hl-variable">a</span></code> is less than or equal to <code class="code"><span class="hl-variable">b</span></code>, and false otherwise.
</p></div><div class="section" title="11.2.16.&nbsp;(:>)"><div class="titlepage"><div><div><h3 class="title"><a name="N1427F"></a>11.2.16.&nbsp;<code class="code">(<span class="hl-operator">:&gt;</span>)</code></h3></div></div></div><a name="N14283" class="indexterm"></a><p><a name="ref.stdlib.core.Greater"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">:&gt;</span>)(<span class="hl-variable">Top</span>, <span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p><code class="code"><span class="hl-variable">a</span> <span class="hl-operator">:&gt;</span> <span class="hl-variable">b</span></code> returns true if <code class="code"><span class="hl-variable">a</span></code> is greater than <code class="code"><span class="hl-variable">b</span></code>, and false otherwise.
</p></div><div class="section" title="11.2.17.&nbsp;(>=)"><div class="titlepage"><div><div><h3 class="title"><a name="N14294"></a>11.2.17.&nbsp;<code class="code">(<span class="hl-operator">&gt;=</span>)</code></h3></div></div></div><a name="N14298" class="indexterm"></a><p><a name="ref.stdlib.core.Greq"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">&gt;=</span>)(<span class="hl-variable">Top</span>, <span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p><code class="code"><span class="hl-variable">a</span> <span class="hl-operator">&gt;=</span> <span class="hl-variable">b</span></code> returns true if <code class="code"><span class="hl-variable">a</span></code> is greater than or equal to <code class="code"><span class="hl-variable">b</span></code>, and false otherwise.
</p></div><div class="section" title="11.2.18.&nbsp;(=)"><div class="titlepage"><div><div><h3 class="title"><a name="N142A9"></a>11.2.18.&nbsp;<code class="code">(<span class="hl-operator">=</span>)</code></h3></div></div></div><a name="N142AD" class="indexterm"></a><p><a name="ref.stdlib.core.Eq"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">=</span>)(<span class="hl-variable">Top</span>, <span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p><code class="code"><span class="hl-variable">a</span> <span class="hl-operator">=</span> <span class="hl-variable">b</span></code> returns true if <code class="code"><span class="hl-variable">a</span></code> is equal to <code class="code"><span class="hl-variable">b</span></code>,
and false otherwise.  The precise definition of "equal" depends on the values
being compared, but always obeys the rule that if two values are considered
equal, then one may be substituted locally for the other without affecting the
behavior of the program.
</p><p>Two values with the same object identity are always considered equal.
Orc data structures, such as tuples, are equal if their contents are equal.
Other types are free to implement their own equality
relationship provided it conforms to the rules given here.
</p><p>Note that although values of different types may be compared with
<code class="code"><span class="hl-operator">=</span></code>, the substitutability principle requires that such values are
always considered inequal, i.e. the comparison will return <code class="code"><span class="hl-literal">false</span></code>.
</p></div><div class="section" title="11.2.19.&nbsp;(/=)"><div class="titlepage"><div><div><h3 class="title"><a name="N142C8"></a>11.2.19.&nbsp;<code class="code">(<span class="hl-operator">/</span><span class="hl-operator">=</span>)</code></h3></div></div></div><a name="N142CC" class="indexterm"></a><p><a name="ref.stdlib.core.Inequal"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">/</span><span class="hl-operator">=</span>)(<span class="hl-variable">Top</span>, <span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p><code class="code"><span class="hl-variable">a</span><span class="hl-operator">/</span><span class="hl-operator">=</span><span class="hl-variable">b</span></code> returns false if <code class="code"><span class="hl-variable">a</span><span class="hl-operator">=</span><span class="hl-variable">b</span></code>, and true otherwise.
</p></div><div class="section" title="11.2.20.&nbsp;(~)"><div class="titlepage"><div><div><h3 class="title"><a name="N142DA"></a>11.2.20.&nbsp;<code class="code">(<span class="hl-operator">~</span>)</code></h3></div></div></div><a name="N142DE" class="indexterm"></a><p><a name="ref.stdlib.core.Not"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">~</span>)(<span class="hl-variable">Boolean</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Return the logical negation of the argument.
</p></div><div class="section" title="11.2.21.&nbsp;(&amp;&amp;)"><div class="titlepage"><div><div><h3 class="title"><a name="N142E7"></a>11.2.21.&nbsp;<code class="code">(<span class="hl-operator">&amp;&amp;</span>)</code></h3></div></div></div><a name="N142EB" class="indexterm"></a><p><a name="ref.stdlib.core.And"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">&amp;&amp;</span>)(<span class="hl-variable">Boolean</span>, <span class="hl-variable">Boolean</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Return the logical conjunction of the arguments. This is not a short-circuiting
operator; both arguments must publish before the result is
computed.
</p></div><div class="section" title="11.2.22.&nbsp;(||)"><div class="titlepage"><div><div><h3 class="title"><a name="N142F4"></a>11.2.22.&nbsp;<code class="code">(<span class="hl-operator">||</span>)</code></h3></div></div></div><a name="N142F8" class="indexterm"></a><p><a name="ref.stdlib.core.Or"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">||</span>)(<span class="hl-variable">Boolean</span>, <span class="hl-variable">Boolean</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Return the logical disjunction of the arguments. This is not a short-circuiting
operator; both arguments must publish before the result is
computed.
</p></div><div class="section" title="11.2.23.&nbsp;(:)"><div class="titlepage"><div><div><h3 class="title"><a name="N14301"></a>11.2.23.&nbsp;<code class="code">(<span class="hl-operator">:</span>)</code></h3></div></div></div><a name="N14305" class="indexterm"></a><p><a name="ref.stdlib.core.Cons"></a><code class="code"><span class="hl-site">site</span> (<span class="hl-operator">:</span>)[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>The <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> <code class="code"><span class="hl-variable">a</span><span class="hl-operator">:</span><span class="hl-variable">b</span></code> is formed by prepending the element <code class="code"><span class="hl-variable">a</span></code> to
the list <code class="code"><span class="hl-variable">b</span></code>.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: (3, [4, 5])</span>
<span class="hl-literal">3</span><span class="hl-operator">:</span><span class="hl-literal">4</span><span class="hl-operator">:</span><span class="hl-literal">5</span><span class="hl-operator">:</span>[] <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span><span class="hl-combinator">&gt;</span> (<span class="hl-variable">x</span>,<span class="hl-variable">xs</span>)</pre><p>
</p></div><div class="section" title="11.2.24.&nbsp;abs"><div class="titlepage"><div><div><h3 class="title"><a name="N14321"></a>11.2.24.&nbsp;<code class="code"><span class="hl-variable">abs</span></code></h3></div></div></div><a name="N14325" class="indexterm"></a><p><a name="ref.stdlib.core.abs"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">abs</span>(<span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p>Publishes the absolute value of the argument.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">abs</span>(<span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>
<span class="hl-keyword">def</span> <span class="hl-site">abs</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-keyword">if</span> <span class="hl-variable">x</span> <span class="hl-operator">&lt;:</span> <span class="hl-literal">0</span> <span class="hl-keyword">then</span> <span class="hl-operator">-</span><span class="hl-variable">x</span> <span class="hl-keyword">else</span> <span class="hl-variable">x</span>


      </pre></div><div class="section" title="11.2.25.&nbsp;signum"><div class="titlepage"><div><div><h3 class="title"><a name="N14335"></a>11.2.25.&nbsp;<code class="code"><span class="hl-variable">signum</span></code></h3></div></div></div><a name="N14339" class="indexterm"></a><p><a name="ref.stdlib.core.signum"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">signum</span>(<span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p><code class="code"><span class="hl-site">signum</span>(<span class="hl-variable">a</span>)</code> publishes <code class="code"><span class="hl-operator">-</span><span class="hl-literal">1</span></code> if <code class="code"><span class="hl-variable">a</span>&lt;<span class="hl-literal">0</span></code>,
<code class="code"><span class="hl-literal">1</span></code> if <code class="code"><span class="hl-variable">a</span>&gt;<span class="hl-literal">0</span></code>, and <code class="code"><span class="hl-literal">0</span></code> if <code class="code"><span class="hl-variable">a</span><span class="hl-operator">=</span><span class="hl-literal">0</span></code>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">signum</span>(<span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>
<span class="hl-keyword">def</span> <span class="hl-site">signum</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">if</span> <span class="hl-variable">x</span> <span class="hl-operator">&lt;:</span> <span class="hl-literal">0</span> <span class="hl-keyword">then</span> <span class="hl-operator">-</span><span class="hl-literal">1</span>
  <span class="hl-keyword">else</span> <span class="hl-keyword">if</span> <span class="hl-variable">x</span> <span class="hl-operator">:&gt;</span> <span class="hl-literal">0</span> <span class="hl-keyword">then</span> <span class="hl-literal">1</span>
  <span class="hl-keyword">else</span> <span class="hl-literal">0</span>


      </pre></div><div class="section" title="11.2.26.&nbsp;min"><div class="titlepage"><div><div><h3 class="title"><a name="N1435D"></a>11.2.26.&nbsp;<code class="code"><span class="hl-variable">min</span></code></h3></div></div></div><a name="N14361" class="indexterm"></a><p><a name="ref.stdlib.core.min"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">min</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Publishes the lesser of the arguments. If the arguments
are equal, publishes the first argument.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">min</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">min</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>) <span class="hl-operator">=</span> <span class="hl-keyword">if</span> <span class="hl-variable">y</span> <span class="hl-operator">&lt;:</span> <span class="hl-variable">x</span> <span class="hl-keyword">then</span> <span class="hl-variable">y</span> <span class="hl-keyword">else</span> <span class="hl-variable">x</span>


      </pre></div><div class="section" title="11.2.27.&nbsp;max"><div class="titlepage"><div><div><h3 class="title"><a name="N14371"></a>11.2.27.&nbsp;<code class="code"><span class="hl-variable">max</span></code></h3></div></div></div><a name="N14375" class="indexterm"></a><p><a name="ref.stdlib.core.max"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">max</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Publishes the greater of the arguments. If the arguments
are equal, publishes the second argument.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">max</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">max</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>) <span class="hl-operator">=</span> <span class="hl-keyword">if</span> <span class="hl-variable">x</span> <span class="hl-operator">:&gt;</span> <span class="hl-variable">y</span> <span class="hl-keyword">then</span> <span class="hl-variable">x</span> <span class="hl-keyword">else</span> <span class="hl-variable">y</span>



      </pre></div><div class="section" title="11.2.28.&nbsp;Floor"><div class="titlepage"><div><div><h3 class="title"><a name="N14385"></a>11.2.28.&nbsp;<code class="code"><span class="hl-variable">Floor</span></code></h3></div></div></div><a name="N14389" class="indexterm"></a><p><a name="ref.stdlib.core.Floor"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Floor</span>(<span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p>Return the greatest integer less than
or equal to this number.
</p></div><div class="section" title="11.2.29.&nbsp;Ceil"><div class="titlepage"><div><div><h3 class="title"><a name="N14392"></a>11.2.29.&nbsp;<code class="code"><span class="hl-variable">Ceil</span></code></h3></div></div></div><a name="N14396" class="indexterm"></a><p><a name="ref.stdlib.core.Ceil"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Ceil</span>(<span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p>Return the least integer greater than
or equal to this number.
</p></div><div class="section" title="11.2.30.&nbsp;sqrt"><div class="titlepage"><div><div><h3 class="title"><a name="N1439F"></a>11.2.30.&nbsp;<code class="code"><span class="hl-variable">sqrt</span></code></h3></div></div></div><a name="N143A3" class="indexterm"></a><p><a name="ref.stdlib.core.sqrt"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">sqrt</span>(<span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p>Publish the square root of this number.
If the number is negative, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">sqrt</span>(<span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>
<span class="hl-keyword">def</span> <span class="hl-site">sqrt</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span> <span class="hl-variable">n</span> <span class="hl-operator">**</span> <span class="hl-literal">0.5</span>


      </pre></div></div><div class="section" title="11.3.&nbsp;idioms: Higher-order Orc programming idioms."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.stdlib.idioms"></a>11.3.&nbsp;idioms: Higher-order Orc programming idioms.</h2></div></div></div><p>Higher-order Orc programming idioms.
Many of these are standard functional-programming
combinators borrowed from Haskell or Scheme.
</p><div class="section" title="11.3.1.&nbsp;curry"><div class="titlepage"><div><div><h3 class="title"><a name="N143C5"></a>11.3.1.&nbsp;<code class="code"><span class="hl-variable">curry</span></code></h3></div></div></div><a name="N143C9" class="indexterm"></a><p><a name="ref.stdlib.idioms.curry"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">curry</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span></code></p><p>Curry a function of two arguments.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">curry</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>
<span class="hl-keyword">def</span> <span class="hl-site">curry</span>(<span class="hl-variable">f</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">y</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)


      </pre></div><div class="section" title="11.3.2.&nbsp;curry3"><div class="titlepage"><div><div><h3 class="title"><a name="N143D9"></a>11.3.2.&nbsp;<code class="code"><span class="hl-variable">curry3</span></code></h3></div></div></div><a name="N143DD" class="indexterm"></a><p><a name="ref.stdlib.idioms.curry3"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">curry3</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>,<span class="hl-variable">D</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">D</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">D</span></code></p><p>Curry a function of three arguments.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">curry3</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>,<span class="hl-variable">D</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">D</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">D</span>
<span class="hl-keyword">def</span> <span class="hl-site">curry3</span>(<span class="hl-variable">f</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">y</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">z</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>,<span class="hl-variable">z</span>)


      </pre></div><div class="section" title="11.3.3.&nbsp;uncurry"><div class="titlepage"><div><div><h3 class="title"><a name="N143ED"></a>11.3.3.&nbsp;<code class="code"><span class="hl-variable">uncurry</span></code></h3></div></div></div><a name="N143F1" class="indexterm"></a><p><a name="ref.stdlib.idioms.uncurry"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">uncurry</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span></code></p><p>Uncurry a function of two arguments.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">uncurry</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>
<span class="hl-keyword">def</span> <span class="hl-site">uncurry</span>(<span class="hl-variable">f</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">x</span>)(<span class="hl-variable">y</span>)


      </pre></div><div class="section" title="11.3.4.&nbsp;uncurry3"><div class="titlepage"><div><div><h3 class="title"><a name="N14401"></a>11.3.4.&nbsp;<code class="code"><span class="hl-variable">uncurry3</span></code></h3></div></div></div><a name="N14405" class="indexterm"></a><p><a name="ref.stdlib.idioms.uncurry3"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">uncurry3</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>,<span class="hl-variable">D</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>)(<span class="hl-variable">B</span>)(<span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">D</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">D</span></code></p><p>Uncurry a function of three arguments.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">uncurry3</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>,<span class="hl-variable">D</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">D</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">D</span>
<span class="hl-keyword">def</span> <span class="hl-site">uncurry3</span>(<span class="hl-variable">f</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>,<span class="hl-variable">z</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">x</span>)(<span class="hl-variable">y</span>)(<span class="hl-variable">z</span>)


      </pre></div><div class="section" title="11.3.5.&nbsp;flip"><div class="titlepage"><div><div><h3 class="title"><a name="N14415"></a>11.3.5.&nbsp;<code class="code"><span class="hl-variable">flip</span></code></h3></div></div></div><a name="N14419" class="indexterm"></a><p><a name="ref.stdlib.idioms.flip"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">flip</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">B</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span></code></p><p>Flip the order of parameters of a two-argument function.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">flip</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">B</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>
<span class="hl-keyword">def</span> <span class="hl-site">flip</span>(<span class="hl-variable">f</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">y</span>,<span class="hl-variable">x</span>)


      </pre></div><div class="section" title="11.3.6.&nbsp;constant"><div class="titlepage"><div><div><h3 class="title"><a name="N14429"></a>11.3.6.&nbsp;<code class="code"><span class="hl-variable">constant</span></code></h3></div></div></div><a name="N1442D" class="indexterm"></a><p><a name="ref.stdlib.idioms.constant"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">constant</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Create a function which returns a constant value.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">constant</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">constant</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>() <span class="hl-operator">=</span> <span class="hl-variable">x</span>


      </pre></div><div class="section" title="11.3.7.&nbsp;defer"><div class="titlepage"><div><div><h3 class="title"><a name="N1443D"></a>11.3.7.&nbsp;<code class="code"><span class="hl-variable">defer</span></code></h3></div></div></div><a name="N14441" class="indexterm"></a><p><a name="ref.stdlib.idioms.defer"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">defer</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span></code></p><p>Given a function and its argument, return a thunk which applies the function.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">defer</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>
<span class="hl-keyword">def</span> <span class="hl-site">defer</span>(<span class="hl-variable">f</span>, <span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>() <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">x</span>)


      </pre></div><div class="section" title="11.3.8.&nbsp;defer2"><div class="titlepage"><div><div><h3 class="title"><a name="N14451"></a>11.3.8.&nbsp;<code class="code"><span class="hl-variable">defer2</span></code></h3></div></div></div><a name="N14455" class="indexterm"></a><p><a name="ref.stdlib.idioms.defer2"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">defer2</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>, <span class="hl-variable">A</span>, <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span></code></p><p>Given a function and its arguments, return a thunk which applies the function.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">defer2</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>, <span class="hl-variable">A</span>, <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>
<span class="hl-keyword">def</span> <span class="hl-site">defer2</span>(<span class="hl-variable">f</span>, <span class="hl-variable">x</span>, <span class="hl-variable">y</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>() <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">x</span>, <span class="hl-variable">y</span>)


      </pre></div><div class="section" title="11.3.9.&nbsp;ignore"><div class="titlepage"><div><div><h3 class="title"><a name="N14465"></a>11.3.9.&nbsp;<code class="code"><span class="hl-variable">ignore</span></code></h3></div></div></div><a name="N14469" class="indexterm"></a><p><a name="ref.stdlib.idioms.ignore"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">ignore</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span></code></p><p>From a function of no arguments, create a function
of one argument, which is ignored.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">ignore</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">ignore</span>(<span class="hl-variable">f</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">_</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>()


      </pre></div><div class="section" title="11.3.10.&nbsp;ignore2"><div class="titlepage"><div><div><h3 class="title"><a name="N14479"></a>11.3.10.&nbsp;<code class="code"><span class="hl-variable">ignore2</span></code></h3></div></div></div><a name="N1447D" class="indexterm"></a><p><a name="ref.stdlib.idioms.ignore2"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">ignore2</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span></code></p><p>From a function of no arguments, create a function
of two arguments, which are ignored.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">ignore2</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>
<span class="hl-keyword">def</span> <span class="hl-site">ignore2</span>(<span class="hl-variable">f</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">_</span>, <span class="hl-variable">_</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>()


      </pre></div><div class="section" title="11.3.11.&nbsp;compose"><div class="titlepage"><div><div><h3 class="title"><a name="N1448D"></a>11.3.11.&nbsp;<code class="code"><span class="hl-variable">compose</span></code></h3></div></div></div><a name="N14491" class="indexterm"></a><p><a name="ref.stdlib.idioms.compose"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">compose</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span></code></p><p>Compose two single-argument functions.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">compose</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">C</span>
<span class="hl-keyword">def</span> <span class="hl-site">compose</span>(<span class="hl-variable">f</span>,<span class="hl-variable">g</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-site">g</span>(<span class="hl-variable">x</span>))


      </pre></div><div class="section" title="11.3.12.&nbsp;while"><div class="titlepage"><div><div><h3 class="title"><a name="N144A1"></a>11.3.12.&nbsp;<code class="code"><span class="hl-variable">while</span></code></h3></div></div></div><a name="N144A5" class="indexterm"></a><p><a name="ref.stdlib.idioms.while"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">while</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Iterate a function while a predicate is satisfied, <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishing</a>
each value passed to the function.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: 0 1 2 3 4 5</span>
<span class="hl-site">while</span>(
  <span class="hl-keyword">lambda</span> (<span class="hl-variable">n</span>) <span class="hl-operator">=</span> (<span class="hl-variable">n</span> <span class="hl-operator">&lt;=</span> <span class="hl-literal">5</span>),
  <span class="hl-keyword">lambda</span> (<span class="hl-variable">n</span>) <span class="hl-operator">=</span> <span class="hl-variable">n</span><span class="hl-operator">+</span><span class="hl-literal">1</span>
)(<span class="hl-literal">0</span>)</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">while</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">while</span>(<span class="hl-variable">p</span>,<span class="hl-variable">f</span>) <span class="hl-operator">=</span> 
  <span class="hl-keyword">def</span> <span class="hl-site">loop</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
  <span class="hl-keyword">def</span> <span class="hl-site">loop</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-site">Ift</span>(<span class="hl-site">p</span>(<span class="hl-variable">x</span>)) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> ( <span class="hl-variable">x</span> <span class="hl-combinator">|</span> <span class="hl-site">loop</span>(<span class="hl-site">f</span>(<span class="hl-variable">x</span>)) )
  <span class="hl-variable">loop</span>


      </pre></div><div class="section" title="11.3.13.&nbsp;repeat"><div class="titlepage"><div><div><h3 class="title"><a name="N144BF"></a>11.3.13.&nbsp;<code class="code"><span class="hl-variable">repeat</span></code></h3></div></div></div><a name="N144C3" class="indexterm"></a><p><a name="ref.stdlib.idioms.repeat"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">repeat</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Call a function sequentially, <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishing</a> each value returned by the function.
The expression <code class="code"><span class="hl-site">repeat</span>(<span class="hl-variable">f</span>)</code> is equivalent to
the infinite expression <code class="code"><span class="hl-site">f</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> ( <span class="hl-variable">x</span> <span class="hl-combinator">|</span> <span class="hl-site">f</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> ( <span class="hl-variable">x</span> <span class="hl-combinator">|</span> <span class="hl-site">f</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> ... ) )</code>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">repeat</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">repeat</span>(<span class="hl-variable">f</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> (<span class="hl-variable">x</span> <span class="hl-combinator">|</span> <span class="hl-site">repeat</span>(<span class="hl-variable">f</span>))


      </pre></div><div class="section" title="11.3.14.&nbsp;fork"><div class="titlepage"><div><div><h3 class="title"><a name="N144DD"></a>11.3.14.&nbsp;<code class="code"><span class="hl-variable">fork</span></code></h3></div></div></div><a name="N144E1" class="indexterm"></a><p><a name="ref.stdlib.idioms.fork"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">fork</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Call a list of functions in parallel, <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishing</a>
all values published by the functions.
</p><p>The expression <code class="code"><span class="hl-site">fork</span>([<span class="hl-variable">f</span>,<span class="hl-variable">g</span>,<span class="hl-variable">h</span>])</code> is equivalent to
the expression <code class="code"><span class="hl-site">f</span>() <span class="hl-combinator">|</span> <span class="hl-site">g</span>() <span class="hl-combinator">|</span> <span class="hl-site">h</span>()</code>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">fork</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">fork</span>([]) <span class="hl-operator">=</span> <span class="hl-keyword">stop</span>
<span class="hl-keyword">def</span> <span class="hl-site">fork</span>(<span class="hl-variable">p</span><span class="hl-operator">:</span><span class="hl-variable">ps</span>) <span class="hl-operator">=</span> <span class="hl-site">p</span>() <span class="hl-combinator">|</span> <span class="hl-site">fork</span>(<span class="hl-variable">ps</span>)


      </pre></div><div class="section" title="11.3.15.&nbsp;forkMap"><div class="titlepage"><div><div><h3 class="title"><a name="N144FD"></a>11.3.15.&nbsp;<code class="code"><span class="hl-variable">forkMap</span></code></h3></div></div></div><a name="N14501" class="indexterm"></a><p><a name="ref.stdlib.idioms.forkMap"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">forkMap</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span></code></p><p>Apply a function to a list in parallel, <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishing</a> all values published
by the applications.
</p><p>The expression <code class="code"><span class="hl-site">forkMap</span>(<span class="hl-variable">f</span>, [<span class="hl-variable">a</span>,<span class="hl-variable">b</span>,<span class="hl-variable">c</span>])</code> is equivalent to
the expression <code class="code"><span class="hl-site">f</span>(<span class="hl-variable">a</span>) <span class="hl-combinator">|</span> <span class="hl-site">f</span>(<span class="hl-variable">b</span>) <span class="hl-combinator">|</span> <span class="hl-site">f</span>(<span class="hl-variable">c</span>)</code>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">forkMap</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>
<span class="hl-keyword">def</span> <span class="hl-site">forkMap</span>(<span class="hl-variable">f</span>, []) <span class="hl-operator">=</span> <span class="hl-keyword">stop</span>
<span class="hl-keyword">def</span> <span class="hl-site">forkMap</span>(<span class="hl-variable">f</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">|</span> <span class="hl-site">forkMap</span>(<span class="hl-variable">f</span>, <span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.3.16.&nbsp;seq"><div class="titlepage"><div><div><h3 class="title"><a name="N1451D"></a>11.3.16.&nbsp;<code class="code"><span class="hl-variable">seq</span></code></h3></div></div></div><a name="N14521" class="indexterm"></a><p><a name="ref.stdlib.idioms.seq"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">seq</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p>Call a list of functions in sequence, <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishing</a>
a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a> whenever the last function publishes. The
actual publications of the given functions are not
published.
</p><p>The expression <code class="code"><span class="hl-site">seq</span>([<span class="hl-variable">f</span>,<span class="hl-variable">g</span>,<span class="hl-variable">h</span>])</code> is equivalent to
the expression <code class="code"><span class="hl-site">f</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">g</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">h</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span></code>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">seq</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span>
<span class="hl-keyword">def</span> <span class="hl-site">seq</span>([]) <span class="hl-operator">=</span> <span class="hl-keyword">signal</span>
<span class="hl-keyword">def</span> <span class="hl-site">seq</span>(<span class="hl-variable">p</span><span class="hl-operator">:</span><span class="hl-variable">ps</span>) <span class="hl-operator">=</span> <span class="hl-site">p</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">seq</span>(<span class="hl-variable">ps</span>)


      </pre></div><div class="section" title="11.3.17.&nbsp;seqMap"><div class="titlepage"><div><div><h3 class="title"><a name="N14541"></a>11.3.17.&nbsp;<code class="code"><span class="hl-variable">seqMap</span></code></h3></div></div></div><a name="N14545" class="indexterm"></a><p><a name="ref.stdlib.idioms.seqMap"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">seqMap</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p>Apply a function to a list in sequence, <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishing</a>
a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a> whenever the last application publishes. The
actual publications of the given functions are not
<a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">published</a>.
</p><p>The expression <code class="code"><span class="hl-site">seqMap</span>(<span class="hl-variable">f</span>, [<span class="hl-variable">a</span>,<span class="hl-variable">b</span>,<span class="hl-variable">c</span>])</code> is equivalent to
the expression <code class="code"><span class="hl-site">f</span>(<span class="hl-variable">a</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">f</span>(<span class="hl-variable">b</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">f</span>(<span class="hl-variable">c</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span></code>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">seqMap</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span>
<span class="hl-keyword">def</span> <span class="hl-site">seqMap</span>(<span class="hl-variable">f</span>, []) <span class="hl-operator">=</span> <span class="hl-keyword">signal</span>
<span class="hl-keyword">def</span> <span class="hl-site">seqMap</span>(<span class="hl-variable">f</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-site">seqMap</span>(<span class="hl-variable">f</span>, <span class="hl-variable">xs</span>)
 

      </pre></div><div class="section" title="11.3.18.&nbsp;join"><div class="titlepage"><div><div><h3 class="title"><a name="N14569"></a>11.3.18.&nbsp;<code class="code"><span class="hl-variable">join</span></code></h3></div></div></div><a name="N1456D" class="indexterm"></a><p><a name="ref.stdlib.idioms.join"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">join</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p>Call a list of functions in parallel and <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a>
a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a> once all functions have completed.
</p><p>The expression <code class="code"><span class="hl-site">join</span>([<span class="hl-variable">f</span>,<span class="hl-variable">g</span>,<span class="hl-variable">h</span>])</code> is equivalent to
the expression <code class="code">(<span class="hl-site">f</span>(), <span class="hl-site">g</span>(), <span class="hl-site">h</span>()) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span></code>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">join</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span>
<span class="hl-keyword">def</span> <span class="hl-site">join</span>([]) <span class="hl-operator">=</span> <span class="hl-keyword">signal</span>
<span class="hl-keyword">def</span> <span class="hl-site">join</span>(<span class="hl-variable">p</span><span class="hl-operator">:</span><span class="hl-variable">ps</span>) <span class="hl-operator">=</span> (<span class="hl-site">p</span>(), <span class="hl-site">join</span>(<span class="hl-variable">ps</span>)) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span>
 

      </pre></div><div class="section" title="11.3.19.&nbsp;joinMap"><div class="titlepage"><div><div><h3 class="title"><a name="N1458D"></a>11.3.19.&nbsp;<code class="code"><span class="hl-variable">joinMap</span></code></h3></div></div></div><a name="N14591" class="indexterm"></a><p><a name="ref.stdlib.idioms.joinMap"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">joinMap</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Top</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p>Apply a function to a list in parallel and <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a>
a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a> once all applications have completed.
</p><p>The expression <code class="code"><span class="hl-site">joinMap</span>(<span class="hl-variable">f</span>, [<span class="hl-variable">a</span>,<span class="hl-variable">b</span>,<span class="hl-variable">c</span>])</code> is equivalent to
the expression <code class="code">(<span class="hl-site">f</span>(<span class="hl-variable">a</span>), <span class="hl-site">f</span>(<span class="hl-variable">b</span>), <span class="hl-site">f</span>(<span class="hl-variable">c</span>)) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span></code>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">joinMap</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Top</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span>
<span class="hl-keyword">def</span> <span class="hl-site">joinMap</span>(<span class="hl-variable">f</span>, []) <span class="hl-operator">=</span> <span class="hl-keyword">signal</span>
<span class="hl-keyword">def</span> <span class="hl-site">joinMap</span>(<span class="hl-variable">f</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> (<span class="hl-site">f</span>(<span class="hl-variable">x</span>), <span class="hl-site">joinMap</span>(<span class="hl-variable">f</span>, <span class="hl-variable">xs</span>)) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span>


      </pre></div><div class="section" title="11.3.20.&nbsp;alt"><div class="titlepage"><div><div><h3 class="title"><a name="N145B1"></a>11.3.20.&nbsp;<code class="code"><span class="hl-variable">alt</span></code></h3></div></div></div><a name="N145B5" class="indexterm"></a><p><a name="ref.stdlib.idioms.alt"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">alt</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Call each function in the list until one of them <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a>.
</p><p>The expression <code class="code"><span class="hl-site">alt</span>([<span class="hl-variable">f</span>,<span class="hl-variable">g</span>,<span class="hl-variable">h</span>])</code> is equivalent to
the expression <code class="code"><span class="hl-site">f</span>() <span class="hl-combinator">;</span> <span class="hl-site">g</span>() <span class="hl-combinator">;</span> <span class="hl-site">h</span>()</code>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">alt</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">alt</span>([]) <span class="hl-operator">=</span> <span class="hl-keyword">stop</span>
<span class="hl-keyword">def</span> <span class="hl-site">alt</span>(<span class="hl-variable">p</span><span class="hl-operator">:</span><span class="hl-variable">ps</span>) <span class="hl-operator">=</span> <span class="hl-site">p</span>() <span class="hl-combinator">;</span> <span class="hl-site">alt</span>(<span class="hl-variable">ps</span>)


      </pre></div><div class="section" title="11.3.21.&nbsp;altMap"><div class="titlepage"><div><div><h3 class="title"><a name="N145D1"></a>11.3.21.&nbsp;<code class="code"><span class="hl-variable">altMap</span></code></h3></div></div></div><a name="N145D5" class="indexterm"></a><p><a name="ref.stdlib.idioms.altMap"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">altMap</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span></code></p><p>Apply the function to each element in the list until one <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a>.
</p><p>The expression <code class="code"><span class="hl-site">altMap</span>(<span class="hl-variable">f</span>, [<span class="hl-variable">a</span>,<span class="hl-variable">b</span>,<span class="hl-variable">c</span>])</code> is equivalent to
the expression <code class="code"><span class="hl-site">f</span>(<span class="hl-variable">a</span>) <span class="hl-combinator">;</span> <span class="hl-site">f</span>(<span class="hl-variable">b</span>) <span class="hl-combinator">;</span> <span class="hl-site">f</span>(<span class="hl-variable">c</span>)</code>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">altMap</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>
<span class="hl-keyword">def</span> <span class="hl-site">altMap</span>(<span class="hl-variable">f</span>, []) <span class="hl-operator">=</span> <span class="hl-keyword">stop</span>
<span class="hl-keyword">def</span> <span class="hl-site">altMap</span>(<span class="hl-variable">f</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">;</span> <span class="hl-site">altMap</span>(<span class="hl-variable">f</span>, <span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.3.22.&nbsp;por"><div class="titlepage"><div><div><h3 class="title"><a name="N145F1"></a>11.3.22.&nbsp;<code class="code"><span class="hl-variable">por</span></code></h3></div></div></div><a name="N145F5" class="indexterm"></a><p><a name="ref.stdlib.idioms.por"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">por</span>(<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Parallel or. Execute a list of boolean functions in parallel, <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishing</a>
a value as soon as possible, and <a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">killing</a> any unnecessary ongoing
computation.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">por</span>(<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>
<span class="hl-keyword">def</span> <span class="hl-site">por</span>([]) <span class="hl-operator">=</span> <span class="hl-literal">false</span>
<span class="hl-keyword">def</span> <span class="hl-site">por</span>(<span class="hl-variable">p</span><span class="hl-operator">:</span><span class="hl-variable">ps</span>) <span class="hl-operator">=</span>
  <span class="hl-site">Let</span>(
    <span class="hl-keyword">val</span> <span class="hl-variable">b1</span> <span class="hl-operator">=</span> <span class="hl-site">p</span>()
    <span class="hl-keyword">val</span> <span class="hl-variable">b2</span> <span class="hl-operator">=</span> <span class="hl-site">por</span>(<span class="hl-variable">ps</span>)
    <span class="hl-site">Ift</span>(<span class="hl-variable">b1</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span> <span class="hl-combinator">|</span> <span class="hl-site">Ift</span>(<span class="hl-variable">b2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span> <span class="hl-combinator">|</span> (<span class="hl-variable">b1</span> <span class="hl-operator">||</span> <span class="hl-variable">b2</span>)
  )
  

      </pre></div><div class="section" title="11.3.23.&nbsp;pand"><div class="titlepage"><div><div><h3 class="title"><a name="N1460D"></a>11.3.23.&nbsp;<code class="code"><span class="hl-variable">pand</span></code></h3></div></div></div><a name="N14611" class="indexterm"></a><p><a name="ref.stdlib.idioms.pand"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">pand</span>(<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Parallel and. Execute a list of boolean functions in parallel, <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishing</a>
a value as soon as possible, and <a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">killing</a> any unnecessary ongoing
computation.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">pand</span>(<span class="hl-site">List</span>[<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>
<span class="hl-keyword">def</span> <span class="hl-site">pand</span>([]) <span class="hl-operator">=</span> <span class="hl-literal">true</span>
<span class="hl-keyword">def</span> <span class="hl-site">pand</span>(<span class="hl-variable">p</span><span class="hl-operator">:</span><span class="hl-variable">ps</span>) <span class="hl-operator">=</span>
  <span class="hl-site">Let</span>(
    <span class="hl-keyword">val</span> <span class="hl-variable">b1</span> <span class="hl-operator">=</span> <span class="hl-site">p</span>()
    <span class="hl-keyword">val</span> <span class="hl-variable">b2</span> <span class="hl-operator">=</span> <span class="hl-site">pand</span>(<span class="hl-variable">ps</span>)
    <span class="hl-site">Iff</span>(<span class="hl-variable">b1</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">false</span> <span class="hl-combinator">|</span> <span class="hl-site">Iff</span>(<span class="hl-variable">b2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">false</span> <span class="hl-combinator">|</span> (<span class="hl-variable">b1</span> <span class="hl-operator">&amp;&amp;</span> <span class="hl-variable">b2</span>)
  )
 

      </pre></div><div class="section" title="11.3.24.&nbsp;collect"><div class="titlepage"><div><div><h3 class="title"><a name="N14629"></a>11.3.24.&nbsp;<code class="code"><span class="hl-variable">collect</span></code></h3></div></div></div><a name="N1462D" class="indexterm"></a><p><a name="ref.stdlib.idioms.collect"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">collect</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Run a function, collecting all publications in a list.
<a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the list when the function <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a>.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: [signal, signal, signal, signal, signal]</span>
<span class="hl-site">collect</span>(<span class="hl-site">defer</span>(<span class="hl-variable">signals</span>, <span class="hl-literal">5</span>))</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">collect</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">collect</span>(<span class="hl-variable">p</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">b</span> <span class="hl-operator">=</span> <span class="hl-site">Channel</span>[<span class="hl-variable">A</span>]()
  <span class="hl-site">p</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">b</span>.<span class="hl-site">put</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
  <span class="hl-combinator">;</span> <span class="hl-variable">b</span>.<span class="hl-site">getAll</span>()

      </pre></div></div><div class="section" title="11.4.&nbsp;list: Operations on lists."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.stdlib.list"></a>11.4.&nbsp;list: Operations on lists.</h2></div></div></div><p>Operations on lists.
</p><p>Many of these functions are similar to those in the Haskell prelude, but
operate on the elements of a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> in parallel.
</p><div class="section" title="11.4.1.&nbsp;each"><div class="titlepage"><div><div><h3 class="title"><a name="N1465B"></a>11.4.1.&nbsp;<code class="code"><span class="hl-variable">each</span></code></h3></div></div></div><a name="N1465F" class="indexterm"></a><p><a name="ref.stdlib.list.each"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">each</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> every value in a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>, simultaneously.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">each</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">each</span>([]) <span class="hl-operator">=</span> <span class="hl-keyword">stop</span>
<span class="hl-keyword">def</span> <span class="hl-site">each</span>(<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">t</span>) <span class="hl-operator">=</span> <span class="hl-variable">h</span> <span class="hl-combinator">|</span> <span class="hl-site">each</span>(<span class="hl-variable">t</span>)


      </pre></div><div class="section" title="11.4.2.&nbsp;map"><div class="titlepage"><div><div><h3 class="title"><a name="N14676"></a>11.4.2.&nbsp;<code class="code"><span class="hl-variable">map</span></code></h3></div></div></div><a name="N1467A" class="indexterm"></a><p><a name="ref.stdlib.list.map"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">map</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">B</span>]</code></p><p>Apply a function to every element of a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> (in parallel),
<a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishing</a> a list of the results.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">map</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">B</span>]
<span class="hl-keyword">def</span> <span class="hl-site">map</span>(<span class="hl-variable">f</span>,[]) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">map</span>(<span class="hl-variable">f</span>,<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">t</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">h</span>)<span class="hl-operator">:</span><span class="hl-site">map</span>(<span class="hl-variable">f</span>,<span class="hl-variable">t</span>)


      </pre></div><div class="section" title="11.4.3.&nbsp;reverse"><div class="titlepage"><div><div><h3 class="title"><a name="N14692"></a>11.4.3.&nbsp;<code class="code"><span class="hl-variable">reverse</span></code></h3></div></div></div><a name="N14696" class="indexterm"></a><p><a name="ref.stdlib.list.reverse"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">reverse</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the reverse of the given <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">reverse</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">reverse</span>(<span class="hl-variable">l</span>) <span class="hl-operator">=</span> 
  <span class="hl-keyword">def</span> <span class="hl-site">tailrev</span>(<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>] 
  <span class="hl-keyword">def</span> <span class="hl-site">tailrev</span>([],<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-variable">x</span>
  <span class="hl-keyword">def</span> <span class="hl-site">tailrev</span>(<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">t</span>,<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-site">tailrev</span>(<span class="hl-variable">t</span>,<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">x</span>)
  <span class="hl-site">tailrev</span>(<span class="hl-variable">l</span>,[]) 


      </pre></div><div class="section" title="11.4.4.&nbsp;filter"><div class="titlepage"><div><div><h3 class="title"><a name="N146AD"></a>11.4.4.&nbsp;<code class="code"><span class="hl-variable">filter</span></code></h3></div></div></div><a name="N146B1" class="indexterm"></a><p><a name="ref.stdlib.list.filter"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">filter</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> containing only those elements which satisfy the predicate.
The filter is applied to all list elements in parallel.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">filter</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">filter</span>(<span class="hl-variable">p</span>,[]) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">filter</span>(<span class="hl-variable">p</span>,<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">fxs</span> <span class="hl-operator">=</span> <span class="hl-site">filter</span>(<span class="hl-variable">p</span>, <span class="hl-variable">xs</span>)
  <span class="hl-keyword">if</span> <span class="hl-site">p</span>(<span class="hl-variable">x</span>) <span class="hl-keyword">then</span> <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">fxs</span> <span class="hl-keyword">else</span> <span class="hl-variable">fxs</span>


      </pre></div><div class="section" title="11.4.5.&nbsp;head"><div class="titlepage"><div><div><h3 class="title"><a name="N146C8"></a>11.4.5.&nbsp;<code class="code"><span class="hl-variable">head</span></code></h3></div></div></div><a name="N146CC" class="indexterm"></a><p><a name="ref.stdlib.list.head"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">head</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the first element of a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">head</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">head</span>(<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-variable">x</span>


      </pre></div><div class="section" title="11.4.6.&nbsp;tail"><div class="titlepage"><div><div><h3 class="title"><a name="N146E3"></a>11.4.6.&nbsp;<code class="code"><span class="hl-variable">tail</span></code></h3></div></div></div><a name="N146E7" class="indexterm"></a><p><a name="ref.stdlib.list.tail"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">tail</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> all but the first element of a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">tail</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">tail</span>(<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-variable">xs</span>


      </pre></div><div class="section" title="11.4.7.&nbsp;init"><div class="titlepage"><div><div><h3 class="title"><a name="N146FE"></a>11.4.7.&nbsp;<code class="code"><span class="hl-variable">init</span></code></h3></div></div></div><a name="N14702" class="indexterm"></a><p><a name="ref.stdlib.list.init"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">init</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> all but the last element of a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">init</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">init</span>([<span class="hl-variable">x</span>]) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">init</span>(<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-site">init</span>(<span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.8.&nbsp;last"><div class="titlepage"><div><div><h3 class="title"><a name="N14719"></a>11.4.8.&nbsp;<code class="code"><span class="hl-variable">last</span></code></h3></div></div></div><a name="N1471D" class="indexterm"></a><p><a name="ref.stdlib.list.last"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">last</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the last element of a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">last</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">last</span>([<span class="hl-variable">x</span>]) <span class="hl-operator">=</span> <span class="hl-variable">x</span>
<span class="hl-keyword">def</span> <span class="hl-site">last</span>(<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">last</span>(<span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.9.&nbsp;empty"><div class="titlepage"><div><div><h3 class="title"><a name="N14734"></a>11.4.9.&nbsp;<code class="code"><span class="hl-variable">empty</span></code></h3></div></div></div><a name="N14738" class="indexterm"></a><p><a name="ref.stdlib.list.empty"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">empty</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Is the <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> empty?
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">empty</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>
<span class="hl-keyword">def</span> <span class="hl-site">empty</span>([]) <span class="hl-operator">=</span> <span class="hl-literal">true</span>
<span class="hl-keyword">def</span> <span class="hl-site">empty</span>(<span class="hl-variable">_</span>) <span class="hl-operator">=</span> <span class="hl-literal">false</span>


      </pre></div><div class="section" title="11.4.10.&nbsp;index"><div class="titlepage"><div><div><h3 class="title"><a name="N1474C"></a>11.4.10.&nbsp;<code class="code"><span class="hl-variable">index</span></code></h3></div></div></div><a name="N14750" class="indexterm"></a><p><a name="ref.stdlib.list.index"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">index</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the nth element of a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>, counting from 0.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">index</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">index</span>(<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">t</span>, <span class="hl-literal">0</span>) <span class="hl-operator">=</span> <span class="hl-variable">h</span>
<span class="hl-keyword">def</span> <span class="hl-site">index</span>(<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">t</span>, <span class="hl-variable">n</span>) <span class="hl-operator">=</span> <span class="hl-site">index</span>(<span class="hl-variable">t</span>, <span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-literal">1</span>)


      </pre></div><div class="section" title="11.4.11.&nbsp;append"><div class="titlepage"><div><div><h3 class="title"><a name="N14767"></a>11.4.11.&nbsp;<code class="code"><span class="hl-variable">append</span></code></h3></div></div></div><a name="N1476B" class="indexterm"></a><p><a name="ref.stdlib.list.append"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">append</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the first <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> concatenated with the second.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">append</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">append</span>([],<span class="hl-variable">l</span>) <span class="hl-operator">=</span> <span class="hl-variable">l</span>
<span class="hl-keyword">def</span> <span class="hl-site">append</span>(<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">t</span>,<span class="hl-variable">l</span>) <span class="hl-operator">=</span> <span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-site">append</span>(<span class="hl-variable">t</span>,<span class="hl-variable">l</span>)


      </pre></div><div class="section" title="11.4.12.&nbsp;foldl"><div class="titlepage"><div><div><h3 class="title"><a name="N14782"></a>11.4.12.&nbsp;<code class="code"><span class="hl-variable">foldl</span></code></h3></div></div></div><a name="N14786" class="indexterm"></a><p><a name="ref.stdlib.list.foldl"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">foldl</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">B</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span></code></p><p>Reduce a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> using the given left-associative binary operation and initial value.
Given the list <code class="code">[<span class="hl-variable">x1</span>, <span class="hl-variable">x2</span>, <span class="hl-variable">x3</span>, ...]</code> and initial value <code class="code"><span class="hl-variable">x0</span></code>,
returns <code class="code"><span class="hl-site">f</span>(... <span class="hl-site">f</span>(<span class="hl-site">f</span>(<span class="hl-site">f</span>(<span class="hl-variable">x0</span>, <span class="hl-variable">x1</span>), <span class="hl-variable">x2</span>), <span class="hl-variable">x3</span>) ...)</code>
</p><p>Example using <code class="code"><span class="hl-variable">foldl</span></code> to reverse a list:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: [3, 2, 1]</span>
<span class="hl-site">foldl</span>(<span class="hl-site">flip</span>((<span class="hl-operator">:</span>)), [], [<span class="hl-literal">1</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>])</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">foldl</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">B</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>
<span class="hl-keyword">def</span> <span class="hl-site">foldl</span>(<span class="hl-variable">f</span>,<span class="hl-variable">z</span>,[]) <span class="hl-operator">=</span> <span class="hl-variable">z</span>
<span class="hl-keyword">def</span> <span class="hl-site">foldl</span>(<span class="hl-variable">f</span>,<span class="hl-variable">z</span>,<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">foldl</span>(<span class="hl-variable">f</span>,<span class="hl-site">f</span>(<span class="hl-variable">z</span>,<span class="hl-variable">x</span>),<span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.13.&nbsp;foldl1"><div class="titlepage"><div><div><h3 class="title"><a name="N147AC"></a>11.4.13.&nbsp;<code class="code"><span class="hl-variable">foldl1</span></code></h3></div></div></div><a name="N147B0" class="indexterm"></a><p><a name="ref.stdlib.list.foldl1"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">foldl1</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>A special case of <code class="code"><span class="hl-variable">foldl</span></code> which uses the first element of the <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> as the
initial value. If called on an empty list, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">foldl1</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">foldl1</span>(<span class="hl-variable">f</span>,<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">foldl</span>(<span class="hl-variable">f</span>,<span class="hl-variable">x</span>,<span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.14.&nbsp;foldr"><div class="titlepage"><div><div><h3 class="title"><a name="N147CB"></a>11.4.14.&nbsp;<code class="code"><span class="hl-variable">foldr</span></code></h3></div></div></div><a name="N147CF" class="indexterm"></a><p><a name="ref.stdlib.list.foldr"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">foldr</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span></code></p><p>Reduce a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> using the given right-associative binary operation and initial value.
Given the list <code class="code">[..., <span class="hl-variable">x3</span>, <span class="hl-variable">x2</span>, <span class="hl-variable">x1</span>]</code> and initial value <code class="code"><span class="hl-variable">x0</span></code>,
returns <code class="code"><span class="hl-site">f</span>(... <span class="hl-site">f</span>(<span class="hl-variable">x3</span>, <span class="hl-site">f</span>(<span class="hl-variable">x2</span>, <span class="hl-site">f</span>(<span class="hl-variable">x1</span>, <span class="hl-variable">x0</span>))) ...)</code>
</p><p>Example summing the numbers in a list:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: 6</span>
<span class="hl-site">foldr</span>((<span class="hl-operator">+</span>), <span class="hl-literal">0</span>, [<span class="hl-literal">1</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>])</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">foldr</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>, <span class="hl-variable">B</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>
<span class="hl-keyword">def</span> <span class="hl-site">foldr</span>(<span class="hl-variable">f</span>,<span class="hl-variable">z</span>,<span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">foldl</span>(<span class="hl-site">flip</span>(<span class="hl-variable">f</span>),<span class="hl-variable">z</span>,<span class="hl-site">reverse</span>(<span class="hl-variable">xs</span>))
  

      </pre></div><div class="section" title="11.4.15.&nbsp;foldr1"><div class="titlepage"><div><div><h3 class="title"><a name="N147F2"></a>11.4.15.&nbsp;<code class="code"><span class="hl-variable">foldr1</span></code></h3></div></div></div><a name="N147F6" class="indexterm"></a><p><a name="ref.stdlib.list.foldr1"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">foldr1</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>A special case of <code class="code"><span class="hl-variable">foldr</span></code> which uses the last element of the <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> as the
initial value. If called on an empty list, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">foldr1</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">foldr1</span>(<span class="hl-variable">f</span>,<span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">foldl1</span>(<span class="hl-site">flip</span>(<span class="hl-variable">f</span>),<span class="hl-site">reverse</span>(<span class="hl-variable">xs</span>))


      </pre></div><div class="section" title="11.4.16.&nbsp;afold"><div class="titlepage"><div><div><h3 class="title"><a name="N14811"></a>11.4.16.&nbsp;<code class="code"><span class="hl-variable">afold</span></code></h3></div></div></div><a name="N14815" class="indexterm"></a><p><a name="ref.stdlib.list.afold"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">afold</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Reduce a non-empty <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> using the given associative binary operation.
This function reduces independent subexpressions in parallel; the
calls exhibit a balanced tree structure, so the number of sequential 
reductions performed is O(log n).  For expensive reductions, this
is much more efficient than <code class="code"><span class="hl-variable">foldl</span></code> or <code class="code"><span class="hl-variable">foldr</span></code>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">afold</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">afold</span>(<span class="hl-variable">f</span>, [<span class="hl-variable">x</span>]) <span class="hl-operator">=</span> <span class="hl-variable">x</span>
<span class="hl-comment">{- Here's the interesting part -}</span>
<span class="hl-keyword">def</span> <span class="hl-site">afold</span>(<span class="hl-variable">f</span>, <span class="hl-variable">xs</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">def</span> <span class="hl-variable">afold</span>'(<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
  <span class="hl-keyword">def</span> <span class="hl-variable">afold</span>'([]) <span class="hl-operator">=</span> []
  <span class="hl-keyword">def</span> <span class="hl-variable">afold</span>'([<span class="hl-variable">x</span>]) <span class="hl-operator">=</span> [<span class="hl-variable">x</span>]
  <span class="hl-keyword">def</span> <span class="hl-variable">afold</span>'(<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)<span class="hl-operator">:</span><span class="hl-variable">afold</span>'(<span class="hl-variable">xs</span>)
  <span class="hl-site">afold</span>(<span class="hl-variable">f</span>, <span class="hl-variable">afold</span>'(<span class="hl-variable">xs</span>))



      </pre></div><div class="section" title="11.4.17.&nbsp;cfold"><div class="titlepage"><div><div><h3 class="title"><a name="N1482F"></a>11.4.17.&nbsp;<code class="code"><span class="hl-variable">cfold</span></code></h3></div></div></div><a name="N14833" class="indexterm"></a><p><a name="ref.stdlib.list.cfold"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">cfold</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Reduce a non-empty <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> using the given associative and commutative binary operation.
This function opportunistically reduces independent subexpressions in parallel, so the number of
sequential reductions performed is as small as possible.  For expensive reductions, this
is much more efficient than <code class="code"><span class="hl-variable">foldl</span></code> or <code class="code"><span class="hl-variable">foldr</span></code>. In cases
where the reduction does not always take the same amount of time to complete, it 
is also more efficient than <code class="code"><span class="hl-variable">afold</span></code>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">cfold</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">cfold</span>(<span class="hl-variable">f</span>, []) <span class="hl-operator">=</span> <span class="hl-keyword">stop</span>
<span class="hl-keyword">def</span> <span class="hl-site">cfold</span>(<span class="hl-variable">f</span>, [<span class="hl-variable">x</span>]) <span class="hl-operator">=</span> <span class="hl-variable">x</span>
<span class="hl-keyword">def</span> <span class="hl-site">cfold</span>(<span class="hl-variable">f</span>, [<span class="hl-variable">x</span>,<span class="hl-variable">y</span>]) <span class="hl-operator">=</span> <span class="hl-site">f</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)
<span class="hl-keyword">def</span> <span class="hl-site">cfold</span>(<span class="hl-variable">f</span>, <span class="hl-variable">L</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">c</span> <span class="hl-operator">=</span> <span class="hl-site">Channel</span>[<span class="hl-variable">A</span>]()
  <span class="hl-keyword">def</span> <span class="hl-site">work</span>(<span class="hl-variable">Number</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
  <span class="hl-keyword">def</span> <span class="hl-site">work</span>(<span class="hl-variable">i</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">rest</span>) <span class="hl-operator">=</span>
    <span class="hl-variable">c</span>.<span class="hl-site">put</span>(<span class="hl-site">f</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span> <span class="hl-combinator">|</span> <span class="hl-site">work</span>(<span class="hl-variable">i</span><span class="hl-operator">+</span><span class="hl-literal">1</span>, <span class="hl-variable">rest</span>)
  <span class="hl-keyword">def</span> <span class="hl-site">work</span>(<span class="hl-variable">i</span>, [<span class="hl-variable">x</span>]) <span class="hl-operator">=</span> <span class="hl-variable">c</span>.<span class="hl-site">put</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span> <span class="hl-combinator">|</span> <span class="hl-site">work</span>(<span class="hl-variable">i</span><span class="hl-operator">+</span><span class="hl-literal">1</span>, [])
  <span class="hl-keyword">def</span> <span class="hl-site">work</span>(<span class="hl-variable">i</span>, []) <span class="hl-operator">=</span>
    <span class="hl-keyword">if</span> (<span class="hl-variable">i</span> <span class="hl-operator">&lt;:</span> <span class="hl-literal">2</span>) <span class="hl-keyword">then</span> <span class="hl-variable">c</span>.<span class="hl-site">get</span>() 
    <span class="hl-keyword">else</span> <span class="hl-variable">c</span>.<span class="hl-site">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">c</span>.<span class="hl-site">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">y</span><span class="hl-combinator">&gt;</span>
         ( <span class="hl-variable">c</span>.<span class="hl-site">put</span>(<span class="hl-site">f</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span> <span class="hl-combinator">|</span> <span class="hl-site">work</span>(<span class="hl-variable">i</span><span class="hl-operator">-</span><span class="hl-literal">1</span>,[]) ) 
  <span class="hl-site">work</span>(<span class="hl-literal">0</span>, <span class="hl-variable">L</span>)




      </pre></div><div class="section" title="11.4.18.&nbsp;zip"><div class="titlepage"><div><div><h3 class="title"><a name="N14850"></a>11.4.18.&nbsp;<code class="code"><span class="hl-variable">zip</span></code></h3></div></div></div><a name="N14854" class="indexterm"></a><p><a name="ref.stdlib.list.zip"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">zip</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">B</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)]</code></p><p>Combine a <a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">pair</a> of <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">lists</a> into a list of pairs.
The length of the shortest list determines the length of the result.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">zip</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">B</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)]
<span class="hl-keyword">def</span> <span class="hl-site">zip</span>([],<span class="hl-variable">_</span>) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">zip</span>(<span class="hl-variable">_</span>,[]) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">zip</span>(<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>,<span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">ys</span>) <span class="hl-operator">=</span> (<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)<span class="hl-operator">:</span><span class="hl-site">zip</span>(<span class="hl-variable">xs</span>,<span class="hl-variable">ys</span>)


      </pre></div><div class="section" title="11.4.19.&nbsp;unzip"><div class="titlepage"><div><div><h3 class="title"><a name="N1486C"></a>11.4.19.&nbsp;<code class="code"><span class="hl-variable">unzip</span></code></h3></div></div></div><a name="N14870" class="indexterm"></a><p><a name="ref.stdlib.list.unzip"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">unzip</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)]) <span class="hl-operator">:</span><span class="hl-operator">:</span> (<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">B</span>])</code></p><p>Split a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> of <a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">pairs</a> into a pair of lists.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">unzip</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)]) <span class="hl-operator">:</span><span class="hl-operator">:</span> (<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">B</span>])
<span class="hl-keyword">def</span> <span class="hl-site">unzip</span>([]) <span class="hl-operator">=</span> ([],[])
<span class="hl-keyword">def</span> <span class="hl-site">unzip</span>((<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)<span class="hl-operator">:</span><span class="hl-variable">z</span>) <span class="hl-operator">=</span> (<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>,<span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">ys</span>) <span class="hl-combinator">&lt;</span>(<span class="hl-variable">xs</span>,<span class="hl-variable">ys</span>)<span class="hl-combinator">&lt;</span> <span class="hl-site">unzip</span>(<span class="hl-variable">z</span>)



      </pre></div><div class="section" title="11.4.20.&nbsp;concat"><div class="titlepage"><div><div><h3 class="title"><a name="N14888"></a>11.4.20.&nbsp;<code class="code"><span class="hl-variable">concat</span></code></h3></div></div></div><a name="N1488C" class="indexterm"></a><p><a name="ref.stdlib.list.concat"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">concat</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-site">List</span>[<span class="hl-variable">A</span>]]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Concatenate a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> of lists into a single list.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">concat</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-site">List</span>[<span class="hl-variable">A</span>]]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">concat</span>([]) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">concat</span>(<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">t</span>) <span class="hl-operator">=</span> <span class="hl-site">append</span>(<span class="hl-variable">h</span>,<span class="hl-site">concat</span>(<span class="hl-variable">t</span>))



      </pre></div><div class="section" title="11.4.21.&nbsp;length"><div class="titlepage"><div><div><h3 class="title"><a name="N148A0"></a>11.4.21.&nbsp;<code class="code"><span class="hl-variable">length</span></code></h3></div></div></div><a name="N148A4" class="indexterm"></a><p><a name="ref.stdlib.list.length"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">length</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the number of elements in a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">length</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span>
<span class="hl-keyword">def</span> <span class="hl-site">length</span>([]) <span class="hl-operator">=</span> <span class="hl-literal">0</span>
<span class="hl-keyword">def</span> <span class="hl-site">length</span>(<span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">t</span>) <span class="hl-operator">=</span> <span class="hl-literal">1</span> <span class="hl-operator">+</span> <span class="hl-site">length</span>(<span class="hl-variable">t</span>)


      </pre></div><div class="section" title="11.4.22.&nbsp;take"><div class="titlepage"><div><div><h3 class="title"><a name="N148BB"></a>11.4.22.&nbsp;<code class="code"><span class="hl-variable">take</span></code></h3></div></div></div><a name="N148BF" class="indexterm"></a><p><a name="ref.stdlib.list.take"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">take</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Integer</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Given a number <code class="code"><span class="hl-variable">n</span></code> and a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> <code class="code"><span class="hl-variable">l</span></code>,
<a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a> a list of the first <code class="code"><span class="hl-variable">n</span></code> elements of <code class="code"><span class="hl-variable">l</span></code>.
If <code class="code"><span class="hl-variable">n</span></code> exceeds the length of <code class="code"><span class="hl-variable">l</span></code>,
or <code class="code"><span class="hl-variable">n</span> &lt; <span class="hl-literal">0</span></code>, take <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> with an error.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">take</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Integer</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">take</span>(<span class="hl-literal">0</span>, <span class="hl-variable">_</span>) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">take</span>(<span class="hl-variable">n</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">if</span> <span class="hl-variable">n</span> <span class="hl-operator">:&gt;</span> <span class="hl-literal">0</span> <span class="hl-keyword">then</span> <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-site">take</span>(<span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-literal">1</span>, <span class="hl-variable">xs</span>)
  <span class="hl-keyword">else</span> <span class="hl-site">Error</span>(<span class="hl-literal">"Cannot take("</span> <span class="hl-operator">+</span> <span class="hl-variable">n</span> <span class="hl-operator">+</span> <span class="hl-literal">", _)"</span>)


      </pre></div><div class="section" title="11.4.23.&nbsp;drop"><div class="titlepage"><div><div><h3 class="title"><a name="N148F0"></a>11.4.23.&nbsp;<code class="code"><span class="hl-variable">drop</span></code></h3></div></div></div><a name="N148F4" class="indexterm"></a><p><a name="ref.stdlib.list.drop"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">drop</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Integer</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Given a number <code class="code"><span class="hl-variable">n</span></code> and a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> <code class="code"><span class="hl-variable">l</span></code>,
<a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a> a list of the elements of <code class="code"><span class="hl-variable">l</span></code> after the first <code class="code"><span class="hl-variable">n</span></code>.
If <code class="code"><span class="hl-variable">n</span></code> exceeds the length of <code class="code"><span class="hl-variable">l</span></code>,
or <code class="code"><span class="hl-variable">n</span> &lt; <span class="hl-literal">0</span></code>, drop <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> with an error.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">drop</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Integer</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">drop</span>(<span class="hl-literal">0</span>, <span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-variable">xs</span>
<span class="hl-keyword">def</span> <span class="hl-site">drop</span>(<span class="hl-variable">n</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">if</span> <span class="hl-variable">n</span> <span class="hl-operator">:&gt;</span> <span class="hl-literal">0</span> <span class="hl-keyword">then</span> <span class="hl-site">drop</span>(<span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-literal">1</span>, <span class="hl-variable">xs</span>)
  <span class="hl-keyword">else</span> <span class="hl-site">Error</span>(<span class="hl-literal">"Cannot drop("</span> <span class="hl-operator">+</span> <span class="hl-variable">n</span> <span class="hl-operator">+</span> <span class="hl-literal">", _)"</span>)


      </pre></div><div class="section" title="11.4.24.&nbsp;member"><div class="titlepage"><div><div><h3 class="title"><a name="N14925"></a>11.4.24.&nbsp;<code class="code"><span class="hl-variable">member</span></code></h3></div></div></div><a name="N14929" class="indexterm"></a><p><a name="ref.stdlib.list.member"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">member</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> true if the given item is a member of the given <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>, and false
otherwise.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">member</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>
<span class="hl-keyword">def</span> <span class="hl-site">member</span>(<span class="hl-variable">item</span>, []) <span class="hl-operator">=</span> <span class="hl-literal">false</span>
<span class="hl-keyword">def</span> <span class="hl-site">member</span>(<span class="hl-variable">item</span>, <span class="hl-variable">h</span><span class="hl-operator">:</span><span class="hl-variable">t</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">if</span> <span class="hl-variable">item</span> <span class="hl-operator">=</span> <span class="hl-variable">h</span> <span class="hl-keyword">then</span> <span class="hl-literal">true</span>
  <span class="hl-keyword">else</span> <span class="hl-site">member</span>(<span class="hl-variable">item</span>, <span class="hl-variable">t</span>)
  

      </pre></div><div class="section" title="11.4.25.&nbsp;merge"><div class="titlepage"><div><div><h3 class="title"><a name="N14940"></a>11.4.25.&nbsp;<code class="code"><span class="hl-variable">merge</span></code></h3></div></div></div><a name="N14944" class="indexterm"></a><p><a name="ref.stdlib.list.merge"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">merge</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Merge two sorted <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">lists</a>.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: [1, 2, 2, 3, 4, 5]</span>
<span class="hl-site">merge</span>([<span class="hl-literal">1</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>], [<span class="hl-literal">2</span>,<span class="hl-literal">4</span>,<span class="hl-literal">5</span>])</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">merge</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">merge</span>(<span class="hl-variable">xs</span>,<span class="hl-variable">ys</span>) <span class="hl-operator">=</span> <span class="hl-site">mergeBy</span>((<span class="hl-operator">&lt;:</span>), <span class="hl-variable">xs</span>, <span class="hl-variable">ys</span>)


      </pre></div><div class="section" title="11.4.26.&nbsp;mergeBy"><div class="titlepage"><div><div><h3 class="title"><a name="N1495E"></a>11.4.26.&nbsp;<code class="code"><span class="hl-variable">mergeBy</span></code></h3></div></div></div><a name="N14962" class="indexterm"></a><p><a name="ref.stdlib.list.mergeBy"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">mergeBy</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Merge two <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">lists</a> using the given less-than relation.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">mergeBy</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>,
               <span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">mergeBy</span>(<span class="hl-variable">lt</span>, <span class="hl-variable">xs</span>, []) <span class="hl-operator">=</span> <span class="hl-variable">xs</span>
<span class="hl-keyword">def</span> <span class="hl-site">mergeBy</span>(<span class="hl-variable">lt</span>, [], <span class="hl-variable">ys</span>) <span class="hl-operator">=</span> <span class="hl-variable">ys</span>
<span class="hl-keyword">def</span> <span class="hl-site">mergeBy</span>(<span class="hl-variable">lt</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>, <span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">ys</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">if</span> <span class="hl-site">lt</span>(<span class="hl-variable">y</span>,<span class="hl-variable">x</span>) <span class="hl-keyword">then</span> <span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-site">mergeBy</span>(<span class="hl-variable">lt</span>,<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>,<span class="hl-variable">ys</span>)
  <span class="hl-keyword">else</span> <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-site">mergeBy</span>(<span class="hl-variable">lt</span>,<span class="hl-variable">xs</span>,<span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">ys</span>)


      </pre></div><div class="section" title="11.4.27.&nbsp;sort"><div class="titlepage"><div><div><h3 class="title"><a name="N14976"></a>11.4.27.&nbsp;<code class="code"><span class="hl-variable">sort</span></code></h3></div></div></div><a name="N1497A" class="indexterm"></a><p><a name="ref.stdlib.list.sort"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">sort</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Sort a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: [1, 2, 3]</span>
<span class="hl-site">sort</span>([<span class="hl-literal">1</span>,<span class="hl-literal">3</span>,<span class="hl-literal">2</span>])</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">sort</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">sort</span>(<span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">sortBy</span>((<span class="hl-operator">&lt;:</span>), <span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.28.&nbsp;sortBy"><div class="titlepage"><div><div><h3 class="title"><a name="N14994"></a>11.4.28.&nbsp;<code class="code"><span class="hl-variable">sortBy</span></code></h3></div></div></div><a name="N14998" class="indexterm"></a><p><a name="ref.stdlib.list.sortBy"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">sortBy</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Sort a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> using the given less-than relation.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">sortBy</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">sortBy</span>(<span class="hl-variable">lt</span>, []) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">sortBy</span>(<span class="hl-variable">lt</span>, [<span class="hl-variable">x</span>]) <span class="hl-operator">=</span> [<span class="hl-variable">x</span>]
<span class="hl-keyword">def</span> <span class="hl-site">sortBy</span>(<span class="hl-variable">lt</span>, <span class="hl-variable">xs</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">half</span> <span class="hl-operator">=</span> <span class="hl-site">Floor</span>(<span class="hl-site">length</span>(<span class="hl-variable">xs</span>)<span class="hl-operator">/</span><span class="hl-literal">2</span>)
  <span class="hl-keyword">val</span> <span class="hl-variable">front</span> <span class="hl-operator">=</span> <span class="hl-site">take</span>(<span class="hl-variable">half</span>, <span class="hl-variable">xs</span>)
  <span class="hl-keyword">val</span> <span class="hl-variable">back</span> <span class="hl-operator">=</span> <span class="hl-site">drop</span>(<span class="hl-variable">half</span>, <span class="hl-variable">xs</span>)
  <span class="hl-site">mergeBy</span>(<span class="hl-variable">lt</span>, <span class="hl-site">sortBy</span>(<span class="hl-variable">lt</span>, <span class="hl-variable">front</span>), <span class="hl-site">sortBy</span>(<span class="hl-variable">lt</span>, <span class="hl-variable">back</span>))
 

      </pre></div><div class="section" title="11.4.29.&nbsp;mergeUnique"><div class="titlepage"><div><div><h3 class="title"><a name="N149AC"></a>11.4.29.&nbsp;<code class="code"><span class="hl-variable">mergeUnique</span></code></h3></div></div></div><a name="N149B0" class="indexterm"></a><p><a name="ref.stdlib.list.mergeUnique"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">mergeUnique</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Merge two sorted <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">lists</a>, discarding duplicates.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: [1, 2, 3, 4, 5]</span>
<span class="hl-site">mergeUnique</span>([<span class="hl-literal">1</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>], [<span class="hl-literal">2</span>,<span class="hl-literal">4</span>,<span class="hl-literal">5</span>])</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">mergeUnique</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">mergeUnique</span>(<span class="hl-variable">xs</span>,<span class="hl-variable">ys</span>) <span class="hl-operator">=</span> <span class="hl-site">mergeUniqueBy</span>((<span class="hl-operator">=</span>), (<span class="hl-operator">&lt;:</span>), <span class="hl-variable">xs</span>, <span class="hl-variable">ys</span>)


      </pre></div><div class="section" title="11.4.30.&nbsp;mergeUniqueBy"><div class="titlepage"><div><div><h3 class="title"><a name="N149CA"></a>11.4.30.&nbsp;<code class="code"><span class="hl-variable">mergeUniqueBy</span></code></h3></div></div></div><a name="N149CE" class="indexterm"></a><p><a name="ref.stdlib.list.mergeUniqueBy"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">mergeUniqueBy</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Merge two <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">lists</a>, discarding duplicates, using the given equality and less-than relations.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">mergeUniqueBy</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>,
                     <span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>,
                      <span class="hl-site">List</span>[<span class="hl-variable">A</span>], <span class="hl-site">List</span>[<span class="hl-variable">A</span>])
  <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">mergeUniqueBy</span>(<span class="hl-variable">eq</span>, <span class="hl-variable">lt</span>, <span class="hl-variable">xs</span>, []) <span class="hl-operator">=</span> <span class="hl-variable">xs</span>
<span class="hl-keyword">def</span> <span class="hl-site">mergeUniqueBy</span>(<span class="hl-variable">eq</span>, <span class="hl-variable">lt</span>, [], <span class="hl-variable">ys</span>) <span class="hl-operator">=</span> <span class="hl-variable">ys</span>
<span class="hl-keyword">def</span> <span class="hl-site">mergeUniqueBy</span>(<span class="hl-variable">eq</span>, <span class="hl-variable">lt</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>, <span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">ys</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">if</span> <span class="hl-site">eq</span>(<span class="hl-variable">y</span>,<span class="hl-variable">x</span>) <span class="hl-keyword">then</span> <span class="hl-site">mergeUniqueBy</span>(<span class="hl-variable">eq</span>, <span class="hl-variable">lt</span>, <span class="hl-variable">xs</span>, <span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">ys</span>)
  <span class="hl-keyword">else</span> <span class="hl-keyword">if</span> <span class="hl-site">lt</span>(<span class="hl-variable">y</span>,<span class="hl-variable">x</span>) <span class="hl-keyword">then</span> <span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-site">mergeUniqueBy</span>(<span class="hl-variable">eq</span>,<span class="hl-variable">lt</span>,<span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>,<span class="hl-variable">ys</span>)
  <span class="hl-keyword">else</span> <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-site">mergeUniqueBy</span>(<span class="hl-variable">eq</span>,<span class="hl-variable">lt</span>,<span class="hl-variable">xs</span>,<span class="hl-variable">y</span><span class="hl-operator">:</span><span class="hl-variable">ys</span>)


      </pre></div><div class="section" title="11.4.31.&nbsp;sortUnique"><div class="titlepage"><div><div><h3 class="title"><a name="N149E2"></a>11.4.31.&nbsp;<code class="code"><span class="hl-variable">sortUnique</span></code></h3></div></div></div><a name="N149E6" class="indexterm"></a><p><a name="ref.stdlib.list.sortUnique"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">sortUnique</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Sort a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>, discarding duplicates.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: [1, 2, 3]</span>
<span class="hl-site">sortUnique</span>([<span class="hl-literal">1</span>,<span class="hl-literal">3</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>])</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">sortUnique</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">sortUnique</span>(<span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">sortUniqueBy</span>((<span class="hl-operator">=</span>), (<span class="hl-operator">&lt;:</span>), <span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.32.&nbsp;sortUniqueBy"><div class="titlepage"><div><div><h3 class="title"><a name="N14A00"></a>11.4.32.&nbsp;<code class="code"><span class="hl-variable">sortUniqueBy</span></code></h3></div></div></div><a name="N14A04" class="indexterm"></a><p><a name="ref.stdlib.list.sortUniqueBy"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">sortUniqueBy</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Sort a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>, discarding duplicates, using the given equality and less-than relations.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">sortUniqueBy</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>,
                    <span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>,
                    <span class="hl-site">List</span>[<span class="hl-variable">A</span>])
  <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">sortUniqueBy</span>(<span class="hl-variable">eq</span>, <span class="hl-variable">lt</span>, []) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">sortUniqueBy</span>(<span class="hl-variable">eq</span>, <span class="hl-variable">lt</span>, [<span class="hl-variable">x</span>]) <span class="hl-operator">=</span> [<span class="hl-variable">x</span>]
<span class="hl-keyword">def</span> <span class="hl-site">sortUniqueBy</span>(<span class="hl-variable">eq</span>, <span class="hl-variable">lt</span>, <span class="hl-variable">xs</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">half</span> <span class="hl-operator">=</span> <span class="hl-site">Floor</span>(<span class="hl-site">length</span>(<span class="hl-variable">xs</span>)<span class="hl-operator">/</span><span class="hl-literal">2</span>)
  <span class="hl-keyword">val</span> <span class="hl-variable">front</span> <span class="hl-operator">=</span> <span class="hl-site">take</span>(<span class="hl-variable">half</span>, <span class="hl-variable">xs</span>)
  <span class="hl-keyword">val</span> <span class="hl-variable">back</span> <span class="hl-operator">=</span> <span class="hl-site">drop</span>(<span class="hl-variable">half</span>, <span class="hl-variable">xs</span>)
  <span class="hl-site">mergeUniqueBy</span>(<span class="hl-variable">eq</span>, <span class="hl-variable">lt</span>,
    <span class="hl-site">sortUniqueBy</span>(<span class="hl-variable">eq</span>, <span class="hl-variable">lt</span>, <span class="hl-variable">front</span>),
    <span class="hl-site">sortUniqueBy</span>(<span class="hl-variable">eq</span>, <span class="hl-variable">lt</span>, <span class="hl-variable">back</span>))
  

      </pre></div><div class="section" title="11.4.33.&nbsp;group"><div class="titlepage"><div><div><h3 class="title"><a name="N14A18"></a>11.4.33.&nbsp;<code class="code"><span class="hl-variable">group</span></code></h3></div></div></div><a name="N14A1C" class="indexterm"></a><p><a name="ref.stdlib.list.group"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">group</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-site">List</span>[<span class="hl-variable">B</span>])]</code></p><p>Given a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> of <a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">pairs</a>, group together the second
elements of consecutive pairs with equal first elements.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: [(1, [1, 2]), (2, [3]), (3, [4]), (1, [3])]</span>
<span class="hl-site">group</span>([(<span class="hl-literal">1</span>,<span class="hl-literal">1</span>), (<span class="hl-literal">1</span>,<span class="hl-literal">2</span>), (<span class="hl-literal">2</span>,<span class="hl-literal">3</span>), (<span class="hl-literal">3</span>,<span class="hl-literal">4</span>), (<span class="hl-literal">1</span>,<span class="hl-literal">3</span>)])</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">group</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-site">List</span>[<span class="hl-variable">B</span>])]
<span class="hl-keyword">def</span> <span class="hl-site">group</span>(<span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">groupBy</span>((<span class="hl-operator">=</span>), <span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.34.&nbsp;groupBy"><div class="titlepage"><div><div><h3 class="title"><a name="N14A3A"></a>11.4.34.&nbsp;<code class="code"><span class="hl-variable">groupBy</span></code></h3></div></div></div><a name="N14A3E" class="indexterm"></a><p><a name="ref.stdlib.list.groupBy"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">groupBy</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-site">List</span>[<span class="hl-variable">B</span>])]</code></p><p>Given a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> of <a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">pairs</a>, group together the second
elements of consecutive pairs with equal first elements,
using the given equality relation.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">groupBy</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>,
                 <span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)])
  <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-site">List</span>[<span class="hl-variable">B</span>])]
<span class="hl-keyword">def</span> <span class="hl-site">groupBy</span>(<span class="hl-variable">eq</span>, []) <span class="hl-operator">=</span> []
<span class="hl-keyword">def</span> <span class="hl-site">groupBy</span>(<span class="hl-variable">eq</span>, (<span class="hl-variable">k</span>,<span class="hl-variable">v</span>)<span class="hl-operator">:</span><span class="hl-variable">kvs</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">def</span> <span class="hl-site">helper</span>(<span class="hl-variable">A</span>, <span class="hl-site">List</span>[<span class="hl-variable">B</span>], <span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[(<span class="hl-variable">A</span>,<span class="hl-site">List</span>[<span class="hl-variable">B</span>])]
  <span class="hl-keyword">def</span> <span class="hl-site">helper</span>(<span class="hl-variable">k</span>,<span class="hl-variable">vs</span>, []) <span class="hl-operator">=</span> [(<span class="hl-variable">k</span>,<span class="hl-variable">vs</span>)]
  <span class="hl-keyword">def</span> <span class="hl-site">helper</span>(<span class="hl-variable">k</span>,<span class="hl-variable">vs</span>, (<span class="hl-variable">k2</span>,<span class="hl-variable">v</span>)<span class="hl-operator">:</span><span class="hl-variable">kvs</span>) <span class="hl-operator">=</span>
    <span class="hl-keyword">if</span> <span class="hl-site">eq</span>(<span class="hl-variable">k2</span>,<span class="hl-variable">k</span>) <span class="hl-keyword">then</span> <span class="hl-site">helper</span>(<span class="hl-variable">k</span>, <span class="hl-variable">v</span><span class="hl-operator">:</span><span class="hl-variable">vs</span>, <span class="hl-variable">kvs</span>)
    <span class="hl-keyword">else</span> (<span class="hl-variable">k</span>,<span class="hl-variable">vs</span>)<span class="hl-operator">:</span><span class="hl-site">helper</span>(<span class="hl-variable">k2</span>, [<span class="hl-variable">v</span>], <span class="hl-variable">kvs</span>)
  <span class="hl-site">helper</span>(<span class="hl-variable">k</span>,[<span class="hl-variable">v</span>], <span class="hl-variable">kvs</span>)
 

      </pre></div><div class="section" title="11.4.35.&nbsp;rangeBy"><div class="titlepage"><div><div><h3 class="title"><a name="N14A56"></a>11.4.35.&nbsp;<code class="code"><span class="hl-variable">rangeBy</span></code></h3></div></div></div><a name="N14A5A" class="indexterm"></a><p><a name="ref.stdlib.list.rangeBy"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">rangeBy</span>(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">Number</span>]</code></p><p><code class="code"><span class="hl-site">rangeBy</span>(<span class="hl-variable">low</span>, <span class="hl-variable">high</span>, <span class="hl-variable">skip</span>)</code> returns a sorted <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> of
numbers <code class="code"><span class="hl-variable">n</span></code> which satisfy <code class="code"><span class="hl-variable">n</span> <span class="hl-operator">=</span> <span class="hl-variable">low</span> <span class="hl-operator">+</span> <span class="hl-variable">skip</span><span class="hl-operator">*</span><span class="hl-variable">i</span></code> (for some
integer <code class="code"><span class="hl-variable">i</span></code>), <code class="code"><span class="hl-variable">n</span> <span class="hl-operator">&gt;=</span> <span class="hl-variable">low</span></code>, and <code class="code"><span class="hl-variable">n</span> &lt; <span class="hl-variable">high</span></code>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">rangeBy</span>(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">Number</span>]
<span class="hl-keyword">def</span> <span class="hl-site">rangeBy</span>(<span class="hl-variable">low</span>, <span class="hl-variable">high</span>, <span class="hl-variable">skip</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">if</span> <span class="hl-variable">low</span> <span class="hl-operator">&lt;:</span> <span class="hl-variable">high</span>
  <span class="hl-keyword">then</span> <span class="hl-variable">low</span><span class="hl-operator">:</span><span class="hl-site">rangeBy</span>(<span class="hl-variable">low</span><span class="hl-operator">+</span><span class="hl-variable">skip</span>, <span class="hl-variable">high</span>, <span class="hl-variable">skip</span>)
  <span class="hl-keyword">else</span> []
 

      </pre></div><div class="section" title="11.4.36.&nbsp;range"><div class="titlepage"><div><div><h3 class="title"><a name="N14A7F"></a>11.4.36.&nbsp;<code class="code"><span class="hl-variable">range</span></code></h3></div></div></div><a name="N14A83" class="indexterm"></a><p><a name="ref.stdlib.list.range"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">range</span>(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">Number</span>]</code></p><p>Generate a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> of numbers in the given half-open range.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">range</span>(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">Number</span>]
<span class="hl-keyword">def</span> <span class="hl-site">range</span>(<span class="hl-variable">low</span>, <span class="hl-variable">high</span>) <span class="hl-operator">=</span> <span class="hl-site">rangeBy</span>(<span class="hl-variable">low</span>, <span class="hl-variable">high</span>, <span class="hl-literal">1</span>)


      </pre></div><div class="section" title="11.4.37.&nbsp;any"><div class="titlepage"><div><div><h3 class="title"><a name="N14A97"></a>11.4.37.&nbsp;<code class="code"><span class="hl-variable">any</span></code></h3></div></div></div><a name="N14A9B" class="indexterm"></a><p><a name="ref.stdlib.list.any"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">any</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> true if any of the elements of the <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> match the predicate, and false otherwise.
The predicate is applied to all elements of the list in parallel; the result
is returned as soon as it is known and any unnecessary execution of the predicate
<a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">killed</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">any</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>
<span class="hl-keyword">def</span> <span class="hl-site">any</span>(<span class="hl-variable">p</span>, []) <span class="hl-operator">=</span> <span class="hl-literal">false</span>
<span class="hl-keyword">def</span> <span class="hl-site">any</span>(<span class="hl-variable">p</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span>
  <span class="hl-site">Let</span>(
    <span class="hl-keyword">val</span> <span class="hl-variable">b1</span> <span class="hl-operator">=</span> <span class="hl-site">p</span>(<span class="hl-variable">x</span>)
    <span class="hl-keyword">val</span> <span class="hl-variable">b2</span> <span class="hl-operator">=</span> <span class="hl-site">any</span>(<span class="hl-variable">p</span>, <span class="hl-variable">xs</span>)
    <span class="hl-site">Ift</span>(<span class="hl-variable">b1</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span> <span class="hl-combinator">|</span> <span class="hl-site">Ift</span>(<span class="hl-variable">b2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span> <span class="hl-combinator">|</span> (<span class="hl-variable">b1</span> <span class="hl-operator">||</span> <span class="hl-variable">b2</span>)
  )
  

      </pre></div><div class="section" title="11.4.38.&nbsp;all"><div class="titlepage"><div><div><h3 class="title"><a name="N14AB6"></a>11.4.38.&nbsp;<code class="code"><span class="hl-variable">all</span></code></h3></div></div></div><a name="N14ABA" class="indexterm"></a><p><a name="ref.stdlib.list.all"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">all</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> true if all of the elements of the <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> match the predicate, and false otherwise.
The predicate is applied to all elements of the list in parallel; the result
is returned as soon as it is known and any unnecessary execution of the predicate
<a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">killed</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">all</span>[<span class="hl-variable">A</span>](<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>
<span class="hl-keyword">def</span> <span class="hl-site">all</span>(<span class="hl-variable">p</span>, []) <span class="hl-operator">=</span> <span class="hl-literal">true</span>
<span class="hl-keyword">def</span> <span class="hl-site">all</span>(<span class="hl-variable">p</span>, <span class="hl-variable">x</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span>
  <span class="hl-site">Let</span>(
    <span class="hl-keyword">val</span> <span class="hl-variable">b1</span> <span class="hl-operator">=</span> <span class="hl-site">p</span>(<span class="hl-variable">x</span>)
    <span class="hl-keyword">val</span> <span class="hl-variable">b2</span> <span class="hl-operator">=</span> <span class="hl-site">all</span>(<span class="hl-variable">p</span>, <span class="hl-variable">xs</span>)
    <span class="hl-site">Iff</span>(<span class="hl-variable">b1</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">false</span> <span class="hl-combinator">|</span> <span class="hl-site">Iff</span>(<span class="hl-variable">b2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">false</span> <span class="hl-combinator">|</span> (<span class="hl-variable">b1</span> <span class="hl-operator">&amp;&amp;</span> <span class="hl-variable">b2</span>)
  )


      </pre></div><div class="section" title="11.4.39.&nbsp;sum"><div class="titlepage"><div><div><h3 class="title"><a name="N14AD5"></a>11.4.39.&nbsp;<code class="code"><span class="hl-variable">sum</span></code></h3></div></div></div><a name="N14AD9" class="indexterm"></a><p><a name="ref.stdlib.list.sum"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">sum</span>(<span class="hl-site">List</span>[<span class="hl-variable">Number</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the sum of all numbers in a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
The sum of an empty list is 0.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">sum</span>(<span class="hl-site">List</span>[<span class="hl-variable">Number</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>
<span class="hl-keyword">def</span> <span class="hl-site">sum</span>(<span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">foldl</span>(
  (<span class="hl-operator">+</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span> (<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>,
  <span class="hl-literal">0</span>, <span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.40.&nbsp;product"><div class="titlepage"><div><div><h3 class="title"><a name="N14AF0"></a>11.4.40.&nbsp;<code class="code"><span class="hl-variable">product</span></code></h3></div></div></div><a name="N14AF4" class="indexterm"></a><p><a name="ref.stdlib.list.product"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">product</span>(<span class="hl-site">List</span>[<span class="hl-variable">Number</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the product of all numbers in a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
The product of an empty list is 1.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">product</span>(<span class="hl-site">List</span>[<span class="hl-variable">Number</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>
<span class="hl-keyword">def</span> <span class="hl-site">product</span>(<span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">foldl</span>(
  (<span class="hl-operator">*</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span> (<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span>,
  <span class="hl-literal">1</span>, <span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.41.&nbsp;and"><div class="titlepage"><div><div><h3 class="title"><a name="N14B0B"></a>11.4.41.&nbsp;<code class="code"><span class="hl-variable">and</span></code></h3></div></div></div><a name="N14B0F" class="indexterm"></a><p><a name="ref.stdlib.list.and"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">and</span>(<span class="hl-site">List</span>[<span class="hl-variable">Boolean</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the boolean conjunction of all boolean values in the <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
The conjunction of an empty list is <code class="code"><span class="hl-literal">true</span></code>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">and</span>(<span class="hl-site">List</span>[<span class="hl-variable">Boolean</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>
<span class="hl-keyword">def</span> <span class="hl-site">and</span>([]) <span class="hl-operator">=</span> <span class="hl-literal">true</span>
<span class="hl-keyword">def</span> <span class="hl-site">and</span>(<span class="hl-literal">false</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-literal">false</span>
<span class="hl-keyword">def</span> <span class="hl-site">and</span>(<span class="hl-literal">true</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">and</span>(<span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.42.&nbsp;or"><div class="titlepage"><div><div><h3 class="title"><a name="N14B29"></a>11.4.42.&nbsp;<code class="code"><span class="hl-variable">or</span></code></h3></div></div></div><a name="N14B2D" class="indexterm"></a><p><a name="ref.stdlib.list.or"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">or</span>(<span class="hl-site">List</span>[<span class="hl-variable">Boolean</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the boolean disjunction of all boolean values in the <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
The disjunction of an empty list is <code class="code"><span class="hl-literal">false</span></code>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">or</span>(<span class="hl-site">List</span>[<span class="hl-variable">Boolean</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span>
<span class="hl-keyword">def</span> <span class="hl-site">or</span>([]) <span class="hl-operator">=</span> <span class="hl-literal">false</span>
<span class="hl-keyword">def</span> <span class="hl-site">or</span>(<span class="hl-literal">true</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-literal">true</span>
<span class="hl-keyword">def</span> <span class="hl-site">or</span>(<span class="hl-literal">false</span><span class="hl-operator">:</span><span class="hl-variable">xs</span>) <span class="hl-operator">=</span> <span class="hl-site">or</span>(<span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.43.&nbsp;minimum"><div class="titlepage"><div><div><h3 class="title"><a name="N14B47"></a>11.4.43.&nbsp;<code class="code"><span class="hl-variable">minimum</span></code></h3></div></div></div><a name="N14B4B" class="indexterm"></a><p><a name="ref.stdlib.list.minimum"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">minimum</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the minimum element of a non-empty <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">minimum</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">minimum</span>(<span class="hl-variable">xs</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">def</span> <span class="hl-site">minA</span>(<span class="hl-variable">x</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>, <span class="hl-variable">y</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">=</span> <span class="hl-site">min</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)
  <span class="hl-site">foldl1</span>(<span class="hl-variable">minA</span>, <span class="hl-variable">xs</span>)


      </pre></div><div class="section" title="11.4.44.&nbsp;maximum"><div class="titlepage"><div><div><h3 class="title"><a name="N14B62"></a>11.4.44.&nbsp;<code class="code"><span class="hl-variable">maximum</span></code></h3></div></div></div><a name="N14B66" class="indexterm"></a><p><a name="ref.stdlib.list.maximum"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">maximum</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the maximum element of a non-empty <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">maximum</span>[<span class="hl-variable">A</span>](<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">maximum</span>(<span class="hl-variable">xs</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">def</span> <span class="hl-site">maxA</span>(<span class="hl-variable">x</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>, <span class="hl-variable">y</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">=</span> <span class="hl-site">max</span>(<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)
  <span class="hl-site">foldl1</span>(<span class="hl-variable">maxA</span>, <span class="hl-variable">xs</span>)

      </pre></div></div><div class="section" title="11.5.&nbsp;reflect: Metalanguage operations."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.stdlib.reflect"></a>11.5.&nbsp;reflect: Metalanguage operations.</h2></div></div></div><p>Metalanguage operations.
</p><div class="section" title="11.5.1.&nbsp;MakeSite"><div class="titlepage"><div><div><h3 class="title"><a name="N14B87"></a>11.5.1.&nbsp;<code class="code"><span class="hl-variable">MakeSite</span></code></h3></div></div></div><a name="N14B8B" class="indexterm"></a><p><a name="ref.stdlib.reflect.MakeSite"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">MakeSite</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>This site promotes an Orc <a class="link" href="#ref.data.closure" title="1.9.&nbsp;Closures">closure</a> to a site; 
when the site is called, the closure is executed on those arguments. 
This execution behaves like a site call; in particular, the following four properties hold:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The site, like all sites, is <a class="link" href="#ref.expressions.call.site" title="2.4.2.&nbsp;Site Calls">strict</a> in its arguments.</p></li><li class="listitem"><p>The site returns only the first value <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">published</a> by the executed closure. The closure continues to run, but its subsequent publications are discarded. </p></li><li class="listitem"><p>The execution of the closure is protected from being <a class="link" href="#ref.concepts.states.kill" title="8.3.4.&nbsp;Killed">killed</a>. If the site call is killed, the closure still runs, and its publications are simply ignored. </p></li><li class="listitem"><p>If the execution of the closure <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a>, so does the site call. </p></li></ul></div><p>
</p><p>The typical usage of <code class="code"><span class="hl-variable">MakeSite</span></code> looks like:
</p><pre class="programlisting">
<span class="hl-keyword">def</span> <span class="hl-site">foo</span>(...) <span class="hl-operator">=</span> ...
<span class="hl-keyword">val</span> <span class="hl-variable">Foo</span> <span class="hl-operator">=</span> <span class="hl-site">MakeSite</span>(<span class="hl-variable">foo</span>)</pre><p>
</p><p>The typing of <code class="code"><span class="hl-variable">MakeSite</span></code> enforces the additional condition that the type A is a <a class="link" href="#ref.data.closure.type" title="1.9.1.&nbsp;Type">function type</a>.
</p></div></div><div class="section" title="11.6.&nbsp;state: General-purpose supplemental data structures."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.stdlib.state"></a>11.6.&nbsp;state: General-purpose supplemental data structures.</h2></div></div></div><p>General-purpose supplemental data structures.
</p><div class="section" title="11.6.1.&nbsp;Some"><div class="titlepage"><div><div><h3 class="title"><a name="N14BD4"></a>11.6.1.&nbsp;<code class="code"><span class="hl-variable">Some</span></code></h3></div></div></div><a name="N14BD8" class="indexterm"></a><p><a name="ref.stdlib.state.Some"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Some</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Option</span>[<span class="hl-variable">A</span>]</code></p><p>An optional value which is available.
This site may also be used in a <a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">pattern</a>.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: (3, 4)</span>
<span class="hl-site">Some</span>((<span class="hl-literal">3</span>,<span class="hl-literal">4</span>)) <span class="hl-combinator">&gt;</span><span class="hl-variable">s</span><span class="hl-combinator">&gt;</span> (
    <span class="hl-variable">s</span> <span class="hl-combinator">&gt;</span><span class="hl-site">Some</span>((<span class="hl-variable">x</span>,<span class="hl-variable">y</span>))<span class="hl-combinator">&gt;</span> (<span class="hl-variable">x</span>,<span class="hl-variable">y</span>)
  <span class="hl-combinator">|</span> <span class="hl-variable">s</span> <span class="hl-combinator">&gt;</span><span class="hl-site">None</span>()<span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span>
)</pre><p>
</p></div><div class="section" title="11.6.2.&nbsp;None"><div class="titlepage"><div><div><h3 class="title"><a name="N14BEB"></a>11.6.2.&nbsp;<code class="code"><span class="hl-variable">None</span></code></h3></div></div></div><a name="N14BEF" class="indexterm"></a><p><a name="ref.stdlib.state.None"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">None</span>[<span class="hl-variable">A</span>]() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Option</span>[<span class="hl-variable">A</span>]</code></p><p>An optional value which is not available.
This site may also be used in a <a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">pattern</a>.
</p></div><div class="section" title="11.6.3.&nbsp;Cell"><div class="titlepage"><div><div><h3 class="title"><a name="N14BFC"></a>11.6.3.&nbsp;<code class="code"><span class="hl-variable">Cell</span></code></h3></div></div></div><a name="N14C00" class="indexterm"></a><p><a name="ref.stdlib.state.Cell"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Cell</span>[<span class="hl-variable">A</span>]() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Cell</span>[<span class="hl-variable">A</span>]</code></p><p>Create a write-once storage location.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: 5 5</span>
<span class="hl-keyword">val</span> <span class="hl-variable">c</span> <span class="hl-operator">=</span> <span class="hl-site">Cell</span>()
  <span class="hl-variable">c</span>.<span class="hl-site">write</span>(<span class="hl-literal">5</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">c</span>.<span class="hl-site">read</span>()
<span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">1</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> ( <span class="hl-variable">c</span>.<span class="hl-site">write</span>(<span class="hl-literal">10</span>) <span class="hl-combinator">;</span> <span class="hl-variable">c</span>.<span class="hl-site">read</span>() )</pre><p>
</p><p><a name="ref.stdlib.state.cell"></a><code class="code"> <span class="hl-site">cell</span>[<span class="hl-variable">A</span>].<span class="hl-site">read</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><table class="proptable"><tr><td bgcolor="#CC0000"><font color="#FFFFFF">Indefinite</font></td><td bgcolor="#0000CC"><font color="#FFFFFF">Idempotent</font></td></tr></table><p>
</p><p>Read a value from the cell. If the cell does not yet have a value, <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a> until it receives one.
</p><p><code class="code"> <span class="hl-site">cell</span>[<span class="hl-variable">A</span>].<span class="hl-site">readD</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td><td bgcolor="#0000CC"><font color="#FFFFFF">Idempotent</font></td></tr></table><p>
</p><p>Read a value from the cell. If the cell does not yet have a value, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p><code class="code"> <span class="hl-site">cell</span>[<span class="hl-variable">A</span>].<span class="hl-site">write</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td><td bgcolor="#0000CC"><font color="#FFFFFF">Idempotent</font></td></tr></table><p>
</p><p>Write a value to the cell. If the cell already has a value, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p></div><div class="section" title="11.6.4.&nbsp;Ref"><div class="titlepage"><div><div><h3 class="title"><a name="N14C51"></a>11.6.4.&nbsp;<code class="code"><span class="hl-variable">Ref</span></code></h3></div></div></div><a name="N14C55" class="indexterm"></a><p><a name="ref.stdlib.state.Ref"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Ref</span>[<span class="hl-variable">A</span>]() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Ref</span>[<span class="hl-variable">A</span>]</code></p><p>Create a rewritable storage location without an initial value.
</p><p>Example:
</p><pre class="orc">
<span class="hl-keyword">val</span> <span class="hl-variable">r</span> <span class="hl-operator">=</span> <span class="hl-site">Ref</span>()
<span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">r</span> <span class="hl-operator">:=</span> <span class="hl-literal">5</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
<span class="hl-combinator">|</span> <span class="hl-site">Println</span>(<span class="hl-variable">r</span><span class="hl-operator">?</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-variable">r</span> <span class="hl-operator">:=</span> <span class="hl-literal">10</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-site">Println</span>(<span class="hl-variable">r</span><span class="hl-operator">?</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-keyword">stop</span></pre><p>
</p></div><div class="section" title="11.6.5.&nbsp;Ref"><div class="titlepage"><div><div><h3 class="title"><a name="N14C64"></a>11.6.5.&nbsp;<code class="code"><span class="hl-variable">Ref</span></code></h3></div></div></div><a name="N14C68" class="indexterm"></a><p><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Ref</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Ref</span>[<span class="hl-variable">A</span>]</code></p><p>Create a rewritable storage location initialized to the provided value.
</p><p><a name="ref.stdlib.state.ref"></a><code class="code"> <span class="hl-site">ref</span>[<span class="hl-variable">A</span>].<span class="hl-site">read</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Read the value of the ref. If the ref does not yet have a value, <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a> until it receives one.
</p><p><code class="code"> <span class="hl-site">ref</span>[<span class="hl-variable">A</span>].<span class="hl-site">readD</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Read the value of the ref. If the ref does not yet have a value, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p><code class="code"> <span class="hl-site">ref</span>[<span class="hl-variable">A</span>].<span class="hl-site">write</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p>Write a value to the ref, then return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal"><code class="code"><span class="hl-keyword">signal</span></code></a>.
</p></div><div class="section" title="11.6.6.&nbsp;(?)"><div class="titlepage"><div><div><h3 class="title"><a name="N14C91"></a>11.6.6.&nbsp;<code class="code">(<span class="hl-operator">?</span>)</code></h3></div></div></div><a name="N14C95" class="indexterm"></a><p><code class="code"><span class="hl-keyword">def</span> (<span class="hl-operator">?</span>)[<span class="hl-variable">A</span>](<span class="hl-site">Ref</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Get the value held by a reference.
<code class="code"><span class="hl-variable">x</span><span class="hl-operator">?</span></code> is equivalent to <code class="code"><span class="hl-variable">x</span>.<span class="hl-site">read</span>()</code>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> (<span class="hl-operator">?</span>)[<span class="hl-variable">A</span>](<span class="hl-site">Ref</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> (<span class="hl-operator">?</span>)(<span class="hl-variable">r</span>) <span class="hl-operator">=</span> <span class="hl-variable">r</span>.<span class="hl-site">read</span>()


      </pre></div><div class="section" title="11.6.7.&nbsp;(:=)"><div class="titlepage"><div><div><h3 class="title"><a name="N14CAA"></a>11.6.7.&nbsp;<code class="code">(<span class="hl-operator">:=</span>)</code></h3></div></div></div><a name="N14CAE" class="indexterm"></a><p><code class="code"><span class="hl-keyword">def</span> (<span class="hl-operator">:=</span>)[<span class="hl-variable">A</span>](<span class="hl-site">Ref</span>[<span class="hl-variable">A</span>], <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p>Set the value held by a reference.
<code class="code"><span class="hl-variable">x</span> <span class="hl-operator">:=</span> <span class="hl-variable">y</span></code> is equivalent to <code class="code"><span class="hl-variable">x</span>.<span class="hl-site">write</span>(<span class="hl-variable">y</span>)</code>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> (<span class="hl-operator">:=</span>)[<span class="hl-variable">A</span>](<span class="hl-site">Ref</span>[<span class="hl-variable">A</span>], <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span>
<span class="hl-keyword">def</span> (<span class="hl-operator">:=</span>)(<span class="hl-variable">r</span>,<span class="hl-variable">v</span>) <span class="hl-operator">=</span> <span class="hl-variable">r</span>.<span class="hl-site">write</span>(<span class="hl-variable">v</span>)


      </pre></div><div class="section" title="11.6.8.&nbsp;swap"><div class="titlepage"><div><div><h3 class="title"><a name="N14CC3"></a>11.6.8.&nbsp;<code class="code"><span class="hl-variable">swap</span></code></h3></div></div></div><a name="N14CC7" class="indexterm"></a><p><a name="ref.stdlib.state.swap"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">swap</span>[<span class="hl-variable">A</span>](<span class="hl-site">Ref</span>[<span class="hl-variable">A</span>], <span class="hl-site">Ref</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p>Swap the values in two references, then return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">swap</span>[<span class="hl-variable">A</span>](<span class="hl-site">Ref</span>[<span class="hl-variable">A</span>], <span class="hl-site">Ref</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span>
<span class="hl-keyword">def</span> <span class="hl-site">swap</span>(<span class="hl-variable">r</span>,<span class="hl-variable">s</span>) <span class="hl-operator">=</span> (<span class="hl-variable">r</span><span class="hl-operator">?</span>,<span class="hl-variable">s</span><span class="hl-operator">?</span>) <span class="hl-combinator">&gt;</span>(<span class="hl-variable">rval</span>,<span class="hl-variable">sval</span>)<span class="hl-combinator">&gt;</span> (<span class="hl-variable">r</span> <span class="hl-operator">:=</span> <span class="hl-variable">sval</span>, <span class="hl-variable">s</span> <span class="hl-operator">:=</span> <span class="hl-variable">rval</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span>



      </pre></div><div class="section" title="11.6.9.&nbsp;Semaphore"><div class="titlepage"><div><div><h3 class="title"><a name="N14CDB"></a>11.6.9.&nbsp;<code class="code"><span class="hl-variable">Semaphore</span></code></h3></div></div></div><a name="N14CDF" class="indexterm"></a><p><a name="ref.stdlib.state.Semaphore"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Semaphore</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Semaphore</span></code></p><p>Return a semaphore with the given value. The semaphore maintains the invariant
that its value is always non-negative.
</p><p>An example using a semaphore as a lock for a critical section:
</p><pre class="orc">
<span class="hl-comment">-- Prints:</span>
<span class="hl-comment">-- Entering critical section</span>
<span class="hl-comment">-- Leaving critical section</span>
<span class="hl-keyword">val</span> <span class="hl-variable">lock</span> <span class="hl-operator">=</span> <span class="hl-site">Semaphore</span>(<span class="hl-literal">1</span>)
<span class="hl-variable">lock</span>.<span class="hl-site">acquire</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-site">Println</span>(<span class="hl-literal">"Entering critical section"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-site">Println</span>(<span class="hl-literal">"Leaving critical section"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-variable">lock</span>.<span class="hl-site">release</span>()</pre><p>
</p><p><a name="ref.stdlib.state.semaphore"></a><code class="code"> <span class="hl-variable">semaphore</span>.<span class="hl-site">acquire</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#CC0000"><font color="#FFFFFF">Indefinite</font></td></tr></table><p>
</p><p>If the semaphore's value is greater than <code class="code"><span class="hl-literal">0</span></code>, decrement the semaphore and return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a>.
If the semaphore's value is <code class="code"><span class="hl-literal">0</span></code>, <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a> until it becomes greater than <code class="code"><span class="hl-literal">0</span></code>.
</p><p><code class="code"> <span class="hl-variable">semaphore</span>.<span class="hl-site">acquireD</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>If the semaphore's value is greater than <code class="code"><span class="hl-literal">0</span></code>, decrement the semaphore and return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a>.
If the semaphore's value is <code class="code"><span class="hl-literal">0</span></code>, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p><code class="code"> <span class="hl-variable">semaphore</span>.<span class="hl-site">release</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>If any calls to <code class="code"><span class="hl-variable">acquire</span></code> are <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocked</a>, allow the oldest such call
to return.  Otherwise, increment the value of the semaphore.  This may
increment the value beyond that with which the semaphore was constructed.  
</p><p><code class="code"> <span class="hl-variable">semaphore</span>.<span class="hl-site">snoop</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#CC0000"><font color="#FFFFFF">Indefinite</font></td></tr></table><p>
</p><p>If any calls to <code class="code"><span class="hl-variable">acquire</span></code> are <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocked</a>, return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a>.
Otherwise, <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a> until some call to <code class="code"><span class="hl-variable">acquire</span></code> <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocks</a>.
</p><p><code class="code"> <span class="hl-variable">semaphore</span>.<span class="hl-site">snoopD</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>If any calls to <code class="code"><span class="hl-variable">acquire</span></code> are <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocked</a>, return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a>.
Otherwise, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p></div><div class="section" title="11.6.10.&nbsp;Channel"><div class="titlepage"><div><div><h3 class="title"><a name="N14D7E"></a>11.6.10.&nbsp;<code class="code"><span class="hl-variable">Channel</span></code></h3></div></div></div><a name="N14D82" class="indexterm"></a><p><a name="ref.stdlib.state.Channel"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Channel</span>[<span class="hl-variable">A</span>]() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Channel</span>[<span class="hl-variable">A</span>]</code></p><p>Create a new asyncrhonous FIFO channel of unlimited size. A channel supports
get, put and close operations.
</p><p>A channel may be either empty or non-empty, and either open or closed.  When
empty and open, calls to <code class="code"><span class="hl-variable">get</span></code> <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a>.  When empty and closed, calls
to <code class="code"><span class="hl-variable">get</span></code> <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.  When closed, calls to <code class="code"><span class="hl-variable">put</span></code> <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.  In all
other cases, calls return normally.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: 10</span>
<span class="hl-keyword">val</span> <span class="hl-variable">b</span> <span class="hl-operator">=</span> <span class="hl-site">Channel</span>()
  <span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">b</span>.<span class="hl-site">put</span>(<span class="hl-literal">10</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
<span class="hl-combinator">|</span> <span class="hl-variable">b</span>.<span class="hl-site">get</span>()</pre><p>
</p><p><a name="ref.stdlib.state.channel"></a><code class="code"> <span class="hl-site">channel</span>[<span class="hl-variable">A</span>].<span class="hl-site">get</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><table class="proptable"><tr><td bgcolor="#CC0000"><font color="#FFFFFF">Indefinite</font></td></tr></table><p>
</p><p>Get an item from the channel. If the channel is open and no items are available,
<a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a> until one becomes available. If the channel is <a class="link" href="#ref.stdlib.state.Channel.close">closed</a> and no items are available, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p><code class="code"> <span class="hl-site">channel</span>[<span class="hl-variable">A</span>].<span class="hl-site">getD</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Get an item from the channel. If no items are available, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p><code class="code"> <span class="hl-site">channel</span>[<span class="hl-variable">A</span>].<span class="hl-site">put</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Put an item in the channel. If the channel is <a class="link" href="#ref.stdlib.state.Channel.close">closed</a>, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p><code class="code"> <span class="hl-site">channel</span>[<span class="hl-variable">A</span>].<span class="hl-site">close</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#CC0000"><font color="#FFFFFF">Indefinite</font></td><td bgcolor="#0000CC"><font color="#FFFFFF">Idempotent</font></td></tr></table><p>
</p><p><em class="firstterm"><a name="ref.stdlib.state.Channel.close"></a>Close</em> the channel and <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a> until it is empty.
This has the effect of immediately causing any <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocked</a> calls to
<code class="code"><span class="hl-variable">get</span></code> to <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>. In addition, any subsequent calls to <code class="code"><span class="hl-variable">put</span></code>
will <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>, and once the channel becomes empty, any subsequent calls to
<code class="code"><span class="hl-variable">get</span></code> will <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p>When the channel is empty, return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a>.
</p><p><code class="code"> <span class="hl-site">channel</span>[<span class="hl-variable">A</span>].<span class="hl-site">closeD</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td><td bgcolor="#0000CC"><font color="#FFFFFF">Idempotent</font></td></tr></table><p>
</p><p>Close the channel and return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a> immediately.
This has the effect of immediately causing any <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocked</a> calls to
<code class="code"><span class="hl-variable">get</span></code> to <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>. In addition, any subsequent calls to <code class="code"><span class="hl-variable">put</span></code>
will <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>, and once the channel becomes empty, any subsequent calls to
<code class="code"><span class="hl-variable">get</span></code> will <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p><code class="code"> <span class="hl-site">channel</span>[<span class="hl-variable">A</span>].<span class="hl-site">isClosed</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>If the channel is currently closed, return true, otherwise return false.
</p><p><code class="code"> <span class="hl-site">channel</span>[<span class="hl-variable">A</span>].<span class="hl-site">getAll</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Get all of the items currently in the channel, emptying the channel and returning
a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> of the items in the order they were added. If there are no items in the
channel, return an empty list.
</p></div><div class="section" title="11.6.11.&nbsp;BoundedChannel"><div class="titlepage"><div><div><h3 class="title"><a name="N14E8E"></a>11.6.11.&nbsp;<code class="code"><span class="hl-variable">BoundedChannel</span></code></h3></div></div></div><a name="N14E92" class="indexterm"></a><p><a name="ref.stdlib.state.BoundedChannel"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">BoundedChannel</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">BoundedChannel</span>[<span class="hl-variable">A</span>]</code></p><p>Create a new asynchronous FIFO channel with the given number of slots.
Putting an item into the channel fills a slot, and getting an item opens a slot.
A channel with zero slots is equivalent to a synchronous channel.
</p><p>A bounded channel may be empty, partly filled, or full, and either open or
closed.  When empty and open, calls to <code class="code"><span class="hl-variable">get</span></code> <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a>.  When empty and
closed, calls to <code class="code"><span class="hl-variable">get</span></code> <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>. When full and open, calls to
<code class="code"><span class="hl-variable">put</span></code> <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a>. When closed, calls to <code class="code"><span class="hl-variable">put</span></code> <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.  In all
other cases, calls return normally.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: "Put 1" "Got 1" "Put 2" "Got 2"</span>
<span class="hl-keyword">val</span> <span class="hl-variable">c</span> <span class="hl-operator">=</span> <span class="hl-site">BoundedChannel</span>(<span class="hl-literal">1</span>)
  <span class="hl-variable">c</span>.<span class="hl-site">put</span>(<span class="hl-literal">1</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Put "</span> <span class="hl-operator">+</span> <span class="hl-literal">1</span>
<span class="hl-combinator">|</span> <span class="hl-variable">c</span>.<span class="hl-site">put</span>(<span class="hl-literal">2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Put "</span> <span class="hl-operator">+</span> <span class="hl-literal">2</span>
<span class="hl-combinator">|</span> <span class="hl-site">Rwait</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> (
    <span class="hl-variable">c</span>.<span class="hl-site">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">n</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Got "</span> <span class="hl-operator">+</span> <span class="hl-variable">n</span>
  <span class="hl-combinator">|</span> <span class="hl-variable">c</span>.<span class="hl-site">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">n</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Got "</span> <span class="hl-operator">+</span> <span class="hl-variable">n</span>
  )</pre><p>
</p><p><a name="ref.stdlib.state.boundedChannel"></a><code class="code"> <span class="hl-site">boundedChannel</span>[<span class="hl-variable">A</span>].<span class="hl-site">get</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><table class="proptable"><tr><td bgcolor="#CC0000"><font color="#FFFFFF">Indefinite</font></td></tr></table><p>
</p><p>Get an item from the channel. If the channel is open and no items are available,
<a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a> until one becomes available. If the channel is <a class="link" href="#ref.stdlib.state.BoundedChannel.close">closed</a> and no items are available, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p><code class="code"> <span class="hl-site">boundedChannel</span>[<span class="hl-variable">A</span>].<span class="hl-site">getD</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Get an item from the channel. If no items are available, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p><code class="code"> <span class="hl-site">boundedChannel</span>[<span class="hl-variable">A</span>].<span class="hl-site">put</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#CC0000"><font color="#FFFFFF">Indefinite</font></td></tr></table><p>
</p><p>Put an item in the channel. If no slots are open, <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a> until one becomes open.
If the channel is <a class="link" href="#ref.stdlib.state.BoundedChannel.close">closed</a>, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p><code class="code"> <span class="hl-site">boundedChannel</span>[<span class="hl-variable">A</span>].<span class="hl-site">putD</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Put an item in the channel. If no slots are open, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
If the channel is <a class="link" href="#ref.stdlib.state.BoundedChannel.close">closed</a>, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p><code class="code"> <span class="hl-site">boundedChannel</span>[<span class="hl-variable">A</span>].<span class="hl-site">close</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#CC0000"><font color="#FFFFFF">Indefinite</font></td><td bgcolor="#0000CC"><font color="#FFFFFF">Idempotent</font></td></tr></table><p>
</p><p><em class="firstterm"><a name="ref.stdlib.state.BoundedChannel.close"></a>Close</em> the channel and <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a> until it is empty.
This has the effect of immediately causing any <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocked</a> calls to
<code class="code"><span class="hl-variable">get</span></code> to <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>. In addition, any subsequent calls to <code class="code"><span class="hl-variable">put</span></code>
will <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>, and once the channel becomes empty, any subsequent calls to
<code class="code"><span class="hl-variable">get</span></code> will <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>. Note that any <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocked</a> calls to <code class="code"><span class="hl-variable">put</span></code>
initiated prior to closing the channel may still be allowed to return as usual.
</p><p><code class="code"> <span class="hl-site">boundedChannel</span>[<span class="hl-variable">A</span>].<span class="hl-site">closeD</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td><td bgcolor="#0000CC"><font color="#FFFFFF">Idempotent</font></td></tr></table><p>
</p><p>Close the channel and return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a> immediately.
This has the effect of immediately causing any <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocked</a> calls to
<code class="code"><span class="hl-variable">get</span></code> to <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>. In addition, any subsequent calls to <code class="code"><span class="hl-variable">put</span></code>
will <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>, and once the channel becomes empty, any subsequent calls to
<code class="code"><span class="hl-variable">get</span></code> will <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>. Note that any <a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">blocked</a> calls to <code class="code"><span class="hl-variable">put</span></code>
initiated prior to closing the channel may still be allowed to return as usual.
</p><p><code class="code"> <span class="hl-site">boundedChannel</span>[<span class="hl-variable">A</span>].<span class="hl-site">isClosed</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>If the channel is currently closed, return true, otherwise return false.
</p><p><code class="code"> <span class="hl-site">boundedChannel</span>[<span class="hl-variable">A</span>].<span class="hl-site">getOpen</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Return the number of open slots in the channel. Because of concurrency
this value may become out-of-date so it should only be used for debugging
or statistical measurements.
</p><p><code class="code"> <span class="hl-site">boundedChannel</span>[<span class="hl-variable">A</span>].<span class="hl-site">getBound</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td><td bgcolor="#6600FF"><font color="#FFFFFF">Pure</font></td></tr></table><p>
</p><p>Return the total number of slots (open or filled) in the channel.
</p><p><code class="code"> <span class="hl-site">boundedChannel</span>[<span class="hl-variable">A</span>].<span class="hl-site">getAll</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Get all of the items currently in the channel or waiting to be added, emptying
the channel and returning a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> of the items in the order they were added. If
there are no items in the channel or waiting to be added, return an empty list.
</p></div><div class="section" title="11.6.12.&nbsp;Array"><div class="titlepage"><div><div><h3 class="title"><a name="N14FEC"></a>11.6.12.&nbsp;<code class="code"><span class="hl-variable">Array</span></code></h3></div></div></div><a name="N14FF0" class="indexterm"></a><p><a name="ref.stdlib.state.Array"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Array</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Array</span>[<span class="hl-variable">A</span>]</code></p><p>Create a new native array of the given size. The array is initialized
to contain <code class="code"><span class="hl-literal">null</span></code>s.
</p><p>The resulting array can be called directly with an index, as if
its type were <code class="code"><span class="hl-keyword">lambda</span> (<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Ref</span>[<span class="hl-variable">A</span>]</code>.
In this case, it returns a <a class="link" href="#ref.stdlib.state.Ref">Ref</a>
pointing to the element of the array specified by an index,
counting from 0. Changes to the array are reflected immediately
in the ref and visa versa.
</p><p>Simple example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: 3</span>
<span class="hl-keyword">val</span> <span class="hl-variable">a</span> <span class="hl-operator">=</span> <span class="hl-site">Array</span>(<span class="hl-literal">1</span>)
<span class="hl-site">a</span>(<span class="hl-literal">0</span>) <span class="hl-operator">:=</span> <span class="hl-literal">3</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-site">a</span>(<span class="hl-literal">0</span>)<span class="hl-operator">?</span></pre><p>
</p><p>More complex example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: 0 1 2</span>
<span class="hl-keyword">val</span> <span class="hl-variable">a</span> <span class="hl-operator">=</span> <span class="hl-site">Array</span>(<span class="hl-literal">3</span>)
<span class="hl-site">for</span>(<span class="hl-literal">0</span>, <span class="hl-variable">a</span>.<span class="hl-variable">length</span><span class="hl-operator">?</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">i</span><span class="hl-combinator">&gt;</span>
<span class="hl-site">a</span>(<span class="hl-variable">i</span>) <span class="hl-operator">:=</span> <span class="hl-variable">i</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-keyword">stop</span>
<span class="hl-combinator">;</span> <span class="hl-site">a</span>(<span class="hl-literal">0</span>)<span class="hl-operator">?</span> <span class="hl-combinator">|</span> <span class="hl-site">a</span>(<span class="hl-literal">1</span>)<span class="hl-operator">?</span> <span class="hl-combinator">|</span> <span class="hl-site">a</span>(<span class="hl-literal">2</span>)<span class="hl-operator">?</span></pre><p>
</p><p><code class="code"> <span class="hl-site">Array</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Integer</span>, <span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Array</span>[<span class="hl-variable">A</span>]</code></p><p>Create a new primitive array of the given size with the given primitive type.
The initial values in the array depend on the primitive type: for numeric types,
it is <code class="code"><span class="hl-literal">0</span></code>; for booleans, <code class="code"><span class="hl-literal">false</span></code>; for chars, the character
with codepoint <code class="code"><span class="hl-literal">0</span></code>.
</p><p>The element type of the array should be the appropriate wrapper type for the given
primitive type, although a typechecker may not be able to verify this. This
constructor is only necessary when interfacing with certain Java libraries; most
programs will just use the  <code class="code"><span class="hl-site">Array</span>(<span class="hl-variable">Integer</span>)</code> constructor.
</p><p><a name="ref.stdlib.state.array"></a><code class="code"> <span class="hl-site">array</span>[<span class="hl-variable">A</span>].<span class="hl-variable">length</span><span class="hl-operator">?</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td><td bgcolor="#6600FF"><font color="#FFFFFF">Pure</font></td></tr></table><p>
</p><p>Return the size of the array.
</p></div><div class="section" title="11.6.13.&nbsp;arrayToList"><div class="titlepage"><div><div><h3 class="title"><a name="N15034"></a>11.6.13.&nbsp;<code class="code"><span class="hl-variable">arrayToList</span></code></h3></div></div></div><a name="N15038" class="indexterm"></a><p><a name="ref.stdlib.state.arrayToList"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">arrayToList</span>[<span class="hl-variable">A</span>](<span class="hl-site">Array</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Given an array, create an Orc <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> whose elements are exactly
the contents of the array, in the same order. 
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">arrayToList</span>[<span class="hl-variable">A</span>](<span class="hl-site">Array</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">arrayToList</span>(<span class="hl-variable">a</span>) <span class="hl-operator">=</span> 
  <span class="hl-keyword">def</span> <span class="hl-site">walk</span>(<span class="hl-variable">Integer</span>, <span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
  <span class="hl-keyword">def</span> <span class="hl-site">walk</span>(<span class="hl-literal">0</span>,<span class="hl-variable">acc</span>) <span class="hl-operator">=</span> <span class="hl-variable">acc</span>
  <span class="hl-keyword">def</span> <span class="hl-site">walk</span>(<span class="hl-variable">i</span>,<span class="hl-variable">acc</span>) <span class="hl-operator">=</span> <span class="hl-site">walk</span>(<span class="hl-variable">i</span><span class="hl-operator">-</span><span class="hl-literal">1</span>, <span class="hl-site">a</span>(<span class="hl-variable">i</span><span class="hl-operator">-</span><span class="hl-literal">1</span>)<span class="hl-operator">?</span> <span class="hl-operator">:</span> <span class="hl-variable">acc</span>)
  <span class="hl-site">walk</span>(<span class="hl-variable">a</span>.<span class="hl-variable">length</span><span class="hl-operator">?</span>, [])
  


      </pre></div><div class="section" title="11.6.14.&nbsp;Table"><div class="titlepage"><div><div><h3 class="title"><a name="N1504C"></a>11.6.14.&nbsp;<code class="code"><span class="hl-variable">Table</span></code></h3></div></div></div><a name="N15050" class="indexterm"></a><p><a name="ref.stdlib.state.Table"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">Table</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Integer</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>)(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>The call <code class="code"><span class="hl-site">Table</span>(<span class="hl-variable">n</span>,<span class="hl-variable">f</span>)</code>, where <code class="code"><span class="hl-variable">n</span></code> is a
natural number and <code class="code"><span class="hl-variable">f</span></code> a total function over natural numbers,
creates and returns a partial, pre-computed version of <code class="code"><span class="hl-variable">f</span></code>
restricted to the range (0, <code class="code"><span class="hl-variable">n</span></code>-1). <code class="code"><span class="hl-variable">Table</span></code> does
not return a value until all calls to <code class="code"><span class="hl-variable">f</span></code> have completed.
Consequently, if <code class="code"><span class="hl-variable">f</span></code> <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a> on any call, the call to 
<code class="code"><span class="hl-variable">Table</span></code> will <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p><p>The user may also think of the call as returning an immutable array whose
<code class="code"><span class="hl-variable">i</span></code>th element is accessed by calling <code class="code"><span class="hl-site">f</span>(<span class="hl-variable">i</span>)</code>.
</p><p>This function provides a simple form of memoisation; we avoid recomputing
the value of <code class="code"><span class="hl-site">f</span>(<span class="hl-variable">i</span>)</code> by internally storing the result in an array.
</p><p>Example:
</p><pre class="programlisting">
<span class="hl-keyword">val</span> <span class="hl-variable">a</span> <span class="hl-operator">=</span> <span class="hl-site">Table</span>(<span class="hl-literal">5</span>, <span class="hl-variable">fib</span>)
<span class="hl-comment">-- Publishes the 4th number of the fibonnaci sequence: 5</span>
<span class="hl-site">a</span>(<span class="hl-literal">3</span>)</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">Table</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Integer</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> (<span class="hl-keyword">lambda</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>)
<span class="hl-keyword">def</span> <span class="hl-site">Table</span>(<span class="hl-variable">n</span>, <span class="hl-variable">f</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">a</span> <span class="hl-operator">=</span> <span class="hl-site">Array</span>[<span class="hl-variable">A</span>](<span class="hl-variable">n</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Array</span>[<span class="hl-variable">A</span>]
  <span class="hl-keyword">def</span> <span class="hl-site">fill</span>(<span class="hl-variable">Integer</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span>
  <span class="hl-keyword">def</span> <span class="hl-site">fill</span>(<span class="hl-variable">i</span>, <span class="hl-variable">f</span>) <span class="hl-operator">=</span>
    <span class="hl-keyword">if</span> <span class="hl-variable">i</span> <span class="hl-operator">&lt;:</span> <span class="hl-literal">0</span> <span class="hl-keyword">then</span> <span class="hl-keyword">signal</span>
    <span class="hl-keyword">else</span> ((<span class="hl-site">a</span>(<span class="hl-variable">i</span>) <span class="hl-operator">:=</span> <span class="hl-site">f</span>(<span class="hl-variable">i</span>)), <span class="hl-site">fill</span>(<span class="hl-variable">i</span><span class="hl-operator">-</span><span class="hl-literal">1</span>, <span class="hl-variable">f</span>)) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span>
  <span class="hl-site">fill</span>(<span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-literal">1</span>, <span class="hl-variable">f</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> (<span class="hl-keyword">lambda</span> (<span class="hl-variable">i</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span>) <span class="hl-operator">=</span> <span class="hl-site">a</span>(<span class="hl-variable">i</span>)<span class="hl-operator">?</span>)



      </pre></div><div class="section" title="11.6.15.&nbsp;Counter"><div class="titlepage"><div><div><h3 class="title"><a name="N1509D"></a>11.6.15.&nbsp;<code class="code"><span class="hl-variable">Counter</span></code></h3></div></div></div><a name="N150A1" class="indexterm"></a><p><a name="ref.stdlib.state.Counter"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Counter</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Counter</span></code></p><p>Create a new counter initialized to the given value.
</p></div><div class="section" title="11.6.16.&nbsp;Counter"><div class="titlepage"><div><div><h3 class="title"><a name="N150AA"></a>11.6.16.&nbsp;<code class="code"><span class="hl-variable">Counter</span></code></h3></div></div></div><a name="N150AE" class="indexterm"></a><p><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Counter</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Counter</span></code></p><p>Create a new counter initialized to zero.
</p><p><a name="ref.stdlib.state.counter"></a><code class="code"> <span class="hl-variable">counter</span>.<span class="hl-site">inc</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Increment the counter.
</p><p><code class="code"> <span class="hl-variable">counter</span>.<span class="hl-site">dec</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>If the counter is already at zero, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>. Otherwise, decrement
the counter and return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a>.
</p><p><code class="code"> <span class="hl-variable">counter</span>.<span class="hl-site">onZero</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#CC0000"><font color="#FFFFFF">Indefinite</font></td></tr></table><p>
</p><p>If the counter is at zero, return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a>. Otherwise,
<a class="link" href="#ref.concepts.states.block" title="8.3.2.&nbsp;Blocked">block</a> until the counter reaches zero.
</p><p><code class="code"> <span class="hl-variable">counter</span>.<span class="hl-site">value</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Return the current value of the counter.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes five signals</span>
<span class="hl-keyword">val</span> <span class="hl-variable">c</span> <span class="hl-operator">=</span> <span class="hl-site">Counter</span>(<span class="hl-literal">5</span>)
<span class="hl-site">repeat</span>(<span class="hl-variable">c</span>.<span class="hl-variable">dec</span>)</pre><p>
</p></div><div class="section" title="11.6.17.&nbsp;Dictionary"><div class="titlepage"><div><div><h3 class="title"><a name="N15101"></a>11.6.17.&nbsp;<code class="code"><span class="hl-variable">Dictionary</span></code></h3></div></div></div><a name="N15105" class="indexterm"></a><p><a name="ref.stdlib.state.Dictionary"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Dictionary</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Dictionary</span></code></p><p>Create a new dictionary (a mutable map from field names to values), initially
empty.  The first time a field of the dictionary is accessed (using a <a class="link" href="#ref.expressions.dot" title="2.5.&nbsp;Dot Access">dot access</a>), 
the dictionary creates and returns a new empty 
<a class="link" href="#ref.stdlib.state.Ref">Ref</a> which will also be returned on
subsequent accesses of the same field. A dictionary differs from a record in that
it is both mutable and dynamically extensible.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Prints: 1 2</span>
<span class="hl-keyword">val</span> <span class="hl-variable">d</span> <span class="hl-operator">=</span> <span class="hl-site">Dictionary</span>()
  <span class="hl-site">Println</span>(<span class="hl-variable">d</span>.<span class="hl-variable">one</span>.<span class="hl-site">read</span>()) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-site">Println</span>(<span class="hl-variable">d</span>.<span class="hl-variable">two</span>.<span class="hl-site">read</span>()) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-keyword">stop</span>
<span class="hl-combinator">|</span> <span class="hl-variable">d</span>.<span class="hl-variable">one</span>.<span class="hl-site">write</span>(<span class="hl-literal">1</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-variable">d</span>.<span class="hl-variable">two</span>.<span class="hl-site">write</span>(<span class="hl-literal">2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-keyword">stop</span></pre><p>
</p><p>Here is the same example rewritten using Orc's reference syntax to improve
clarity:
</p><pre class="orc">
<span class="hl-comment">-- Prints: 1 2</span>
<span class="hl-keyword">val</span> <span class="hl-variable">d</span> <span class="hl-operator">=</span> <span class="hl-site">Dictionary</span>()
  <span class="hl-site">Println</span>(<span class="hl-variable">d</span>.<span class="hl-variable">one</span><span class="hl-operator">?</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-site">Println</span>(<span class="hl-variable">d</span>.<span class="hl-variable">two</span><span class="hl-operator">?</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-keyword">stop</span>
<span class="hl-combinator">|</span> <span class="hl-variable">d</span>.<span class="hl-variable">one</span> <span class="hl-operator">:=</span> <span class="hl-literal">1</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-variable">d</span>.<span class="hl-variable">two</span> <span class="hl-operator">:=</span> <span class="hl-literal">2</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-keyword">stop</span></pre><p>
</p><p>To create a multi-level dictionary, one must explicitly create sub-dictionaries
for each field. For example:
</p><pre class="orc">
<span class="hl-comment">-- Prints: 2</span>
<span class="hl-keyword">val</span> <span class="hl-variable">d</span> <span class="hl-operator">=</span> <span class="hl-site">Dictionary</span>()
<span class="hl-variable">d</span>.<span class="hl-variable">one</span> <span class="hl-operator">:=</span> <span class="hl-site">Dictionary</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-variable">d</span>.<span class="hl-variable">one</span><span class="hl-operator">?</span>.<span class="hl-variable">two</span> <span class="hl-operator">:=</span> <span class="hl-literal">2</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-site">Println</span>(<span class="hl-variable">d</span>.<span class="hl-variable">one</span><span class="hl-operator">?</span>.<span class="hl-variable">two</span><span class="hl-operator">?</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-keyword">stop</span></pre><p>
</p><p>Note that <code class="code"><span class="hl-variable">d</span>.<span class="hl-variable">one</span>.<span class="hl-variable">two</span></code> is not valid: because <code class="code"><span class="hl-variable">d</span>.<span class="hl-variable">one</span></code>
is a reference to a dictionary, and not simply a dictionary, a dereference
step is needed before accessing a field, as in <code class="code"><span class="hl-variable">d</span>.<span class="hl-variable">one</span><span class="hl-operator">?</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">x</span>.<span class="hl-variable">two</span></code>.
For readers familiar with the C language, this is the same reason one must
write <code class="code">s-&gt;field</code> instead of <code class="code"><span class="hl-variable">s</span>.<span class="hl-variable">field</span></code> when
<code class="code"><span class="hl-variable">s</span></code> is a pointer to a struct.
</p></div><div class="section" title="11.6.18.&nbsp;fst"><div class="titlepage"><div><div><h3 class="title"><a name="N1513D"></a>11.6.18.&nbsp;<code class="code"><span class="hl-variable">fst</span></code></h3></div></div></div><a name="N15141" class="indexterm"></a><p><a name="ref.stdlib.state.fst"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">fst</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>]((<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Return the first element of a <a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">pair</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">fst</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>]((<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">fst</span>((<span class="hl-variable">x</span>,<span class="hl-variable">_</span>)) <span class="hl-operator">=</span> <span class="hl-variable">x</span>


      </pre></div><div class="section" title="11.6.19.&nbsp;snd"><div class="titlepage"><div><div><h3 class="title"><a name="N15155"></a>11.6.19.&nbsp;<code class="code"><span class="hl-variable">snd</span></code></h3></div></div></div><a name="N15159" class="indexterm"></a><p><a name="ref.stdlib.state.snd"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">snd</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>]((<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span></code></p><p>Return the second element of a <a class="link" href="#ref.data.tuple" title="1.6.&nbsp;Tuples">pair</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">snd</span>[<span class="hl-variable">A</span>,<span class="hl-variable">B</span>]((<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">B</span>
<span class="hl-keyword">def</span> <span class="hl-site">snd</span>((<span class="hl-variable">_</span>,<span class="hl-variable">y</span>)) <span class="hl-operator">=</span> <span class="hl-variable">y</span>


      </pre></div><div class="section" title="11.6.20.&nbsp;Interval"><div class="titlepage"><div><div><h3 class="title"><a name="N1516D"></a>11.6.20.&nbsp;<code class="code"><span class="hl-variable">Interval</span></code></h3></div></div></div><a name="N15171" class="indexterm"></a><p><a name="ref.stdlib.state.Interval"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Interval</span>[<span class="hl-variable">A</span>](<span class="hl-variable">A</span>, <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Interval</span>[<span class="hl-variable">A</span>]</code></p><p><code class="code"><span class="hl-site">Interval</span>(<span class="hl-variable">a</span>,<span class="hl-variable">b</span>)</code> returns an object representing the half-open
interval [<code class="code"><span class="hl-variable">a</span></code>,<code class="code"><span class="hl-variable">b</span></code>).
</p><p><a name="ref.stdlib.state.interval"></a><code class="code"> <span class="hl-site">interval</span>[<span class="hl-variable">A</span>].<span class="hl-site">isEmpty</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Return true if this interval is empty.
</p><p><code class="code"> <span class="hl-site">interval</span>[<span class="hl-variable">A</span>].<span class="hl-site">spans</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Return true if the interval spans the given point, false otherwise.
</p><p><code class="code"> <span class="hl-site">interval</span>[<span class="hl-variable">A</span>].<span class="hl-site">intersects</span>(<span class="hl-site">Interval</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Return true if the given interval has a non-empty intersection with this one,
and false otherwise.
</p><p><code class="code"> <span class="hl-site">interval</span>[<span class="hl-variable">A</span>].<span class="hl-site">intersect</span>(<span class="hl-site">Interval</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Interval</span>[<span class="hl-variable">A</span>]</code></p><p>Return the intersection of this interval with another. If
the two intervals do not intersect, returns an empty interval.
</p><p><code class="code"> <span class="hl-site">interval</span>[<span class="hl-variable">A</span>].<span class="hl-site">contiguous</span>(<span class="hl-site">Interval</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Return true if the given interval is contiguous with this one
(overlaps or abuts), and false otherwise.
</p><p><code class="code"> <span class="hl-site">interval</span>[<span class="hl-variable">A</span>].<span class="hl-site">union</span>(<span class="hl-site">Interval</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Interval</span>[<span class="hl-variable">A</span>]</code></p><p>Return the union of this interval with another. <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">Halts</a> with an error if
the two intervals are not contiguous.
</p></div><div class="section" title="11.6.21.&nbsp;Intervals"><div class="titlepage"><div><div><h3 class="title"><a name="N151A5"></a>11.6.21.&nbsp;<code class="code"><span class="hl-variable">Intervals</span></code></h3></div></div></div><a name="N151A9" class="indexterm"></a><p><a name="ref.stdlib.state.Intervals"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Intervals</span>[<span class="hl-variable">A</span>]() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Intervals</span>[<span class="hl-variable">A</span>]</code></p><p>Return an empty set of intervals. An Intervals object is iterable;
iterating over the set returns disjoint intervals in increasing order.
</p><p><a name="ref.stdlib.state.intervals"></a><code class="code"> <span class="hl-site">intervals</span>[<span class="hl-variable">A</span>].<span class="hl-site">isEmpty</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Return true if this set of intervals is empty.
</p><p><code class="code"> <span class="hl-site">intervals</span>[<span class="hl-variable">A</span>].<span class="hl-site">spans</span>(<span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Boolean</span></code></p><p>Return true if this set of intervals spans the given point, and false otherwise.
</p><p><code class="code"> <span class="hl-site">intervals</span>[<span class="hl-variable">A</span>].<span class="hl-site">intersect</span>(<span class="hl-site">Intervals</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Intervals</span>[<span class="hl-variable">A</span>]</code></p><p>Return the intersection of this set of intervals with another.
</p><p><code class="code"> <span class="hl-site">intervals</span>[<span class="hl-variable">A</span>].<span class="hl-site">union</span>(<span class="hl-site">Interval</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Intervals</span>[<span class="hl-variable">A</span>]</code></p><p>Return the union of this set of intervals with the given interval.
This method is most efficient when the given interval is before
most of the intervals in the set.
</p></div></div><div class="section" title="11.7.&nbsp;text: Operations on strings."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.stdlib.text"></a>11.7.&nbsp;text: Operations on strings.</h2></div></div></div><p>Operations on strings.
</p><div class="section" title="11.7.1.&nbsp;String"><div class="titlepage"><div><div><h3 class="title"><a name="N151D1"></a>11.7.1.&nbsp;<code class="code"><span class="hl-variable">String</span></code></h3></div></div></div><a name="N151D5" class="indexterm"></a><p><a name="ref.stdlib.text.String"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-variable">String</span></code></p><p><a class="link" href="#ref.data.string" title="1.3.&nbsp;Character Strings">Strings</a> themselves have a set of methods associated with them. These methods can
be invoked on any string literal or any variable bound to a string.
</p><p>The methods documented here are only a subset of those available in the Java
implementation. In practice, strings in the Java implementation support all 
methods provided by Java's <code class="code"><span class="hl-variable">String</span></code> class.
</p><p><a name="ref.stdlib.text.string"></a><code class="code"> <span class="hl-variable">string</span>.<span class="hl-site">length</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p>Return the length of the string.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: 4</span>
<span class="hl-literal">"four"</span>.<span class="hl-site">length</span>()</pre><p>
</p><p><code class="code"> <span class="hl-variable">string</span>.<span class="hl-site">substring</span>(<span class="hl-variable">Integer</span>, <span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span></code></p><p>Return the substring of this string covered by the given half-open range.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: "orc"</span>
<span class="hl-keyword">val</span> <span class="hl-variable">s</span> <span class="hl-operator">=</span> <span class="hl-literal">"apple orchard"</span>
<span class="hl-variable">s</span>.<span class="hl-site">substring</span>(<span class="hl-literal">6</span>,<span class="hl-literal">9</span>)</pre><p>
</p><p><code class="code"> <span class="hl-variable">string</span>.<span class="hl-site">indexOf</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p>Return the starting index of the first occurrence of the given string.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: 6</span>
<span class="hl-literal">"apple orchard"</span>.<span class="hl-site">indexOf</span>(<span class="hl-literal">"orc"</span>)</pre><p>
</p></div><div class="section" title="11.7.2.&nbsp;Print"><div class="titlepage"><div><div><h3 class="title"><a name="N15208"></a>11.7.2.&nbsp;<code class="code"><span class="hl-variable">Print</span></code></h3></div></div></div><a name="N1520C" class="indexterm"></a><p><a name="ref.stdlib.text.Print"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Print</span>(<span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Print a value as a string to standard output.
For Java objects, this will call <code class="code"><span class="hl-site">toString</span>()</code> to convert
the object to a String.
</p></div><div class="section" title="11.7.3.&nbsp;Println"><div class="titlepage"><div><div><h3 class="title"><a name="N1521F"></a>11.7.3.&nbsp;<code class="code"><span class="hl-variable">Println</span></code></h3></div></div></div><a name="N15223" class="indexterm"></a><p><a name="ref.stdlib.text.Println"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Println</span>(<span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td></tr></table><p>
</p><p>Same as <code class="code"><span class="hl-variable">Print</span></code>, appending a newline.
</p></div><div class="section" title="11.7.4.&nbsp;Read"><div class="titlepage"><div><div><h3 class="title"><a name="N15236"></a>11.7.4.&nbsp;<code class="code"><span class="hl-variable">Read</span></code></h3></div></div></div><a name="N1523A" class="indexterm"></a><p><a name="ref.stdlib.text.Read"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Read</span>[<span class="hl-variable">A</span>](<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td><td bgcolor="#6600FF"><font color="#FFFFFF">Pure</font></td></tr></table><p>
</p><p>Given a string representing an Orc value (using standard
Orc literal syntax), return the corresponding value. If
the argument does not conform to Orc literal syntax,
<a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> with an error.
</p><p>Example:
</p><pre class="orc">
  <span class="hl-site">Read</span>(<span class="hl-literal">"true"</span>) <span class="hl-comment">-- publishes the boolean true</span>
<span class="hl-combinator">|</span> <span class="hl-site">Read</span>(<span class="hl-literal">"1"</span>) <span class="hl-comment">-- publishes the integer 1</span>
<span class="hl-combinator">|</span> <span class="hl-site">Read</span>(<span class="hl-literal">"(3.0, [])"</span>) <span class="hl-comment">-- publishes the tuple (3.0, [])</span>
<span class="hl-combinator">|</span> <span class="hl-site">Read</span>(<span class="hl-literal">"\"hi\""</span>) <span class="hl-comment">-- publishes the string "hi"</span></pre><p>
</p></div><div class="section" title="11.7.5.&nbsp;Write"><div class="titlepage"><div><div><h3 class="title"><a name="N15257"></a>11.7.5.&nbsp;<code class="code"><span class="hl-variable">Write</span></code></h3></div></div></div><a name="N1525B" class="indexterm"></a><p><a name="ref.stdlib.text.Write"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Write</span>(<span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span></code></p><table class="proptable"><tr><td bgcolor="#00CC00"><font color="#FFFFFF">Definite</font></td><td bgcolor="#6600FF"><font color="#FFFFFF">Pure</font></td></tr></table><p>
</p><p>Given an Orc value, return its string representation
using standard Orc literal syntax.  If the value is
of a type with no literal syntax,
(for example, it is a site), return an arbitrary string
representation which is intended to be human-readable.
</p><p>Example:
</p><pre class="orc">
  <span class="hl-site">Write</span>(<span class="hl-literal">true</span>) <span class="hl-comment">-- publishes "true"</span>
<span class="hl-combinator">|</span> <span class="hl-site">Write</span>(<span class="hl-literal">1</span>) <span class="hl-comment">-- publishes "1"</span>
<span class="hl-combinator">|</span> <span class="hl-site">Write</span>((<span class="hl-literal">3.0</span>, [])) <span class="hl-comment">-- publishes "(3.0, [])"</span>
<span class="hl-combinator">|</span> <span class="hl-site">Write</span>(<span class="hl-literal">"hi"</span>) <span class="hl-comment">-- publishes "\"hi\""</span></pre><p>
</p></div><div class="section" title="11.7.6.&nbsp;lines"><div class="titlepage"><div><div><h3 class="title"><a name="N15274"></a>11.7.6.&nbsp;<code class="code"><span class="hl-variable">lines</span></code></h3></div></div></div><a name="N15278" class="indexterm"></a><p><a name="ref.stdlib.text.lines"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">lines</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">String</span>]</code></p><p>Split a string into lines, which are substrings
terminated by an endline or the end of the string.
DOS, Mac, and Unix endline conventions are all accepted.
Endline characters are not included in the result.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">lines</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">String</span>]
<span class="hl-keyword">def</span> <span class="hl-site">lines</span>(<span class="hl-variable">text</span>) <span class="hl-operator">=</span> <span class="hl-site">arrayToList</span>(<span class="hl-variable">text</span>.<span class="hl-site">split</span>(<span class="hl-literal">"\n|\r\n|\r"</span>))


      </pre></div><div class="section" title="11.7.7.&nbsp;unlines"><div class="titlepage"><div><div><h3 class="title"><a name="N15288"></a>11.7.7.&nbsp;<code class="code"><span class="hl-variable">unlines</span></code></h3></div></div></div><a name="N1528C" class="indexterm"></a><p><a name="ref.stdlib.text.unlines"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">unlines</span>(<span class="hl-site">List</span>[<span class="hl-variable">String</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span></code></p><p>Append a linefeed, "\n", to each string in the sequence
and concatenate the results.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">unlines</span>(<span class="hl-site">List</span>[<span class="hl-variable">String</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span>
<span class="hl-keyword">def</span> <span class="hl-site">unlines</span>(<span class="hl-variable">line</span><span class="hl-operator">:</span><span class="hl-variable">lines</span>) <span class="hl-operator">=</span> <span class="hl-variable">line</span> <span class="hl-operator">+</span> <span class="hl-literal">"\n"</span> <span class="hl-operator">+</span> <span class="hl-site">unlines</span>(<span class="hl-variable">lines</span>)
<span class="hl-keyword">def</span> <span class="hl-site">unlines</span>([]) <span class="hl-operator">=</span> <span class="hl-literal">""</span>
  

      </pre></div><div class="section" title="11.7.8.&nbsp;words"><div class="titlepage"><div><div><h3 class="title"><a name="N1529C"></a>11.7.8.&nbsp;<code class="code"><span class="hl-variable">words</span></code></h3></div></div></div><a name="N152A0" class="indexterm"></a><p><a name="ref.stdlib.text.words"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">words</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">String</span>]</code></p><p>Split a string into words, which are sequences of non-whitespace characters separated by whitespace.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        

<span class="hl-keyword">def</span> <span class="hl-site">words</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">String</span>]
<span class="hl-keyword">def</span> <span class="hl-site">words</span>(<span class="hl-variable">text</span>) <span class="hl-operator">=</span> <span class="hl-site">arrayToList</span>(<span class="hl-variable">text</span>.<span class="hl-site">trim</span>().<span class="hl-site">split</span>(<span class="hl-literal">"\\s+"</span>))



      </pre></div><div class="section" title="11.7.9.&nbsp;unwords"><div class="titlepage"><div><div><h3 class="title"><a name="N152B0"></a>11.7.9.&nbsp;<code class="code"><span class="hl-variable">unwords</span></code></h3></div></div></div><a name="N152B4" class="indexterm"></a><p><a name="ref.stdlib.text.unwords"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">unwords</span>(<span class="hl-site">List</span>[<span class="hl-variable">String</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span></code></p><p>Concatenate a sequence of strings with a single space between
each string.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">unwords</span>(<span class="hl-site">List</span>[<span class="hl-variable">String</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span>
<span class="hl-keyword">def</span> <span class="hl-site">unwords</span>([]) <span class="hl-operator">=</span> <span class="hl-literal">""</span>
<span class="hl-keyword">def</span> <span class="hl-site">unwords</span>([<span class="hl-variable">word</span>]) <span class="hl-operator">=</span> <span class="hl-variable">word</span>
<span class="hl-keyword">def</span> <span class="hl-site">unwords</span>(<span class="hl-variable">word</span><span class="hl-operator">:</span><span class="hl-variable">words</span>) <span class="hl-operator">=</span> <span class="hl-variable">word</span> <span class="hl-operator">+</span> <span class="hl-literal">" "</span> <span class="hl-operator">+</span> <span class="hl-site">unwords</span>(<span class="hl-variable">words</span>)


      </pre></div><div class="section" title="11.7.10.&nbsp;characters"><div class="titlepage"><div><div><h3 class="title"><a name="N152C4"></a>11.7.10.&nbsp;<code class="code"><span class="hl-variable">characters</span></code></h3></div></div></div><a name="N152C8" class="indexterm"></a><p><a name="ref.stdlib.text.characters"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">characters</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">String</span>]</code></p><p>Convert a string to a list of strings of length 1,
where the list items are the characters of the given string.
</p><p>Example:
characters("Hello") = ["H", "e", "l", "l", "o"]
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">characters</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">String</span>]
<span class="hl-keyword">def</span> <span class="hl-site">characters</span>(<span class="hl-variable">s</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">def</span> <span class="hl-site">rest</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">String</span>]
  <span class="hl-keyword">def</span> <span class="hl-site">rest</span>(<span class="hl-variable">i</span>) <span class="hl-operator">=</span>
      <span class="hl-site">Ift</span> (<span class="hl-variable">i</span> <span class="hl-operator">&gt;=</span> <span class="hl-variable">s</span>.<span class="hl-site">length</span>()) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> []
    <span class="hl-combinator">|</span> <span class="hl-site">Ift</span> (<span class="hl-variable">i</span> <span class="hl-operator">&lt;:</span> <span class="hl-variable">s</span>.<span class="hl-site">length</span>()) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">s</span>.<span class="hl-site">substring</span>(<span class="hl-variable">i</span>,<span class="hl-variable">i</span><span class="hl-operator">+</span><span class="hl-literal">1</span>)<span class="hl-operator">:</span><span class="hl-site">rest</span>(<span class="hl-variable">i</span><span class="hl-operator">+</span><span class="hl-literal">1</span>)
  <span class="hl-site">rest</span>(<span class="hl-literal">0</span>)

      </pre></div></div><div class="section" title="11.8.&nbsp;time: Real time."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.stdlib.time"></a>11.8.&nbsp;time: Real time.</h2></div></div></div><p>Real time.
</p><div class="section" title="11.8.1.&nbsp;Rclock"><div class="titlepage"><div><div><h3 class="title"><a name="N152E4"></a>11.8.1.&nbsp;<code class="code"><span class="hl-variable">Rclock</span></code></h3></div></div></div><a name="N152E8" class="indexterm"></a><p><a name="ref.stdlib.time.Rclock"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Rclock</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> {. <span class="hl-variable">time</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> (<span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span>), <span class="hl-variable">wait</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> (<span class="hl-keyword">lambda</span> (<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span>) .}</code></p><p>Create a new realtime clock instance.
</p><p><a name="ref.stdlib.time.rclock"></a><code class="code"> <span class="hl-variable">rclock</span>.<span class="hl-site">wait</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p>Return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a> after the given number of milliseconds.
</p><p><code class="code"> <span class="hl-variable">rclock</span>.<span class="hl-site">time</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p>Return the total number of milliseconds that have passed
since this clock was created.
Ranges from 0 to <code class="code">Long.MAX_VALUE</code>.
</p></div><div class="section" title="11.8.2.&nbsp;Rwait"><div class="titlepage"><div><div><h3 class="title"><a name="N15304"></a>11.8.2.&nbsp;<code class="code"><span class="hl-variable">Rwait</span></code></h3></div></div></div><a name="N15308" class="indexterm"></a><p><a name="ref.stdlib.time.Rwait"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Rwait</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p>Return a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a> after the given number of milliseconds.
</p></div><div class="section" title="11.8.3.&nbsp;Rtime"><div class="titlepage"><div><div><h3 class="title"><a name="N15315"></a>11.8.3.&nbsp;<code class="code"><span class="hl-variable">Rtime</span></code></h3></div></div></div><a name="N15319" class="indexterm"></a><p><a name="ref.stdlib.time.Rtime"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Rtime</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p>Return the total number of milliseconds that have passed
since this program began executing.
Ranges from 0 to <code class="code">Long.MAX_VALUE</code>.
</p></div><div class="section" title="11.8.4.&nbsp;metronome"><div class="titlepage"><div><div><h3 class="title"><a name="N15326"></a>11.8.4.&nbsp;<code class="code"><span class="hl-variable">metronome</span></code></h3></div></div></div><a name="N1532A" class="indexterm"></a><p><a name="ref.stdlib.time.metronome"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">metronome</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p>Publish a <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signal</a> at regular intervals, indefinitely. 
The period is given by the argument, in milliseconds.
</p></div></div><div class="section" title="11.9.&nbsp;util: Miscellaneous utility functions."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.stdlib.util"></a>11.9.&nbsp;util: Miscellaneous utility functions.</h2></div></div></div><p>Miscellaneous utility functions.
</p><div class="section" title="11.9.1.&nbsp;Random"><div class="titlepage"><div><div><h3 class="title"><a name="N15341"></a>11.9.1.&nbsp;<code class="code"><span class="hl-variable">Random</span></code></h3></div></div></div><a name="N15345" class="indexterm"></a><p><a name="ref.stdlib.util.Random"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Random</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p>Return a random <a class="link" href="#ref.data.numeric" title="1.2.&nbsp;Numerics">integer</a>
chosen from the range of all possible 32-bit integers.
</p></div><div class="section" title="11.9.2.&nbsp;Random"><div class="titlepage"><div><div><h3 class="title"><a name="N15352"></a>11.9.2.&nbsp;<code class="code"><span class="hl-variable">Random</span></code></h3></div></div></div><a name="N15356" class="indexterm"></a><p><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Random</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p>Return a pseudorandom, uniformly distributed <a class="link" href="#ref.data.numeric" title="1.2.&nbsp;Numerics">integer</a>
between 0 (inclusive) and the specified value (exclusive).
If the argument is 0, <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halt</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>.
</p></div><div class="section" title="11.9.3.&nbsp;URandom"><div class="titlepage"><div><div><h3 class="title"><a name="N1536A"></a>11.9.3.&nbsp;<code class="code"><span class="hl-variable">URandom</span></code></h3></div></div></div><a name="N1536E" class="indexterm"></a><p><a name="ref.stdlib.util.URandom"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">URandom</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Number</span></code></p><p>Return a pseudorandom, uniformly distributed <a class="link" href="#ref.data.numeric" title="1.2.&nbsp;Numerics">number</a>
between 0.0 (inclusive) and 1.0 (exclusive).
</p></div><div class="section" title="11.9.4.&nbsp;UUID"><div class="titlepage"><div><div><h3 class="title"><a name="N1537B"></a>11.9.4.&nbsp;<code class="code"><span class="hl-variable">UUID</span></code></h3></div></div></div><a name="N1537F" class="indexterm"></a><p><a name="ref.stdlib.util.UUID"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">UUID</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span></code></p><p>Return a random (type 4) UUID represented as a <a class="link" href="#ref.data.string" title="1.3.&nbsp;Character Strings">string</a>.
</p></div><div class="section" title="11.9.5.&nbsp;Prompt"><div class="titlepage"><div><div><h3 class="title"><a name="N1538C"></a>11.9.5.&nbsp;<code class="code"><span class="hl-variable">Prompt</span></code></h3></div></div></div><a name="N15390" class="indexterm"></a><p><a name="ref.stdlib.util.Prompt"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Prompt</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span></code></p><table class="proptable"><tr><td bgcolor="#CC0000"><font color="#FFFFFF">Indefinite</font></td></tr></table><p>
</p><p>Prompt the user for some input. The user may cancel the prompt,
in which case the site fails <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>. Otherwise their response
is returned as soon as it is received.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes the user's name</span>
<span class="hl-site">Prompt</span>(<span class="hl-literal">"What is your name?"</span>)</pre><p>
</p><p>The user response is always taken to be a string. Thus, integer 
3 as a response will be treated as "3". To convert the response 
to its appropriate data type, use the library function
<a class="link" href="#ref.stdlib.text.Read"><code class="code"><span class="hl-variable">Read</span></code></a>:
</p><pre class="orc">
<span class="hl-comment">-- Prompts the user to enter an integer, then parses the response.</span>
<span class="hl-site">Prompt</span>(<span class="hl-literal">"Enter an integer:"</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">r</span><span class="hl-combinator">&gt;</span> <span class="hl-site">Read</span>(<span class="hl-variable">r</span>)</pre><p>
</p></div><div class="section" title="11.9.6.&nbsp;signals"><div class="titlepage"><div><div><h3 class="title"><a name="N153B6"></a>11.9.6.&nbsp;<code class="code"><span class="hl-variable">signals</span></code></h3></div></div></div><a name="N153BA" class="indexterm"></a><p><a name="ref.stdlib.util.signals"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">signals</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the given number of <a class="link" href="#ref.data.signal" title="1.4.&nbsp;signal">signals</a>, simultaneously.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes five signals</span>
<span class="hl-site">signals</span>(<span class="hl-literal">5</span>)</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">signals</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span>
<span class="hl-keyword">def</span> <span class="hl-site">signals</span>(<span class="hl-variable">n</span>) <span class="hl-operator">=</span> <span class="hl-keyword">if</span> <span class="hl-variable">n</span> <span class="hl-operator">:&gt;</span> <span class="hl-literal">0</span> <span class="hl-keyword">then</span> (<span class="hl-keyword">signal</span> <span class="hl-combinator">|</span> <span class="hl-site">signals</span>(<span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-literal">1</span>)) <span class="hl-keyword">else</span> <span class="hl-keyword">stop</span>


      </pre></div><div class="section" title="11.9.7.&nbsp;for"><div class="titlepage"><div><div><h3 class="title"><a name="N153D7"></a>11.9.7.&nbsp;<code class="code"><span class="hl-variable">for</span></code></h3></div></div></div><a name="N153DB" class="indexterm"></a><p><a name="ref.stdlib.util.for"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">for</span>(<span class="hl-variable">Integer</span>, <span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p><a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> all values in the given half-open range, simultaneously.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: 1 2 3 4 5</span>
<span class="hl-site">for</span>(<span class="hl-literal">1</span>,<span class="hl-literal">6</span>)</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">for</span>(<span class="hl-variable">Integer</span>, <span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span>
<span class="hl-keyword">def</span> <span class="hl-site">for</span>(<span class="hl-variable">low</span>, <span class="hl-variable">high</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">if</span> <span class="hl-variable">low</span> <span class="hl-operator">&gt;=</span> <span class="hl-variable">high</span> <span class="hl-keyword">then</span> <span class="hl-keyword">stop</span>
  <span class="hl-keyword">else</span> ( <span class="hl-variable">low</span> <span class="hl-combinator">|</span> <span class="hl-site">for</span>(<span class="hl-variable">low</span><span class="hl-operator">+</span><span class="hl-literal">1</span>, <span class="hl-variable">high</span>) )


      </pre></div><div class="section" title="11.9.8.&nbsp;upto"><div class="titlepage"><div><div><h3 class="title"><a name="N153F4"></a>11.9.8.&nbsp;<code class="code"><span class="hl-variable">upto</span></code></h3></div></div></div><a name="N153F8" class="indexterm"></a><p><a name="ref.stdlib.util.upto"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">upto</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span></code></p><p><code class="code"><span class="hl-site">upto</span>(<span class="hl-variable">n</span>)</code> <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> all values in the range <code class="code">(<span class="hl-literal">0.</span>.<span class="hl-variable">n</span><span class="hl-operator">-</span><span class="hl-literal">1</span>)</code>
simultaneously.
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: 0 1 2 3 4</span>
<span class="hl-site">upto</span>(<span class="hl-literal">5</span>)</pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">upto</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span>
<span class="hl-keyword">def</span> <span class="hl-site">upto</span>(<span class="hl-variable">high</span>) <span class="hl-operator">=</span> <span class="hl-site">for</span>(<span class="hl-literal">0</span>, <span class="hl-variable">high</span>)



<span class="hl-keyword">import</span> <span class="hl-variable">class</span> <span class="hl-variable">Iterable</span> <span class="hl-operator">=</span> <span class="hl-literal">"java.lang.Iterable"</span>


      </pre></div><div class="section" title="11.9.9.&nbsp;IterableToStream"><div class="titlepage"><div><div><h3 class="title"><a name="N15417"></a>11.9.9.&nbsp;<code class="code"><span class="hl-variable">IterableToStream</span></code></h3></div></div></div><a name="N1541B" class="indexterm"></a><p><a name="ref.stdlib.util.IterableToStream"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">IterableToStream</span>[<span class="hl-variable">A</span>](<span class="hl-site">Iterable</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span> </code></p><p>Converts a Java object implementing the Iterable interface
into an Orc stream backed by the object's iterator. 
When the site is called, if the iterator has items remaining,
the next item is returned. If the iterator has no items
remaining, the call <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a>.
</p></div><div class="section" title="11.9.10.&nbsp;iterableToList"><div class="titlepage"><div><div><h3 class="title"><a name="N15428"></a>11.9.10.&nbsp;<code class="code"><span class="hl-variable">iterableToList</span></code></h3></div></div></div><a name="N1542C" class="indexterm"></a><p><a name="ref.stdlib.util.iterableToList"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">iterableToList</span>[<span class="hl-variable">A</span>](<span class="hl-site">Iterable</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]</code></p><p>Given a Java object implementing the Iterable interface, 
create an Orc <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> whose elements are the values produced by
the object's iterator, in the same order. 
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">iterableToList</span>[<span class="hl-variable">A</span>](<span class="hl-site">Iterable</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">iterableToList</span>(<span class="hl-variable">iterable</span>) <span class="hl-operator">=</span> 
  <span class="hl-keyword">val</span> <span class="hl-variable">s</span> <span class="hl-operator">=</span> <span class="hl-site">IterableToStream</span>[<span class="hl-variable">A</span>](<span class="hl-variable">iterable</span>)
  <span class="hl-keyword">def</span> <span class="hl-site">walk</span>(<span class="hl-site">List</span>[<span class="hl-variable">A</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">List</span>[<span class="hl-variable">A</span>]
  <span class="hl-keyword">def</span> <span class="hl-site">walk</span>(<span class="hl-variable">l</span>) <span class="hl-operator">=</span> <span class="hl-site">s</span>()<span class="hl-operator">:</span><span class="hl-variable">l</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">m</span><span class="hl-combinator">&gt;</span> <span class="hl-site">walk</span>(<span class="hl-variable">m</span>) <span class="hl-combinator">;</span> <span class="hl-site">reverse</span>(<span class="hl-variable">l</span>) 
  <span class="hl-site">walk</span>([]) 


      </pre></div><div class="section" title="11.9.11.&nbsp;fillArray"><div class="titlepage"><div><div><h3 class="title"><a name="N15440"></a>11.9.11.&nbsp;<code class="code"><span class="hl-variable">fillArray</span></code></h3></div></div></div><a name="N15444" class="indexterm"></a><p><a name="ref.stdlib.util.fillArray"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">fillArray</span>[<span class="hl-variable">A</span>](<span class="hl-site">Array</span>[<span class="hl-variable">A</span>], <span class="hl-keyword">lambda</span> (<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Array</span>[<span class="hl-variable">A</span>]</code></p><p>Given an array and a function from indices to values, populate the array
by calling the function for each index in the array. <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">Publish</a> the array
once it has been populated.
</p><p>For example, to set all elements of an array to zero:
</p><pre class="orc">
<span class="hl-comment">-- Publishes: 0 0 0</span>
<span class="hl-keyword">val</span> <span class="hl-variable">a</span> <span class="hl-operator">=</span> <span class="hl-site">fillArray</span>(<span class="hl-site">Array</span>(<span class="hl-literal">3</span>), <span class="hl-keyword">lambda</span> (<span class="hl-variable">_</span>) <span class="hl-operator">=</span> <span class="hl-literal">0</span>)
<span class="hl-site">a</span>(<span class="hl-literal">0</span>)<span class="hl-operator">?</span> <span class="hl-combinator">|</span> <span class="hl-site">a</span>(<span class="hl-literal">1</span>)<span class="hl-operator">?</span> <span class="hl-combinator">|</span> <span class="hl-site">a</span>(<span class="hl-literal">2</span>)<span class="hl-operator">?</span></pre><p>
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">fillArray</span>[<span class="hl-variable">A</span>](<span class="hl-site">Array</span>[<span class="hl-variable">A</span>], <span class="hl-keyword">lambda</span> (<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>)
  <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Array</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">fillArray</span>(<span class="hl-variable">a</span>, <span class="hl-variable">f</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">n</span> <span class="hl-operator">=</span> <span class="hl-variable">a</span>.<span class="hl-variable">length</span><span class="hl-operator">?</span>
  <span class="hl-keyword">def</span> <span class="hl-site">fill</span>(<span class="hl-variable">Integer</span>, <span class="hl-keyword">lambda</span>(<span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Bot</span>
  <span class="hl-keyword">def</span> <span class="hl-site">fill</span>(<span class="hl-variable">i</span>, <span class="hl-variable">f</span>) <span class="hl-operator">=</span>
    <span class="hl-keyword">if</span> <span class="hl-variable">i</span> <span class="hl-operator">=</span> <span class="hl-variable">n</span> <span class="hl-keyword">then</span> <span class="hl-keyword">stop</span>
    <span class="hl-keyword">else</span> ( <span class="hl-site">a</span>(<span class="hl-variable">i</span>) <span class="hl-operator">:=</span> <span class="hl-site">f</span>(<span class="hl-variable">i</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
         <span class="hl-combinator">|</span> <span class="hl-site">fill</span>(<span class="hl-variable">i</span><span class="hl-operator">+</span><span class="hl-literal">1</span>, <span class="hl-variable">f</span>) )
  <span class="hl-site">fill</span>(<span class="hl-literal">0</span>, <span class="hl-variable">f</span>) <span class="hl-combinator">;</span> <span class="hl-variable">a</span>


      </pre></div><div class="section" title="11.9.12.&nbsp;sliceArray"><div class="titlepage"><div><div><h3 class="title"><a name="N1545E"></a>11.9.12.&nbsp;<code class="code"><span class="hl-variable">sliceArray</span></code></h3></div></div></div><a name="N15462" class="indexterm"></a><p><a name="ref.stdlib.util.sliceArray"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">sliceArray</span>[<span class="hl-variable">A</span>](<span class="hl-site">Array</span>[<span class="hl-variable">A</span>], <span class="hl-variable">Integer</span>, <span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Array</span>[<span class="hl-variable">A</span>]</code></p><p>Given an array and a half-open index range, create a new array
which contains the elements of the original array in that index
range.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">def</span> <span class="hl-site">sliceArray</span>[<span class="hl-variable">A</span>](<span class="hl-site">Array</span>[<span class="hl-variable">A</span>], <span class="hl-variable">Integer</span>, <span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-site">Array</span>[<span class="hl-variable">A</span>]
<span class="hl-keyword">def</span> <span class="hl-site">sliceArray</span>(<span class="hl-variable">orig</span>, <span class="hl-variable">from</span>, <span class="hl-variable">until</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">size</span> <span class="hl-operator">=</span> <span class="hl-variable">until</span> <span class="hl-operator">-</span> <span class="hl-variable">from</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">a</span> <span class="hl-operator">=</span> <span class="hl-site">Array</span>[<span class="hl-variable">A</span>](<span class="hl-variable">size</span>)
  <span class="hl-keyword">def</span> <span class="hl-site">copy</span>(<span class="hl-variable">i</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Integer</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Bot</span> <span class="hl-operator">=</span>
    <span class="hl-site">Ift</span>(<span class="hl-variable">i</span> <span class="hl-operator">&lt;:</span> <span class="hl-variable">size</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> 
    <span class="hl-site">a</span>(<span class="hl-variable">i</span>) <span class="hl-operator">:=</span> <span class="hl-site">orig</span>(<span class="hl-variable">from</span> <span class="hl-operator">+</span> <span class="hl-variable">i</span>)<span class="hl-operator">?</span> <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> 
    <span class="hl-site">copy</span>(<span class="hl-variable">i</span><span class="hl-operator">+</span><span class="hl-literal">1</span>)
  <span class="hl-site">copy</span>(<span class="hl-literal">0</span>) <span class="hl-combinator">;</span> <span class="hl-variable">a</span>


      </pre></div><div class="section" title="11.9.13.&nbsp;takePubs"><div class="titlepage"><div><div><h3 class="title"><a name="N15472"></a>11.9.13.&nbsp;<code class="code"><span class="hl-variable">takePubs</span></code></h3></div></div></div><a name="N15476" class="indexterm"></a><p><a name="ref.stdlib.util.takePubs"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">takePubs</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Integer</span>, <span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p><code class="code"><span class="hl-site">takePubs</span>(<span class="hl-variable">n</span>, <span class="hl-variable">f</span>)</code> calls <code class="code"><span class="hl-site">f</span>()</code>,
<a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publishes</a> the first <code class="code"><span class="hl-variable">n</span></code> values published
by <code class="code"><span class="hl-site">f</span>()</code> (as they are published), and then
<a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        

<span class="hl-keyword">def</span> <span class="hl-site">takePubs</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Integer</span>, <span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">takePubs</span>(<span class="hl-variable">n</span>, <span class="hl-variable">f</span>) <span class="hl-operator">=</span>
  <span class="hl-keyword">val</span> <span class="hl-variable">out</span> <span class="hl-operator">=</span> <span class="hl-site">Channel</span>[<span class="hl-variable">A</span>]()
  <span class="hl-keyword">val</span> <span class="hl-variable">c</span> <span class="hl-operator">=</span> <span class="hl-site">Counter</span>(<span class="hl-variable">n</span>)
  <span class="hl-site">Let</span>(
    <span class="hl-site">f</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span>
    <span class="hl-site">Ift</span>(<span class="hl-variable">c</span>.<span class="hl-site">dec</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">out</span>.<span class="hl-site">put</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">false</span>
       <span class="hl-combinator">;</span> <span class="hl-variable">out</span>.<span class="hl-site">closeD</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span>)
  ) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span> <span class="hl-combinator">|</span> <span class="hl-site">repeat</span>(<span class="hl-variable">out</span>.<span class="hl-variable">get</span>)


      </pre></div><div class="section" title="11.9.14.&nbsp;withLock"><div class="titlepage"><div><div><h3 class="title"><a name="N15499"></a>11.9.14.&nbsp;<code class="code"><span class="hl-variable">withLock</span></code></h3></div></div></div><a name="N1549D" class="indexterm"></a><p><a name="ref.stdlib.util.withLock"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">withLock</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Semaphore</span>, <span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Acquire the semaphore and run a thunk which is expected to <a class="link" href="#ref.concepts.publish" title="8.1.&nbsp;Publication">publish</a>
no more than one value. Publishes the value published by the
thunk and releases the semaphore.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        

<span class="hl-keyword">def</span> <span class="hl-site">withLock</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Semaphore</span>, <span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">withLock</span>(<span class="hl-variable">s</span>, <span class="hl-variable">f</span>) <span class="hl-operator">=</span>
  <span class="hl-variable">s</span>.<span class="hl-site">acquire</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> (
    <span class="hl-site">Let</span>(<span class="hl-site">f</span>()) <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span>
    <span class="hl-variable">s</span>.<span class="hl-site">release</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
    <span class="hl-variable">x</span>
    <span class="hl-combinator">;</span> <span class="hl-variable">s</span>.<span class="hl-site">release</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
  )



      </pre></div><div class="section" title="11.9.15.&nbsp;synchronized"><div class="titlepage"><div><div><h3 class="title"><a name="N154B1"></a>11.9.15.&nbsp;<code class="code"><span class="hl-variable">synchronized</span></code></h3></div></div></div><a name="N154B5" class="indexterm"></a><p><a name="ref.stdlib.util.synchronized"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">synchronized</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Semaphore</span>, <span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>)() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span></code></p><p>Given a lock and thunk, return a new thunk which is serialized
on the lock. Similar to Java's synchronized keyword.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        

<span class="hl-keyword">def</span> <span class="hl-site">synchronized</span>[<span class="hl-variable">A</span>](<span class="hl-variable">Semaphore</span>, <span class="hl-keyword">lambda</span> () <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-keyword">lambda</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">A</span>
<span class="hl-keyword">def</span> <span class="hl-site">synchronized</span>(<span class="hl-variable">s</span>,<span class="hl-variable">f</span>) <span class="hl-operator">=</span> <span class="hl-keyword">lambda</span>() <span class="hl-operator">=</span> <span class="hl-site">withLock</span>(<span class="hl-variable">s</span>, <span class="hl-variable">f</span>)

      </pre></div></div><div class="section" title="11.10.&nbsp;web: Web browsing, HTTP, and JSON capabilities."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.stdlib.web"></a>11.10.&nbsp;web: Web browsing, HTTP, and JSON capabilities.</h2></div></div></div><p>Web browsing, HTTP, and JSON capabilities.
</p><div class="section" title="11.10.1.&nbsp;Browse"><div class="titlepage"><div><div><h3 class="title"><a name="N154CF"></a>11.10.1.&nbsp;<code class="code"><span class="hl-variable">Browse</span></code></h3></div></div></div><a name="N154D3" class="indexterm"></a><p><a name="ref.stdlib.web.Browse"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">Browse</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Signal</span></code></p><p>Attempts to open a browser window in whatever user context
is available, pointing to the URL given by the string argument.
The URL must be absolute and well-formed. If the URL is malformed
or unreachable, the call <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a>. 
</p><p>Example:
</p><pre class="orc">
<span class="hl-comment">-- Open a browser window to the Google home page</span>
<span class="hl-site">Browse</span>(<span class="hl-literal">"http://www.google.com"</span>)
</pre><p>
</p></div><p>The HTTP site provides a simple mechanism to send GET and POST requests to a URL.
</p><div class="section" title="11.10.2.&nbsp;HTTP"><div class="titlepage"><div><div><h3 class="title"><a name="N154EC"></a>11.10.2.&nbsp;<code class="code"><span class="hl-variable">HTTP</span></code></h3></div></div></div><a name="N154F0" class="indexterm"></a><p><a name="ref.stdlib.web.HTTP"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">HTTP</span>(<span class="hl-variable">java</span>.<span class="hl-variable">net</span>.<span class="hl-variable">URL</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">HTTP</span> </code></p><p>Publishes an HTTP site which accepts HTTP requests on the given URL.
</p><p><a name="ref.stdlib.web.http"></a><code class="code"> <span class="hl-variable">http</span>.<span class="hl-site">get</span>() <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span></code></p><p>Performs a GET request on the URL used to create this HTTP site. 
The payload is empty. 
The response is published as a single <a class="link" href="#ref.data.string" title="1.3.&nbsp;Character Strings">string</a>.
</p><p><code class="code"> <span class="hl-variable">http</span>.<span class="hl-site">post</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span></code></p><p>Performs a POST request on the URL used to create this HTTP site. 
The string argument is used as a UTF-16 encoded payload.
The response is published as a single string.
</p><p><code class="code"> <span class="hl-variable">http</span>.<span class="hl-variable">url</span> <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span></code></p><p>Publishes the URL used to create this HTTP site. If query parameters
were used, they will be displayed in the query part of the URL,
with the appropriate encoding.
</p></div><div class="section" title="11.10.3.&nbsp;HTTP"><div class="titlepage"><div><div><h3 class="title"><a name="N1550D"></a>11.10.3.&nbsp;<code class="code"><span class="hl-variable">HTTP</span></code></h3></div></div></div><a name="N15511" class="indexterm"></a><p><code class="code"><span class="hl-variable">site</span> <span class="hl-site">HTTP</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">HTTP</span></code></p><p>Converts the given string to a URL U and then behaves as HTTP(U).
</p></div><div class="section" title="11.10.4.&nbsp;HTTP"><div class="titlepage"><div><div><h3 class="title"><a name="N15519"></a>11.10.4.&nbsp;<code class="code"><span class="hl-variable">HTTP</span></code></h3></div></div></div><a name="N1551D" class="indexterm"></a><p><code class="code"><span class="hl-variable">site</span> <span class="hl-site">HTTP</span>(<span class="hl-variable">String</span>, {..}) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">HTTP</span></code></p><p>Takes a string S and a query <a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">record</a> Q. Maps Q to a URL query string QS by translating each record binding to a query pair, escaping characters
if necessary, and then behaves as HTTP(S+QS).
</p></div><div class="section" title="11.10.5.&nbsp;ReadJSON"><div class="titlepage"><div><div><h3 class="title"><a name="N15529"></a>11.10.5.&nbsp;<code class="code"><span class="hl-variable">ReadJSON</span></code></h3></div></div></div><a name="N1552D" class="indexterm"></a><p><a name="ref.stdlib.web.ReadJSON"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">ReadJSON</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Top</span> </code></p><p>Parses a string representation of a JSON value, producing an Orc representation of that JSON value. 
</p><p>An Orc representation of a JSON value, called an OrcJSON value, 
is either a <a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">record</a> of OrcJSON values (representing a JSON object), 
a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> of OrcJSON values (representing a JSON array), 
or a literal value (representing a JSON primitive value).
</p><p>ReadJSON and WriteJSON are mutual inverses. 
If <em class="replaceable"><code>S</code></em> is a string representation of a JSON value, then <code class="code"><span class="hl-site">WriteJSON</span>(<span class="hl-site">ReadJSON</span>(</code><em class="replaceable"><code>S</code></em><code class="code">))</code> = <em class="replaceable"><code>S</code></em>, modulo whitespace and object member ordering.
</p></div><div class="section" title="11.10.6.&nbsp;WriteJSON"><div class="titlepage"><div><div><h3 class="title"><a name="N1554F"></a>11.10.6.&nbsp;<code class="code"><span class="hl-variable">WriteJSON</span></code></h3></div></div></div><a name="N15553" class="indexterm"></a><p><a name="ref.stdlib.web.WriteJSON"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">WriteJSON</span>(<span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span> </code></p><p>Serializes an Orc representation of a JSON value, producing a string representation of that JSON value. 
</p><p>An Orc representation of a JSON value, called an OrcJSON value, 
is either a <a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">record</a> of OrcJSON values (representing a JSON object), 
a <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> of OrcJSON values (representing a JSON array), 
or a literal value (representing a JSON primitive value).
</p><p>WriteJSON and ReadJSON are mutual inverses. 
If <em class="replaceable"><code>V</code></em> is an Orc representation of a JSON value, then <code class="code"><span class="hl-site">ReadJSON</span>(<span class="hl-site">WriteJSON</span>(</code><em class="replaceable"><code>V</code></em><code class="code">))</code> = <em class="replaceable"><code>V</code></em>.
</p></div></div><div class="section" title="11.11.&nbsp;xml: XML manipulation."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.stdlib.xml"></a>11.11.&nbsp;xml: XML manipulation.</h2></div></div></div><p>XML manipulation.
</p><div class="section" title="11.11.1.&nbsp;ReadXML"><div class="titlepage"><div><div><h3 class="title"><a name="N1557F"></a>11.11.1.&nbsp;<code class="code"><span class="hl-variable">ReadXML</span></code></h3></div></div></div><a name="N15583" class="indexterm"></a><p><a name="ref.stdlib.xml.ReadXML"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">ReadXML</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">XML</span>  </code></p><p>Parses a <a class="link" href="#ref.data.string" title="1.3.&nbsp;Character Strings">string</a> representation of XML into a structured form
that Orc can manipulate.
</p></div><div class="section" title="11.11.2.&nbsp;WriteXML"><div class="titlepage"><div><div><h3 class="title"><a name="N15590"></a>11.11.2.&nbsp;<code class="code"><span class="hl-variable">WriteXML</span></code></h3></div></div></div><a name="N15594" class="indexterm"></a><p><a name="ref.stdlib.xml.WriteXML"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">WriteXML</span>(<span class="hl-variable">XML</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">String</span></code></p><p>Serializes Orc's representation of XML to a <a class="link" href="#ref.data.string" title="1.3.&nbsp;Character Strings">string</a>.
</p></div><div class="section" title="11.11.3.&nbsp;XMLElement"><div class="titlepage"><div><div><h3 class="title"><a name="N155A1"></a>11.11.3.&nbsp;<code class="code"><span class="hl-variable">XMLElement</span></code></h3></div></div></div><a name="N155A5" class="indexterm"></a><p><a name="ref.stdlib.xml.XMLElement"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">XMLElement</span>(<span class="hl-variable">String</span>, {. .}, <span class="hl-site">List</span>[<span class="hl-variable">XML</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">XML</span>  </code></p><p>Creates an XML element node with the given tag, attributes,
and children. 
This site may also be used for <a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">matching</a>.
</p></div><div class="section" title="11.11.4.&nbsp;XMLText"><div class="titlepage"><div><div><h3 class="title"><a name="N155B2"></a>11.11.4.&nbsp;<code class="code"><span class="hl-variable">XMLText</span></code></h3></div></div></div><a name="N155B6" class="indexterm"></a><p><a name="ref.stdlib.xml.XMLText"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">XMLText</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">XML</span></code></p><p>Creates an XML text node with the given contents. 
Encoding may occur.
This site may also be used for <a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">matching</a>.
</p></div><div class="section" title="11.11.5.&nbsp;XMLCData"><div class="titlepage"><div><div><h3 class="title"><a name="N155C3"></a>11.11.5.&nbsp;<code class="code"><span class="hl-variable">XMLCData</span></code></h3></div></div></div><a name="N155C7" class="indexterm"></a><p><a name="ref.stdlib.xml.XMLCData"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">XMLCData</span>(<span class="hl-variable">String</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">XML</span></code></p><p>Creates an XML text node with the given contents.
Contents will not be encoded.
This site may also be used for <a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">matching</a>.
</p></div><div class="section" title="11.11.6.&nbsp;IsXML"><div class="titlepage"><div><div><h3 class="title"><a name="N155D4"></a>11.11.6.&nbsp;<code class="code"><span class="hl-variable">IsXML</span></code></h3></div></div></div><a name="N155D8" class="indexterm"></a><p><a name="ref.stdlib.xml.IsXML"></a><code class="code"><span class="hl-variable">site</span> <span class="hl-site">IsXML</span>(<span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">XML</span></code></p><p>Acts as the identity function for any XML node,
and <a class="link" href="#ref.concepts.states.halt" title="8.3.3.&nbsp;Halted">halts</a> <a class="link" href="#ref.concepts.silent" title="8.2.&nbsp;Silence">silently</a> for any non-XML argument.
</p></div><div class="section" title="11.11.7.&nbsp;xml"><div class="titlepage"><div><div><h3 class="title"><a name="N155E9"></a>11.11.7.&nbsp;<code class="code"><span class="hl-variable">xml</span></code></h3></div></div></div><a name="N155ED" class="indexterm"></a><p><a name="ref.stdlib.xml.xml"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">xml</span>(<span class="hl-variable">String</span>, <span class="hl-site">List</span>[<span class="hl-variable">XML</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">XML</span></code></p><p>Creates an XML element with the given tag and children,
and no attributes.
May also be used for <a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">matching</a>. When matching, the second
argument is a multimatch on each child, rather than a
match on the <a class="link" href="#ref.data.list" title="1.5.&nbsp;Lists">list</a> of children.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
        
<span class="hl-keyword">val</span> <span class="hl-variable">xml</span> <span class="hl-operator">=</span> 
  <span class="hl-keyword">def</span> <span class="hl-site">toxml</span>(<span class="hl-variable">String</span>, <span class="hl-site">List</span>[<span class="hl-variable">Top</span>]) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">XML</span>
  <span class="hl-keyword">def</span> <span class="hl-site">toxml</span>(<span class="hl-variable">tag</span>, <span class="hl-variable">children</span>) <span class="hl-operator">=</span> 
    <span class="hl-keyword">def</span> <span class="hl-site">liftChild</span>(<span class="hl-variable">Top</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">XML</span>
    <span class="hl-keyword">def</span> <span class="hl-site">liftChild</span>(<span class="hl-variable">x</span>) <span class="hl-operator">=</span> <span class="hl-site">IsXML</span>(<span class="hl-variable">x</span>) <span class="hl-combinator">;</span> <span class="hl-site">XMLText</span>(<span class="hl-literal">""</span> <span class="hl-operator">+</span> <span class="hl-variable">x</span>)
    <span class="hl-site">XMLElement</span>(<span class="hl-variable">tag</span>, {. .}, <span class="hl-site">map</span>(<span class="hl-variable">liftChild</span>, <span class="hl-variable">children</span>))
  <span class="hl-keyword">def</span> <span class="hl-site">fromxml</span>(<span class="hl-variable">XML</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">Top</span>
  <span class="hl-keyword">def</span> <span class="hl-site">fromxml</span>(<span class="hl-site">XMLElement</span>(<span class="hl-variable">tag</span>,<span class="hl-variable">attr</span>,<span class="hl-variable">children</span>)) <span class="hl-operator">=</span> 
    <span class="hl-site">each</span>(<span class="hl-variable">children</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">c</span><span class="hl-combinator">&gt;</span> 
      ( <span class="hl-variable">c</span> <span class="hl-combinator">&gt;</span><span class="hl-site">XMLElement</span>(<span class="hl-variable">_</span>,<span class="hl-variable">_</span>,<span class="hl-variable">_</span>)<span class="hl-combinator">&gt;</span> (<span class="hl-variable">tag</span>,<span class="hl-variable">c</span>)
      <span class="hl-combinator">|</span> <span class="hl-variable">c</span> <span class="hl-combinator">&gt;</span><span class="hl-site">XMLText</span>(<span class="hl-variable">s</span>)<span class="hl-combinator">&gt;</span> (<span class="hl-variable">tag</span>,<span class="hl-variable">s</span>)
      <span class="hl-combinator">|</span> <span class="hl-variable">c</span> <span class="hl-combinator">&gt;</span><span class="hl-site">XMLCData</span>(<span class="hl-variable">s</span>)<span class="hl-combinator">&gt;</span> (<span class="hl-variable">tag</span>,<span class="hl-variable">s</span>) )
  <span class="hl-keyword">def</span> <span class="hl-site">fromxml</span>(<span class="hl-site">XMLText</span>(<span class="hl-variable">s</span>)) <span class="hl-operator">=</span> <span class="hl-variable">s</span>
  <span class="hl-keyword">def</span> <span class="hl-site">fromxml</span>(<span class="hl-site">XMLCData</span>(<span class="hl-variable">s</span>)) <span class="hl-operator">=</span> <span class="hl-variable">s</span>
  {. <span class="hl-variable">apply</span> <span class="hl-operator">=</span> <span class="hl-variable">toxml</span>, <span class="hl-variable">unapply</span> <span class="hl-operator">=</span> <span class="hl-variable">fromxml</span> .}
  

      </pre></div><div class="section" title="11.11.8.&nbsp;xattr"><div class="titlepage"><div><div><h3 class="title"><a name="N15605"></a>11.11.8.&nbsp;<code class="code"><span class="hl-variable">xattr</span></code></h3></div></div></div><a name="N15609" class="indexterm"></a><p><a name="ref.stdlib.xml.xattr"></a><code class="code"><span class="hl-keyword">def</span> <span class="hl-site">xattr</span>(<span class="hl-variable">XML</span>, {. .}) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">XML</span></code></p><p>Creates a copy of the XML element, adding new
attributes as given by the <a class="link" href="#ref.data.record" title="1.7.&nbsp;Records">record</a> argument.
If there is a conflict, the new attributes override the old ones.
May also be used for <a class="link" href="#ref.patterns.call" title="5.6.&nbsp;Call Pattern">matching</a>.
</p><p title="Implementation"><b>Implementation.&nbsp;</b></p><pre class="programlisting">
          
<span class="hl-keyword">val</span> <span class="hl-variable">xattr</span> <span class="hl-operator">=</span>
  <span class="hl-keyword">def</span> <span class="hl-site">toattr</span>(<span class="hl-variable">XML</span>, {. .}) <span class="hl-operator">:</span><span class="hl-operator">:</span> <span class="hl-variable">XML</span>
  <span class="hl-keyword">def</span> <span class="hl-site">toattr</span>(<span class="hl-site">XMLElement</span>(<span class="hl-variable">tag</span>, <span class="hl-variable">attr</span>, <span class="hl-variable">children</span>), <span class="hl-variable">moreattr</span>) <span class="hl-operator">=</span> 
    <span class="hl-site">XMLElement</span>(<span class="hl-variable">tag</span>, <span class="hl-variable">attr</span> <span class="hl-operator">+</span> <span class="hl-variable">moreattr</span>, <span class="hl-variable">children</span>)

  <span class="hl-keyword">def</span> <span class="hl-site">fromattr</span>(<span class="hl-variable">XML</span>) <span class="hl-operator">:</span><span class="hl-operator">:</span> (<span class="hl-variable">XML</span>, {. .})
  <span class="hl-keyword">def</span> <span class="hl-site">fromattr</span>(<span class="hl-site">XMLElement</span>(<span class="hl-variable">tag</span>, <span class="hl-variable">attr</span>, <span class="hl-variable">children</span>)) <span class="hl-operator">=</span>
    (<span class="hl-site">XMLElement</span>(<span class="hl-variable">tag</span>, {. .}, <span class="hl-variable">children</span>), <span class="hl-variable">attr</span>)
  {. <span class="hl-variable">apply</span> <span class="hl-operator">=</span> <span class="hl-variable">toattr</span>, <span class="hl-variable">unapply</span> <span class="hl-operator">=</span> <span class="hl-variable">fromattr</span> .}


      </pre></div></div></div><div lang="" class="index" title="Index of Key Terms"><div class="titlepage"><div><div><h2 class="title"><a name="ref.index"></a>Index of Key Terms</h2></div></div></div><p>
	This index is meant to direct the reader to key terms and concepts
	in this reference manual.  It is not a comprehensive index that lists
	every occurrence of every term.
	</p><div class="index"><div class="indexdiv"><h3>Symbols</h3><dl><dt>(:) (site), <a class="indexterm" href="#N14301">(:)</a></dt><dt>(:=) (function), <a class="indexterm" href="#N14CAA">(:=)</a></dt><dt>(:&gt;) (site), <a class="indexterm" href="#N1427F">(:&gt;)</a></dt><dt>(?) (function), <a class="indexterm" href="#N14C91">(?)</a></dt><dt>(/) (site), <a class="indexterm" href="#N1420D">(/)</a></dt><dt>(/=) (site), <a class="indexterm" href="#N142C8">(/=)</a></dt><dt>(~) (site), <a class="indexterm" href="#N142DA">(~)</a></dt><dt>(-) (site), <a class="indexterm" href="#N141B8">(-)</a></dt><dt>(*) (site), <a class="indexterm" href="#N141DD">(*)</a></dt><dt>(**) (site), <a class="indexterm" href="#N141F2">(**)</a></dt><dt>(&amp;&amp;) (site), <a class="indexterm" href="#N142E7">(&amp;&amp;)</a></dt><dt>(%) (site), <a class="indexterm" href="#N14235">(%)</a></dt><dt>(+) (site), <a class="indexterm" href="#N141A3">(+)</a></dt><dt>(&lt;:) (site), <a class="indexterm" href="#N14255">(&lt;:)</a></dt><dt>(&lt;=) (site), <a class="indexterm" href="#N1426A">(&lt;=)</a></dt><dt>(=) (site), <a class="indexterm" href="#N142A9">(=)</a></dt><dt>(&gt;=) (site), <a class="indexterm" href="#N14294">(&gt;=)</a></dt><dt>(||) (site), <a class="indexterm" href="#N142F4">(||)</a></dt><dt>(0-) (site), <a class="indexterm" href="#N141CD">(0-)</a></dt><dt>&le;, <a class="indexterm" href="#ref.types.subtyping">Subtyping</a></dt></dl></div><div class="indexdiv"><h3>A</h3><dl><dt>abs (function), <a class="indexterm" href="#N14321">abs</a></dt><dt>ad-hoc polymorphism, <a class="indexterm" href="#ref.types.metatheory">Metatheory</a></dt><dt>afold (function), <a class="indexterm" href="#N14811">afold</a></dt><dt>algebraic data type, <a class="indexterm" href="#ref.data.datatype">Algebraic Data Types</a>, <a class="indexterm" href="#ref.declarations.type.datatype">Datatype</a></dt><dt>all (function), <a class="indexterm" href="#N14AB6">all</a></dt><dt>alt (function), <a class="indexterm" href="#N145B1">alt</a></dt><dt>altMap (function), <a class="indexterm" href="#N145D1">altMap</a></dt><dt>and (function), <a class="indexterm" href="#N14B0B">and</a></dt><dt>any (function), <a class="indexterm" href="#N14A97">any</a></dt><dt>append (function), <a class="indexterm" href="#N14767">append</a></dt><dt>apply, <a class="indexterm" href="#ref.data.record.specialkeys">Special Keys</a>, <a class="indexterm" href="#ref.expressions.call.record">Record Application</a></dt><dt>argument, <a class="indexterm" href="#ref.expressions.call">Site and Function Calls</a></dt><dt>argument type, <a class="indexterm" href="#ref.expressions.call.type">Type</a>, <a class="indexterm" href="#ref.declarations.def">def:  Define Function</a>, <a class="indexterm" href="#ref.types.typeinfo">Adding Type Information</a></dt><dt>Array (site), <a class="indexterm" href="#N14FEC">Array</a></dt><dt>arrayToList (function), <a class="indexterm" href="#N15034">arrayToList</a></dt><dt>as, <a class="indexterm" href="#ref.patterns.as">As Pattern</a></dt><dt>associativity, <a class="indexterm" href="#ref.expressions.operators">Operators</a>, <a class="indexterm" href="#ref.expressions.operators.redefining">Redefining Operators</a>, <a class="indexterm" href="#ref.syntax.precedence">Precedence, Fixity, and Associativity</a></dt></dl></div><div class="indexdiv"><h3>B</h3><dl><dt>block, <a class="indexterm" href="#ref.concepts.states.block">Blocked</a></dt><dt>blocked externally, <a class="indexterm" href="#ref.concepts.states">Expression States</a></dt><dt>blocked internally, <a class="indexterm" href="#ref.concepts.states">Expression States</a></dt><dt>body, <a class="indexterm" href="#ref.declarations.def">def:  Define Function</a></dt><dt>Boolean, <a class="indexterm" href="#ref.data.boolean">Booleans</a></dt><dt>Bot, <a class="indexterm" href="#ref.types.subtyping.Bot">Bot</a></dt><dt>BoundedChannel (site), <a class="indexterm" href="#N14E8E">BoundedChannel</a></dt><dt>Browse (site), <a class="indexterm" href="#N154CF">Browse</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>call, <a class="indexterm" href="#ref.expressions.call">Site and Function Calls</a></dt><dt>call pattern, <a class="indexterm" href="#ref.data.datatype">Algebraic Data Types</a>, <a class="indexterm" href="#ref.patterns.call">Call Pattern</a></dt><dt>Ceil (site), <a class="indexterm" href="#N14392">Ceil</a></dt><dt>Cell, <a class="indexterm" href="#ref.data.mutable">Mutable State</a>, <a class="indexterm" href="#ref.declarations.defclass.examples">Examples</a></dt><dt>Cell (site), <a class="indexterm" href="#N14BFC">Cell</a></dt><dt>cfold (function), <a class="indexterm" href="#N1482F">cfold</a></dt><dt>Channel, <a class="indexterm" href="#ref.declarations.defclass.examples">Examples</a></dt><dt>Channel (site), <a class="indexterm" href="#N14D7E">Channel</a></dt><dt>characters (function), <a class="indexterm" href="#N152C4">characters</a></dt><dt>character string (see string)</dt><dt>class, <a class="indexterm" href="#ref.declarations.class">import class:  Import Class from Java</a>, <a class="indexterm" href="#ref.sites">Sites and Services</a>, <a class="indexterm" href="#ref.sites.java">Java sites</a></dt><dt>clause, <a class="indexterm" href="#ref.declarations.def.clauses">Clausal Definition</a></dt><dt>clause failure, <a class="indexterm" href="#ref.declarations.def.clauses">Clausal Definition</a></dt><dt>closure, <a class="indexterm" href="#ref.data.closure">Closures</a>, <a class="indexterm" href="#ref.declarations.defclass.type">Type</a></dt><dt>collect (function), <a class="indexterm" href="#N14629">collect</a></dt><dt>combinator, <a class="indexterm" href="#ref.combinators">Combinators</a></dt><dt>comment, <a class="indexterm" href="#ref.syntax.lexical.tokens.comment">Comments</a></dt><dt>common subtype, <a class="indexterm" href="#ref.types.subtyping.meet">Meet</a></dt><dt>common supertype, <a class="indexterm" href="#ref.types.subtyping.join">Join</a></dt><dt>compose (function), <a class="indexterm" href="#N1448D">compose</a></dt><dt>concat (function), <a class="indexterm" href="#N14888">concat</a></dt><dt>cons pattern, <a class="indexterm" href="#ref.patterns.cons">Cons Pattern</a></dt><dt>constant (function), <a class="indexterm" href="#N14429">constant</a></dt><dt>constructor, <a class="indexterm" href="#ref.data.datatype">Algebraic Data Types</a>, <a class="indexterm" href="#ref.declarations.class">import class:  Import Class from Java</a></dt><dt>contravariant, <a class="indexterm" href="#ref.types.subtyping.variance">Variance</a></dt><dt>Counter (site), <a class="indexterm" href="#N1509D">Counter</a>, <a class="indexterm" href="#N150AA">Counter</a></dt><dt>covariant, <a class="indexterm" href="#ref.types.subtyping.variance">Variance</a></dt><dt>curry (function), <a class="indexterm" href="#N143C5">curry</a></dt><dt>curry3 (function), <a class="indexterm" href="#N143D9">curry3</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>datatype (see algebraic data type)</dt><dt>def, <a class="indexterm" href="#ref.expressions.lambda">lambda</a>, <a class="indexterm" href="#ref.declarations.def">def:  Define Function</a></dt><dt>defer (function), <a class="indexterm" href="#N1443D">defer</a></dt><dt>defer2 (function), <a class="indexterm" href="#N14451">defer2</a></dt><dt>deflate, <a class="indexterm" href="#ref.expressions.call">Site and Function Calls</a>, <a class="indexterm" href="#ref.declarations.def.execution">Function Execution</a>, <a class="indexterm" href="#ref.concepts.deflate.definition">Definition</a></dt><dt>Dictionary (site), <a class="indexterm" href="#N15101">Dictionary</a></dt><dt>divide, <a class="indexterm" href="#ref.data.numeric">Numerics</a></dt><dt>division, <a class="indexterm" href="#ref.data.numeric.operations">Operations</a></dt><dt>dot, <a class="indexterm" href="#ref.data.record.operations">Operations</a>, <a class="indexterm" href="#ref.expressions.dot">Dot Access</a>, <a class="indexterm" href="#ref.sites.java.classes">Java classes</a></dt><dt>drop (function), <a class="indexterm" href="#N148F0">drop</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>each (function), <a class="indexterm" href="#N1465B">each</a></dt><dt>empty (function), <a class="indexterm" href="#N14734">empty</a></dt><dt>erasure, <a class="indexterm" href="#ref.types.metatheory">Metatheory</a></dt><dt>Error (site), <a class="indexterm" href="#N1417E">Error</a></dt><dt>exponent, <a class="indexterm" href="#ref.data.numeric">Numerics</a></dt><dt>expression, <a class="indexterm" href="#ref.expressions">Expressions</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>field, <a class="indexterm" href="#ref.sites.java.objects">Java objects</a></dt><dt>fillArray (function), <a class="indexterm" href="#N15440">fillArray</a></dt><dt>filter (function), <a class="indexterm" href="#N146AD">filter</a></dt><dt>fixity, <a class="indexterm" href="#ref.syntax.precedence">Precedence, Fixity, and Associativity</a></dt><dt>flip (function), <a class="indexterm" href="#N14415">flip</a></dt><dt>floating point, <a class="indexterm" href="#ref.data.numeric">Numerics</a></dt><dt>Floor (site), <a class="indexterm" href="#N14385">Floor</a></dt><dt>foldl (function), <a class="indexterm" href="#N14782">foldl</a></dt><dt>foldl1 (function), <a class="indexterm" href="#N147AC">foldl1</a></dt><dt>foldr (function), <a class="indexterm" href="#N147CB">foldr</a></dt><dt>foldr1 (function), <a class="indexterm" href="#N147F2">foldr1</a></dt><dt>for (function), <a class="indexterm" href="#N153D7">for</a></dt><dt>fork (function), <a class="indexterm" href="#N144DD">fork</a></dt><dt>forkMap (function), <a class="indexterm" href="#N144FD">forkMap</a></dt><dt>fst (function), <a class="indexterm" href="#N1513D">fst</a></dt><dt>function call, <a class="indexterm" href="#ref.expressions.call">Site and Function Calls</a>, <a class="indexterm" href="#ref.expressions.call.function">Function Calls</a></dt><dt>function type, <a class="indexterm" href="#ref.data.closure.type">Type</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>goal expression, <a class="indexterm" href="#ref.declarations.defclass">def class: Define Site in Orc</a></dt><dt>group (function), <a class="indexterm" href="#N14A18">group</a></dt><dt>groupBy (function), <a class="indexterm" href="#N14A3A">groupBy</a></dt></dl></div><div class="indexdiv"><h3>H</h3><dl><dt>halt, <a class="indexterm" href="#ref.expressions.stop">stop</a>, <a class="indexterm" href="#ref.combinators.otherwise">Otherwise Combinator</a>, <a class="indexterm" href="#ref.concepts.states.halt">Halted</a>, <a class="indexterm" href="#ref.concepts.deflate.definition">Definition</a>, <a class="indexterm" href="#ref.concepts.helpful">Helpful Sites</a></dt><dt>head (function), <a class="indexterm" href="#N146C8">head</a></dt><dt>helpful site, <a class="indexterm" href="#ref.concepts.helpful">Helpful Sites</a></dt><dt>HTTP, <a class="indexterm" href="#ref.sites.web.http">HTTP</a></dt><dt>HTTP (site), <a class="indexterm" href="#N154EC">HTTP</a>, <a class="indexterm" href="#N1550D">HTTP</a>, <a class="indexterm" href="#N15519">HTTP</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>Iff (site), <a class="indexterm" href="#N14155">Iff</a></dt><dt>Ift (site), <a class="indexterm" href="#N1412C">Ift</a></dt><dt>if then else, <a class="indexterm" href="#ref.expressions.ifthenelse">if then else</a></dt><dt>ignore (function), <a class="indexterm" href="#N14465">ignore</a></dt><dt>ignore2 (function), <a class="indexterm" href="#N14479">ignore2</a></dt><dt>import site, <a class="indexterm" href="#ref.declarations.site">import site: Import Site</a></dt><dt>import type, <a class="indexterm" href="#ref.declarations.type">type:  Declare Type</a>, <a class="indexterm" href="#ref.declarations.type.datatype">Datatype</a></dt><dt>include, <a class="indexterm" href="#ref.declarations.include">include:  Include Orc File</a></dt><dt>index (function), <a class="indexterm" href="#N1474C">index</a></dt><dt>init (function), <a class="indexterm" href="#N146FE">init</a></dt><dt>instance, <a class="indexterm" href="#ref.declarations.defclass.instances">Creating Instances</a></dt><dt>Integer, <a class="indexterm" href="#ref.data.numeric">Numerics</a></dt><dt>Interval (site), <a class="indexterm" href="#N1516D">Interval</a></dt><dt>Intervals (site), <a class="indexterm" href="#N151A5">Intervals</a></dt><dt>invariant, <a class="indexterm" href="#ref.types.subtyping.variance">Variance</a></dt><dt>IsXML (site), <a class="indexterm" href="#N155D4">IsXML</a></dt><dt>iterableToList (function), <a class="indexterm" href="#N15428">iterableToList</a></dt><dt>IterableToStream (site), <a class="indexterm" href="#N15417">IterableToStream</a></dt></dl></div><div class="indexdiv"><h3>J</h3><dl><dt>Java, <a class="indexterm" href="#ref.declarations.class">import class:  Import Class from Java</a>, <a class="indexterm" href="#ref.declarations.class.type">Type</a>, <a class="indexterm" href="#ref.sites.java">Java sites</a></dt><dt>join, <a class="indexterm" href="#ref.types.subtyping.join">Join</a></dt><dt>join (function), <a class="indexterm" href="#N14569">join</a></dt><dt>joinMap (function), <a class="indexterm" href="#N1458D">joinMap</a></dt><dt>JSON, <a class="indexterm" href="#ref.sites.web.json">JSON</a></dt></dl></div><div class="indexdiv"><h3>K</h3><dl><dt>key, <a class="indexterm" href="#ref.data.record">Records</a>, <a class="indexterm" href="#ref.expressions.dot">Dot Access</a></dt><dt>keyword, <a class="indexterm" href="#ref.syntax.lexical.tokens.keyword">Keyword</a></dt><dt>kill, <a class="indexterm" href="#ref.combinators.pruning">Pruning Combinator</a>, <a class="indexterm" href="#ref.declarations.defclass.methods">Calling Methods</a>, <a class="indexterm" href="#ref.concepts.states.kill">Killed</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>lambda, <a class="indexterm" href="#ref.data.datatype.type">Type</a>, <a class="indexterm" href="#ref.data.closure.type">Type</a>, <a class="indexterm" href="#ref.expressions.call.type">Type</a>, <a class="indexterm" href="#ref.expressions.lambda">lambda</a></dt><dt>last (function), <a class="indexterm" href="#N14719">last</a></dt><dt>length (function), <a class="indexterm" href="#N148A0">length</a></dt><dt>lenient, <a class="indexterm" href="#ref.expressions.call.function">Function Calls</a>, <a class="indexterm" href="#ref.declarations.def">def:  Define Function</a></dt><dt>lenient pattern, <a class="indexterm" href="#ref.declarations.def.pattern">Patterns as Parameters</a></dt><dt>Let (site), <a class="indexterm" href="#N140F5">Let</a>, <a class="indexterm" href="#N14110">Let</a>, <a class="indexterm" href="#N1411C">Let</a></dt><dt>linear pattern, <a class="indexterm" href="#ref.patterns">Patterns</a></dt><dt>lines (function), <a class="indexterm" href="#N15274">lines</a></dt><dt>list, <a class="indexterm" href="#ref.data.list">Lists</a></dt><dt>list pattern, <a class="indexterm" href="#ref.patterns.list">List Pattern</a></dt><dt>literal pattern, <a class="indexterm" href="#ref.patterns.literal">Literal Pattern</a></dt><dt>logical and, <a class="indexterm" href="#N111F9">Logical Operators</a></dt><dt>logical negation, <a class="indexterm" href="#N111F9">Logical Operators</a></dt><dt>logical or, <a class="indexterm" href="#N111F9">Logical Operators</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>MakeSite (site), <a class="indexterm" href="#N14B87">MakeSite</a></dt><dt>map (function), <a class="indexterm" href="#N14676">map</a></dt><dt>max (function), <a class="indexterm" href="#N14371">max</a></dt><dt>maximum (function), <a class="indexterm" href="#N14B62">maximum</a></dt><dt>meet, <a class="indexterm" href="#ref.types.subtyping.meet">Meet</a></dt><dt>member, <a class="indexterm" href="#ref.expressions.dot">Dot Access</a></dt><dt>member (function), <a class="indexterm" href="#N14925">member</a></dt><dt>merge (function), <a class="indexterm" href="#N14940">merge</a></dt><dt>mergeBy (function), <a class="indexterm" href="#N1495E">mergeBy</a></dt><dt>mergeUnique (function), <a class="indexterm" href="#N149AC">mergeUnique</a></dt><dt>mergeUniqueBy (function), <a class="indexterm" href="#N149CA">mergeUniqueBy</a></dt><dt>method, <a class="indexterm" href="#ref.declarations.defclass">def class: Define Site in Orc</a>, <a class="indexterm" href="#ref.declarations.defclass.methods">Calling Methods</a>, <a class="indexterm" href="#ref.sites.java.classes">Java classes</a></dt><dt>metronome (function), <a class="indexterm" href="#N15326">metronome</a></dt><dt>min (function), <a class="indexterm" href="#N1435D">min</a></dt><dt>minimum (function), <a class="indexterm" href="#N14B47">minimum</a></dt><dt>multimatch, <a class="indexterm" href="#ref.patterns.call">Call Pattern</a></dt><dt>mutual recursion, <a class="indexterm" href="#ref.declarations.def.recursion">Recursion</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt>None (site), <a class="indexterm" href="#N14BEB">None</a></dt><dt>Number, <a class="indexterm" href="#ref.data.numeric">Numerics</a>, <a class="indexterm" href="#N112AC">Type</a></dt></dl></div><div class="indexdiv"><h3>O</h3><dl><dt>operator, <a class="indexterm" href="#ref.expressions.operators">Operators</a>, <a class="indexterm" href="#ref.syntax.precedence">Precedence, Fixity, and Associativity</a></dt><dt>or (function), <a class="indexterm" href="#N14B29">or</a></dt><dt>otherwise combinator, <a class="indexterm" href="#ref.combinators.otherwise">Otherwise Combinator</a>, <a class="indexterm" href="#ref.concepts.helpful">Helpful Sites</a></dt><dt>override, <a class="indexterm" href="#ref.types.override">Type Override</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>pand (function), <a class="indexterm" href="#N1460D">pand</a></dt><dt>parallel combinator, <a class="indexterm" href="#ref.combinators.parallel">Parallel Combinator</a></dt><dt>parameter, <a class="indexterm" href="#ref.declarations.def">def:  Define Function</a></dt><dt>parametric polymorphism, <a class="indexterm" href="#ref.types.polymorphism">Parametric Polymorphism</a></dt><dt>pattern, <a class="indexterm" href="#ref.patterns">Patterns</a></dt><dt>polymorphism, <a class="indexterm" href="#ref.types.metatheory">Metatheory</a></dt><dt>por (function), <a class="indexterm" href="#N145F1">por</a></dt><dt>precedence, <a class="indexterm" href="#ref.syntax.precedence">Precedence, Fixity, and Associativity</a></dt><dt>prelude, <a class="indexterm" href="#ref.sites.library">Library sites</a></dt><dt>Print (site), <a class="indexterm" href="#N15208">Print</a></dt><dt>Println (site), <a class="indexterm" href="#N1521F">Println</a></dt><dt>product (function), <a class="indexterm" href="#N14AF0">product</a></dt><dt>Prompt (site), <a class="indexterm" href="#N1538C">Prompt</a></dt><dt>pruning, <a class="indexterm" href="#ref.declarations.val">val:  Bind Value</a>, <a class="indexterm" href="#ref.concepts.deflate.definition">Definition</a></dt><dt>pruning combinator, <a class="indexterm" href="#ref.combinators.pruning">Pruning Combinator</a></dt><dt>publish, <a class="indexterm" href="#ref.expressions.call.function">Function Calls</a>, <a class="indexterm" href="#ref.combinators.parallel">Parallel Combinator</a>, <a class="indexterm" href="#ref.combinators.sequential">Sequential Combinator</a>, <a class="indexterm" href="#ref.combinators.pruning">Pruning Combinator</a>, <a class="indexterm" href="#ref.combinators.otherwise">Otherwise Combinator</a>, <a class="indexterm" href="#ref.concepts.publish">Publication</a>, <a class="indexterm" href="#ref.concepts.helpful">Helpful Sites</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>Random (site), <a class="indexterm" href="#N15341">Random</a>, <a class="indexterm" href="#N15352">Random</a></dt><dt>range (function), <a class="indexterm" href="#N14A7F">range</a></dt><dt>rangeBy (function), <a class="indexterm" href="#N14A56">rangeBy</a></dt><dt>Rclock (site), <a class="indexterm" href="#N152E4">Rclock</a></dt><dt>Read (site), <a class="indexterm" href="#N15236">Read</a></dt><dt>ReadJSON (site), <a class="indexterm" href="#N15529">ReadJSON</a></dt><dt>ReadXML (site), <a class="indexterm" href="#N1557F">ReadXML</a></dt><dt>ready, <a class="indexterm" href="#N12CFD">Ready</a></dt><dt>record, <a class="indexterm" href="#ref.data.record">Records</a></dt><dt>record application, <a class="indexterm" href="#ref.expressions.call">Site and Function Calls</a></dt><dt>record extension, <a class="indexterm" href="#ref.data.record.operations">Operations</a></dt><dt>record pattern, <a class="indexterm" href="#ref.patterns.record">Record Pattern</a></dt><dt>recursion, <a class="indexterm" href="#ref.declarations.def.recursion">Recursion</a></dt><dt>recursive type, <a class="indexterm" href="#ref.data.datatype.type">Type</a></dt><dt>Ref, <a class="indexterm" href="#ref.data.mutable">Mutable State</a>, <a class="indexterm" href="#N112AC">Type</a>, <a class="indexterm" href="#ref.declarations.defclass.examples">Examples</a></dt><dt>Ref (site), <a class="indexterm" href="#N14C51">Ref</a>, <a class="indexterm" href="#N14C64">Ref</a></dt><dt>repeat (function), <a class="indexterm" href="#N144BF">repeat</a></dt><dt>REST, <a class="indexterm" href="#ref.sites.web">Web Services</a></dt><dt>reverse (function), <a class="indexterm" href="#N14692">reverse</a></dt><dt>Rtime (site), <a class="indexterm" href="#N15315">Rtime</a></dt><dt>Rwait (site), <a class="indexterm" href="#N15304">Rwait</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>semaphore, <a class="indexterm" href="#ref.declarations.defclass.examples">Examples</a></dt><dt>Semaphore (site), <a class="indexterm" href="#N14CDB">Semaphore</a></dt><dt>seq (function), <a class="indexterm" href="#N1451D">seq</a></dt><dt>seqMap (function), <a class="indexterm" href="#N14541">seqMap</a></dt><dt>sequential combinator, <a class="indexterm" href="#ref.combinators.sequential">Sequential Combinator</a></dt><dt>signal, <a class="indexterm" href="#ref.data.signal">signal</a></dt><dt>signals (function), <a class="indexterm" href="#N153B6">signals</a></dt><dt>signature, <a class="indexterm" href="#ref.types.typeinfo.function">Function Type Information</a></dt><dt>signum (function), <a class="indexterm" href="#N14335">signum</a></dt><dt>silent, <a class="indexterm" href="#ref.combinators.otherwise">Otherwise Combinator</a>, <a class="indexterm" href="#ref.concepts.silent.definition">Definition</a></dt><dt>site, <a class="indexterm" href="#ref.sites">Sites and Services</a></dt><dt>site call, <a class="indexterm" href="#ref.expressions.call">Site and Function Calls</a>, <a class="indexterm" href="#ref.expressions.call.site">Site Calls</a>, <a class="indexterm" href="#ref.expressions.dot">Dot Access</a>, <a class="indexterm" href="#ref.expressions.operators">Operators</a></dt><dt>site resolution, <a class="indexterm" href="#ref.declarations.site">import site: Import Site</a></dt><dt>sliceArray (function), <a class="indexterm" href="#N1545E">sliceArray</a></dt><dt>snd (function), <a class="indexterm" href="#N15155">snd</a></dt><dt>SOAP, <a class="indexterm" href="#ref.sites.web.soap">SOAP Web Services</a></dt><dt>Some (site), <a class="indexterm" href="#N14BD4">Some</a></dt><dt>sort (function), <a class="indexterm" href="#N14976">sort</a></dt><dt>sortBy (function), <a class="indexterm" href="#N14994">sortBy</a></dt><dt>sortUnique (function), <a class="indexterm" href="#N149E2">sortUnique</a></dt><dt>sortUniqueBy (function), <a class="indexterm" href="#N14A00">sortUniqueBy</a></dt><dt>sqrt (function), <a class="indexterm" href="#N1439F">sqrt</a></dt><dt>stop, <a class="indexterm" href="#ref.expressions.stop">stop</a></dt><dt>strict, <a class="indexterm" href="#ref.expressions.call.site">Site Calls</a></dt><dt>strict pattern, <a class="indexterm" href="#ref.declarations.def.pattern">Patterns as Parameters</a></dt><dt>string, <a class="indexterm" href="#ref.data.string">Character Strings</a></dt><dt>String (site), <a class="indexterm" href="#N151D1">String</a></dt><dt>subtype, <a class="indexterm" href="#ref.types.subtyping">Subtyping</a></dt><dt>sum (function), <a class="indexterm" href="#N14AD5">sum</a></dt><dt>sum type, <a class="indexterm" href="#ref.data.datatype.type">Type</a>, <a class="indexterm" href="#ref.declarations.type.datatype">Datatype</a></dt><dt>supertype, <a class="indexterm" href="#ref.types.subtyping">Subtyping</a></dt><dt>swap (function), <a class="indexterm" href="#N14CC3">swap</a></dt><dt>synchronized (function), <a class="indexterm" href="#N154B1">synchronized</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>Table (function), <a class="indexterm" href="#N1504C">Table</a></dt><dt>tag, <a class="indexterm" href="#ref.data.datatype">Algebraic Data Types</a></dt><dt>tail (function), <a class="indexterm" href="#N146E3">tail</a></dt><dt>take (function), <a class="indexterm" href="#N148BB">take</a></dt><dt>takePubs (function), <a class="indexterm" href="#N15472">takePubs</a></dt><dt>target, <a class="indexterm" href="#ref.expressions.call">Site and Function Calls</a>, <a class="indexterm" href="#ref.expressions.dot">Dot Access</a></dt><dt>Top, <a class="indexterm" href="#ref.types.subtyping">Subtyping</a>, <a class="indexterm" href="#ref.types.subtyping.top">Top</a></dt><dt>tuple, <a class="indexterm" href="#ref.data.tuple">Tuples</a></dt><dt>tuple pattern, <a class="indexterm" href="#ref.patterns.tuple">Tuple Pattern</a></dt><dt>type alias, <a class="indexterm" href="#ref.declarations.type.alias">Type Alias</a></dt><dt>type application, <a class="indexterm" href="#ref.types.polymorphism.types">Parametric types</a></dt><dt>type import, <a class="indexterm" href="#ref.declarations.type.import">Type Import</a></dt><dt>type inference, <a class="indexterm" href="#ref.types.metatheory">Metatheory</a></dt><dt>type information, <a class="indexterm" href="#ref.types.typeinfo">Adding Type Information</a></dt><dt>typing context, <a class="indexterm" href="#ref.patterns">Patterns</a>, <a class="indexterm" href="#ref.types.context">Typing Contexts</a></dt></dl></div><div class="indexdiv"><h3>U</h3><dl><dt>unapply, <a class="indexterm" href="#ref.data.record.specialkeys">Special Keys</a></dt><dt>uncurry (function), <a class="indexterm" href="#N143ED">uncurry</a></dt><dt>uncurry3 (function), <a class="indexterm" href="#N14401">uncurry3</a></dt><dt>unlines (function), <a class="indexterm" href="#N15288">unlines</a></dt><dt>unwords (function), <a class="indexterm" href="#N152B0">unwords</a></dt><dt>unzip (function), <a class="indexterm" href="#N1486C">unzip</a></dt><dt>upto (function), <a class="indexterm" href="#N153F4">upto</a></dt><dt>URandom (site), <a class="indexterm" href="#N1536A">URandom</a></dt><dt>UUID (site), <a class="indexterm" href="#N1537B">UUID</a></dt></dl></div><div class="indexdiv"><h3>V</h3><dl><dt>val, <a class="indexterm" href="#ref.declarations.val">val:  Bind Value</a></dt><dt>value, <a class="indexterm" href="#ref.data">Data Values</a>, <a class="indexterm" href="#ref.concepts.publish">Publication</a></dt><dt>variable, <a class="indexterm" href="#ref.patterns.variable">Variable Pattern</a></dt><dt>variable pattern, <a class="indexterm" href="#ref.patterns.variable">Variable Pattern</a></dt><dt>variance, <a class="indexterm" href="#ref.types.subtyping.variance">Variance</a></dt></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>Web service, <a class="indexterm" href="#ref.sites.web">Web Services</a></dt><dt>while (function), <a class="indexterm" href="#N144A1">while</a></dt><dt>wildcard pattern, <a class="indexterm" href="#ref.patterns.wildcard">Wildcard Pattern</a></dt><dt>withLock (function), <a class="indexterm" href="#N15499">withLock</a></dt><dt>words (function), <a class="indexterm" href="#N1529C">words</a></dt><dt>Write (site), <a class="indexterm" href="#N15257">Write</a></dt><dt>WriteJSON (site), <a class="indexterm" href="#N1554F">WriteJSON</a></dt><dt>WriteXML (site), <a class="indexterm" href="#N15590">WriteXML</a></dt></dl></div><div class="indexdiv"><h3>X</h3><dl><dt>xattr (function), <a class="indexterm" href="#N15605">xattr</a></dt><dt>XML, <a class="indexterm" href="#ref.sites.web.xml">XML</a></dt><dt>xml (function), <a class="indexterm" href="#N155E9">xml</a></dt><dt>XMLCData (site), <a class="indexterm" href="#N155C3">XMLCData</a></dt><dt>XMLElement (site), <a class="indexterm" href="#N155A1">XMLElement</a></dt><dt>XMLText (site), <a class="indexterm" href="#N155B2">XMLText</a></dt></dl></div><div class="indexdiv"><h3>Z</h3><dl><dt>zip (function), <a class="indexterm" href="#N14850">zip</a></dt></dl></div></div></div></div><script type="text/javascript" src="/orchard/orc.js"></script></body></html>