<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>B.3.&nbsp;Reference</title><link href="style.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.74.0" name="generator"><link rel="home" href="index.html" title="Orc User Guide"><link rel="up" href="apb.html" title="Appendix&nbsp;B.&nbsp;Standard Library"><link rel="prev" href="apbs02.html" title="B.2.&nbsp;Notation"><link href="/orchard/orc.css" type="text/css" rel="stylesheet"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">B.3.&nbsp;Reference</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="apbs02.html">Prev</a>&nbsp;</td><th align="center" width="60%">Appendix&nbsp;B.&nbsp;Standard Library</th><td align="right" width="20%">&nbsp;</td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N11204"></a>B.3.&nbsp;Reference</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="N11208"></a>B.3.1.&nbsp;core.inc: Fundamental sites and operators.</h3></div></div></div><p>Fundamental sites and operators.</p><p>These declarations include both prefix and infix sites (operators).  For
consistency, all declarations are written in prefix form, with the site name
followed by the operands.  When the site name is surrounded in parentheses, as
in <code class="code">(+)</code>, it denotes an infix operator.</p><p>For a more complete description of the built-in operators and their syntax, see
the <a class="link" href="ch01s02.html#language.base.operators" title="1.2.2.&nbsp;Operators">Operators</a> section of the
User Guide.</p><div class="variablelist"><dl><dt><span class="term">
                            <code class="code"><span class="hl-variable">let</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">let</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">A</span></code>
                            </p><p>When applied to a single argument, return that argument (behaving as the identity function).</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">let</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">let</span>(<span class="hl-variable">A</span>, ...) :: (<span class="hl-variable">A</span>, ...)</code>
                            </p><p>When applied to zero, two, or more arguments, return the arguments in a tuple.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-keyword">if</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-keyword">if</span>(<span class="hl-variable">Boolean</span>) :: <span class="hl-variable">Signal</span></code>

                            </p><p>Fail silently if the argument is false. Otherwise return a signal.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: "Always publishes"</span>
  <span class="hl-keyword">if</span>(<span class="hl-literal">false</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Never publishes"</span>
<span class="hl-combinator">|</span> <span class="hl-keyword">if</span>(<span class="hl-literal">true</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Always publishes"</span></pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">error</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">error</span>(<span class="hl-variable">String</span>) :: <span class="hl-variable">Bot</span></code>

                            </p><p>Halt with the given error message.</p><p>Example, using <code class="code"><span class="hl-variable">error</span></code> to implement assertions:
<pre class="orc">
<span class="hl-keyword">def</span> <span class="hl-variable">assert</span>(<span class="hl-variable">b</span>) =
  <span class="hl-keyword">if</span> <span class="hl-variable">b</span> <span class="hl-keyword">then</span> <span class="hl-keyword">signal</span> <span class="hl-keyword">else</span> <span class="hl-variable">error</span>(<span class="hl-literal">"assertion failed"</span>)

<span class="hl-comment">-- Fail with the error message: "assertion failed"</span>
<span class="hl-variable">assert</span>(<span class="hl-literal">false</span>)</pre>
                            </p></dd><dt><span class="term">
                            <code class="code">(+)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (+)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) :: <span class="hl-variable">Number</span></code>
                            </p><p>
                                <code class="code"><span class="hl-variable">a</span>+<span class="hl-variable">b</span></code> returns the sum of <code class="code"><span class="hl-variable">a</span></code> and <code class="code"><span class="hl-variable">b</span></code>.</p></dd><dt><span class="term">
                            <code class="code">(-)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (-)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) :: <span class="hl-variable">Number</span></code>
                            </p><p>
                                <code class="code"><span class="hl-variable">a</span>-<span class="hl-variable">b</span></code> returns the value of <code class="code"><span class="hl-variable">a</span></code> minus the value of <code class="code"><span class="hl-variable">b</span></code>.</p></dd><dt><span class="term">
                            <code class="code">(<span class="hl-literal">0</span>-)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (<span class="hl-literal">0</span>-)(<span class="hl-variable">Number</span>) :: <span class="hl-variable">Number</span></code>
                            </p><p>Return the additive inverse of the argument.
When this site appears as an operator, it is written in prefix form without the
zero, i.e. <code class="code">(-<span class="hl-variable">a</span>)</code>
                            </p></dd><dt><span class="term">
                            <code class="code">(*)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (*)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) :: <span class="hl-variable">Number</span></code>
                            </p><p>
                                <code class="code"><span class="hl-variable">a</span>*<span class="hl-variable">b</span></code> returns the product of <code class="code"><span class="hl-variable">a</span></code> and <code class="code"><span class="hl-variable">b</span></code>.</p></dd><dt><span class="term">
                            <code class="code">(**)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (**)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) :: <span class="hl-variable">Number</span></code>
                            </p><p>
                                <code class="code"><span class="hl-variable">a</span> ** <span class="hl-variable">b</span></code> returns
<span class="mathphrase">a<sup>b</sup>
                                    </span>,
i.e. <code class="code"><span class="hl-variable">a</span></code> raised to the <code class="code"><span class="hl-variable">b</span></code>th power.</p></dd><dt><span class="term">
                            <code class="code">(/)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (/)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) :: <span class="hl-variable">Number</span></code>
                            </p><p>

                                <code class="code"><span class="hl-variable">a</span>/<span class="hl-variable">b</span></code> returns <code class="code"><span class="hl-variable">a</span></code> divided by <code class="code"><span class="hl-variable">b</span></code>.
If both arguments have integral types, <code class="code">(/)</code> performs integral
division, rounding towards zero. Otherwise, it performs floating-point
division. If <code class="code"><span class="hl-variable">b</span>=<span class="hl-literal">0</span></code>, <code class="code"><span class="hl-variable">a</span>/<span class="hl-variable">b</span></code> halts with an error.</p><p>Example:
<pre class="orc">
  <span class="hl-literal">7</span>/<span class="hl-literal">3</span>   <span class="hl-comment">-- publishes 2</span>
<span class="hl-combinator">|</span> <span class="hl-literal">7</span>/<span class="hl-literal">3.0</span> <span class="hl-comment">-- publishes 2.333...</span></pre>
                            </p></dd><dt><span class="term">
                            <code class="code">(%)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (%)(<span class="hl-variable">Number</span>, <span class="hl-variable">Number</span>) :: <span class="hl-variable">Number</span></code>
                            </p><p>

                                <code class="code"><span class="hl-variable">a</span>%<span class="hl-variable">b</span></code> computes the remainder of <code class="code"><span class="hl-variable">a</span>/<span class="hl-variable">b</span></code>. If <code class="code"><span class="hl-variable">a</span></code>
and <code class="code"><span class="hl-variable">b</span></code> have integral types, then the remainder is given by
the expression <code class="code"><span class="hl-variable">a</span> - (<span class="hl-variable">a</span>/<span class="hl-variable">b</span>)*<span class="hl-variable">b</span></code>. For a full description, see the
<a class="link" href="http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.17.3" target="_top">Java Language Specification, 3rd edition</a>.</p></dd><dt><span class="term">
                            <code class="code">(&lt;)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (&lt;)(<span class="hl-variable">Comparable</span>, <span class="hl-variable">Comparable</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>
                                <code class="code"><span class="hl-variable">a</span> &lt; <span class="hl-variable">b</span></code> returns true if <code class="code"><span class="hl-variable">a</span></code> is less than <code class="code"><span class="hl-variable">b</span></code>, and false otherwise.</p></dd><dt><span class="term">
                            <code class="code">(<span class="hl-site">&lt;=</span>)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (<span class="hl-site">&lt;=</span>)(<span class="hl-variable">Comparable</span>, <span class="hl-variable">Comparable</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>
                                <code class="code"><span class="hl-variable">a</span> <span class="hl-site">&lt;=</span> <span class="hl-variable">b</span></code> returns true if <code class="code"><span class="hl-variable">a</span></code> is less than or equal to <code class="code"><span class="hl-variable">b</span></code>, and false otherwise.</p></dd><dt><span class="term">
                            <code class="code">(&gt;)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (&gt;)(<span class="hl-variable">Comparable</span>, <span class="hl-variable">Comparable</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>
                                <code class="code"><span class="hl-variable">a</span> &gt; <span class="hl-variable">b</span></code> returns true if <code class="code"><span class="hl-variable">a</span></code> is greater than <code class="code"><span class="hl-variable">b</span></code>, and false otherwise.</p></dd><dt><span class="term">
                            <code class="code">(<span class="hl-site">&gt;=</span>)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (<span class="hl-site">&gt;=</span>)(<span class="hl-variable">Comparable</span>, <span class="hl-variable">Comparable</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>
                                <code class="code"><span class="hl-variable">a</span> <span class="hl-site">&gt;=</span> <span class="hl-variable">b</span></code> returns true if <code class="code"><span class="hl-variable">a</span></code> is greater than or equal to <code class="code"><span class="hl-variable">b</span></code>, and false otherwise.</p></dd><dt><span class="term">
                            <code class="code">(=)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (=)(<span class="hl-variable">Top</span>, <span class="hl-variable">Top</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>

                                <code class="code"><span class="hl-variable">a</span> = <span class="hl-variable">b</span></code> returns true if <code class="code"><span class="hl-variable">a</span></code> is equal to <code class="code"><span class="hl-variable">b</span></code>,
and false otherwise.  The precise definition of "equal" depends on the values
being compared, but always obeys the rule that if two values are considered
equal, then one may be substituted locally for the other without affecting the
behavior of the program.</p><p>Two values with the same object identity are always considered equal.
In addition, Cor <a class="link" href="ch01s02.html#cor.constants" title="1.2.1.&nbsp;Constants">constant values</a> and <a class="link" href="ch01s02.html#cor.data" title="1.2.5.&nbsp;Data Structures">data structures</a> are considered equal if their
contents are equal. Other types are free to implement their own equality
relationship provided it conforms to the rules given here.</p><p>Note that although values of different types may be compared with
<code class="code">=</code>, the substitutability principle requires that such values are
always considered inequal, i.e. the comparison will return <code class="code"><span class="hl-literal">false</span></code>.</p></dd><dt><span class="term">
                            <code class="code">(/=)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (/=)(<span class="hl-variable">Top</span>, <span class="hl-variable">Top</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>
                                <code class="code"><span class="hl-variable">a</span>/=<span class="hl-variable">b</span></code> returns false if <code class="code"><span class="hl-variable">a</span>=<span class="hl-variable">b</span></code>, and true otherwise.</p></dd><dt><span class="term">
                            <code class="code">(~)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (~)(<span class="hl-variable">Boolean</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Return the logical negation of the argument.</p></dd><dt><span class="term">
                            <code class="code">(&amp;&amp;)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (&amp;&amp;)(<span class="hl-variable">Boolean</span>, <span class="hl-variable">Boolean</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Return the logical conjunction of the arguments. This is not a short-circuiting
operator; both arguments must be evaluated and available before the result is
computed.</p></dd><dt><span class="term">
                            <code class="code">(<span class="hl-site">||</span>)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (<span class="hl-site">||</span>)(<span class="hl-variable">Boolean</span>, <span class="hl-variable">Boolean</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Return the logical disjunction of the arguments. This is not a short-circuiting
operator; both arguments must be evaluated and available before the result is
computed.</p></dd><dt><span class="term">
                            <code class="code">(:)</code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> (:)(<span class="hl-variable">A</span>, [<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>]</code>
                            </p><p>
                                <code class="code"><span class="hl-variable">a</span>:<span class="hl-variable">b</span></code> returns the list formed by prepending the element <code class="code"><span class="hl-variable">a</span></code>
to the list <code class="code"><span class="hl-variable">b</span></code>.</p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code">(:)</code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">pattern</span> (:)([<span class="hl-variable">A</span>]) :: (<span class="hl-variable">A</span>, [<span class="hl-variable">A</span>])</code>

                                    </p><p>The inverse of the list constructor <code class="code">(:)</code>. Returns the head and tail
of the list.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: (3, [4, 5])</span>
[<span class="hl-literal">3</span>,<span class="hl-literal">4</span>,<span class="hl-literal">5</span>] <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span>:<span class="hl-variable">xs</span><span class="hl-combinator">&gt;</span> (<span class="hl-variable">x</span>,<span class="hl-variable">xs</span>)</pre>
                                    </p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">abs</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">abs</span>(<span class="hl-variable">Number</span>) :: <span class="hl-variable">Number</span></code>
                            </p><p>Return the absolute value of the argument.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">signum</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">signum</span>(<span class="hl-variable">Number</span>) :: <span class="hl-variable">Number</span></code>
                            </p><p>
                                <code class="code"><span class="hl-variable">signum</span>(<span class="hl-variable">a</span>)</code> returns <code class="code">-<span class="hl-literal">1</span></code> if <code class="code"><span class="hl-variable">a</span>&lt;<span class="hl-literal">0</span></code>,
<code class="code"><span class="hl-literal">1</span></code> if <code class="code"><span class="hl-variable">a</span>&gt;<span class="hl-literal">0</span></code>, and <code class="code"><span class="hl-literal">0</span></code> if <code class="code"><span class="hl-variable">a</span>=<span class="hl-literal">0</span></code>.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">min</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">min</span>(<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) :: <span class="hl-variable">A</span>, <span class="hl-variable">A</span> <span class="hl-site">&lt;:</span> <span class="hl-variable">Comparable</span></code>
                            </p><p>Return the lesser of the arguments. If the arguments
are equal, return the first argument.</p><p>Recall that the type constraint <code class="code"><span class="hl-variable">A</span> <span class="hl-site">&lt;:</span> <span class="hl-variable">Comparable</span></code>
means that <code class="code"><span class="hl-variable">min</span></code> can only be applied to arguments
which are subtypes of <code class="code"><span class="hl-variable">Comparable</span></code>; in other words,
they must have a total order.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">max</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">max</span>(<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) :: <span class="hl-variable">A</span>, <span class="hl-variable">A</span> <span class="hl-site">&lt;:</span> <span class="hl-variable">Comparable</span></code>
                            </p><p>Return the greater of the arguments. If the arguments
are equal, return the second argument.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="N11466"></a>B.3.2.&nbsp;data.inc: General-purpose supplemental data structures.</h3></div></div></div><p>General-purpose supplemental data structures.</p><div class="variablelist"><dl><dt><span class="term">
                            <code class="code"><span class="hl-variable">Semaphore</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Semaphore</span>(<span class="hl-variable">Integer</span>) :: <span class="hl-variable">Semaphore</span></code>

                            </p><p>Return a semaphore with the given value. The semaphore maintains the invariant
that its value is always non-negative.</p><p>An example using a semaphore as a lock for a critical section:
<pre class="orc">
<span class="hl-comment">-- Prints:</span>
<span class="hl-comment">-- Entering critical section</span>
<span class="hl-comment">-- Leaving critical section</span>
<span class="hl-keyword">val</span> <span class="hl-variable">lock</span> = <span class="hl-variable">Semaphore</span>(<span class="hl-literal">1</span>)
<span class="hl-variable">lock</span>.<span class="hl-variable">acquire</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-variable">println</span>(<span class="hl-literal">"Entering critical section"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-variable">println</span>(<span class="hl-literal">"Leaving critical section"</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-variable">lock</span>.<span class="hl-variable">release</span>()</pre>
                            </p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code"><span class="hl-variable">acquire</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Semaphore</span>.<span class="hl-variable">acquire</span>() :: <span class="hl-variable">Signal</span></code>
                                    </p><p>If the semaphore's value is greater than <code class="code"><span class="hl-literal">0</span></code>, decrement the semaphore and return a signal.
If the semaphore's value is <code class="code"><span class="hl-literal">0</span></code>, block until it becomes greater than <code class="code"><span class="hl-literal">0</span></code>.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">acquirenb</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Semaphore</span>.<span class="hl-variable">acquirenb</span>() :: <span class="hl-variable">Signal</span></code>
                                    </p><p>If the semaphore's value is greater than <code class="code"><span class="hl-literal">0</span></code>, decrement the semaphore and return a signal.
If the semaphore's value is <code class="code"><span class="hl-literal">0</span></code>, halt.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">release</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Semaphore</span>.<span class="hl-variable">release</span>() :: <span class="hl-variable">Signal</span></code>
                                    </p><p>If any calls to <code class="code"><span class="hl-variable">acquire</span></code> are blocked, allow the oldest such call
to return.  Otherwise, increment the value of the semaphore.  This may
increment the value beyond that with which the semaphore was constructed.</p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Buffer</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Buffer</span>() :: <span class="hl-variable">Buffer</span>&lt;<span class="hl-variable">A</span>&gt;</code>

                            </p><p>Create a new buffer (FIFO channel) of unlimited size.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: 10</span>
<span class="hl-keyword">val</span> <span class="hl-variable">b</span> = <span class="hl-variable">Buffer</span>()
  <span class="hl-variable">Rtimer</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">b</span>.<span class="hl-variable">put</span>(<span class="hl-literal">10</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
<span class="hl-combinator">|</span> <span class="hl-variable">b</span>.<span class="hl-variable">get</span>()</pre>
                            </p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code"><span class="hl-variable">get</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Buffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">get</span>() :: <span class="hl-variable">A</span></code>
                                    </p><p>Get an item from the buffer. If no items are available, block until one becomes available.</p><p>Recall that the type signature <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Buffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">get</span>() :: <span class="hl-variable">A</span></code> means that
when the <code class="code"><span class="hl-variable">get</span></code> method is called on a buffer holding an arbitrary
element type <code class="code"><span class="hl-variable">A</span></code>, it will return a value of the same type.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">getnb</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Buffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">getnb</span>() :: <span class="hl-variable">A</span></code>
                                    </p><p>Get an item from the buffer. If no items are available, halt.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">put</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Buffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">put</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">Signal</span></code>
                                    </p><p>Put an item in the buffer.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">close</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Buffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">close</span>() :: <span class="hl-variable">Signal</span></code>
                                    </p><p>Close the buffer. This has the effect of immediately causing any blocked calls
to <code class="code"><span class="hl-variable">get</span></code> to halt. In addition, any subsequent calls to
<code class="code"><span class="hl-variable">get</span></code> or <code class="code"><span class="hl-variable">put</span></code> will halt.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">isClosed</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Buffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">isClosed</span>() :: <span class="hl-variable">Boolean</span></code>
                                    </p><p>If the buffer is currently closed, return true, otherwise return false.</p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">BoundedBuffer</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">BoundedBuffer</span>(<span class="hl-variable">Integer</span>) :: <span class="hl-variable">BoundedBuffer</span>&lt;<span class="hl-variable">A</span>&gt;</code>

                            </p><p>Create a new buffer (FIFO channel) with the given number of slots.
Putting an item into the buffer fills a slot, and removing an item opens a slot.
A buffer with zero slots is equivalent to a
<a class="link" href="apbs03.html#orc.lib.state.SyncChannel">synchronous channel</a>.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: "Put 1" "Got 1" "Put 2" "Got 2"</span>
<span class="hl-keyword">val</span> <span class="hl-variable">c</span> = <span class="hl-variable">BoundedBuffer</span>(<span class="hl-literal">1</span>)
  <span class="hl-variable">c</span>.<span class="hl-variable">put</span>(<span class="hl-literal">1</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Put "</span> + <span class="hl-literal">1</span>
<span class="hl-combinator">|</span> <span class="hl-variable">c</span>.<span class="hl-variable">put</span>(<span class="hl-literal">2</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Put "</span> + <span class="hl-literal">2</span>
<span class="hl-combinator">|</span> <span class="hl-variable">Rtimer</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> (
    <span class="hl-variable">c</span>.<span class="hl-variable">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">n</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Got "</span> + <span class="hl-variable">n</span>
  <span class="hl-combinator">|</span> <span class="hl-variable">c</span>.<span class="hl-variable">get</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">n</span><span class="hl-combinator">&gt;</span> <span class="hl-literal">"Got "</span> + <span class="hl-variable">n</span>
  )</pre>
                            </p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code"><span class="hl-variable">get</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">BoundedBuffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">get</span>() :: <span class="hl-variable">A</span></code>
                                    </p><p>Get an item from the buffer. If no items are available, block until one becomes available.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">getnb</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">BoundedBuffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">getnb</span>() :: <span class="hl-variable">A</span></code>
                                    </p><p>Get an item from the buffer. If no items are available, halt.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">put</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">BoundedBuffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">put</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">Signal</span></code>
                                    </p><p>Put an item in the buffer. If no slots are open, block until one becomes open.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">putnb</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">BoundedBuffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">putnb</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">Signal</span></code>
                                    </p><p>Put an item in the buffer. If no slots are open, halt.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">close</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">BoundedBuffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">close</span>() :: <span class="hl-variable">Signal</span></code>
                                    </p><p>Close the buffer. This has the effect of immediately causing any blocked calls
to <code class="code"><span class="hl-variable">get</span></code> and <code class="code"><span class="hl-variable">put</span></code> to halt. In addition, any subsequent
calls to <code class="code"><span class="hl-variable">get</span></code> or <code class="code"><span class="hl-variable">put</span></code> will halt.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">isClosed</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">BoundedBuffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">isClosed</span>() :: <span class="hl-variable">Boolean</span></code>
                                    </p><p>If the buffer is currently closed, return true, otherwise return false.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">getOpen</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">BoundedBuffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">getOpen</span>() :: <span class="hl-variable">Integer</span></code>
                                    </p><p>Return the number of open slots in the buffer. Because of concurrency
this value may become out-of-date so it should only be used for debugging
or statistical measurements.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">getBound</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">BoundedBuffer</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">getBound</span>() :: <span class="hl-variable">Integer</span></code>
                                    </p><p>Return the total number of slots (open or filled) in the buffer.</p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">SyncChannel</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">SyncChannel</span>() :: <span class="hl-variable">SyncChannel</span>&lt;<span class="hl-variable">A</span>&gt;</code>
                            </p><p>
<p><a name="orc.lib.state.SyncChannel"></a>
Create a synchronous channel, or rendezvous.
</p>
                            </p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publish: 10</span>
<span class="hl-keyword">val</span> <span class="hl-variable">c</span> = <span class="hl-variable">SyncChannel</span>()
  <span class="hl-variable">c</span>.<span class="hl-variable">put</span>(<span class="hl-literal">10</span>)
<span class="hl-combinator">|</span> <span class="hl-variable">Rtimer</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">c</span>.<span class="hl-variable">get</span>()</pre>
                            </p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code"><span class="hl-variable">get</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">SyncChannel</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">get</span>() :: <span class="hl-variable">A</span></code>
                                    </p><p>Receive an item over the channel. If no sender is available, block until one becomes available.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">put</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">SyncChannel</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">put</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">Signal</span></code>
                                    </p><p>Send an item over the channel. If no receiver is available, block until one becomes available.</p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Cell</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Cell</span>() :: <span class="hl-variable">Cell</span>&lt;<span class="hl-variable">A</span>&gt;</code>

                            </p><p>Create a write-once storage location.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: 5 5</span>
<span class="hl-keyword">val</span> <span class="hl-variable">c</span> = <span class="hl-variable">Cell</span>()
  <span class="hl-variable">c</span>.<span class="hl-variable">write</span>(<span class="hl-literal">5</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">c</span>.<span class="hl-variable">read</span>()
<span class="hl-combinator">|</span> <span class="hl-variable">Rtimer</span>(<span class="hl-literal">1</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> ( <span class="hl-variable">c</span>.<span class="hl-variable">write</span>(<span class="hl-literal">10</span>) <span class="hl-combinator">;</span> <span class="hl-variable">c</span>.<span class="hl-variable">read</span>() )</pre>
                            </p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code"><span class="hl-variable">read</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Cell</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">read</span>() :: <span class="hl-variable">A</span></code>
                                    </p><p>Read a value from the cell. If the cell does not yet have a value, block until it receives one.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">readnb</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Cell</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">readnb</span>() :: <span class="hl-variable">A</span></code>
                                    </p><p>Read a value from the cell. If the cell does not yet have a value, halt.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">write</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Cell</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">write</span>() :: <span class="hl-variable">Signal</span></code>
                                    </p><p>Write a value to the cell. If the cell already has a value, halt.</p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Ref</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Ref</span>() :: <span class="hl-variable">Ref</span>&lt;<span class="hl-variable">A</span>&gt;</code>

                            </p><p>Create a rewritable storage location without an initial value.</p><p>Example:
<pre class="orc">
<span class="hl-keyword">val</span> <span class="hl-variable">r</span> = <span class="hl-variable">Ref</span>()
<span class="hl-variable">Rtimer</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">r</span>.<span class="hl-variable">write</span>(<span class="hl-literal">5</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span>
<span class="hl-combinator">|</span> <span class="hl-variable">println</span>(<span class="hl-variable">r</span>.<span class="hl-variable">read</span>()) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-variable">r</span>.<span class="hl-variable">write</span>(<span class="hl-literal">10</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-variable">println</span>(<span class="hl-variable">r</span>.<span class="hl-variable">read</span>()) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
  <span class="hl-keyword">stop</span></pre>
                            </p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code"><span class="hl-variable">Ref</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Ref</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">Ref</span>&lt;<span class="hl-variable">A</span>&gt;</code>
                                    </p><p>Create a rewritable storage location initialized to the provided value.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">read</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Ref</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">read</span>() :: <span class="hl-variable">A</span></code>
                                    </p><p>Read the value of the ref. If the ref does not yet have a value, block until it receives one.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">readnb</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Ref</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">readnb</span>() :: <span class="hl-variable">A</span></code>
                                    </p><p>Read the value of the ref. If the ref does not yet have a value, halt.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">write</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Ref</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">write</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">Signal</span></code>
                                    </p><p>Write a value to the ref.</p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Null</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Null</span>() :: <span class="hl-variable">Bot</span></code>
                            </p><p>Return a Java null value. This is only necessary to interface with certain
Java libraries, Orc programs should use the <code class="code"><span class="hl-variable">None</span>()</code> constructor
instead of null values.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Array</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Array</span>(<span class="hl-variable">Integer</span>) :: <span class="hl-variable">Array</span>&lt;<span class="hl-variable">A</span>&gt;</code>

                            </p><p>Create a new native array of the given size.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: 0 1 2</span>
<span class="hl-keyword">val</span> <span class="hl-variable">a</span> = <span class="hl-variable">Array</span>(<span class="hl-literal">3</span>)
<span class="hl-variable">for</span>(<span class="hl-literal">0</span>, <span class="hl-variable">a</span>.<span class="hl-variable">length</span>()) <span class="hl-combinator">&gt;</span><span class="hl-variable">i</span><span class="hl-combinator">&gt;</span>
<span class="hl-variable">a</span>.<span class="hl-variable">set</span>(<span class="hl-variable">i</span>, <span class="hl-variable">f</span>(<span class="hl-variable">i</span>)) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span>
<span class="hl-keyword">stop</span>
<span class="hl-combinator">;</span> <span class="hl-variable">a</span>.<span class="hl-variable">get</span>(<span class="hl-literal">0</span>) <span class="hl-combinator">|</span> <span class="hl-variable">a</span>.<span class="hl-variable">get</span>(<span class="hl-literal">1</span>) <span class="hl-combinator">|</span> <span class="hl-variable">a</span>.<span class="hl-variable">get</span>(<span class="hl-literal">2</span>)</pre>
                            </p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code"><span class="hl-variable">Array</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Array</span>(<span class="hl-variable">Integer</span>, <span class="hl-variable">String</span>) :: <span class="hl-variable">Array</span>&lt;<span class="hl-variable">A</span>&gt;</code>
                                    </p><p>Create a new primitive array of the given size with the given primitive type.
The primitive type should match the element type of the array, although a
typechecker may not be able to verify this. This constructor is only necessary
when interfacing with certain Java libraries; most programs will just use the 
<code class="code"><span class="hl-variable">Array</span>(<span class="hl-variable">Integer</span>)</code> constructor.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">get</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Array</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">get</span>(<span class="hl-variable">Integer</span>) :: <span class="hl-variable">A</span></code>
                                    </p><p>Get the element of the array given by the index, counting from 0.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">set</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Array</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">set</span>(<span class="hl-variable">Integer</span>, <span class="hl-variable">A</span>) :: <span class="hl-variable">Signal</span></code>
                                    </p><p>Set the element of the array given by the index, counting from 0.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">slice</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Array</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">slice</span>(<span class="hl-variable">Integer</span>, <span class="hl-variable">Integer</span>) :: <span class="hl-variable">Array</span>&lt;<span class="hl-variable">A</span>&gt;</code>
                                    </p><p>Return a copy of the portion of the array with indices covered by the given
half-open range. The result array is still indexed counting from 0.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">length</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Array</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">length</span>() :: <span class="hl-variable">Integer</span></code>
                                    </p><p>Return the size of the array.</p></dd><dt><span class="term">
                                    <code class="code"><span class="hl-variable">fill</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Array</span>&lt;<span class="hl-variable">A</span>&gt;.<span class="hl-variable">fill</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">Signal</span></code>

                                    </p><p>Set every element of the array to the given value. The given value is not
copied, but is shared by every element of the array, so for example
<code class="code"><span class="hl-variable">a</span>.<span class="hl-variable">fill</span>(<span class="hl-variable">Semaphore</span>(<span class="hl-literal">1</span>))</code> would allow you to access the same semaphore
from every element <code class="code"><span class="hl-variable">a</span></code>.</p><p>This method is primarily useful to initialize or reset an array to a constant
value,
for example:
<pre class="orc">
<span class="hl-comment">-- Publishes: 0 0 0</span>
<span class="hl-keyword">val</span> <span class="hl-variable">a</span> = <span class="hl-variable">Array</span>(<span class="hl-literal">3</span>)
<span class="hl-variable">a</span>.<span class="hl-variable">fill</span>(<span class="hl-literal">0</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">each</span>(<span class="hl-variable">a</span>)</pre>
                                    </p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">IArray</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">IArray</span>(<span class="hl-variable">Integer</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">Integer</span>) :: <span class="hl-variable">A</span>)(<span class="hl-variable">Integer</span>) :: <span class="hl-variable">A</span></code>
                            </p><p>The call <code class="code"><span class="hl-variable">IArray</span>(<span class="hl-variable">n</span>,<span class="hl-variable">f</span>)</code>, where <code class="code"><span class="hl-variable">n</span></code> is a
natural number and <code class="code"><span class="hl-variable">f</span></code> a total function over natural numbers,
creates and returns a partial, pre-computed version of <code class="code"><span class="hl-variable">f</span></code>
restricted to the range (0, <code class="code"><span class="hl-variable">n</span></code>-1). If <code class="code"><span class="hl-variable">f</span></code> halts
on any number in this range, the call to <code class="code"><span class="hl-variable">IArray</span></code> will halt.</p><p>The user may also think of the call as returning an array whose
<code class="code"><span class="hl-variable">i</span></code>th element is <code class="code"><span class="hl-variable">f</span>(<span class="hl-variable">i</span>)</code>.</p><p>This function provides a simple form of memoisation; we avoid recomputing
the value of <code class="code"><span class="hl-variable">f</span>(<span class="hl-variable">i</span>)</code> by storing the result in an array.</p><p>Example:
<pre class="programlisting">
<span class="hl-keyword">val</span> <span class="hl-variable">a</span> = <span class="hl-variable">IArray</span>(<span class="hl-literal">5</span>, <span class="hl-variable">fib</span>)
<span class="hl-comment">-- Publishes the 4th number of the fibonnaci sequence: 5</span>
<span class="hl-variable">a</span>(<span class="hl-literal">3</span>)</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Some</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Some</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">Option</span>&lt;<span class="hl-variable">A</span>&gt;</code>
                            </p><p>Construct an available optional value.</p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code"><span class="hl-variable">Some</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">pattern</span> <span class="hl-variable">Some</span>(<span class="hl-variable">Option</span>&lt;<span class="hl-variable">A</span>&gt;) :: (<span class="hl-variable">A</span>)</code>

                                    </p><p>Deconstruct an available optional value.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: 3</span>
<span class="hl-variable">Some</span>(<span class="hl-literal">3</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">Some</span>(<span class="hl-variable">x</span>)<span class="hl-combinator">&gt;</span> <span class="hl-variable">x</span></pre>
                                    </p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">None</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">None</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">Option</span>&lt;<span class="hl-variable">A</span>&gt;</code>
                            </p><p>Construct an unavailable optional value.</p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code"><span class="hl-variable">None</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">pattern</span> <span class="hl-variable">None</span>(<span class="hl-variable">Option</span>&lt;<span class="hl-variable">A</span>&gt;) :: ()</code>

                                    </p><p>Deconstruct an unavailable optional value.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: true</span>
  <span class="hl-variable">None</span>() <span class="hl-combinator">&gt;</span><span class="hl-variable">None</span>()<span class="hl-combinator">&gt;</span> <span class="hl-literal">true</span>
<span class="hl-combinator">|</span> <span class="hl-variable">Some</span>(<span class="hl-literal">3</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">None</span>()<span class="hl-combinator">&gt;</span> <span class="hl-literal">false</span></pre>
                                    </p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Left</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Left</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">Either</span>&lt;<span class="hl-variable">A</span>&gt;</code>
                            </p><p>Construct a "left" member of a union which may be tagged either "left" or "right".</p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code"><span class="hl-variable">Left</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">pattern</span> <span class="hl-variable">Left</span>(<span class="hl-variable">Either</span>&lt;<span class="hl-variable">A</span>&gt;) :: <span class="hl-variable">A</span></code>

                                    </p><p>Deconstruct a "left" member of a union.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: "left"</span>
<span class="hl-variable">Left</span>(<span class="hl-literal">3</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> (
   <span class="hl-variable">x</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">Right</span>(<span class="hl-variable">_</span>)<span class="hl-combinator">&gt;</span> <span class="hl-literal">"right"</span>
 <span class="hl-combinator">|</span> <span class="hl-variable">x</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">Left</span>(<span class="hl-variable">_</span>)<span class="hl-combinator">&gt;</span> <span class="hl-literal">"left"</span>
)</pre>
                                    </p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Right</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Right</span>(<span class="hl-variable">A</span>) :: <span class="hl-variable">Either</span>&lt;<span class="hl-variable">A</span>&gt;</code>
                            </p><p>Construct a "right" member of a union which may be tagged either "left" or "right".</p><div class="variablelist"><dl><dt><span class="term">
                                    <code class="code"><span class="hl-variable">Right</span></code>
                                    </span></dt><dd><p>
                                    <code class="code"><span class="hl-keyword">pattern</span> <span class="hl-variable">Right</span>(<span class="hl-variable">Either</span>&lt;<span class="hl-variable">A</span>&gt;) :: <span class="hl-variable">A</span></code>

                                    </p><p>Deconstruct a "right" member of a union.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: "right"</span>
<span class="hl-variable">Right</span>(<span class="hl-literal">3</span>) <span class="hl-combinator">&gt;</span><span class="hl-variable">x</span><span class="hl-combinator">&gt;</span> (
   <span class="hl-variable">x</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">Right</span>(<span class="hl-variable">_</span>)<span class="hl-combinator">&gt;</span> <span class="hl-literal">"right"</span>
 <span class="hl-combinator">|</span> <span class="hl-variable">x</span> <span class="hl-combinator">&gt;</span><span class="hl-variable">Left</span>(<span class="hl-variable">_</span>)<span class="hl-combinator">&gt;</span> <span class="hl-literal">"left"</span>
)</pre>
                                    </p></dd></dl></div></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">fst</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">fst</span>((<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)) :: <span class="hl-variable">A</span></code>
                            </p><p>Return the first element of a pair.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">snd</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">snd</span>((<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)) :: <span class="hl-variable">B</span></code>
                            </p><p>Return the second element of a pair.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">swap</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">swap</span>((<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)) :: (<span class="hl-variable">B</span>,<span class="hl-variable">A</span>)</code>
                            </p><p>Swap the elements of a pair.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="N117F6"></a>B.3.3.&nbsp;idioms.inc: Higher-order Orc programming idioms.</h3></div></div></div><p>Higher-order Orc programming idioms.
Many of these are standard functional-programming
combinators borrowed from Haskell or Scheme.</p><div class="variablelist"><dl><dt><span class="term">
                            <code class="code"><span class="hl-variable">apply</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">apply</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, ...) :: <span class="hl-variable">B</span>, [<span class="hl-variable">A</span>]) :: <span class="hl-variable">B</span></code>
                            </p><p>Apply a function to a list of arguments.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">curry</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">curry</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">B</span>) :: <span class="hl-variable">C</span>)(<span class="hl-variable">A</span>)(<span class="hl-variable">B</span>) :: <span class="hl-variable">C</span></code>
                            </p><p>Curry a function of two arguments.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">curry3</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">curry3</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>) :: <span class="hl-variable">D</span>)(<span class="hl-variable">A</span>)(<span class="hl-variable">B</span>)(<span class="hl-variable">C</span>) :: <span class="hl-variable">D</span></code>
                            </p><p>Curry a function of three arguments.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">uncurry</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">uncurry</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>)(<span class="hl-variable">B</span>) :: <span class="hl-variable">C</span>)(<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) :: <span class="hl-variable">C</span></code>
                            </p><p>Uncurry a function of two arguments.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">uncurry3</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">uncurry3</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>)(<span class="hl-variable">B</span>)(<span class="hl-variable">C</span>) :: <span class="hl-variable">D</span>)(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>,<span class="hl-variable">C</span>) :: <span class="hl-variable">D</span></code>
                            </p><p>Uncurry a function of three arguments.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">flip</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">flip</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) :: <span class="hl-variable">C</span>)(<span class="hl-variable">B</span>, <span class="hl-variable">A</span>) :: <span class="hl-variable">C</span></code>
                            </p><p>Flip the order of parameters of a two-argument function.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">constant</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">constant</span>(<span class="hl-variable">A</span>)() :: <span class="hl-variable">A</span></code>
                            </p><p>Create a function which returns a constant value.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">defer</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">defer</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) :: <span class="hl-variable">B</span>, <span class="hl-variable">A</span>)() :: <span class="hl-variable">B</span></code>
                            </p><p>Given a function and its argument, return a thunk which applies the function.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">defer2</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">defer2</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">B</span>) :: <span class="hl-variable">C</span>, <span class="hl-variable">A</span>, <span class="hl-variable">B</span>)() :: <span class="hl-variable">C</span></code>
                            </p><p>Given a function and its arguments, return a thunk which applies the function.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">ignore</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">ignore</span>(<span class="hl-keyword">lambda</span> () :: <span class="hl-variable">B</span>)(<span class="hl-variable">A</span>) :: <span class="hl-variable">B</span></code>
                            </p><p>From a function of no arguments, create a function
of one argument, which is ignored.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">ignore2</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">ignore2</span>(<span class="hl-keyword">lambda</span> () :: <span class="hl-variable">C</span>)(<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) :: <span class="hl-variable">C</span></code>
                            </p><p>From a function of no arguments, create a function
of two arguments, which are ignored.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">compose</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">compose</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">B</span>) :: <span class="hl-variable">C</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) :: <span class="hl-variable">B</span>)(<span class="hl-variable">A</span>) :: <span class="hl-variable">C</span></code>
                            </p><p>Compose two single-argument functions.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">while</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">while</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) :: <span class="hl-variable">Boolean</span>, <span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) :: <span class="hl-variable">A</span>)(<span class="hl-variable">A</span>) :: <span class="hl-variable">A</span></code>
                            </p><p>Iterate a function while a predicate is satisfied, publishing
each value passed to the function. The exact behavior is specified
by the following implementation:</p><p>
                                <pre class="programlisting">
<span class="hl-keyword">def</span> <span class="hl-variable">while</span>(<span class="hl-variable">p</span>,<span class="hl-variable">f</span>) = 
  <span class="hl-keyword">def</span> <span class="hl-variable">loop</span>(<span class="hl-variable">x</span>) = <span class="hl-keyword">if</span>(<span class="hl-variable">p</span>(<span class="hl-variable">x</span>)) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> ( <span class="hl-variable">x</span> <span class="hl-combinator">|</span> <span class="hl-variable">loop</span>(<span class="hl-variable">f</span>(<span class="hl-variable">x</span>)) )
  <span class="hl-variable">loop</span></pre>
                            </p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: 0 1 2 3 4 5</span>
<span class="hl-variable">while</span>(
  <span class="hl-keyword">lambda</span> (<span class="hl-variable">n</span>) = (<span class="hl-variable">n</span> <span class="hl-site">&lt;=</span> <span class="hl-literal">5</span>),
  <span class="hl-keyword">lambda</span> (<span class="hl-variable">n</span>) = <span class="hl-variable">n</span>+<span class="hl-literal">1</span>
)(<span class="hl-literal">0</span>)</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">repeat</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">repeat</span>(<span class="hl-keyword">lambda</span> () :: <span class="hl-variable">A</span>) :: <span class="hl-variable">A</span></code>
                            </p><p>Call a function sequentially, publishing each value returned by the function.
The expression <code class="code"><span class="hl-variable">repeat</span>(<span class="hl-variable">f</span>)</code> is equivalent to
the infinite expression <code class="code"><span class="hl-variable">f</span>() <span class="hl-combinator">&gt;</span>!<span class="hl-variable">_</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">f</span>() <span class="hl-combinator">&gt;</span>!<span class="hl-variable">_</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">f</span>() <span class="hl-combinator">&gt;</span>!<span class="hl-variable">_</span><span class="hl-combinator">&gt;</span> ...</code>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">fork</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">fork</span>([<span class="hl-keyword">lambda</span> () :: <span class="hl-variable">A</span>]) :: <span class="hl-variable">A</span></code>
                            </p><p>Call a list of functions in parallel, publishing
all values published by the functions.</p><p>The expression <code class="code"><span class="hl-variable">fork</span>([<span class="hl-variable">f</span>,<span class="hl-variable">g</span>,<span class="hl-variable">h</span>])</code> is equivalent to
the expression <code class="code"><span class="hl-variable">f</span>() <span class="hl-combinator">|</span> <span class="hl-variable">g</span>() <span class="hl-combinator">|</span> <span class="hl-variable">h</span>()</code>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">sequence</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">sequence</span>([<span class="hl-keyword">lambda</span> () :: <span class="hl-variable">A</span>]) :: <span class="hl-variable">Signal</span></code>
                            </p><p>Call a list of functions in sequence, publishing
a signal whenever the last function publishes. The
actual publications of the given functions are not
published.</p><p>The expression <code class="code"><span class="hl-variable">sequence</span>([<span class="hl-variable">f</span>,<span class="hl-variable">g</span>,<span class="hl-variable">h</span>])</code> is equivalent to
the expression <code class="code"><span class="hl-variable">f</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">g</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">h</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">signal</span></code>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">join</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">join</span>([<span class="hl-keyword">lambda</span> () :: <span class="hl-variable">A</span>]) :: <span class="hl-variable">Signal</span></code>
                            </p><p>Call a list of functions in parallel and publish
a signal once all functions have completed.</p><p>The expression <code class="code"><span class="hl-variable">join</span>([<span class="hl-variable">f</span>,<span class="hl-variable">g</span>,<span class="hl-variable">h</span>])</code> is equivalent to
the expression <code class="code"><span class="hl-variable">f</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span> <span class="hl-combinator">|</span> <span class="hl-variable">g</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span> <span class="hl-combinator">|</span> <span class="hl-variable">h</span>() <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-keyword">stop</span> <span class="hl-combinator">;</span> <span class="hl-keyword">signal</span></code>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">por</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">por</span>(<span class="hl-keyword">lambda</span> () :: <span class="hl-variable">Boolean</span>, <span class="hl-keyword">lambda</span> () :: <span class="hl-variable">Boolean</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Parallel or. Evaluate two boolean functions in parallel, publishing
a value as soon as possible, and terminating any unnecessary ongoing
computation.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">pand</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">pand</span>(<span class="hl-keyword">lambda</span> () :: <span class="hl-variable">Boolean</span>, <span class="hl-keyword">lambda</span> () :: <span class="hl-variable">Boolean</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Parallel and. Evaluate two boolean functions in parallel, publishing
a value as soon as possible, and terminating any unnecessary ongoing
computation.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">collect</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">collect</span>(<span class="hl-keyword">lambda</span> () :: <span class="hl-variable">A</span>) :: [<span class="hl-variable">A</span>]</code>

                            </p><p>Run a function, collecting all publications in a list.
Return the list when the function terminates.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: [signal, signal, signal, signal, signal]</span>
<span class="hl-variable">collect</span>(<span class="hl-variable">defer</span>(<span class="hl-variable">signals</span>, <span class="hl-literal">5</span>))</pre>
                            </p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="N11943"></a>B.3.4.&nbsp;list.inc: Operations on lists.</h3></div></div></div><p>Operations on lists.
Many of these functions are similar to those in the Haskell prelude, but
operate on the elements of a list in parallel.</p><div class="variablelist"><dl><dt><span class="term">
                            <code class="code"><span class="hl-variable">each</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">each</span>([<span class="hl-variable">A</span>]) :: <span class="hl-variable">A</span></code>
                            </p><p>Publish every value in a list, simultaneously.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">map</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">map</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) :: <span class="hl-variable">B</span>, [<span class="hl-variable">A</span>]) :: [<span class="hl-variable">B</span>]</code>
                            </p><p>Apply a function to every element of a list (in parallel),
returning a list of the results.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">reverse</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">reverse</span>([<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>]</code>
                            </p><p>Return the reverse of the given list.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">filter</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">filter</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) :: <span class="hl-variable">Boolean</span>, [<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>]</code>
                            </p><p>Return a list containing only those elements which satisfy the predicate.
The filter is applied to all list elements in parallel.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">head</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">head</span>([<span class="hl-variable">A</span>]) :: <span class="hl-variable">A</span></code>
                            </p><p>Return the first element of a list.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">tail</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">tail</span>([<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>]</code>
                            </p><p>Return all but the first element of a list.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">init</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">init</span>([<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>]</code>
                            </p><p>Return all but the last element of a list.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">last</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">last</span>([<span class="hl-variable">A</span>]) :: <span class="hl-variable">A</span></code>
                            </p><p>Return the last element of a list.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">empty</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">empty</span>([<span class="hl-variable">A</span>]) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Is the list empty?</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">index</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">index</span>(<span class="hl-variable">Integer</span>, [<span class="hl-variable">A</span>]) :: <span class="hl-variable">A</span></code>
                            </p><p>Return the nth element of a list, counting from 0.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">append</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">append</span>([<span class="hl-variable">A</span>], [<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>]</code>
                            </p><p>Return the first list concatenated with the second.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">foldl</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">foldl</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">B</span>, <span class="hl-variable">A</span>) :: <span class="hl-variable">B</span>, <span class="hl-variable">B</span>, [<span class="hl-variable">A</span>]) :: <span class="hl-variable">B</span></code>
                            </p><p>Reduce a list using the given left-associative binary operation and initial value.
Given the list <code class="code">[<span class="hl-variable">x1</span>, <span class="hl-variable">x2</span>, <span class="hl-variable">x3</span>, ...]</code> and initial value <code class="code"><span class="hl-variable">x0</span></code>,
returns <code class="code"><span class="hl-variable">f</span>(... <span class="hl-variable">f</span>(<span class="hl-variable">f</span>(<span class="hl-variable">f</span>(<span class="hl-variable">x0</span>, <span class="hl-variable">x1</span>), <span class="hl-variable">x2</span>), <span class="hl-variable">x3</span>) ...)</code>

                            </p><p>Example using <code class="code"><span class="hl-variable">foldl</span></code> to reverse a list:
<pre class="orc">
<span class="hl-comment">-- Publishes: [3, 2, 1]</span>
<span class="hl-variable">foldl</span>(<span class="hl-variable">flip</span>((:)), [], [<span class="hl-literal">1</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>])</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">foldl1</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">foldl1</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">A</span>) :: <span class="hl-variable">A</span>, [<span class="hl-variable">A</span>]) :: <span class="hl-variable">A</span></code>
                            </p><p>A special case of <code class="code"><span class="hl-variable">foldl</span></code> which uses the last element of the list as the
initial value.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">foldr</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">foldr</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">B</span>) :: <span class="hl-variable">B</span>, <span class="hl-variable">B</span>, [<span class="hl-variable">A</span>]) :: <span class="hl-variable">B</span></code>
                            </p><p>Reduce a list using the given right-associative binary operation and initial value.
Given the list <code class="code">[..., <span class="hl-variable">x3</span>, <span class="hl-variable">x2</span>, <span class="hl-variable">x1</span>]</code> and initial value <code class="code"><span class="hl-variable">x0</span></code>,
returns <code class="code"><span class="hl-variable">f</span>(... <span class="hl-variable">f</span>(<span class="hl-variable">x3</span>, <span class="hl-variable">f</span>(<span class="hl-variable">x2</span>, <span class="hl-variable">f</span>(<span class="hl-variable">x1</span>, <span class="hl-variable">x0</span>))) ...)</code>

                            </p><p>Example summing the numbers in a list:
<pre class="orc">
<span class="hl-comment">-- Publishes: 6</span>
<span class="hl-variable">foldr</span>((+), <span class="hl-literal">0</span>, [<span class="hl-literal">1</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>])</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">foldr1</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">foldr1</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>, <span class="hl-variable">A</span>) :: <span class="hl-variable">A</span>, [<span class="hl-variable">A</span>]) :: <span class="hl-variable">A</span></code>
                            </p><p>A special case of <code class="code"><span class="hl-variable">foldr</span></code> which uses the last element of the list as the
initial value.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">zip</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">zip</span>([<span class="hl-variable">A</span>], [<span class="hl-variable">B</span>]) :: (<span class="hl-variable">A</span>, <span class="hl-variable">B</span>)</code>
                            </p><p>Combine two lists into a list of pairs.
The length of the shortest list determines the length of the result.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">unzip</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">unzip</span>([(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)]) :: ([<span class="hl-variable">A</span>], [<span class="hl-variable">B</span>])</code>
                            </p><p>Split a list of pairs into a pair of lists.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">length</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">length</span>([<span class="hl-variable">A</span>]) :: <span class="hl-variable">Integer</span></code>
                            </p><p>Return the number of elements in a list.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">take</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">take</span>(<span class="hl-variable">Integer</span>, [<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>]</code>
                            </p><p>Given a number <code class="code"><span class="hl-variable">n</span></code> and a list <code class="code"><span class="hl-variable">l</span></code>,
return the first <code class="code"><span class="hl-variable">n</span></code> elements of <code class="code"><span class="hl-variable">l</span></code>.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">drop</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">drop</span>(<span class="hl-variable">Integer</span>, [<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>]</code>
                            </p><p>Given a number <code class="code"><span class="hl-variable">n</span></code> and a list <code class="code"><span class="hl-variable">l</span></code>,
return the elements of <code class="code"><span class="hl-variable">l</span></code> after the first <code class="code"><span class="hl-variable">n</span></code>.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">member</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">member</span>(<span class="hl-variable">A</span>, [<span class="hl-variable">A</span>]) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Return true if the given item is a member of the given list, and false
otherwise.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">merge</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">merge</span>([<span class="hl-variable">A</span>], [<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>], <span class="hl-variable">A</span> <span class="hl-site">&lt;:</span> <span class="hl-variable">Comparable</span></code>

                            </p><p>Merge two sorted lists.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: [1, 2, 2, 3, 4, 5]</span>
<span class="hl-variable">merge</span>([<span class="hl-literal">1</span>,<span class="hl-literal">2</span>,<span class="hl-literal">3</span>], [<span class="hl-literal">2</span>,<span class="hl-literal">4</span>,<span class="hl-literal">5</span>])</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">mergeBy</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">mergeBy</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) :: <span class="hl-variable">Boolean</span>, [<span class="hl-variable">A</span>], [<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>]</code>
                            </p><p>Merge two lists using the given less-than relation.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">sort</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">sort</span>([<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>], <span class="hl-variable">A</span> <span class="hl-site">&lt;:</span> <span class="hl-variable">Comparable</span></code>

                            </p><p>Sort a list.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: [1, 2, 3]</span>
<span class="hl-variable">sort</span>([<span class="hl-literal">1</span>,<span class="hl-literal">3</span>,<span class="hl-literal">2</span>])</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">sortBy</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">sortBy</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) :: <span class="hl-variable">Boolean</span>, [<span class="hl-variable">A</span>]) :: [<span class="hl-variable">A</span>]</code>
                            </p><p>Sort a list using the given less-than relation.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">group</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">group</span>([(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)]) :: [(<span class="hl-variable">A</span>,[<span class="hl-variable">B</span>])]</code>

                            </p><p>Given a list of pairs, group together the second
elements of consecutive pairs with equal first elements.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: [(1, [1, 2]), (2, [3]), (3, [4]), (1, [3])]</span>
<span class="hl-variable">group</span>([(<span class="hl-literal">1</span>,<span class="hl-literal">1</span>), (<span class="hl-literal">1</span>,<span class="hl-literal">2</span>), (<span class="hl-literal">2</span>,<span class="hl-literal">3</span>), (<span class="hl-literal">3</span>,<span class="hl-literal">4</span>), (<span class="hl-literal">1</span>,<span class="hl-literal">3</span>)])</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">groupBy</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">groupBy</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>,<span class="hl-variable">A</span>) :: <span class="hl-variable">Boolean</span>, [(<span class="hl-variable">A</span>,<span class="hl-variable">B</span>)]) :: [(<span class="hl-variable">A</span>,[<span class="hl-variable">B</span>])]</code>
                            </p><p>Given a list of pairs, group together the second
elements of consecutive pairs with equal first elements,
using the given equality relation.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">range</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">range</span>(<span class="hl-variable">Integer</span>, <span class="hl-variable">Integer</span>) :: [<span class="hl-variable">Integer</span>]</code>
                            </p><p>Generate a list of integers in the given half-open range.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">any</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">any</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) :: <span class="hl-variable">Boolean</span>, [<span class="hl-variable">A</span>]) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Return true if any of the elements of the list match the predicate, and false otherwise.
The predicate is applied to all elements of the list in parellel; the result
is returned as soon as it is known and any unnecessary evaluation of the predicate
terminated.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">all</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">all</span>(<span class="hl-keyword">lambda</span> (<span class="hl-variable">A</span>) :: <span class="hl-variable">Boolean</span>, [<span class="hl-variable">A</span>]) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Return true if all of the elements of the list match the predicate, and false otherwise.
The predicate is applied to all elements of the list in parellel; the result
is returned as soon as it is known and any unnecessary evaluation of the predicate
terminated.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">sum</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">sum</span>([<span class="hl-variable">Number</span>]) :: <span class="hl-variable">Number</span></code>
                            </p><p>Return the sum of all numbers in a list.
The sum of an empty list is 0.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">product</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">product</span>([<span class="hl-variable">Number</span>]) :: <span class="hl-variable">Number</span></code>
                            </p><p>Return the product of all numbers in a list.
The product of an empty list is 1.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">and</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">and</span>([<span class="hl-variable">Boolean</span>]) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Return the boolean conjunction of all boolean values in the list.
The conjunction of an empty list is <code class="code"><span class="hl-literal">true</span></code>.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">or</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">or</span>([<span class="hl-variable">Boolean</span>]) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Return the boolean disjunction of all boolean values in the list.
The disjunction of an empty list is <code class="code"><span class="hl-literal">true</span></code>.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">minimum</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">minimum</span>([<span class="hl-variable">A</span>]) :: <span class="hl-variable">A</span>, <span class="hl-variable">A</span> <span class="hl-site">&lt;:</span> <span class="hl-variable">Comparable</span></code>
                            </p><p>Return the minimum element of a non-empty list.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">maximum</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">maximum</span>([<span class="hl-variable">A</span>]) :: <span class="hl-variable">A</span>, <span class="hl-variable">A</span> <span class="hl-site">&lt;:</span> <span class="hl-variable">Comparable</span></code>
                            </p><p>Return the maximum element of a non-empty list.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="N11B98"></a>B.3.5.&nbsp;text.inc: Operations on strings.</h3></div></div></div><p>Operations on strings.</p><div class="variablelist"><dl><dt><span class="term">
                            <code class="code"><span class="hl-variable">cat</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">cat</span>(<span class="hl-variable">Top</span>, ...) :: <span class="hl-variable">String</span></code>
                            </p><p>Return the string representation of one or more values, concatenated.
For Java objects, this will call <code class="code"><span class="hl-variable">toString</span>()</code> to convert
the object to a String.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">print</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">print</span>(<span class="hl-variable">Top</span>, ...) :: <span class="hl-variable">Signal</span></code>
                            </p><p>Print one or more values as strings, concatenated, to standard output.
For Java objects, this will call <code class="code"><span class="hl-variable">toString</span>()</code> to convert
the object to a String.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">println</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">println</span>(<span class="hl-variable">Top</span>, ...) :: <span class="hl-variable">Signal</span></code>
                            </p><p>Print one or more values as strings, concatenated,
to standard output, with each value followed by a newline.
For Java objects, this will call <code class="code"><span class="hl-variable">toString</span>()</code> to convert
the object to a String.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">parseInt</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">parseInt</span>(<span class="hl-variable">String</span>) :: <span class="hl-variable">BigInteger</span></code>
                            </p><p>Parse a string as a BigInteger.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">parseBool</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">parseBool</span>(<span class="hl-variable">String</span>) :: <span class="hl-variable">Boolean</span></code>
                            </p><p>Parse a string as a Boolean (true/false).</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">lines</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">lines</span>(<span class="hl-variable">String</span>) :: [<span class="hl-variable">String</span>]</code>
                            </p><p>Split a string into lines, which are substrings
terminated by an endline or the end of the string.
DOS, Mac, and Unix endline conventions are all accepted.
Endline characters are not included in the result.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">unlines</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">unlines</span>([<span class="hl-variable">String</span>]) :: <span class="hl-variable">String</span></code>
                            </p><p>Append a linefeed, "\n", to each string in the sequence
and concatenate the results.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">words</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">words</span>(<span class="hl-variable">String</span>) :: [<span class="hl-variable">String</span>]</code>
                            </p><p>Split a string into words, which are sequences of non-whitespace characters separated by whitespace.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">unwords</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">unwords</span>([<span class="hl-variable">String</span>]) :: <span class="hl-variable">String</span></code>
                            </p><p>Concatenate a sequence of strings with a single space between
each string.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="N11C25"></a>B.3.6.&nbsp;time.inc: Real and logical time.</h3></div></div></div><p>Real and logical time.</p><div class="variablelist"><dl><dt><span class="term">
                            <code class="code"><span class="hl-variable">Rtimer</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Rtimer</span>(<span class="hl-variable">Integer</span>) :: <span class="hl-variable">Signal</span></code>
                            </p><p>Publish a signal after the given number of milliseconds.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Clock</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Clock</span>()() :: <span class="hl-variable">Integer</span></code>

                            </p><p>A call to <code class="code"><span class="hl-variable">Clock</span></code> creates a new relative clock.
Calling a relative clock returns the number
of milliseconds which have elapsed since the
clock was created.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes a value near 1000</span>
<span class="hl-keyword">val</span> <span class="hl-variable">c</span> = <span class="hl-variable">Clock</span>()
<span class="hl-variable">Rtimer</span>(<span class="hl-literal">1000</span>) <span class="hl-combinator">&gt;</span><span class="hl-combinator">&gt;</span> <span class="hl-variable">c</span>()</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Ltimer</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Ltimer</span>(<span class="hl-variable">Integer</span>) :: <span class="hl-variable">Signal</span></code>
                            </p><p>Publish a signal after the given number of logical timesteps.
A logical timestep is complete as soon as all outstanding site
calls (other than calls to <code class="code"><span class="hl-variable">Ltimer</span></code>) have published.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">metronome</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">metronome</span>(<span class="hl-variable">Integer</span>) :: <span class="hl-variable">Signal</span></code>
                            </p><p>Publish a signal at regular intervals, indefinitely. The period is given by the
argument, in milliseconds.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="N11C6F"></a>B.3.7.&nbsp;util.inc: Miscellaneous utility functions.</h3></div></div></div><p>Miscellaneous utility functions.</p><div class="variablelist"><dl><dt><span class="term">
                            <code class="code"><span class="hl-variable">random</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">random</span>() :: <span class="hl-variable">Integer</span></code>
                            </p><p>Return a random Integer value
chosen from the range of all possible 32-bit Integer values.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">random</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">random</span>(<span class="hl-variable">Integer</span>) :: <span class="hl-variable">Integer</span></code>
                            </p><p>Return a pseudorandom, uniformly distributed Integer value
between 0 (inclusive) and the specified value (exclusive).
If the argument is 0, halt.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">urandom</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">urandom</span>() :: <span class="hl-variable">Double</span></code>
                            </p><p>Returns a pseudorandom, uniformly distributed Double value
between 0 and 1, inclusive.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">UUID</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">UUID</span>() :: <span class="hl-variable">String</span></code>
                            </p><p>Return a random (type 4) UUID represented as a string.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Thread</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Thread</span>(<span class="hl-variable">Site</span>) :: <span class="hl-variable">Site</span></code>
                            </p><p>Given a site, return a new site which calls the original site
in a separate thread.  This is necessary when calling
a Java site which does not cooperate with Orc's scheduler
and may block for an unpredictable amount of time.</p><p>A limited number of threads are reserved in a pool for use
by this site, so there is a limit to the number of blocking,
uncooperative sites that can be called simultaneously.</p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">Prompt</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">site</span> <span class="hl-variable">Prompt</span>(<span class="hl-variable">String</span>) :: <span class="hl-variable">String</span></code>

                            </p><p>Prompt the user for some input. The user may cancel the prompt,
in which case the site fails silently. Otherwise their response
is returned as soon as it is received.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes the user's name</span>
<span class="hl-variable">Prompt</span>(<span class="hl-literal">"What is your name?"</span>)</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">signals</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">signals</span>(<span class="hl-variable">Integer</span>) :: <span class="hl-variable">Signal</span></code>

                            </p><p>Publish the given number of signals, simultaneously.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes five signals</span>
<span class="hl-variable">signals</span>(<span class="hl-literal">5</span>)</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">for</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">for</span>(<span class="hl-variable">Integer</span>, <span class="hl-variable">Integer</span>) :: <span class="hl-variable">Integer</span></code>

                            </p><p>Publish all values in the given half-open range, simultaneously.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: 1 2 3 4 5</span>
<span class="hl-variable">for</span>(<span class="hl-literal">1</span>,<span class="hl-literal">6</span>)</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">upto</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">upto</span>(<span class="hl-variable">Integer</span>) :: <span class="hl-variable">Integer</span></code>
                            </p><p>

                                <code class="code"><span class="hl-variable">upto</span>(<span class="hl-variable">n</span>)</code> publishes all values in the range <code class="code">(<span class="hl-literal">0.</span>.<span class="hl-variable">n</span>-<span class="hl-literal">1</span>)</code>
simultaneously.</p><p>Example:
<pre class="orc">
<span class="hl-comment">-- Publishes: 0 1 2 3 4</span>
<span class="hl-variable">upto</span>(<span class="hl-literal">5</span>)</pre>
                            </p></dd><dt><span class="term">
                            <code class="code"><span class="hl-variable">fillArray</span></code>
                        </span></dt><dd><p>
                                <code class="code"><span class="hl-keyword">def</span> <span class="hl-variable">fillArray</span>(<span class="hl-variable">Array</span>&lt;<span class="hl-variable">A</span>&gt;, <span class="hl-keyword">lambda</span> (<span class="hl-variable">Integer</span>) :: <span class="hl-variable">A</span>) :: <span class="hl-variable">Array</span>&lt;<span class="hl-variable">A</span>&gt;</code>

                            </p><p>Given an array and a function from indices to values, populate the array
by calling the function for each index in the array.</p><p>For example, to set all elements of an array to zero:
<pre class="orc">
<span class="hl-comment">-- Publishes: 0 0 0</span>
<span class="hl-keyword">val</span> <span class="hl-variable">a</span> = <span class="hl-variable">fillArray</span>(<span class="hl-variable">Array</span>(<span class="hl-literal">3</span>), <span class="hl-keyword">lambda</span> (<span class="hl-variable">_</span>) = <span class="hl-literal">0</span>)
<span class="hl-variable">a</span>.<span class="hl-variable">get</span>(<span class="hl-literal">0</span>) <span class="hl-combinator">|</span> <span class="hl-variable">a</span>.<span class="hl-variable">get</span>(<span class="hl-literal">1</span>) <span class="hl-combinator">|</span> <span class="hl-variable">a</span>.<span class="hl-variable">get</span>(<span class="hl-literal">2</span>)</pre>
                            </p></dd></dl></div></div></div><script type="text/javascript" src="/orchard/orc.js"></script><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="apbs02.html">Prev</a>&nbsp;</td><td align="center" width="20%"><a accesskey="u" href="apb.html">Up</a></td><td align="right" width="40%">&nbsp;</td></tr><tr><td valign="top" align="left" width="40%">B.2.&nbsp;Notation&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;</td></tr></table></div></body></html>