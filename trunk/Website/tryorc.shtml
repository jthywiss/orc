<html>
<!--
To play with this in your browser without running an Orchard server,
load it as index.html?mock
-->
<head>
<title>Orc Demo</title>
<link rel="stylesheet" type="text/css" href="/orchard/orc.css"/>
<style type="text/css">
/* scavenged from templates-indigo/default.css */
* {
	margin: 0;
	padding: 0;
}
a {
	color: #F70;
}
a:hover {
	color: #C60;
}
body {
	color: #466;
	font: normal 11pt "Helvetica","Nimbus Sans L","Arial",sans-serif;
	margin: 0;
}
input {
	color: #555;
}
p,cite,code,ul {
	margin-bottom: 10pt;
}
ul ul {
	margin-bottom: 0;
}
h1,h2,h3 {
	font-family: "Trebuchet MS",sans-serif;
	color: #06C;
	padding-top: 6px;
}
h1 {
	margin-bottom: 4px;
}
small, .small {font: normal 10px Verdana,sans-serif;}
</style>
<link rel="stylesheet" type="text/css" href="jquery.treeview.css"/>
<style type="text/css">
h1 {
	margin-top: 0;
}
.closed ul {
	display: none;
}
.file a {
	cursor: pointer;
}
/* I don't like the link highlighting */
#menu a {
	color: #466;
	text-decoration: none;
}
#menu a.selected {
	font-weight: bold;
	background: none;
	text-decoration: underline;
}
/* I don't like the red highlighting */
.treeview .hover {
	color: black;
}
</style>
</head>
<body>
<div id="homelink" style="padding: 2px"><small>&lt; <a href="/">Back to Orc Home</a></small></div>
<table border="0" padding="0" spacing="0" width="100%">
<tr><td width="200" valign="top" style="padding: 0 10px 0 10px" id="menu-td">
<h1>Examples</h1>
<p>Click an example to load it.</p>
<ul id="menu" class="filetree">
<li><span class="folder">Tutorial Examples</span>
	<ul>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/par.orc">Parallel</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/seq.orc">Sequential</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/parseq.orc">Parallel/Sequential</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/pull.orc">Asymmetric</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/parpull.orc">Parallel/Asymmetric</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/val.orc">Val Binding</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/implicit_pull.orc">Implicit Asymmetric</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/if.orc">If Site</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/null.orc">Stop</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/rtimer.orc">Rtimer Site</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/metronome.orc">Metronome</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/prime.orc">Prime Numbers</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/tutorial/airline1.orc">Airline</a></span></li>
	</ul></li>
<li class="closed"><span class="folder">Concurrency Idioms</a></span>
	<ul>
	<li><span class="file"><a class="demo-link" href="tryorc/concurrency/timeout.orc">Timeout</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/concurrency/delay.orc">Delay</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/concurrency/priority.orc">Priority</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/concurrency/forkjoin.orc">Fork/Join</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/concurrency/parallelor.orc">Parallel Or</a></span></li>
	</ul></li>
<li class="closed"><span class="folder">Miscellaneous</a></span>
	<ul>
	<li><span class="file"><a class="demo-link" href="tryorc/misc/eliza.orc">Eliza</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/misc/google.orc">Google</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/misc/ping.orc">Ping</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/misc/path.orc">Shortest Path</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/misc/music_calendar.orc">Music Calendar</a></span></li>
	<li><span class="file"><a class="demo-link" href="tryorc/misc/search.orc">Web Search</a></span></li>
	</ul></li>
</ul>
</td><td valign="top" style="padding: 0 10px 0 10px" id="main">
<div id="header">
<h1>Try Orc!</h1>

Enter an Orc program in the text box below and then click the <b>run</b>
button. You may also load an example from the left panel, and then modify or
run it.
</div>
<div>
<small>Font size:
<a href="#" style="cursor: pointer" onclick="document.getElementById('orc').orcFontSizeUp()">bigger</a> /
<a href="#" style="cursor: pointer" onclick="document.getElementById('orc').orcFontSizeDown()">smaller</a>
&nbsp;&nbsp;&nbsp;&nbsp;Examples: <a href="#" style="cursor: pointer" onclick="toggleExamples()">show/hide</a>
</small>
</div>
<textarea id="orc" spellcheck="false" class="orc" style="width: 700px; height: 300px">
</textarea>
</td></tr></table>
<script src="/orchard/orc.js" type="text/javascript"></script>
<script type="text/javascript" src="jquery.treeview.min.js"></script>
<script type="text/javascript">
(function ($) {
$("#menu").treeview({
	animated: "fast",
	unique: true
});

$("#menu .demo-link").each(function () {
	var $this = $(this);
	var file = this.href;
	this.href = "#";
	$this.click(function () {
		loadOrcCode(file);
		$("#menu .demo-link").removeClass("selected");
		$this.addClass("selected");
	});
});

window.toggleExamples = function() {
	$('#menu-td').toggle();
	$('#header').toggle();
	$('#homelink').toggle();
}

function escapeHtml(v) {
	v = v.replace(/&/g, '&amp;');
	v = v.replace(/</g, '&lt;');
	// FIXME: escape other special characters
	return v;
}
function loadOrcCode(url) {
	$.ajax({
		url: url,
		success: function (data) {
			document.getElementById("orc").setOrcCode(data);
		},
		error: function () {
			alert("There was an error loading the example program.");
		}
	});
}
})(jQuery);
</script>
</body>
