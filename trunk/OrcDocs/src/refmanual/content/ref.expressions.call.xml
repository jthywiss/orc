<?xml version="1.0" encoding="UTF-8"?>
<!-- ref.expressions.call.xml - DocBook source for an Orc reference manual section

     $Id$

     Copyright (c) 2010 The University of Texas at Austin. All rights reserved.

     Use and redistribution of this file is governed by the license terms in
     the LICENSE file found in the project's top-level directory and also found at
     URL: http://orc.csres.utexas.edu/license.shtml .
  -->

<!-- Lambda -->
	<section xml:id="ref.expressions.call">
		<title>Site and Function Calls</title>
		<section xml:id="ref.expressions.call.body">
			<para>
			A <firstterm>call</firstterm> is an invocation of a <firstterm>target</firstterm> expression on a sequence of <firstterm>argument</firstterm> expressions. 
			First, the target expression is <link linkend="ref.concepts.deflate">deflated</link> to a value <replaceable>f</replaceable>.
			If <replaceable>f</replaceable> is a site, then the call is a site call. 
			If <replaceable>f</replaceable> is a closure, then the call is a function call.
			Each of these cases is described below.
			
			</para>
		</section>
		
		<section xml:id="ref.expressions.call.syntax">
	  <title>Syntax</title>
	  <para>
	    <productionset>
	    	<productionrecap linkend="ebnf.expression.call"/>
	    	<productionrecap linkend="ebnf.arguments"/>
	    	<productionrecap linkend="ebnf.typearguments"/>
	    </productionset>
	  </para>
	  </section>
	  
	  <section xml:id="ref.expressions.call.site">
	  <title>Site Calls</title>
	  <para>
	     Execution of a site call <replaceable>f</replaceable><code>(</code> <replaceable>E<subscript>0</subscript></replaceable> <code>,</code> &#x2026; <code>,</code> <replaceable>E<subscript>n</subscript></replaceable> <code>)</code>
	     deflates each expression <replaceable>E<subscript>i</subscript></replaceable> to a value <replaceable>v<subscript>i</subscript></replaceable>.
	     The site <replaceable>f</replaceable> is then invoked with arguments <replaceable>v<subscript>i</subscript></replaceable>.
	     A site call publishes at most one value. Once it publishes a value, it immediately halts.
	     If the site is <link linkend="ref.concepts.halt.helpful">helpful</link>, the call may halt without publishing a value.
	      
	    
	  </para>
	  </section>
	  
	  <section xml:id="ref.expressions.call.function">
	  <title>Function Calls</title>
	  <para>
	    Unlike site calls, function calls are <firstterm>lenient</firstterm>. Execution of a function call <replaceable>f</replaceable><code>(</code> <replaceable>E<subscript>0</subscript></replaceable> <code>,</code> &#x2026; <code>,</code> <replaceable>E<subscript>n</subscript></replaceable> <code>)</code>
	    deflates each expression <replaceable>E<subscript>i</subscript></replaceable>, but does not wait for values to be published; instead, the body of the function executes immediately.
	    Since a function call executes an arbitrary expression, it may publish any number of values.
	  </para>
	  </section>
		
		<section xml:id="ref.expressions.call.examples">
		  <title>Examples</title>

		  <example xml:id="ref.expressions.call.examples.one"><title>TODO</title>
<programlisting language="orc-demo"><![CDATA[
--TODO
]]></programlisting>
		  </example>
		  
		  <example xml:id="ref.expressions.call.examples.one"><title>TODO</title>
<programlisting language="orc-demo"><![CDATA[
--TODO
]]></programlisting>
		  </example>
		  
		  <example xml:id="ref.expressions.call.examples.one"><title>TODO</title>
<programlisting language="orc-demo"><![CDATA[
--TODO
]]></programlisting>
		  </example>
		  
	  </section>
		
		<section xml:id="ref.expressions.call.links">
		  <title>Related Links</title>
		  
		  <informaltable frame="none">
	  		<tgroup cols="1" align="left">
	    	<thead>
	      		<row>
	        		<entry align="left">Related Reference Topics</entry>
	        	</row>
	    	</thead>
	    	<tbody valign="top">
	     		<row>
	        		<entry><itemizedlist>
	          			<listitem>TODO</listitem>
	        		</itemizedlist></entry>
	        	</row>
	    	</tbody>
	  		</tgroup>
		  </informaltable>
		  
		  <informaltable frame="none">
	  		<tgroup cols="1" align="left">
	    	<thead>
	      		<row>
	        		<entry align="left">Related Tutorial Sections</entry>
	        	</row>
	    	</thead>
	    	<tbody valign="top">
	     		<row>
	        		<entry><itemizedlist>
          				<listitem>TODO</listitem>
        			</itemizedlist></entry>
	        	</row>
	    	</tbody>
	  		</tgroup>
		  </informaltable>

	  </section>
	</section>
