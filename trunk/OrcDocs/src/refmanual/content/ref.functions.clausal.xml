<?xml version="1.0" encoding="UTF-8"?>
<!-- functions_clausal.xml - DocBook source for an Orc reference manual section

     $Id$

     Copyright (c) 2010 The University of Texas at Austin. All rights reserved.

     Use and redistribution of this file is governed by the license terms in
     the LICENSE file found in the project's top-level directory and also found at
     URL: http://orc.csres.utexas.edu/license.shtml .
  -->

<!-- Clausal Functions -->
   <section xml:id="ref.functions.clausal">
      <title>Clausal Functions</title>
	  <section xml:id="ref.functions.clausal.behavior">
		  <title>Behavior</title>
		  <para>
		  A function can be defined by a sequence of clauses, where each clause specifies
		  a pattern of arguments and the code to be executed in case the arguments match
		  the pattern.
		  </para>
		  <para>
		  A function may have multiple clauses, each of which has a sequence of patterns to match each argument,
and a body expression. All clauses of a function are required to have the same number of arguments. Any
contiguous sequence of definitions with the same name and different arguments is interpreted as a clausal
definition, where each individual declaration is a clause of the larger function.
		  </para>
		  <para>
		  When the function is called, the clauses are tried in the order in which they appear until a match is found.
If no clause matches, the call remains silent.
		  </para>
	  </section>
	  <section xml:id="ref.functions.clausal.examples">
		  <title>Examples</title>

		  <example xml:id="ref.functions.clausal.examples.one"><title>Simple example of a clausal function</title>
<programlisting language="orc-demo"><![CDATA[
def sum([]) = 0
def sum(h:t) = h + sum(t)
]]></programlisting>
		  </example>

		  <example xml:id="ref.functions.clausal.examples.two"><title>Clausal function with constant patterns</title>
<programlisting language="orc-demo"><![CDATA[
{- Fibonacci numbers -}
def fib(0) = 1
def fib(1) = 1
def fib(n) = if (n < 0) then 0 else fib(n-1) + fib(n-2)
]]></programlisting>
		  </example>

		  <example xml:id="ref.functions.clausal.examples.three"><title>Parity</title>
<programlisting language="orc-demo"><![CDATA[
{- Return true if parity of 1s in a binary string is even -}
def even([]) = true
def odd([]) = false
def even("1":xs) = odd(xs)
def odd("1":xs) = even(xs)
def even("_":xs) = even(xs)
def odd("_":xs) = odd(xs)
]]></programlisting>
		  </example>
		  
		  <example xml:id="ref.functions.clausal.examples.four"><title>Area</title>
<programlisting language="orc-demo"><![CDATA[
{-
Find the area of a rectangle, square, or circle
based on the form (="shape", ...)
-}
def area(("rect",x,y)) = x*y
def area(("sq",s)) = area(("rect",s,s))
def area(("cir",r)) = 3.14 * (r * r)

area(("sq",1))
]]></programlisting>
		  </example>
		  
		  <example xml:id="ref.functions.clausal.examples.five"><title>Currying</title>
<programlisting language="orc-demo"><![CDATA[
def sum(d,l)(h,p,v) = parts(d,l,h,p,v)
]]></programlisting>
		  </example>
		  
		  <example xml:id="ref.functions.clausal.examples.six"><title>Wild-Card</title>
<programlisting language="orc-demo"><![CDATA[
def parts23(_,s,h,0,m,n) = 1
]]></programlisting>
		  </example>

		  
	  </section>
	  <section xml:id="ref.functions.clausal.links">
		  <title>Related Links</title>
		  <informaltable frame='all'>
			<tgroup cols='2' align='left' colsep='1' rowsep='1'>
			<colspec colname='c1'/>
			<colspec colname='c2'/> 
			<thead>
			<row>
			  <entry align="center">Related Reference Topics</entry>
			  <entry align="center">Related Tutorial Sections</entry>
			</row>
			</thead>
			<tbody>
			<row>
			  <entry>Combinators</entry>
			  <entry><olink targetdoc="root" targetptr="special.dot">The . notation</olink></entry>
			</row>
			</tbody>
			</tgroup>
		  </informaltable>
	  </section>
   </section>
