<?xml version="1.0" encoding="UTF-8"?>
<!-- combinators_otherwise.xml - DocBook source for an Orc reference manual section

     $Id$

     Copyright (c) 2010 The University of Texas at Austin. All rights reserved.

     Use and redistribution of this file is governed by the license terms in
     the LICENSE file found in the project's top-level directory and also found at
     URL: http://orc.csres.utexas.edu/license.shtml .
  -->

<!-- Otherwise Combinator -->
   <section xml:id="ref.combinators.otherwise">
      <title>Otherwise Combinator</title>
	  <section xml:id="ref.combinators.otherwise.syntax">
		  <title>Syntax</title>
		  <para><emphasis role="strong">EBNF</emphasis>: <emphasis>E ::= <code><![CDATA[E ; E]]></code></emphasis></para>
		  <para><emphasis role="strong">Precedence</emphasis>: 
			  <olink targetdoc="root" targetptr="combinators.sequential">sequential</olink> >
			  <olink targetdoc="root" targetptr="combinators.parallel">parallel</olink> > 
			  <olink targetdoc="root" targetptr="combinators.pruning">pruning</olink> > 
			  <olink targetdoc="root" targetptr="combinators.otherwise">otherwise</olink></para>
		  <para><emphasis role="strong">Associativity</emphasis>: left and right </para>
		  <para><emphasis role="strong">Commutative</emphasis>: no </para>
	  </section>
	  <section xml:id="ref.combinators.otherwise.behavior">
		  <title>Behavior</title>
		  <itemizedlist>
			  <listitem><code><![CDATA[F ; G]]></code>
				  <para>
The execution of
<code><![CDATA[F ; G]]></code> proceeds as follows. First, F is executed. 
If F completes, and has not published any values, then
G executes. If F did publish one or more values, then G is ignored. 
The publications of <code><![CDATA[F ; G]]></code> are those
of F if F publishes, or those of G otherwise.
				  </para>
				  <para>
				  We determine when an expression completes using the following rules.
		  <itemizedlist>
<listitem>
An expression completes when it is fully evaluated; if it is silent, it completes immediately.
</listitem>
<listitem>
A site call completes when it has published a value or halted.
</listitem>
<listitem>
<code><![CDATA[F | G]]></code> completes when its subexpressions F and G have both completed.
</listitem>
<listitem>
<code><![CDATA[F >x> G]]></code> completes when F has completed and all instantiated copies of G have completed.
</listitem>
<listitem>
<code><![CDATA[F <x< G]]></code> completes when F has completed, and G has either completed or published a value. Also,
if G completes without publishing a value, then all expressions in F which use x also complete, since
they will never be able to proceed.
</listitem>
<listitem>
<code><![CDATA[F ; G]]></code> completes either when F has published a value and subsequently completed, or when F and G
have both completed.
</listitem>
<listitem>
<code>stop</code> completes immediately.
</listitem>
		  </itemizedlist>
				  </para>
			  </listitem>
		  </itemizedlist>
	  </section>
	  <section xml:id="ref.combinators.otherwise.examples">
		  <title>Examples</title>

		  <example xml:id="ref.combinators.otherwise.examples.one"><title>Fallback Search</title>
<programlisting><![CDATA[
{- 
 Attempt to retrieve search results from Google.
 If Google does not respond, then use Yahoo.
-}  

Google("cupcake") ; Yahoo("cupcake")
]]></programlisting>
		  </example>
		  
	  </section>
	  <section xml:id="ref.combinators.otherwise.links">
		  <title>Related Links</title>
		  
	  <informaltable frame="none">
  		<tgroup cols="1" align="left">
    	<thead>
      		<row>
        		<entry align="center">Related Reference Topics</entry>
        	</row>
    	</thead>
    	<tbody valign="top">
     		<row>
        		<entry><itemizedlist>
          			<listitem><para><olink targetdoc="ref.combinators" targetptr="ref.combinators">Combinators</olink></para></listitem>
          			<listitem><para><olink targetdoc="ref.patterns" targetptr="ref.patterns">Patterns</olink></para></listitem>
        		</itemizedlist></entry>
        	</row>
    	</tbody>
  		</tgroup>
	  </informaltable>
	  
	  <informaltable frame="none">
  		<tgroup cols="1" align="left">
    	<thead>
      		<row>
        		<entry align="left">Related Tutorial Sections</entry>
        	</row>
    	</thead>
    	<tbody valign="top">
     		<row>
        		<entry><itemizedlist>
          			<listitem><para><olink targetdoc="root" targetptr="combinators.otherwise">Otherwise Combinator</olink></para></listitem>
          			<listitem><para><olink targetdoc="root" targetptr="patterns.extensions">Pattern Matching Extensions</olink></para></listitem>
          			<listitem><para><olink targetdoc="root" targetptr="orc.sites">Sites</olink></para></listitem>
        		</itemizedlist></entry>
        	</row>
    	</tbody>
  		</tgroup>
	  </informaltable>
		  
	  </section>
   </section>
