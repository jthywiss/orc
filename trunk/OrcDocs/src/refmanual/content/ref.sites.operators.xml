<?xml version="1.0" encoding="UTF-8"?>
<!-- ref.sites.operators.xml - DocBook source for an Orc reference manual section

     $Id$

     Copyright (c) 2011 The University of Texas at Austin. All rights reserved.

     Use and redistribution of this file is governed by the license terms in
     the LICENSE file found in the project's top-level directory and also found at
     URL: http://orc.csres.utexas.edu/license.shtml .
  -->

<section xml:id="ref.sites.operators">
<title>Operators</title>

<para>
The following prefix operators are defined in Orc:
<variablelist><title>Prefix operators</title>
  <varlistentry>
    <term><code>-</code></term>
    <listitem>
      <para>Arithmetic negation</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>~</code></term>
    <listitem>
      <para>Logical negation</para>
    </listitem>
  </varlistentry>
</variablelist>
</para>

<para>
The following postfix operators are defined in Orc:
<variablelist><title>Postfix operators</title>
  <varlistentry>
    <term><code>?</code></term>
    <listitem>
      <para>Dereference</para>
    </listitem>
  </varlistentry>
</variablelist>
</para>

<para>
The following infix operators are defined in Orc:
<variablelist><title>Infix operators</title>
  <varlistentry>
    <term><code>**</code></term>
    <listitem>
      <para>Exponentiation</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>*</code></term>
    <listitem>
      <para>Multiplication</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>/</code></term>
    <listitem>
      <para>Division</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>%</code></term>
    <listitem>
      <para>Modulus</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>+</code></term>
    <listitem>
      <para>Addition</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>-</code></term>
    <listitem>
      <para>Subtraction</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>:</code></term>
    <listitem>
      <para>List construction</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>&lt;:</code></term>
    <listitem>
      <para>Less than</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>:&gt;</code></term>
    <listitem>
      <para>Greater than</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>&lt;=</code></term>
    <listitem>
      <para>Less than or equal to</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>=&gt;</code></term>
    <listitem>
      <para>Greater than or equal to</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>=</code></term>
    <listitem>
      <para>Equal to</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>/=</code></term>
    <listitem>
      <para>Not equal to</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>||</code></term>
    <listitem>
      <para>Logical or</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>&#38;&#38;</code></term>
    <listitem>
      <para>Logical and</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><code>:=</code></term>
    <listitem>
      <para>Assignment</para>
    </listitem>
  </varlistentry>
</variablelist>
</para>

<para>
Operators are parsed using the following precedence levels.
Operators at a higher precedence, at the top of the table, execute before lower operators when the expression is evaluated.
For example, <code>1 + 2 * 3</code> is equivalent to <code>1 + (2 * 3)</code>.

</para>

<para>
Operators in Orc are syntatic sugar for site calls.
For example, <code>1 + 2</code> is equivalent to <code>(+)(1, 2)</code>.
The operators' syntax is fixed by the Orc grammar; however, the site
called is defined by the library and can be changed by a <code>def</code>
or <code>site</code> declaration.
Orc permits a special identifier form for operators: the operator name
surrounded by parenthesis, as in <code>(+)</code>.
To disambiguate the unary prefix operator <code>-</code> from the
binary infix operator <code>-</code>, Orc translates the
unary prefix operator as <code>(0-)</code>.
</para>


<section xml:id="ref.sites.operators.examples">
<title>Examples</title>

<example xml:id="ref.sites.operators.examples.precedence">
<title>Operator precedence</title>
<programlisting language="orc-demo"><![CDATA[
  1 + 2 * 3
--Will publish 7 
]]></programlisting>
</example>

<example xml:id="ref.sites.operators.examples.pubonce">
<title>Operators publish once</title>
<programlisting language="orc-demo"><![CDATA[
  1 + (2 | 3)
--Will publish only one value, either 3 or 4
]]></programlisting>
</example>

<example xml:id="ref.sites.operators.examples.equiv">
<title>Operator-site call equivalence</title>
<programlisting language="orc-demo"><![CDATA[
  1 + 2 * 3
| --Same as 
  (+)(1, (*)(2, 3))
]]></programlisting>
</example>

<example xml:id="ref.sites.operators.examples.redefine">
<title>Redefine an operator</title>
<programlisting><![CDATA[
--Redefine the "?" operator

def (?)(x) = "To "+x+", or not to "+x+", that is the question."

"be"?
]]></programlisting>
</example>
		  
</section>


<section xml:id="ref.sites.operators.links">
<title>Related Links</title>

	<informaltable frame="none">
  		<tgroup cols="1" align="left">
    	<thead>
      		<row>
        		<entry align="center">Related Reference Topics</entry>
        	</row>
    	</thead>
    	<tbody valign="top">
     		<row>
        		<entry><itemizedlist>
					<listitem><para><olink targetdoc="ref.expressions.operators" targetptr="ref.expressions.operators">Operators</olink></para></listitem>
					<listitem><para><olink targetdoc="ref.combinators" targetptr="ref.combinators">Combinators</olink></para></listitem>
        		</itemizedlist></entry>
        	</row>
    	</tbody>
  		</tgroup>
	  </informaltable>
	  
	  <informaltable frame="none">
  		<tgroup cols="1" align="left">
    	<thead>
      		<row>
        		<entry align="left">Related Tutorial Sections</entry>
        	</row>
    	</thead>
    	<tbody valign="top">
     		<row>
        		<entry><itemizedlist>
					<listitem><para><olink targetdoc="root" targetptr="language.base.operators">Operators</olink></para></listitem>
        		</itemizedlist></entry>
        	</row>
    	</tbody>
  		</tgroup>
	  </informaltable>
</section>

</section>
